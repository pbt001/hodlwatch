(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"+C5w":function(e,t,i){var s=i("xFKm");e.exports=function(e){return"string"!==typeof e?e:s(e)?e.slice(2):e}},"+Ci3":function(e,t,i){"use strict";const s=i("OjXq"),{ArgumentsRequired:r,InvalidOrder:a,OrderNotFound:o}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"kkex",name:"KKEX",countries:["CN","US","JP"],version:"v2",has:{CORS:!1,fetchBalance:!0,fetchTickers:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchOHLCV:!0,createMarketOrder:!0,fetchOrder:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","4h":"4hour","12h":"12hour","1d":"1day","1w":"1week","1M":"1month"},urls:{logo:"https://user-images.githubusercontent.com/1294454/47401462-2e59f800-d74a-11e8-814f-e4ae17b4968a.jpg",api:{public:"https://kkex.com/api/v1",private:"https://kkex.com/api/v2",v1:"https://kkex.com/api/v1"},www:"https://kkex.com",doc:"https://kkex.com/api_wiki/cn/",fees:"https://intercom.help/kkex/fee"},api:{public:{get:["exchange_rate","products","assets","tickers","ticker","depth","trades","kline"]},private:{post:["profile","trade","batch_trade","cancel_order","cancel_all_orders","order_history","userinfo","order_info","orders_info"]},v1:{post:["process_strategy"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},options:{lastNonceTimestamp:0}})}async fetchMarkets(e={}){let t=await this.publicGetTickers(e);t=t.tickers;let i=await this.publicGetProducts(e);i=i.products;const s=[];for(let a=0;a<t.length;a++){const e=Object.keys(t[a]);s.push(e[0])}const r=[];for(let a=0;a<s.length;a++){const e=s[a],t=s[a];let o="",n="",d={},c={};for(let s=0;s<i.length;s++){const e=i[s];if(e.mark_asset+e.base_asset===t){n=e.base_asset,o=e.mark_asset;const t=e.price_scale.toString().length-1;d={price:t,amount:t},c={amount:{min:Math.max(this.safeFloat(e,"min_bid_size"),this.safeFloat(e,"min_ask_size")),max:Math.min(this.safeFloat(e,"max_bid_size"),this.safeFloat(e,"max_ask_size"))},price:{min:this.safeFloat(e,"min_price"),max:this.safeFloat(e,"max_price")}},c.cost={min:this.safeFloat(e,"min_bid_amount"),max:this.safeFloat(e,"max_bid_amount")}}}const h=this.safeCurrencyCode(o),l=this.safeCurrencyCode(n),u=h+"/"+l;r.push({id:e,symbol:u,base:h,quote:l,baseId:o,quoteId:n,active:!0,precision:d,limits:c,info:t})}return r}parseTicker(e,t){const i=this.safeTimestamp(e,"date");let s=void 0;void 0!==t&&(s=t.symbol);const r=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.markets[e],s={symbol:i.id},r=await this.publicGetTicker(this.extend(s,t)),a=this.extend(r.ticker,this.omit(r,"ticker"));return this.parseTicker(a,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(t),s=this.safeValue(i,"tickers"),r={};for(let a=0;a<s.length;a++){const e=Object.keys(s[a])[0],t=this.safeValue(this.markets_by_id,e);if(void 0!==t){const o=t.symbol,n=this.extend(s[a][e],this.omit(i,"tickers"));r[o]=this.parseTicker(n,t)}}return r}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)};void 0!==t&&(s.size=t);const r=await this.publicGetDepth(this.extend(s,i));return this.parseOrderBook(r)}parseTrade(e,t){const i=this.safeInteger(e,"date_ms"),s=this.iso8601(i),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount");let o=void 0;void 0!==r&&void 0!==a&&(o=a*r);let n=void 0;void 0!==t&&(n=t.symbol);return{info:e,id:this.safeString(e,"tid"),timestamp:i,datetime:s,symbol:n,order:void 0,type:void 0,side:this.safeString(e,"type"),takerOrMaker:void 0,price:r,amount:a,cost:o,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id},o=await this.publicGetTrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostUserinfo(e),i=this.safeValue(t,"info"),s={info:t},r=this.safeValue(i,"funds"),a=this.safeValue(r,"free",{}),o=this.safeValue(r,"freezed",{}),n=Object.keys(a);for(let d=0;d<n.length;d++){const e=n[d],t=this.safeCurrencyCode(e),i=this.account();i.free=this.safeFloat(a,e),i.used=this.safeFloat(o,e),s[t]=i}return this.parseBalance(s)}async fetchOrder(e,t,i={}){if(!t)throw new r(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),a={order_id:e,symbol:s.id},n=await this.privatePostOrderInfo(this.extend(a,i));if(n.result)return this.parseOrder(n.order,s);throw new o(this.id+" order "+e+" not found")}parseOHLCV(e,t,i="1m",s,r){return[parseInt(e[0]),parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[5])]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={symbol:a.id,type:this.timeframes[t]};void 0!==i&&(o.since=parseInt(i/1e3)),void 0!==s&&(o.size=s);const n=await this.publicGetKline(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}parseOrderStatus(e){return this.safeString({"-1":"canceled",0:"open",1:"open",2:"closed",3:"open",4:"canceled"},e,e)}parseOrder(e,t){let i=void 0;void 0!==t&&(i=t.symbol);let s=this.safeString(e,"side");void 0===s&&(s=this.safeString(e,"type"));const r=this.safeInteger(e,"create_date"),a=this.safeString2(e,"order_id","id"),o=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeFloat(e,"price"),d=this.safeFloat(e,"amount"),c=this.safeFloat(e,"deal_amount");let h=this.safeFloat(e,"avg_price");h=this.safeFloat(e,"price_avg",h);let l=void 0,u=void 0;return void 0!==c&&(void 0!==d&&(l=d-c),void 0!==h&&(u=h*c)),{id:a,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,status:o,symbol:i,average:h,type:"limit",side:s,price:n,cost:u,amount:d,filled:c,remaining:l,fee:void 0,info:e}}async createOrder(e,t,i,s,r,o={}){await this.loadMarkets();const n={symbol:this.market(e).id,type:i};if("market"===t){if("buy"===i){if(this.options.createMarketBuyOrderRequiresPrice){if(void 0===r)throw new a(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");n.amount=this.costToPrecision(e,parseFloat(s)*parseFloat(r))}n.price=this.costToPrecision(e,s)}else n.amount=this.amountToPrecision(e,s);n.type+="_"+t}else n.amount=this.amountToPrecision(e,s),n.price=this.priceToPrecision(e,r);const d=await this.privatePostTrade(this.extend(n,o));return{info:d,id:this.safeString(d,"order_id"),datetime:void 0,timestamp:void 0,lastTradeTimestamp:void 0,status:"open",symbol:e,type:t,side:i,price:r,cost:void 0,amount:s,filled:void 0,remaining:void 0,trades:void 0,fee:void 0}}async cancelOrder(e,t,i={}){if(void 0===t)throw new r(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();const s={order_id:e,symbol:this.market(t).id};return await this.privatePostCancelOrder(this.extend(s,i))}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==i&&(a.page_length=i);const o=await this.privatePostOrderHistory(this.extend(a,s));return this.parseOrders(o.orders,r,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:0},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:1},s))}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/"+e;if("public"===t)o+="?"+this.urlencode(s),r={"Content-Type":"application/json"};else{this.checkRequiredCredentials();const e=this.nonce();let t=this.extend({nonce:e,api_key:this.apiKey},s);t=this.urlencode(this.keysort(t)),t+="&secret_key="+this.secret,t=this.hash(this.encode(t),"md5"),t=t.toUpperCase(),a=this.extend({api_key:this.apiKey,sign:t,nonce:e},s),a=this.urlencode(a),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}}},"+JpX":function(e,t,i){"use strict";const s=i("OjXq"),{TICK_SIZE:r}=i("rwG2"),{ExchangeError:a,InvalidOrder:o,BadRequest:n,InsufficientFunds:d,OrderNotFound:c}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"ftx",name:"FTX",countries:["HK"],rateLimit:100,certified:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/67149189-df896480-f2b0-11e9-8816-41593e17f9ec.jpg",www:"https://ftx.com",api:{public:"https://ftx.com",private:"https://ftx.com"},doc:"https://github.com/ftexchange/ftx",fees:"https://ftexchange.zendesk.com/hc/en-us/articles/360024479432-Fees",referral:"https://ftx.com/#a=1623029"},has:{cancelAllOrders:!0,fetchClosedOrders:!1,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!1,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFees:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"15s":"15","1m":"60","5m":"300","15m":"900","1h":"3600","4h":"14400","1d":"86400"},api:{public:{get:["coins","markets","markets/{market_name}","markets/{market_name}/orderbook","markets/{market_name}/trades","markets/{market_name}/candles","futures","futures/{future_name}","futures/{future_name}/stats","funding_rates","lt/tokens","lt/{token_name}"]},private:{get:["account","positions","wallet/coins","wallet/balances","wallet/deposit_address/{coin}","wallet/deposits","wallet/withdrawals","orders","orders/history","orders/{order_id}","orders/by_client_id/{client_order_id}","conditional_orders","conditional_orders/history","fills","funding_payments","lt/balances","lt/creations","lt/redemptions","subaccounts","subaccounts/{nickname}/balances"],post:["account/leverage","wallet/withdrawals","orders","conditional_orders","lt/{token_name}/create","lt/{token_name}/redeem","subaccounts","subaccounts/update_name","subaccounts/transfer"],delete:["orders/{order_id}","orders/by_client_id/{client_order_id}","orders","conditional_orders/{order_id}","subaccounts"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:2e-4,taker:.07/100,tiers:{taker:[[0,.07/100],[1e6,6e-4],[5e6,55e-5],[1e7,5e-4],[15e6,45e-5],[35e6,4e-4]],maker:[[0,2e-4],[1e6,2e-4],[5e6,15e-5],[1e7,15e-5],[15e6,1e-4],[35e6,1e-4]]}},funding:{withdraw:{}}},exceptions:{exact:{"Not enough balances":d,InvalidPrice:o,"Size too small":o,"Missing parameter price":o,"Order not found":c},broad:{"Invalid parameter":n,"The requested URL was not found on the server":n,"No such coin":n,"No such market":n,"An unexpected error occurred":a}},precisionMode:r,options:{cancelOrder:{method:"privateDeleteOrdersOrderId"},fetchOpenOrders:{method:"privateGetOrders"},fetchOrders:{method:"privateGetOrdersHistory"}}})}async fetchCurrencies(e={}){const t=await this.publicGetCoins(e),i=this.safeValue(t,"result",[]),s={};for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"id"),a=this.safeCurrencyCode(t),o=this.safeString(e,"name");s[a]={id:t,code:a,info:e,type:void 0,name:o,active:void 0,fee:void 0,precision:void 0,limits:{withdraw:{min:void 0,max:void 0},amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}}}return s}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=[],s=this.safeValue(t,"result",[]);for(let r=0;r<s.length;r++){const e=s[r],t=this.safeString(e,"name"),a=this.safeString2(e,"baseCurrency","underlying"),o=this.safeString(e,"quoteCurrency","USD"),n=this.safeString(e,"type"),d=this.safeCurrencyCode(a),c=this.safeCurrencyCode(o),h="future"===n?this.safeString(e,"name"):d+"/"+c,l=this.safeValue(e,"enabled"),u=this.safeFloat(e,"sizeIncrement"),f=this.safeFloat(e,"priceIncrement"),p={id:t,symbol:h,base:d,quote:c,baseId:a,quoteId:o,type:n,future:"future"===n,spot:"spot"===n,active:l,precision:{amount:u,price:f},limits:{amount:{min:u,max:void 0},price:{min:f,max:void 0},cost:{min:void 0,max:void 0}},info:e};i.push(p)}return i}parseTicker(e,t){let i=void 0;const s=this.safeString(e,"name");if(s in this.markets_by_id)t=this.markets_by_id[s];else{if("future"===this.safeString(e,"type"))i=s;else{i=this.safeCurrencyCode(this.safeString(e,"baseCurrency"))+"/"+this.safeCurrencyCode(this.safeString(e,"quoteCurrency"))}}void 0===i&&void 0!==t&&(i=t.symbol);const r=this.safeFloat(e,"last"),a=this.milliseconds();return{symbol:i,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:this.safeFloat(e,"change24h"),average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(e,"quoteVolume24h"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market_name:i.id},r=await this.publicGetMarketsMarketName(this.extend(s,t)),a=this.safeValue(r,"result",{});return this.parseTicker(a,i)}parseTickers(e,t){const i=[];for(let s=0;s<e.length;s++)i.push(this.parseTicker(e[s]));return this.filterByArray(i,"symbol",t)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetMarkets(t),s=this.safeValue(i,"result",[]);return this.parseTickers(s,e)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market_name:this.market(e).id};void 0!==t&&(s.depth=t);const r=await this.publicGetMarketsMarketNameOrderbook(this.extend(s,i)),a=this.safeValue(r,"result",{});return this.parseOrderBook(a)}parseOHLCV(e,t,i="1m",s,r){return[this.safeInteger(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={market_name:a.id,resolution:this.timeframes[t]};s=void 0===s?1501:s,void 0===i?(o.end_time=this.seconds(),o.limit=s,o.start_time=o.end_time-s*this.parseTimeframe(t)):(o.start_time=parseInt(i/1e3),o.limit=s,o.end_time=this.sum(o.start_time,s*this.parseTimeframe(t)));const n=await this.publicGetMarketsMarketNameCandles(this.extend(o,r)),d=this.safeValue(n,"result",[]);return this.parseOHLCVs(d,a,t,i,s)}parseTrade(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"liquidity"),r=this.safeString(e,"market");let a=void 0;if(void 0!==r)if(r in this.markets_by_id)a=(t=this.markets_by_id[r]).symbol;else{const t=this.safeCurrencyCode(this.safeString(e,"baseCurrency")),i=this.safeCurrencyCode(this.safeString(e,"quoteCurrency"));a=void 0!==t&&void 0!==i?t+"/"+i:r}const o=this.parse8601(this.safeString(e,"time")),n=this.safeFloat(e,"price"),d=this.safeFloat(e,"size");void 0===a&&void 0!==t&&(a=t.symbol);const c=this.safeString(e,"side");let h=void 0;void 0!==n&&void 0!==d&&(h=n*d);let l=void 0;const u=this.safeFloat(e,"fee");void 0!==u&&(l={cost:u,rate:this.safeFloat(e,"feeRate")});const f=this.safeString(e,"orderId");return{info:e,timestamp:o,datetime:this.iso8601(o),symbol:a,id:i,order:f,type:void 0,takerOrMaker:s,side:c,price:n,amount:d,cost:h,fee:l}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market_name:r.id};void 0!==t&&(a.start_time=parseInt(t/1e3),a.end_time=this.seconds()),void 0!==i&&(a.limit=i);const o=await this.publicGetMarketsMarketNameTrades(this.extend(a,s)),n=this.safeValue(o,"result",[]);return this.parseTrades(n,r,t,i)}async fetchTradingFees(e={}){await this.loadMarkets();const t=await this.privateGetAccount(e),i=this.safeValue(t,"result",{});return{info:t,maker:this.safeFloat(i,"makerFee"),taker:this.safeFloat(i,"takerFee")}}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetWalletBalances(e),i={info:t},s=this.safeValue(t,"result",[]);for(let r=0;r<s.length;r++){const e=s[r],t=this.safeCurrencyCode(this.safeString(e,"coin")),a=this.account();a.free=this.safeFloat(e,"free"),a.total=this.safeFloat(e,"total"),i[t]=a}return this.parseBalance(i)}parseOrderStatus(e){return this.safeString({new:"open",open:"open",closed:"closed"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.parse8601(this.safeString(e,"createdAt")),r=this.safeFloat(e,"filledSize"),a=this.safeFloat(e,"remainingSize");let o=void 0;const n=this.safeString(e,"market");n in this.markets_by_id&&(o=(t=this.markets_by_id[n]).symbol),void 0===o&&void 0!==t&&(o=t.symbol);const d=this.parseOrderStatus(this.safeString(e,"status")),c=this.safeString(e,"side"),h=this.safeString(e,"type"),l=this.safeFloat(e,"size"),u=this.safeFloat(e,"avgFillPrice"),f=this.safeFloat2(e,"price","triggerPrice",u);let p=void 0;void 0!==r&&void 0!==f&&(p=r*f);const m=this.parse8601(this.safeString(e,"triggeredAt"));return{info:e,id:i,clientOrderId:this.safeString(e,"clientId"),timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:m,symbol:o,type:h,side:c,price:f,amount:l,cost:p,average:u,filled:r,remaining:a,status:d,fee:void 0,trades:void 0}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),d={market:n.id,side:i,type:t,size:parseFloat(this.amountToPrecision(e,s))};let c=void 0;void 0!==r&&(c=parseFloat(this.priceToPrecision(e,r)));let h="privatePostConditionalOrders";if("limit"===t)h="privatePostOrders",d.price=c;else if("market"===t)h="privatePostOrders",d.price=null;else if("stop"===t||"takeProfit"===t)d.triggerPrice=c;else{if("trailingStop"!==t)throw new o(this.id+" createOrder () does not support order type "+t+", only limit, market, stop, trailingStop, or takeProfit orders are supported");d.trailValue=c}const l=await this[h](this.extend(d,a)),u=this.safeValue(l,"result",[]);return this.parseOrder(u,n)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:parseInt(e)},r=this.safeValue(this.options,"cancelOrder",{}),a=this.safeString(r,"method","privateDeleteOrdersOrderId");let o=this.safeString(i,"method",a);const n=this.safeValue(i,"type");"stop"!==n&&"trailingStop"!==n&&"takeProfit"!==n||(o="privateDeleteConditionalOrdersOrderId");const d=this.omit(i,["method","type"]),c=await this[o](this.extend(s,d));return this.safeValue(c,"result",{})}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={conditionalOrdersOnly:!1,limitOrdersOnly:!1};let s=void 0;void 0!==e&&(s=this.market(e),i.market=s.id);const r=await this.privateDeleteOrders(this.extend(i,t));return this.safeValue(r,"result",{})}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},r=await this.privateGetOrdersOrderId(this.extend(s,i)),a=this.safeValue(r,"result",{});return this.parseOrder(a)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.market(e),r.market=a.id);const o=this.safeValue(this.options,"fetchOpenOrders",{}),n=this.safeString(o,"method","privateGetOrders");let d=this.safeString(s,"method",n);const c=this.safeValue(s,"type");"stop"!==c&&"trailingStop"!==c&&"takeProfit"!==c||(d="privateGetConditionalOrders");const h=this.omit(s,["method","type"]),l=await this[d](this.extend(r,h)),u=this.safeValue(l,"result",[]);return this.parseOrders(u,a,t,i)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.market(e),r.market=a.id),void 0!==i&&(r.limit=i),void 0!==t&&(r.start_time=parseInt(t/1e3));const o=this.safeValue(this.options,"fetchOrders",{}),n=this.safeString(o,"method","privateGetOrdersHistory");let d=this.safeString(s,"method",n);const c=this.safeValue(s,"type");"stop"!==c&&"trailingStop"!==c&&"takeProfit"!==c||(d="privateGetConditionalOrdersHistory");const h=this.omit(s,["method","type"]),l=await this[d](this.extend(r,h)),u=this.safeValue(l,"result",[]);return this.parseOrders(u,a,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market:r.id};void 0!==i&&(a.limit=i),void 0!==t&&(a.start_time=parseInt(t/1e3));const o=await this.privateGetFills(this.extend(a,s)),n=this.safeValue(o,"result",[]);return this.parseTrades(n,r,t,i)}async withdraw(e,t,i,s,r={}){await this.loadMarkets(),this.checkAddress(i);const a=this.currency(e),o={coin:a.id,size:t,address:i};void 0!==s&&(o.tag=s);const n=await this.privatePostWalletWithdrawals(this.extend(o,r)),d=this.safeValue(n,"result",{});return this.parseTransaction(d,a)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={coin:this.currency(e).id},s=await this.privateGetWalletDepositAddressCoin(this.extend(i,t)),r=this.safeValue(s,"result",{}),a=this.safeString(r,"address"),o=this.safeString(r,"tag");return this.checkAddress(a),{currency:e,address:a,tag:o,info:s}}parseTransactionStatus(e){return this.safeString({confirmed:"ok",complete:"ok"},e,e)}parseTransaction(e){const t=this.safeCurrencyCode(this.safeString(e,"coin")),i=this.safeInteger(e,"id"),s=this.safeFloat(e,"size"),r=this.parseTransactionStatus(this.safeString(e,"status")),a=this.parse8601(this.safeString(e,"time")),o=this.safeString(e,"txid"),n=this.safeString(e,"address"),d=this.safeString(e,"tag"),c=this.safeFloat(e,"fee");return{info:e,id:i,txid:o,timestamp:a,datetime:this.iso8601(a),addressFrom:void 0,address:void 0,addressTo:n,tagFrom:void 0,tag:d,tagTo:void 0,type:void 0,amount:s,currency:t,status:r,updated:void 0,fee:{currency:t,cost:c,rate:void 0}}}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r=await this.privateGetWalletDeposits(s),a=this.safeValue(r,"result",[]);return this.parseTransactions(a)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r=await this.privateGetWalletWithdrawals(s),a=this.safeValue(r,"result",[]);return this.parseTransactions(a)}sign(e,t="public",i="GET",s={},r,a){let o="/api/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));let d=this.urls.api[t]+o;if("POST"!==i&&Object.keys(n).length){const e="?"+this.urlencode(n);d+=e,o+=e}if("private"===t){this.checkRequiredCredentials();const e=this.milliseconds().toString();let t=e+i+o;r={"FTX-KEY":this.apiKey,"FTX-TS":e},"POST"===i&&(t+=a=this.json(n),r["Content-Type"]="application/json");const s=this.hmac(this.encode(t),this.encode(this.secret),"sha256");r["FTX-SIGN"]=s}return{url:d,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,o,n,d,c){if(void 0===n)return;if(!this.safeValue(n,"success")){const e=this.id+" "+o,t=this.safeString(n,"error");throw this.throwExactlyMatchedException(this.exceptions.exact,t,e),this.throwBroadlyMatchedException(this.exceptions.broad,t,e),new a(e)}}}},"+csr":function(e,t,i){"use strict";e.exports=function(e,t){var i,s,r,a,o,n,d,c,h,l,u,f,p,m,y,b,v,g,w,k,_,T,O,x,S;i=e.state,s=e.next_in,x=e.input,r=s+(e.avail_in-5),a=e.next_out,S=e.output,o=a-(t-e.avail_out),n=a+(e.avail_out-257),d=i.dmax,c=i.wsize,h=i.whave,l=i.wnext,u=i.window,f=i.hold,p=i.bits,m=i.lencode,y=i.distcode,b=(1<<i.lenbits)-1,v=(1<<i.distbits)-1;e:do{p<15&&(f+=x[s++]<<p,p+=8,f+=x[s++]<<p,p+=8),g=m[f&b];t:for(;;){if(f>>>=w=g>>>24,p-=w,0===(w=g>>>16&255))S[a++]=65535&g;else{if(!(16&w)){if(0===(64&w)){g=m[(65535&g)+(f&(1<<w)-1)];continue t}if(32&w){i.mode=12;break e}e.msg="invalid literal/length code",i.mode=30;break e}k=65535&g,(w&=15)&&(p<w&&(f+=x[s++]<<p,p+=8),k+=f&(1<<w)-1,f>>>=w,p-=w),p<15&&(f+=x[s++]<<p,p+=8,f+=x[s++]<<p,p+=8),g=y[f&v];i:for(;;){if(f>>>=w=g>>>24,p-=w,!(16&(w=g>>>16&255))){if(0===(64&w)){g=y[(65535&g)+(f&(1<<w)-1)];continue i}e.msg="invalid distance code",i.mode=30;break e}if(_=65535&g,p<(w&=15)&&(f+=x[s++]<<p,(p+=8)<w&&(f+=x[s++]<<p,p+=8)),(_+=f&(1<<w)-1)>d){e.msg="invalid distance too far back",i.mode=30;break e}if(f>>>=w,p-=w,_>(w=a-o)){if((w=_-w)>h&&i.sane){e.msg="invalid distance too far back",i.mode=30;break e}if(T=0,O=u,0===l){if(T+=c-w,w<k){k-=w;do{S[a++]=u[T++]}while(--w);T=a-_,O=S}}else if(l<w){if(T+=c+l-w,(w-=l)<k){k-=w;do{S[a++]=u[T++]}while(--w);if(T=0,l<k){k-=w=l;do{S[a++]=u[T++]}while(--w);T=a-_,O=S}}}else if(T+=l-w,w<k){k-=w;do{S[a++]=u[T++]}while(--w);T=a-_,O=S}for(;k>2;)S[a++]=O[T++],S[a++]=O[T++],S[a++]=O[T++],k-=3;k&&(S[a++]=O[T++],k>1&&(S[a++]=O[T++]))}else{T=a-_;do{S[a++]=S[T++],S[a++]=S[T++],S[a++]=S[T++],k-=3}while(k>2);k&&(S[a++]=S[T++],k>1&&(S[a++]=S[T++]))}break}}break}}while(s<r&&a<n);s-=k=p>>3,f&=(1<<(p-=k<<3))-1,e.next_in=s,e.next_out=a,e.avail_in=s<r?r-s+5:5-(s-r),e.avail_out=a<n?n-a+257:257-(a-n),i.hold=f,i.bits=p}},"+m6x":function(e,t,i){"use strict";const s=i("OjXq"),{BadRequest:r,AuthenticationError:a,NetworkError:o,ArgumentsRequired:n,OrderNotFound:d,InsufficientFunds:c}=i("ucJe"),{TICK_SIZE:h}=i("rwG2");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"hollaex",name:"HollaEx",countries:["KR"],rateLimit:333,version:"v1",has:{CORS:!1,fetchMarkets:!0,fetchCurrencies:!0,fetchTicker:!0,fetchTickers:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchTrades:!0,fetchOHLCV:!0,fetchBalance:!0,createOrder:!0,createLimitBuyOrder:!0,createLimitSellOrder:!0,createMarketBuyOrder:!0,createMarketSellOrder:!0,cancelOrder:!0,cancelAllOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!1,fetchOpenOrder:!0,fetchOrder:!1,fetchDeposits:!0,fetchWithdrawals:!0,fetchTransactions:!1,fetchOrders:!1,fetchMyTrades:!0,withdraw:!0,fetchDepositAddress:!0},timeframes:{"1h":"1h","1d":"1d"},urls:{logo:"https://user-images.githubusercontent.com/1294454/75841031-ca375180-5ddd-11ea-8417-b975674c23cb.jpg",api:"https://api.hollaex.com",www:"https://hollaex.com",doc:"https://apidocs.hollaex.com",referral:"https://pro.hollaex.com/signup?affiliation_code=QSWA6G"},precisionMode:h,requiredCredentials:{apiKey:!0,secret:!0},api:{public:{get:["health","constant","ticker","ticker/all","orderbooks","trades","chart","udf/config","udf/history","udf/symbols"]},private:{get:["user","user/balance","user/trades","user/orders","user/orders/{order_id}","user/deposits","user/withdrawals","user/withdraw/{currency}/fee"],post:["user/request-withdrawal","order"],delete:["user/orders","user/orders/{order_id}"]}},fees:{trading:{tierBased:!0,percentage:!0}},exceptions:{broad:{"Invalid token":a,"Order not found":d,"Insufficient balance":c},exact:{400:r,403:a,404:r,405:r,410:r,429:r,500:o,503:o}},options:{"api-expires":parseInt(this.timeout/1e3)}})}async fetchMarkets(e={}){const t=await this.publicGetConstant(e),i=this.safeValue(t,"pairs",{}),s=Object.keys(i),r=[];for(let a=0;a<s.length;a++){const e=i[s[a]],t=this.safeString(e,"name"),o=this.safeString(e,"pair_base"),n=this.safeString(e,"pair_2"),d=this.commonCurrencyCode(o.toUpperCase()),c=this.commonCurrencyCode(n.toUpperCase()),h=d+"/"+c,l=this.safeValue(e,"active");r.push({id:t,symbol:h,base:d,quote:c,baseId:o,quoteId:n,active:l,precision:{price:this.safeFloat(e,"increment_price"),amount:this.safeFloat(e,"increment_size")},limits:{amount:{min:this.safeFloat(e,"min_size"),max:this.safeFloat(e,"max_size")},price:{min:this.safeFloat(e,"min_price"),max:this.safeFloat(e,"max_price")},cost:{min:void 0,max:void 0}},info:e})}return r}async fetchCurrencies(e={}){const t=await this.publicGetConstant(e),i=this.safeValue(t,"coins",{}),s=Object.keys(i),r={};for(let a=0;a<s.length;a++){const e=i[s[a]],t=this.safeString(e,"symbol"),o=this.safeInteger(e,"id"),n=this.safeCurrencyCode(t),d=this.safeString(e,"fullname"),c=this.safeValue(e,"active"),h=this.safeFloat(e,"withdrawal_fee"),l=this.safeFloat(e,"increment_unit"),u=this.safeValue(e,"withdrawal_limits",[]);r[n]={id:t,numericId:o,code:n,info:e,name:d,active:c,fee:h,precision:l,limits:{amount:{min:this.safeFloat(e,"min"),max:this.safeFloat(e,"max")},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:this.safeValue(u,0)}}}}return r}async fetchOrderBooks(e,t,i={}){await this.loadMarkets();const s=await this.publicGetOrderbooks(i),r={},a=Object.keys(s);for(let o=0;o<a.length;o++){const e=a[o],t=s[e];let i=e;if(e in this.markets_by_id){i=this.markets_by_id[e].symbol}else{const[t,s]=e.split("-");i=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(s)}const n=this.parse8601(this.safeString(t,"timestamp"));r[i]=this.parseOrderBook(s[e],n)}return r}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.marketId(e),r={symbol:s},a=await this.publicGetOrderbooks(this.extend(r,i)),o=this.safeValue(a,s),n=this.parse8601(this.safeString(o,"timestamp"));return this.parseOrderBook(o,n)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetTicker(this.extend(s,t));return this.parseTicker(r,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickerAll(this.extend(t));return this.parseTickers(i,e)}parseTickers(e,t){const i={},s=Object.keys(e);for(let r=0;r<s.length;r++){const t=s[r],a=e[t];let o=t,n=void 0;const d=this.safeString(a,"symbol",t);if(d in this.markets_by_id)n=this.markets_by_id[d],o=n.symbol;else{const[e,t]=d.split("-");o=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}i[o]=this.parseTicker(a,n)}return this.filterByArray(i,"symbol",t)}parseTicker(e,t){let i=void 0;const s=this.safeString(e,"symbol");if(void 0!==s)if(s in this.markets_by_id)i=(t=this.markets_by_id[s]).symbol;else{const[e,t]=s.split("-");i=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}void 0===i&&void 0!==t&&(i=t.symbol);const r=this.parse8601(this.safeString2(e,"time","timestamp")),a=this.safeFloat(e,"close");return{symbol:i,info:e,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:a,last:this.safeFloat(e,"last",a),previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id},o=await this.publicGetTrades(this.extend(a,s)),n=await this.safeValue(o,r.id,[]);return this.parseTrades(n,r,t,i)}parseTrade(e,t){let i=void 0;const s=this.safeString(e,"symbol");let r=void 0;if(void 0!==s)if(s in this.markets_by_id)i=(t=this.markets_by_id[s]).symbol;else{const[e,t]=s.split("-"),a=this.safeCurrencyCode(e);r=this.safeCurrencyCode(t),i=a+"/"+r}void 0===i&&void 0!==t&&(i=t.symbol);const a=this.safeString(e,"timestamp"),o=this.parse8601(a),n=this.safeString(e,"side"),d=this.safeFloat(e,"price"),c=this.safeFloat(e,"size");let h=void 0;void 0!==d&&void 0!==c&&(h=d*c);const l=this.safeFloat(e,"fee");let u=void 0;if(void 0!==l){u={cost:l,currency:void 0!==t?t.quote:r}}return{info:e,id:void 0,timestamp:o,datetime:a,symbol:i,order:void 0,type:void 0,side:n,takerOrMaker:void 0,price:d,amount:c,cost:h,fee:u}}async fetchOHLCV(e,t="1h",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={symbol:a.id,resolution:this.timeframes[t]},d=this.parseTimeframe(t);if(void 0===i){if(void 0===s)throw new n(this.id+" fetchOHLCV requires a 'since' or a 'limit' argument");{const e=this.seconds(),t=e-d*s;o.to=e,o.from=t}}else if(void 0===s)o.from=parseInt(i/1e3),o.to=this.seconds();else{const e=parseInt(i/1e3);o.from=e,o.to=this.sum(e,d*s)}const c=await this.publicGetChart(this.extend(o,r));return this.parseOHLCVs(c,a,t,i,s)}parseOHLCV(e,t,i="1h",s,r){return[this.parse8601(this.safeString(e,"time")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetUserBalance(e),i={info:t},s=Object.keys(this.currencies_by_id);for(let r=0;r<s.length;r++){const e=s[r],a=this.safeCurrencyCode(e),o=this.account();o.free=this.safeFloat(t,e+"_available"),o.total=this.safeFloat(t,e+"_balance"),i[a]=o}return this.parseBalance(i)}async fetchOpenOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},r=await this.privateGetUserOrdersOrderId(this.extend(s,i));return this.parseOrder(r)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==e&&(r=this.market(e),a.symbol=r.id);const o=await this.privateGetUserOrders(this.extend(a,s));return this.parseOrders(o,r)}parseOrder(e,t){let i=void 0;const s=this.safeString(e,"symbol");if(void 0!==s)if(s in this.markets_by_id)i=(t=this.markets_by_id[s]).symbol;else{const[e,t]=s.split("-");i=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}void 0===i&&void 0!==t&&(i=t.symbol);const r=this.safeString(e,"id"),a=this.parse8601(this.safeString(e,"created_at")),o=this.safeString(e,"type"),n=this.safeString(e,"side"),d=this.safeFloat(e,"price"),c=this.safeFloat(e,"size"),h=this.safeFloat(e,"filled");let l=void 0,u=void 0;void 0!==h&&(void 0!==c&&(u=c-h),void 0!==d&&(l=h*d));const f="market"===o?"closed":"open";return{id:r,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,status:f,symbol:i,type:o,side:n,price:d,amount:c,filled:h,remaining:u,cost:l,trades:void 0,fee:void 0,info:e}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),n={symbol:o.id,side:i,size:s,type:t};"market"!==t&&(n.price=r);const d=await this.privatePostOrder(this.extend(n,a));return this.parseOrder(d,o)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e},r=await this.privateDeleteUserOrdersOrderId(this.extend(s,i));return this.parseOrder(r)}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let s=void 0;void 0!==e&&(s=this.markets(e),i.symbol=s.id);const r=await this.privateDeleteUserOrders(this.extend(i,t));return this.parseOrders(r,s)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.market(e),r.symbol=a.id),void 0!==i&&(r.limit=i),void 0!==t&&(r.start_date=this.iso8601(t));const o=await this.privateGetUserTrades(this.extend(r,s)),n=this.safeValue(o,"data",[]);return this.parseTrades(n,a,t,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s=await this.privateGetUser(t),r=this.safeValue(s,"crypto_wallet");let a=this.safeString(r,i.id),o=void 0;if(void 0!==a){const e=a.split(":");a=this.safeString(e,0),o=this.safeString(e,1)}return this.checkAddress(a),{currency:e,address:a,tag:o,info:s}}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==i&&(r.limit=i),void 0!==t&&(r.start_date=this.iso8601(t));const o=await this.privateGetUserDeposits(this.extend(r,s)),n=this.safeValue(o,"data",[]);return this.parseTransactions(n,a,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==i&&(r.limit=i),void 0!==t&&(r.start_date=this.iso8601(t));const o=await this.privateGetUserWithdrawals(this.extend(r,s)),n=this.safeValue(o,"data",[]);return this.parseTransactions(n,a,t,i)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"transaction_id"),r=this.parse8601(this.safeString(e,"created_at")),a=this.parse8601(this.safeString(e,"updated_at")),o=this.safeString(e,"type"),n=this.safeFloat(e,"amount");let d=this.safeString(e,"address"),c=void 0;let h=void 0,l=void 0;if(void 0!==d){const e=d.split(":");d=this.safeString(e,0),h=this.safeString(e,1),c=d,l=h}const u=this.safeString(e,"currency"),f=this.safeCurrencyCode(u);let p=this.safeValue(e,"status");const m=this.safeValue(e,"dismissed"),y=this.safeValue(e,"rejected");p=p?"ok":m?"canceled":y?"failed":"pending";const b={currency:f,cost:this.safeFloat(e,"fee")};return{info:e,id:i,txid:s,timestamp:r,datetime:this.iso8601(r),addressFrom:void 0,address:d,addressTo:c,tagFrom:void 0,tag:h,tagTo:l,type:o,amount:n,currency:f,status:p,updated:a,fee:b}}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets(),void 0!==s&&(i+=":"+s);const a={currency:this.currency(e).id,amount:t,address:i};let o=this.safeString(r,"otp_code");return void 0===o&&void 0===this.twofa||(void 0===o&&(o=this.oath()),a.otp_code=o),{info:await this.privatePostUserRequestWithdrawal(this.extend(a,r)),id:void 0}}sign(e,t="public",i="GET",s={},r,a){const o=this.omit(s,this.extractParams(e));e="/"+this.version+"/"+this.implodeParams(e,s),"GET"===i&&Object.keys(o).length&&(e+="?"+this.urlencode(o));const n=this.urls.api+e;if("private"===t){this.checkRequiredCredentials();const t=this.safeInteger2(this.options,"api-expires","expires",parseInt(this.timeout/1e3)),s=this.sum(this.seconds(),t).toString();let n=i+e+s;r={"api-key":this.encode(this.apiKey),"api-expires":s},"POST"===i&&(r["Content-type"]="application/json",Object.keys(o).length&&(n+=a=this.json(o)));const d=this.hmac(this.encode(n),this.encode(this.secret));r["api-signature"]=d}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,o,n,d){if(void 0!==o&&e>=400&&e<=503){const t=this.id+" "+a,i=this.safeString(o,"message");this.throwBroadlyMatchedException(this.exceptions.broad,i,t);const s=e.toString();this.throwExactlyMatchedException(this.exceptions.exact,s,t)}}}},"+un8":function(e,t,i){"use strict";var s="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if("object"!==typeof i)throw new TypeError(i+"must be non-object");for(var s in i)r(i,s)&&(e[s]=i[s])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,i,s,r){if(t.subarray&&e.subarray)e.set(t.subarray(i,i+s),r);else for(var a=0;a<s;a++)e[r+a]=t[i+a]},flattenChunks:function(e){var t,i,s,r,a,o;for(s=0,t=0,i=e.length;t<i;t++)s+=e[t].length;for(o=new Uint8Array(s),r=0,t=0,i=e.length;t<i;t++)a=e[t],o.set(a,r),r+=a.length;return o}},o={arraySet:function(e,t,i,s,r){for(var a=0;a<s;a++)e[r+a]=t[i+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(s)},"+vak":function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ArgumentsRequired:a,ExchangeNotAvailable:o,InvalidNonce:n,InsufficientFunds:d,OrderNotFound:c,DDoSProtection:h,InvalidOrder:l,AuthenticationError:u}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"yobit",name:"YoBit",countries:["RU"],rateLimit:3e3,version:"3",has:{CORS:!1,createDepositAddress:!0,createMarketOrder:!1,fetchClosedOrders:"emulated",fetchDepositAddress:!0,fetchDeposits:!1,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBooks:!0,fetchOrders:"emulated",fetchTickers:!0,fetchTransactions:!1,fetchWithdrawals:!1,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766910-cdcbfdae-5eea-11e7-9859-03fea873272d.jpg",api:{public:"https://yobit.net/api",private:"https://yobit.net/tapi"},www:"https://www.yobit.net",doc:"https://www.yobit.net/en/api/",fees:"https://www.yobit.net/en/fees/"},api:{public:{get:["depth/{pair}","info","ticker/{pair}","trades/{pair}"]},private:{post:["ActiveOrders","CancelOrder","GetDepositAddress","getInfo","OrderInfo","Trade","TradeHistory","WithdrawCoinsToAddress"]}},fees:{trading:{maker:.002,taker:.002},funding:{withdraw:{}}},commonCurrencies:{AIR:"AirCoin",ANI:"ANICoin",ANT:"AntsCoin",ATMCHA:"ATM",ASN:"Ascension",AST:"Astral",ATM:"Autumncoin",BCC:"BCH",BCS:"BitcoinStake",BLN:"Bulleon",BOT:"BOTcoin",BON:"BONES",BPC:"BitcoinPremium",BTS:"Bitshares2",CAT:"BitClave",CMT:"CometCoin",COV:"Coven Coin",COVX:"COV",CPC:"Capricoin",CS:"CryptoSpots",DCT:"Discount",DFT:"DraftCoin",DGD:"DarkGoldCoin",DIRT:"DIRTY",DROP:"FaucetCoin",DSH:"DASH",EKO:"EkoCoin",ENTER:"ENTRC",EPC:"ExperienceCoin",ESC:"EdwardSnowden",EUROPE:"EUROP",EXT:"LifeExtension",FUNK:"FUNKCoin",GCC:"GlobalCryptocurrency",GEN:"Genstake",GENE:"Genesiscoin",GOLD:"GoldMint",GOT:"Giotto Coin",HTML5:"HTML",HYPERX:"HYPER",ICN:"iCoin",INSANE:"INSN",JNT:"JointCoin",JPC:"JupiterCoin",KNC:"KingN Coin",LBTCX:"LiteBitcoin",LIZI:"LiZi",LOC:"LocoCoin",LOCX:"LOC",LUNYR:"LUN",LUN:"LunarCoin",MDT:"Midnight",NAV:"NavajoCoin",NBT:"NiceBytes",OMG:"OMGame",PAC:"$PAC",PLAY:"PlayCoin",PIVX:"Darknet",PRS:"PRE",PUTIN:"PUT",STK:"StakeCoin",SUB:"Subscriptio",PAY:"EPAY",PLC:"Platin Coin",RCN:"RCoin",REP:"Republicoin",RUR:"RUB",TTC:"TittieCoin",XIN:"XINCoin"},options:{fetchOrdersRequiresSymbol:!0,fetchTickersMaxLength:512},exceptions:{exact:{803:l,804:l,805:l,806:l,807:l,831:d,832:d,833:c},broad:{"Invalid pair name":r,"invalid api key":u,"invalid sign":u,"api key dont have trade permission":u,"invalid parameter":l,"invalid order":l,"Requests too often":h,"not available":o,"data unavailable":o,"external service unavailable":o,"Total transaction amount":r,"Insufficient funds":d,"invalid key":u,"invalid nonce":n}}})}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGetInfo(e),i=this.safeValue(t,"return",{}),s={info:t},r=this.safeValue(i,"funds",{}),a=this.safeValue(i,"funds_incl_orders",{}),o=Object.keys(this.extend(r,a));for(let n=0;n<o.length;n++){const e=o[n],t=this.safeCurrencyCode(e),i=this.account();i.free=this.safeFloat(r,e),i.total=this.safeFloat(a,e),s[t]=i}return this.parseBalance(s)}async fetchMarkets(e={}){const t=await this.publicGetInfo(e),i=this.safeValue(t,"pairs"),s=Object.keys(i),r=[];for(let a=0;a<s.length;a++){const e=s[a],t=i[e],[o,n]=e.split("_");let d=o.toUpperCase(),c=n.toUpperCase();d=this.safeCurrencyCode(d),c=this.safeCurrencyCode(c);const h=d+"/"+c,l={amount:this.safeInteger(t,"decimal_places"),price:this.safeInteger(t,"decimal_places")},u={amount:{min:this.safeFloat(t,"min_amount"),max:this.safeFloat(t,"max_amount")},price:{min:this.safeFloat(t,"min_price"),max:this.safeFloat(t,"max_price")},cost:{min:this.safeFloat(t,"min_total")}},f=0===this.safeInteger(t,"hidden");r.push({id:e,symbol:h,base:d,quote:c,baseId:o,quoteId:n,active:f,taker:t.fee/100,precision:l,limits:u,info:t})}return r}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),a={pair:s.id};void 0!==t&&(a.limit=t);const o=await this.publicGetDepthPair(this.extend(a,i));if(!(s.id in o))throw new r(this.id+" "+s.symbol+" order book is empty or not available");const n=o[s.id];return this.parseOrderBook(n)}async fetchOrderBooks(e,t,i={}){await this.loadMarkets();let s=void 0;if(void 0===e){if(s=this.ids.join("-"),s.length>2048){const e=this.ids.length;throw new r(this.id+" has "+e.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchOrderBooks")}}else s=this.marketIds(e),s=s.join("-");const a={pair:s};void 0!==t&&(a.limit=t);const o=await this.publicGetDepthPair(this.extend(a,i)),n={};s=Object.keys(o);for(let r=0;r<s.length;r++){const e=s[r];let t=e;if(e in this.markets_by_id){t=this.markets_by_id[e].symbol}n[t]=this.parseOrderBook(o[e])}return n}parseTicker(e,t){const i=this.safeTimestamp(e,"updated");let s=void 0;void 0!==t&&(s=t.symbol);const r=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"avg"),baseVolume:this.safeFloat(e,"vol_cur"),quoteVolume:this.safeFloat(e,"vol"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=this.ids;if(void 0===e){const e=i.length;i=i.join("-");const t=this.safeInteger(this.options,"fetchTickersMaxLength",2048);if(i.length>this.options.fetchTickersMaxLength)throw new a(this.id+" has "+e.toString()+" markets exceeding max URL length for this endpoint ("+t.toString()+" characters), please, specify a list of symbols of interest in the first argument to fetchTickers")}else i=this.marketIds(e),i=i.join("-");const s={pair:i},r=await this.publicGetTickerPair(this.extend(s,t)),o={},n=Object.keys(r);for(let a=0;a<n.length;a++){const e=n[a],t=r[e];let i=e,s=void 0;e in this.markets_by_id&&(s=this.markets_by_id[e],i=s.symbol),o[i]=this.parseTicker(t,s)}return o}async fetchTicker(e,t={}){return(await this.fetchTickers([e],t))[e]}parseTrade(e,t){const i=this.safeTimestamp(e,"timestamp");let s=this.safeString(e,"type");"ask"===s?s="sell":"bid"===s&&(s="buy");const r=this.safeFloat2(e,"rate","price"),a=this.safeString2(e,"trade_id","tid"),o=this.safeString(e,"order_id");if("pair"in e){const i=this.safeString(e,"pair");t=this.safeValue(this.markets_by_id,i,t)}let n=void 0;void 0!==t&&(n=t.symbol);const d=this.safeFloat(e,"amount");let c=void 0,h=void 0;const l=this.safeFloat(e,"commission");if(void 0!==l){const t=this.safeString(e,"commissionCurrency");h={cost:l,currency:this.safeCurrencyCode(t)}}const u=this.safeValue(e,"is_your_order");void 0!==u&&(c="taker",u&&(c="maker"),void 0===h&&(h=this.calculateFee(n,"limit",s,d,r,c)));let f=void 0;return void 0!==d&&void 0!==r&&(f=d*r),{id:a,order:o,timestamp:i,datetime:this.iso8601(i),symbol:n,type:"limit",side:s,takerOrMaker:c,price:r,amount:d,cost:f,fee:h,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pair:r.id};void 0!==i&&(a.limit=i);const o=await this.publicGetTradesPair(this.extend(a,s));if(Array.isArray(o)){if(0===o.length)return[]}return this.parseTrades(o[r.id],r,t,i)}async createOrder(e,t,i,s,a,o={}){if("market"===t)throw new r(this.id+" allows limit orders only");await this.loadMarkets();const n={pair:this.market(e).id,type:i,amount:this.amountToPrecision(e,s),rate:this.priceToPrecision(e,a)};a=parseFloat(a),s=parseFloat(s);const d=await this.privatePostTrade(this.extend(n,o));let c=void 0,h="open",l=0,u=s;"return"in d&&(c=this.safeString(d.return,"order_id"),"0"===c&&(c=this.safeString(d.return,"init_order_id"),h="closed"),l=this.safeFloat(d.return,"received",0),u=this.safeFloat(d.return,"remains",s));const f=this.milliseconds(),p={id:c,timestamp:f,datetime:this.iso8601(f),lastTradeTimestamp:void 0,status:h,symbol:e,type:t,side:i,price:a,cost:a*l,amount:s,remaining:u,filled:l,fee:void 0};return this.orders[c]=p,this.extend({info:d},p)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:parseInt(e)},r=await this.privatePostCancelOrder(this.extend(s,i));return e in this.orders&&(this.orders[e].status="canceled"),r}parseOrderStatus(e){return this.safeString({0:"open",1:"closed",2:"canceled",3:"open"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.parseOrderStatus(this.safeString(e,"status")),r=this.safeTimestamp(e,"timestamp_created");let a=void 0;if(void 0===t){const i=this.safeString(e,"pair");i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(a=t.symbol);const o=this.safeFloat(e,"amount");let n=void 0;const d=this.safeFloat(e,"rate");let c=void 0,h=void 0;"start_amount"in e?n=this.safeFloat(e,"start_amount"):i in this.orders&&(n=this.orders[i].amount),void 0!==n&&void 0!==o&&(c=n-o,h=d*c);const l=this.safeString(e,"type");return{info:e,id:i,clientOrderId:void 0,symbol:a,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,type:"limit",side:l,price:d,cost:h,amount:n,remaining:o,filled:c,status:s,fee:void 0}}parseOrders(e,t,i,s,r={}){const a=[],o=Object.keys(e);let n=void 0;void 0!==t&&(n=t.symbol);for(let d=0;d<o.length;d++){const i=o[d],s=this.extend({id:i},e[i]);a.push(this.extend(this.parseOrder(s,t),r))}return this.filterBySymbolSinceLimit(a,n,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:parseInt(e)},r=await this.privatePostOrderInfo(this.extend(s,i));e=e.toString();const a=this.parseOrder(this.extend({id:e},r.return[e])),o=e in this.orders?this.orders[e]:{};return this.orders[e]=this.extend(o,a),this.orders[e]}updateCachedOrders(e,t){for(let r=0;r<e.length;r++){const t=e[r].id;this.orders[t]=e[r]}const i=this.indexBy(e,"id"),s=Object.keys(this.orders);for(let r=0;r<s.length;r++){const e=s[r];let a=this.orders[e];if(!(e in i)){if(void 0!==t&&t!==a.symbol)continue;"open"===a.status&&(a=this.extend(a,{status:"closed",cost:void 0,filled:a.amount,remaining:0}),void 0===a.cost&&void 0!==a.filled&&(a.cost=a.filled*a.price),this.orders[e]=a)}}return this.toArray(this.orders)}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchOrders requires a symbol argument");await this.loadMarkets();const r={};if(void 0!==e){const t=this.market(e);r.pair=t.id}const o=await this.privatePostActiveOrders(this.extend(r,s));let n=[];"return"in o&&(n=this.parseOrders(o.return,void 0));const d=this.updateCachedOrders(n,e),c=this.filterBySymbol(d,e);return this.filterBySinceLimit(c,t,i)}async fetchOpenOrders(e,t,i,s={}){const r=await this.fetchOrders(e,t,i,s);return this.filterBy(r,"status","open")}async fetchClosedOrders(e,t,i,s={}){const r=await this.fetchOrders(e,t,i,s);return this.filterBy(r,"status","closed")}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades requires a `symbol` argument");await this.loadMarkets();const r=this.market(e),o={pair:r.id};void 0!==i&&(o.count=parseInt(i)),void 0!==t&&(o.since=parseInt(t/1e3));const n=await this.privatePostTradeHistory(this.extend(o,s)),d=this.safeValue(n,"return",{}),c=Object.keys(d),h=[];for(let a=0;a<c.length;a++){const e=c[a],t=this.parseTrade(this.extend(d[e],{trade_id:e}),r);h.push(t)}return this.filterBySymbolSinceLimit(h,e,t,i)}async createDepositAddress(e,t={}){const i=await this.fetchDepositAddress(e,this.extend({need_new:1},t)),s=this.safeString(i,"address");return this.checkAddress(s),{currency:e,address:s,tag:void 0,info:i.info}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={coinName:this.currency(e).id,need_new:0},s=await this.privatePostGetDepositAddress(this.extend(i,t)),r=this.safeString(s.return,"address");return this.checkAddress(r),{currency:e,address:r,tag:void 0,info:s}}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const o={coinName:this.currency(e).id,amount:t,address:i};if(void 0!==s)throw new r(this.id+" withdraw() does not support the tag argument yet due to a lack of docs on withdrawing with tag/memo on behalf of the exchange.");return{info:await this.privatePostWithdrawCoinsToAddress(this.extend(o,a)),id:void 0}}calculateFee(e,t,i,s,r,a="taker",o={}){const n=this.markets[e];let d="quote";const c=n[a];let h=parseFloat(this.costToPrecision(e,s*c));return"sell"===i?h*=r:d="base",{type:a,currency:n[d],rate:c,cost:h}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t];const n=this.omit(s,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();const t=this.nonce();a=this.urlencode(this.extend({nonce:t,method:e},n));const i=this.hmac(this.encode(a),this.encode(this.secret),"sha512");r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:i}}else"public"===t?(o+="/"+this.version+"/"+this.implodeParams(e,s),Object.keys(n).length&&(o+="?"+this.urlencode(n))):(o+="/"+this.implodeParams(e,s),"GET"===i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):Object.keys(n).length&&(a=this.json(n),r={"Content-Type":"application/json"}));return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,c){if(void 0!==n&&"success"in n){let e=this.safeValue(n,"success",!1);if("string"===typeof e&&(e="true"===e||"1"===e),!e){const e=this.safeString(n,"code"),t=this.safeString(n,"error"),i=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,e,i),this.throwExactlyMatchedException(this.exceptions.exact,t,i),this.throwBroadlyMatchedException(this.exceptions.broad,t,i),new r(i)}}}}},"+zI4":function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ArgumentsRequired:a,AuthenticationError:o,NullResponse:n,InvalidOrder:d,NotSupported:c,InsufficientFunds:h,InvalidNonce:l,OrderNotFound:u,RateLimitExceeded:f}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"cex",name:"CEX.IO",countries:["GB","EU","CY","RU"],rateLimit:1500,has:{CORS:!1,fetchCurrencies:!0,fetchTickers:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchOrders:!0},timeframes:{"1m":"1m"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766442-8ddc33b0-5ed8-11e7-8b98-f786aef0f3c9.jpg",api:"https://cex.io/api",www:"https://cex.io",doc:"https://cex.io/cex-api",fees:["https://cex.io/fee-schedule","https://cex.io/limits-commissions"],referral:"https://cex.io/r/0/up105393824/0/"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["currency_profile","currency_limits/","last_price/{pair}/","last_prices/{currencies}/","ohlcv/hd/{yyyymmdd}/{pair}","order_book/{pair}/","ticker/{pair}/","tickers/{currencies}/","trade_history/{pair}/"],post:["convert/{pair}","price_stats/{pair}"]},private:{post:["active_orders_status/","archived_orders/{pair}/","balance/","cancel_order/","cancel_orders/{pair}/","cancel_replace_order/{pair}/","close_position/{pair}/","get_address/","get_myfee/","get_order/","get_order_tx/","open_orders/{pair}/","open_orders/","open_position/{pair}/","open_positions/{pair}/","place_order/{pair}/"]}},fees:{trading:{maker:.0016,taker:.0025},funding:{withdraw:{BTC:.001,ETH:.01,BCH:.001,DASH:.01,BTG:.001,ZEC:.001,XRP:.02},deposit:{BTC:0,ETH:0,BCH:0,DASH:0,BTG:0,ZEC:0,XRP:0,XLM:0}}},exceptions:{exact:{},broad:{"Insufficient funds":h,"Nonce must be incremented":l,"Invalid Order":d,"Order not found":u,"Rate limit exceeded":f,"Invalid API key":o,"There was an error while placing your order":d}},options:{fetchOHLCVWarning:!0,createMarketBuyOrderRequiresPrice:!0,order:{status:{c:"canceled",d:"closed",cd:"closed",a:"open"}}}})}async fetchCurrenciesFromCache(e={}){const t=this.safeValue(this.options,"fetchCurrencies",{}),i=this.safeInteger(t,"timestamp"),s=this.safeInteger(t,"expires",1e3),r=this.milliseconds();if(void 0===i||r-i>s){const i=await this.publicGetCurrencyProfile(e);this.options.fetchCurrencies=this.extend(t,{response:i,timestamp:r})}return this.safeValue(this.options.fetchCurrencies,"response")}async fetchCurrencies(e={}){const t=await this.fetchCurrenciesFromCache(e);this.options.currencies={timestamp:this.milliseconds(),response:t};const i=this.safeValue(t,"data",[]),s=this.safeValue(i,"symbols",[]),r={};for(let a=0;a<s.length;a++){const e=s[a],t=this.safeString(e,"code"),i=this.safeCurrencyCode(t),o=this.safeInteger(e,"precision"),n=!0;r[i]={id:t,code:i,name:t,active:n,precision:o,fee:void 0,limits:{amount:{min:this.safeFloat(e,"minimumCurrencyAmount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(e,"minimalWithdrawalAmount"),max:void 0}},info:e}}return r}async fetchMarkets(e={}){const t=await this.fetchCurrenciesFromCache(e),i=this.safeValue(t,"data",{}),s=this.safeValue(i,"symbols",[]),r=this.indexBy(s,"code"),a=this.safeValue(i,"pairs",[]),o=await this.publicGetCurrencyLimits(e),n=[],d=this.safeValue(o.data,"pairs");for(let c=0;c<d.length;c++){const e=d[c],t=this.safeString(e,"symbol1"),i=this.safeString(e,"symbol2"),s=t+"/"+i,o=this.safeCurrencyCode(t),h=this.safeCurrencyCode(i),l=o+"/"+h,u=this.safeValue(r,t,{}),f=this.safeValue(r,i,{});let p=this.safeInteger(f,"precision",8);for(let r=0;r<a.length;r++){const e=a[r];e.symbol1===t&&e.symbol2===i&&(p=this.safeInteger(e,"pricePrecision",p))}const m={amount:this.safeInteger(u,"precision",8)-this.safeInteger(u,"scale",0),price:p};n.push({id:s,info:e,symbol:l,base:o,quote:h,baseId:t,quoteId:i,precision:m,limits:{amount:{min:this.safeFloat(e,"minLotSize"),max:this.safeFloat(e,"maxLotSize")},price:{min:this.safeFloat(e,"minPrice"),max:this.safeFloat(e,"maxPrice")},cost:{min:this.safeFloat(e,"minLotSizeS2"),max:void 0}}})}return n}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostBalance(e),i={info:t},s=this.omit(t,["username","timestamp"]),r=Object.keys(s);for(let a=0;a<r.length;a++){const e=r[a],t=this.safeValue(s,e,{}),o=this.account();o.free=this.safeFloat(t,"available"),o.used=this.safeFloat(t,"orders",0),i[this.safeCurrencyCode(e)]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair:this.marketId(e)};void 0!==t&&(s.depth=t);const r=await this.publicGetOrderBookPair(this.extend(s,i)),a=this.safeTimestamp(r,"timestamp");return this.parseOrderBook(r,a)}parseOHLCV(e,t,i="1m",s,r){return[1e3*e[0],e[1],e[2],e[3],e[4],e[5]]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const o=this.market(e);if(void 0===i)i=this.milliseconds()-864e5;else if(this.options.fetchOHLCVWarning)throw new r(this.id+" fetchOHLCV warning: CEX can return historical candles for a certain date only, this might produce an empty or null reply. Set exchange.options['fetchOHLCVWarning'] = false or add ({ 'options': { 'fetchOHLCVWarning': false }}) to constructor params to suppress this warning message.");let d=this.ymd(i);d=d.split("-"),d=d.join("");const c={pair:o.id,yyyymmdd:d};try{const e=await this.publicGetOhlcvHdYyyymmddPair(this.extend(c,a)),r="data"+this.timeframes[t],n=JSON.parse(e[r]);return this.parseOHLCVs(n,o,t,i,s)}catch(h){if(h instanceof n)return[]}}parseTicker(e,t){const i=this.safeTimestamp(e,"timestamp"),s=this.safeFloat(e,"volume"),r=this.safeFloat(e,"high"),a=this.safeFloat(e,"low"),o=this.safeFloat(e,"bid"),n=this.safeFloat(e,"ask"),d=this.safeFloat(e,"last");let c=void 0;return t&&(c=t.symbol),{symbol:c,timestamp:i,datetime:this.iso8601(i),high:r,low:a,bid:o,bidVolume:void 0,ask:n,askVolume:void 0,vwap:void 0,open:void 0,close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:s,quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i={currencies:Object.keys(this.currencies).join("/")},s=(await this.publicGetTickersCurrencies(this.extend(i,t))).data,r={};for(let a=0;a<s.length;a++){const e=s[a],t=e.pair.replace(":","/"),i=this.markets[t];r[t]=this.parseTicker(e,i)}return r}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={pair:i.id},r=await this.publicGetTickerPair(this.extend(s,t));return this.parseTicker(r,i)}parseTrade(e,t){const i=this.safeTimestamp(e,"date"),s=this.safeString(e,"tid"),r=this.safeString(e,"type"),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount");let n=void 0;void 0!==o&&void 0!==a&&(n=o*a);let d=void 0;return void 0!==t&&(d=t.symbol),{info:e,id:s,timestamp:i,datetime:this.iso8601(i),symbol:d,type:void 0,side:r,order:void 0,takerOrMaker:void 0,price:a,amount:o,cost:n,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pair:r.id},o=await this.publicGetTradeHistoryPair(this.extend(a,s));return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,r,a={}){if("market"===t&&"buy"===i&&this.options.createMarketBuyOrderRequiresPrice){if(void 0===r)throw new d(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");s*=r}await this.loadMarkets();const o={pair:this.marketId(e),type:i,amount:s};"limit"===t?o.price=r:o.order_type=t;const n=await this.privatePostPlaceOrderPair(this.extend(o,a));return{info:n,id:n.id}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e};return await this.privatePostCancelOrder(this.extend(s,i))}parseOrder(e,t){let i=this.safeValue(e,"time");i="string"===typeof i&&i.indexOf("T")>=0?this.parse8601(i):parseInt(i);let s=void 0;if(void 0===t){const i=this.safeString(e,"symbol1"),r=this.safeString(e,"symbol2");s=this.safeCurrencyCode(i)+"/"+this.safeCurrencyCode(r),s in this.markets&&(t=this.market(s))}const r=this.parseOrderStatus(this.safeString(e,"status")),a=this.safeFloat(e,"price");let o=this.safeFloat(e,"amount");void 0!==o&&(o=Math.abs(o));const n=this.safeFloat2(e,"pending","remains"),d=o-n;let c=void 0,h=void 0;if(void 0!==t){s=t.symbol,h=this.safeFloat(e,"ta:"+t.quote),void 0===h&&(h=this.safeFloat(e,"tta:"+t.quote));const i="fa:"+t.base,r="tfa:"+t.base,a="fa:"+t.quote,o="tfa:"+t.quote;let n=this.safeFloat(e,"tradingFeeMaker");if(n||(n=this.safeFloat(e,"tradingFeeTaker",n)),n&&(n/=100),i in e||r in e){const s=this.safeFloat2(e,i,r);c={currency:t.base,rate:n,cost:s}}else if(a in e||o in e){const i=this.safeFloat2(e,a,o);c={currency:t.quote,rate:n,cost:i}}}h||(h=a*d);const l=e.type;let u=void 0;const f=e.id;if("vtx"in e){u=[];for(let i=0;i<e.vtx.length;i++){const r=e.vtx[i],a=this.safeString(r,"type");if("cancel"===a)continue;const o=this.safeFloat(r,"price");if(void 0===o)continue;if("costsNothing"===a)continue;const n=this.parse8601(this.safeString(r,"time")),d=this.safeFloat(r,"amount"),c=this.safeFloat(r,"fee_amount");let h=d<0?-d:d,l=void 0;"sell"===a?(l=h,h=this.sum(c,l)/o):l=h*o,u.push({id:this.safeString(r,"id"),timestamp:n,datetime:this.iso8601(n),order:f,symbol:s,price:o,amount:h,cost:l,side:a,fee:{cost:c,currency:t.quote},info:r})}}return{id:f,clientOrderId:void 0,datetime:this.iso8601(i),timestamp:i,lastTradeTimestamp:void 0,status:r,symbol:s,type:void 0===a?"market":"limit",side:l,price:a,cost:h,amount:o,filled:d,remaining:n,trades:u,fee:c,info:e}}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a="privatePostOpenOrders",o=void 0;void 0!==e&&(o=this.market(e),r.pair=o.id,a+="Pair");const n=await this[a](this.extend(r,s));for(let d=0;d<n.length;d++)n[d]=this.extend(n[d],{status:"open"});return this.parseOrders(n,o,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();if(void 0===e)throw new a(this.id+" fetchClosedOrders requires a symbol argument");const r=this.market(e),o={pair:r.id},n=await this.privatePostArchivedOrdersPair(this.extend(o,s));return this.parseOrders(n,r,t,i)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e.toString()},r=await this.privatePostGetOrderTx(this.extend(s,i));return this.parseOrder(r.data)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r={limit:i,pair:this.market(e).id,dateFrom:t},a=await this.privatePostArchivedOrdersPair(this.extend(r,s)),o=[];for(let n=0;n<a.length;n++){const e=a[n],t=this.parseOrderStatus(this.safeString(e,"status")),i=this.safeString(e,"symbol1"),s=this.safeString(e,"symbol2"),r=this.safeCurrencyCode(i),d=this.safeCurrencyCode(s),c=r+"/"+d,h=this.safeString(e,"type"),l=this.safeFloat(e,"a:"+i+":cds"),u=this.safeFloat(e,"a:"+s+":cds"),f=this.safeFloat(e,"f:"+s+":cds"),p=this.safeFloat(e,"amount"),m=this.safeFloat(e,"price"),y=this.safeFloat(e,"remains"),b=p-y;let v=void 0,g=void 0,w=void 0,k=void 0;if(m){const t=this.safeFloat(e,"ta:"+s,0),i=this.safeFloat(e,"tta:"+s,0),r=this.safeFloat(e,"fa:"+s,0),a=this.safeFloat(e,"tfa:"+s,0);g="sell"===h?this.sum(this.sum(t,i),this.sum(r,a)):this.sum(t,i)-this.sum(r,a),k="limit",v=p,w=g/b}else k="market",v=l,g=u,w=v/g;const _=this.safeString(e,"time"),T=this.safeString(e,"lastTxTime"),O=this.parse8601(_);o.push({id:this.safeString(e,"id"),timestamp:O,datetime:this.iso8601(O),lastUpdated:this.parse8601(T),status:t,symbol:c,side:h,price:m,amount:v,average:w,type:k,filled:b,cost:g,remaining:y,fee:{cost:f,currency:d},info:e})}return o}parseOrderStatus(e){return this.safeString(this.options.order.status,e,e)}async editOrder(e,t,i,s,r,o,n={}){if(void 0===r)throw new a(this.id+" editOrder requires a amount argument");if(void 0===o)throw new a(this.id+" editOrder requires a price argument");await this.loadMarkets();const d=this.market(t),c={pair:d.id,type:s,amount:r,price:o,order_id:e},h=await this.privatePostCancelReplaceOrderPair(this.extend(c,n));return this.parseOrder(h,d)}async fetchDepositAddress(e,t={}){if("XRP"===e||"XLM"===e)throw new c(this.id+" fetchDepositAddress does not support XRP and XLM addresses yet (awaiting docs from CEX.io)");await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privatePostGetAddress(this.extend(i,t)),r=this.safeString(s,"data");return this.checkAddress(r),{currency:e,address:r,tag:void 0,info:s}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();const e=this.nonce().toString(),t=e+this.uid+this.apiKey,i=this.hmac(this.encode(t),this.encode(this.secret));a=this.json(this.extend({key:this.apiKey,signature:i.toUpperCase(),nonce:e},n)),r={"Content-Type":"application/json"}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,d,c,h){if(Array.isArray(d))return d;if("true"!==o){if(void 0===d)throw new n(this.id+" returned "+this.json(d));if(!("e"in d&&"ok"in d&&"ok"===d.ok)&&"error"in d){const e=this.safeString(d,"error"),t=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,e,t),this.throwBroadlyMatchedException(this.exceptions.broad,e,t),new r(t)}}}}},"/cFS":function(e,t,i){"use strict";(function(t){const s="undefined"!==typeof window,r="undefined"!==typeof t&&"undefined"!==typeof t.versions&&"undefined"!==typeof t.versions.electron,a="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,o="undefined"!==typeof t&&"win32"===t.platform,n=!(s||a),d="undefined"===typeof fetch?i("9Uy0")().fetch:fetch;e.exports={isBrowser:s,isElectron:r,isWebWorker:a,isNode:n,isWindows:o,defaultFetch:d}}).call(this,i("5IsQ"))},"/jvT":function(e,t,i){"use strict";const s=i("GiW5");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"binanceje",name:"Binance Jersey",countries:["JE"],certified:!1,pro:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/54874009-d526eb00-4df3-11e9-928c-ce6a2b914cd1.jpg",api:{web:"https://www.binance.je",wapi:"https://api.binance.je/wapi/v3",public:"https://api.binance.je/api/v1",private:"https://api.binance.je/api/v3",v3:"https://api.binance.je/api/v3",v1:"https://api.binance.je/api/v1"},www:"https://www.binance.je",referral:"https://www.binance.je/?ref=35047921",doc:"https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md",fees:"https://www.binance.je/fees.html"},fees:{trading:{tierBased:!1,percentage:!0,taker:5e-4,maker:5e-4},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:5e-4,ETH:.01},deposit:{}}}})}}},"02Wl":function(e,t,i){"use strict";var s=i("/IoK"),r=i("Y/HJ").assert,a=i("Y/HJ"),{byteArrayToWordArray:o}=i("BtsK");const n=s.enc.Utf8.parse("\x01"),d=s.enc.Utf8.parse("\0");function c(e){if(!(this instanceof c))return new c(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.slice(3,6),this.minEntropy=e.minEntropy||192,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=e.entropy,i=e.nonce;r(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,i,[])}e.exports=c,c.prototype._init=function(e,t,i){var r=e.concat(t).concat(i);this.K=new s.lib.WordArray.init,this.V=new s.lib.WordArray.init;this.V.words=Array(this.outLen/32).fill(16843009),this.V.sigBytes=32,this._update(r),this._reseed=1,this.reseedInterval=281474976710656},c.prototype._hmac=function(){return new s.lib.WordArray.init},c.prototype._update=function(e){var t=this._hmac();t.concat(this.V),t.concat(d),e&&t.concat(o(e)),this.K=s["Hmac"+this.hash](t,this.K),this.V=s["Hmac"+this.hash](this.V,this.K),e&&((t=this._hmac()).concat(this.V),t.concat(n),t.concat(o(e)),this.K=s["Hmac"+this.hash](t,this.K),this.V=s["Hmac"+this.hash](this.V,this.K))},c.prototype.reseed=function(e,t,i,s){"string"!==typeof t&&(i,i=t,t=null),r(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(i||[])),this._reseed=1},c.prototype.generate=function(e,t,i,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!==typeof t&&(i,i=t,t=null),i&&(i=s.enc.Utf8.parse(i),this._update(i));for(var o=new s.lib.WordArray.init;o.sigBytes<e;)this.V=s["Hmac"+this.hash](this.V,this.K),o.concat(this.V);return this._update(i),this._reseed++,a.wordArrayToBuffer(o)}},"0TTc":function(e,t,i){"use strict";const s=i("OjXq"),r=i("cdDq"),a=i("ucJe");s.ccxtVersion="1.25.33";const o={_1btcxe:i("MzSH"),acx:i("F33t"),adara:i("r6xz"),anxpro:i("hIzy"),aofex:i("d4Ax"),bcex:i("a4pT"),bequant:i("Jix9"),bibox:i("U63y"),bigone:i("sqcK"),binance:i("GiW5"),binanceje:i("/jvT"),binanceus:i("Vf3q"),bit2c:i("eRx0"),bitbank:i("a9qU"),bitbay:i("fGCF"),bitfinex:i("mZ7+"),bitfinex2:i("5Kmp"),bitflyer:i("p23d"),bitforex:i("dn2v"),bithumb:i("hTj0"),bitkk:i("HntW"),bitlish:i("aFfd"),bitmart:i("6u4I"),bitmax:i("g94P"),bitmex:i("YEj7"),bitso:i("m2R+"),bitstamp:i("98kT"),bitstamp1:i("p0dA"),bittrex:i("ubNZ"),bitz:i("HB8x"),bl3p:i("eebJ"),bleutrade:i("COu+"),braziliex:i("M+3o"),btcalpha:i("PPJh"),btcbox:i("fR7u"),btcmarkets:i("dl7Y"),btctradeim:i("BG8/"),btctradeua:i("bf7n"),btcturk:i("MP7T"),buda:i("mdIA"),bw:i("tXvY"),bybit:i("i4x7"),bytetrade:i("VGMt"),cex:i("+zI4"),chilebit:i("rSxa"),cobinhood:i("njSN"),coinbase:i("SY6p"),coinbaseprime:i("a9C4"),coinbasepro:i("TGNe"),coincheck:i("NCIG"),coinegg:i("NQdM"),coinex:i("8DMd"),coinfalcon:i("bAGH"),coinfloor:i("otB0"),coingi:i("oWik"),coinmarketcap:i("cuLj"),coinmate:i("qBa0"),coinone:i("X3hn"),coinspot:i("T24p"),coolcoin:i("eYCJ"),coss:i("rBLd"),crex24:i("xYmC"),deribit:i("zl+m"),digifinex:i("3QcU"),dsx:i("7aZo"),exmo:i("nUeX"),exx:i("BVgh"),fcoin:i("BVIH"),fcoinjp:i("9SAk"),flowbtc:i("fobv"),foxbit:i("uS8B"),ftx:i("+JpX"),fybse:i("TPo/"),gateio:i("wLqY"),gemini:i("N4x7"),hitbtc:i("6IP2"),hitbtc2:i("sLEj"),hollaex:i("+m6x"),huobipro:i("6kI6"),huobiru:i("iWax"),ice3x:i("WfKs"),idex:i("Pvdy"),independentreserve:i("FIEc"),indodax:i("QpdZ"),itbit:i("kJEJ"),kkex:i("+Ci3"),kraken:i("wIgF"),kucoin:i("jh01"),kuna:i("sGFv"),lakebtc:i("p8kp"),latoken:i("wJrE"),lbank:i("lWi4"),liquid:i("JMNx"),livecoin:i("PlM5"),luno:i("uyLk"),lykke:i("BupB"),mercado:i("kbH8"),mixcoins:i("DiNA"),oceanex:i("srjw"),okcoin:i("p5Bl"),okex:i("oAua"),paymium:i("jzP+"),poloniex:i("XrIg"),rightbtc:i("WmoY"),southxchange:i("HNHa"),stex:i("d3wi"),stronghold:i("l6ZL"),surbitcoin:i("svUv"),theocean:i("aIci"),therock:i("Wrnp"),tidebit:i("tb2N"),tidex:i("CGOH"),timex:i("WZ+2"),topq:i("rpo2"),upbit:i("Bqph"),vaultoro:i("1HAH"),vbtc:i("Rcnz"),whitebit:i("Bu4C"),xbtce:i("OacK"),yobit:i("+vak"),zaif:i("3Icy"),zb:i("YBGL")};e.exports=Object.assign({version:"1.25.33",Exchange:s,exchanges:Object.keys(o)},o,r,a)},"19XG":function(e,t,i){(function(t){var s=i("Te/i"),r=i("/IoK"),a=3;i("YkuB");var o={md2:t.from("3020300c06082a864886f70d020205000410","hex"),md5:t.from("3020300c06082a864886f70d020505000410","hex"),sha1:t.from("3021300906052b0e03021a05000414","hex"),sha224:t.from("302d300d06096086480165030402040500041c","hex"),sha256:t.from("3031300d060960864801650304020105000420","hex"),sha384:t.from("3041300d060960864801650304020205000430","hex"),sha512:t.from("3051300d060960864801650304020305000440","hex"),ripemd160:t.from("3021300906052b2403020105000414","hex"),rmd160:t.from("3021300906052b2403020105000414","hex")},n={ripemd160:"rmd160"};function d(e,t){var i=[];return t>0&&i.push(e>>>24),t>1&&i.push(e>>>16&255),t>2&&i.push(e>>>8&255),t>3&&i.push(255&e),i}e.exports={isEncryption:!0,isSignature:!0},e.exports.makeScheme=function(e,i){function c(e,t){this.key=e,this.options=t}return c.prototype.maxMessageLength=function(){return this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==a?this.key.encryptedDataLength:this.key.encryptedDataLength-11},c.prototype.encUnPad=function(e,t){t=t||{};var i=0;if(this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==a)return"function"==typeof e.lastIndexOf?e.slice(e.lastIndexOf("\0")+1,e.length):e.slice(String.prototype.lastIndexOf.call(e,"\0")+1,e.length);if(e.length<4)return null;if(1===t.type){if(0!==e[0]&&1!==e[1])return null;for(i=3;0!==e[i];)if(255!=e[i]||++i>=e.length)return null}else{if(0!==e[0]&&2!==e[1])return null;for(i=3;0!==e[i];)if(++i>=e.length)return null}return e.slice(i+1,e.length)},c.prototype.sign=function(e){var i=this.options.signingSchemeOptions.hash||"sha256";if("browser"===this.options.environment){var a=function(e){let i=void 0;if(!e.hasOwnProperty("sigBytes")||!e.hasOwnProperty("words"))throw Error("Argument not a wordArray");i=e.sigBytes,e=e.words;const s=[];let r=[],a=0;for(;i>0;)r=d(e[a],Math.min(4,i)),i-=r.length,s.push(r),a++;return new t.from([].concat.apply([],s),"hex")}(r[(i=n[i]||i).toUpperCase()](e.toString())),o=this.pkcs1pad(a,i);return this.key.$doPrivate(new s(o)).toBuffer(this.key.encryptedDataLength)}throw new Error("CCXT only supports browser mode :P")},c.prototype.pkcs1pad=function(e,i){var s=o[i];if(!s)throw Error("Unsupported hash algorithm");var r=t.concat([s,e]);if(r.length+10>this.key.encryptedDataLength)throw Error("Key is too short for signing algorithm ("+i+")");var a=t.alloc(this.key.encryptedDataLength-r.length-1);return a.fill(255,0,a.length-1),a[0]=1,a[a.length-1]=0,t.concat([a,r])},new c(e,i)}}).call(this,i("zkTx").Buffer)},"1HAH":function(e,t,i){"use strict";const s=i("OjXq");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"vaultoro",name:"Vaultoro",countries:["CH"],rateLimit:1e3,version:"1",has:{CORS:!0,fetchMarkets:!0,fetchOrderBook:!0,fetchBalance:!0,createOrder:!0,cancelOrder:!0,fetchTrades:!0,fetchTicker:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766880-f205e870-5ee9-11e7-8fe2-0d5b15880752.jpg",api:"https://api.vaultoro.com",www:"https://www.vaultoro.com",doc:"https://api.vaultoro.com"},commonCurrencies:{GLD:"Gold"},api:{public:{get:["bidandask","buyorders","latest","latesttrades","markets","orderbook","sellorders","transactions/day","transactions/hour","transactions/month"]},private:{get:["balance","mytrades","orders"],post:["buy/{symbol}/{type}","cancel/{id}","sell/{symbol}/{type}","withdraw"]}}})}async fetchMarkets(e={}){const t=[],i=await this.publicGetMarkets(e),s=this.safeValue(i,"data"),r=this.safeString(s,"MarketCurrency"),a=this.safeString(s,"BaseCurrency"),o=this.safeCurrencyCode(r),n=this.safeCurrencyCode(a),d=o+"/"+n,c=this.safeString(s,"MarketName");return t.push({id:c,symbol:d,base:o,quote:n,baseId:r,quoteId:a,info:s}),t}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalance(e),i=this.safeValue(t,"data"),s={info:i};for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"currency_code"),a=this.safeCurrencyCode(t),o=this.account();o.free=this.safeFloat(e,"cash"),o.used=this.safeFloat(e,"reserved"),s[a]=o}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=await this.publicGetOrderbook(i),r={bids:s.data[0].b,asks:s.data[1].s};return this.parseOrderBook(r,void 0,"bids","asks","Gold_Price","Gold_Amount")}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"Time"));let s=void 0;void 0!==t&&(s=t.symbol);const r=this.safeFloat(e,"Gold_Price"),a=this.safeFloat(e,"Gold_Amount");let o=void 0;return void 0!==r&&void 0!==a&&(o=a*r),{id:void 0,info:e,timestamp:i,datetime:this.iso8601(i),symbol:s,order:void 0,type:void 0,side:void 0,takerOrMaker:void 0,price:r,amount:a,cost:o,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a=await this.publicGetTransactionsDay(s);return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),n="privatePost"+this.capitalize(i)+"SymbolType",d={symbol:o.quoteId.toLowerCase(),type:t,gld:s,price:r||1},c=await this[n](this.extend(d,a));return{info:c,id:c.data.Order_ID}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e};return await this.privatePostCancelId(this.extend(s,i))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/";if("public"===t)o+=e;else{this.checkRequiredCredentials();const t=this.nonce();o+=this.version+"/"+this.implodeParams(e,s);const i=this.extend({nonce:t,apikey:this.apiKey},this.omit(s,this.extractParams(e)));o+="?"+this.urlencode(i),r={"Content-Type":"application/json","X-Signature":this.hmac(this.encode(o),this.encode(this.secret))}}return{url:o,method:i,body:a,headers:r}}}},"1hwd":function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var s=arguments[t];for(var r in s)i.call(s,r)&&(e[r]=s[r])}return e};var i=Object.prototype.hasOwnProperty},"1zYm":function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var s=i("8kJ5");t.MAX_INTEGER=new s("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16),t.TWO_POW256=new s("10000000000000000000000000000000000000000000000000000000000000000",16),t.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",t.KECCAK256_NULL=e.from(t.KECCAK256_NULL_S,"hex"),t.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",t.KECCAK256_RLP_ARRAY=e.from(t.KECCAK256_RLP_ARRAY_S,"hex"),t.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",t.KECCAK256_RLP=e.from(t.KECCAK256_RLP_S,"hex")}).call(this,i("zkTx").Buffer)},"2AsB":function(e,t,i){var s=i("pRMk").Buffer;e.exports={check:function(e){if(e.length<8)return!1;if(e.length>72)return!1;if(48!==e[0])return!1;if(e[1]!==e.length-2)return!1;if(2!==e[2])return!1;var t=e[3];if(0===t)return!1;if(5+t>=e.length)return!1;if(2!==e[4+t])return!1;var i=e[5+t];return 0!==i&&(6+t+i===e.length&&(!(128&e[4])&&(!(t>1&&0===e[4]&&!(128&e[5]))&&(!(128&e[t+6])&&!(i>1&&0===e[t+6]&&!(128&e[t+7]))))))},decode:function(e){if(e.length<8)throw new Error("DER sequence length is too short");if(e.length>72)throw new Error("DER sequence length is too long");if(48!==e[0])throw new Error("Expected DER sequence");if(e[1]!==e.length-2)throw new Error("DER sequence length is invalid");if(2!==e[2])throw new Error("Expected DER integer");var t=e[3];if(0===t)throw new Error("R length is zero");if(5+t>=e.length)throw new Error("R length is too long");if(2!==e[4+t])throw new Error("Expected DER integer (2)");var i=e[5+t];if(0===i)throw new Error("S length is zero");if(6+t+i!==e.length)throw new Error("S length is invalid");if(128&e[4])throw new Error("R value is negative");if(t>1&&0===e[4]&&!(128&e[5]))throw new Error("R value excessively padded");if(128&e[t+6])throw new Error("S value is negative");if(i>1&&0===e[t+6]&&!(128&e[t+7]))throw new Error("S value excessively padded");return{r:e.slice(4,4+t),s:e.slice(6+t)}},encode:function(e,t){var i=e.length,r=t.length;if(0===i)throw new Error("R length is zero");if(0===r)throw new Error("S length is zero");if(i>33)throw new Error("R length is too long");if(r>33)throw new Error("S length is too long");if(128&e[0])throw new Error("R value is negative");if(128&t[0])throw new Error("S value is negative");if(i>1&&0===e[0]&&!(128&e[1]))throw new Error("R value excessively padded");if(r>1&&0===t[0]&&!(128&t[1]))throw new Error("S value excessively padded");var a=s.allocUnsafe(6+i+r);return a[0]=48,a[1]=a.length-2,a[2]=2,a[3]=e.length,e.copy(a,4),a[4+i]=2,a[5+i]=t.length,t.copy(a,6+i),a}}},"2YIc":function(e,t,i){var s=i("uH1V");e.exports={Ber:s,BerReader:s.Reader}},"2jjz":function(e,t,i){"use strict";(function(e,s){var r=i("ZERR"),a=i("jt4p"),o=i("M2pJ"),n=i("Fre1"),d=i("C92A");for(var c in d)t[c]=d[c];t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7;function h(e){if("number"!==typeof e||e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}h.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,r(this.init_done,"close before init"),r(this.mode<=t.UNZIP),this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?o.deflateEnd(this.strm):this.mode!==t.INFLATE&&this.mode!==t.GUNZIP&&this.mode!==t.INFLATERAW&&this.mode!==t.UNZIP||n.inflateEnd(this.strm),this.mode=t.NONE,this.dictionary=null)},h.prototype.write=function(e,t,i,s,r,a,o){return this._write(!0,e,t,i,s,r,a,o)},h.prototype.writeSync=function(e,t,i,s,r,a,o){return this._write(!1,e,t,i,s,r,a,o)},h.prototype._write=function(i,a,o,n,d,c,h,l){if(r.equal(arguments.length,8),r(this.init_done,"write before init"),r(this.mode!==t.NONE,"already finalized"),r.equal(!1,this.write_in_progress,"write already in progress"),r.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,r.equal(!1,void 0===a,"must provide flush value"),this.write_in_progress=!0,a!==t.Z_NO_FLUSH&&a!==t.Z_PARTIAL_FLUSH&&a!==t.Z_SYNC_FLUSH&&a!==t.Z_FULL_FLUSH&&a!==t.Z_FINISH&&a!==t.Z_BLOCK)throw new Error("Invalid flush value");if(null==o&&(o=e.alloc(0),d=0,n=0),this.strm.avail_in=d,this.strm.input=o,this.strm.next_in=n,this.strm.avail_out=l,this.strm.output=c,this.strm.next_out=h,this.flush=a,!i)return this._process(),this._checkError()?this._afterSync():void 0;var u=this;return s.nextTick((function(){u._process(),u._after()})),this},h.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},h.prototype._process=function(){var e=null;switch(this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=o.deflate(this.strm,this.flush);break;case t.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=t.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=t.GUNZIP):this.mode=t.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:for(this.err=n.inflate(this.strm,this.flush),this.err===t.Z_NEED_DICT&&this.dictionary&&(this.err=n.inflateSetDictionary(this.strm,this.dictionary),this.err===t.Z_OK?this.err=n.inflate(this.strm,this.flush):this.err===t.Z_DATA_ERROR&&(this.err=t.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===t.GUNZIP&&this.err===t.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=n.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},h.prototype._checkError=function(){switch(this.err){case t.Z_OK:case t.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===t.Z_FINISH)return this._error("unexpected end of file"),!1;break;case t.Z_STREAM_END:break;case t.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},h.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},h.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},h.prototype.init=function(e,i,s,a,o){r(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),r(e>=8&&e<=15,"invalid windowBits"),r(i>=-1&&i<=9,"invalid compression level"),r(s>=1&&s<=9,"invalid memlevel"),r(a===t.Z_FILTERED||a===t.Z_HUFFMAN_ONLY||a===t.Z_RLE||a===t.Z_FIXED||a===t.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(i,e,s,a,o),this._setDictionary()},h.prototype.params=function(){throw new Error("deflateParams Not supported")},h.prototype.reset=function(){this._reset(),this._setDictionary()},h.prototype._init=function(e,i,s,r,d){switch(this.level=e,this.windowBits=i,this.memLevel=s,this.strategy=r,this.flush=t.Z_NO_FLUSH,this.err=t.Z_OK,this.mode!==t.GZIP&&this.mode!==t.GUNZIP||(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),this.mode!==t.DEFLATERAW&&this.mode!==t.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new a,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=o.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:this.err=n.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==t.Z_OK&&this._error("Init error"),this.dictionary=d,this.write_in_progress=!1,this.init_done=!0},h.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:this.err=o.deflateSetDictionary(this.strm,this.dictionary)}this.err!==t.Z_OK&&this._error("Failed to set dictionary")}},h.prototype._reset=function(){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:case t.GZIP:this.err=o.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:case t.GUNZIP:this.err=n.inflateReset(this.strm)}this.err!==t.Z_OK&&this._error("Failed to reset stream")},t.Zlib=h}).call(this,i("zkTx").Buffer,i("5IsQ"))},"3Icy":function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,BadRequest:a}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"zaif",name:"Zaif",countries:["JP"],rateLimit:2e3,version:"1",has:{CORS:!1,createMarketOrder:!1,fetchOpenOrders:!0,fetchClosedOrders:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766927-39ca2ada-5eeb-11e7-972f-1b4199518ca6.jpg",api:"https://api.zaif.jp",www:"https://zaif.jp",doc:["https://techbureau-api-document.readthedocs.io/ja/latest/index.html","https://corp.zaif.jp/api-docs","https://corp.zaif.jp/api-docs/api_links","https://www.npmjs.com/package/zaif.jp","https://github.com/you21979/node-zaif"],fees:"https://zaif.jp/fee?lang=en"},fees:{trading:{percentage:!0,taker:.001,maker:0}},api:{public:{get:["depth/{pair}","currencies/{pair}","currencies/all","currency_pairs/{pair}","currency_pairs/all","last_price/{pair}","ticker/{pair}","trades/{pair}"]},private:{post:["active_orders","cancel_order","deposit_history","get_id_info","get_info","get_info2","get_personal_info","trade","trade_history","withdraw","withdraw_history"]},ecapi:{post:["createInvoice","getInvoice","getInvoiceIdsByOrderNumber","cancelInvoice"]},tlapi:{post:["get_positions","position_history","active_positions","create_position","change_position","cancel_position"]},fapi:{get:["groups/{group_id}","last_price/{group_id}/{pair}","ticker/{group_id}/{pair}","trades/{group_id}/{pair}","depth/{group_id}/{pair}"]}},options:{fees:{"BTC/JPY":{maker:0,taker:0},"BCH/JPY":{maker:0,taker:.003},"BCH/BTC":{maker:0,taker:.003},"PEPECASH/JPY":{maker:0,taker:1e-4},"PEPECASH/BT":{maker:0,taker:1e-4}}},exceptions:{exact:{"unsupported currency_pair":a},broad:{}}})}async fetchMarkets(e={}){const t=await this.publicGetCurrencyPairsAll(e),i=[];for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"currency_pair"),a=this.safeString(e,"name"),[o,n]=a.split("/"),d=this.safeCurrencyCode(o),c=this.safeCurrencyCode(n),h=d+"/"+c,l={amount:-Math.log10(e.item_unit_step),price:e.aux_unit_point},u=this.safeValue(this.options.fees,h,this.fees.trading),f=u.taker,p=u.maker;i.push({id:r,symbol:h,base:d,quote:c,baseId:o,quoteId:n,active:!0,precision:l,taker:f,maker:p,limits:{amount:{min:this.safeFloat(e,"item_unit_min"),max:void 0},price:{min:this.safeFloat(e,"aux_unit_min"),max:void 0},cost:{min:void 0,max:void 0}},info:e})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGetInfo(e),i=this.safeValue(t,"return",{}),s={info:t},r=this.safeValue(i,"funds",{}),a=Object.keys(r);for(let o=0;o<a.length;o++){const e=a[o],t=this.safeCurrencyCode(e),n=this.safeValue(r,e),d={free:n,used:0,total:n};"deposit"in i&&e in i.deposit&&(d.total=this.safeFloat(i.deposit,e),d.used=d.total-d.free),s[t]=d}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair:this.marketId(e)},r=await this.publicGetDepthPair(this.extend(s,i));return this.parseOrderBook(r)}async fetchTicker(e,t={}){await this.loadMarkets();const i={pair:this.marketId(e)},s=await this.publicGetTickerPair(this.extend(i,t)),r=this.milliseconds(),a=this.safeFloat(s,"vwap"),o=this.safeFloat(s,"volume");let n=void 0;void 0!==o&&void 0!==a&&(n=o*a);const d=this.safeFloat(s,"last");return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:a,open:void 0,close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:o,quoteVolume:n,info:s}}parseTrade(e,t){let i=this.safeString(e,"trade_type");i="bid"===i?"buy":"sell";const s=this.safeTimestamp(e,"date"),r=this.safeString2(e,"id","tid"),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount");let n=void 0;if(void 0!==a&&void 0!==o&&(n=o*a),void 0===t){const i=this.safeString(e,"currency_pair");i in this.markets_by_id&&(t=this.markets_by_id[i])}let d=void 0;return void 0!==t&&(d=t.symbol),{id:r,info:e,timestamp:s,datetime:this.iso8601(s),symbol:d,type:void 0,side:i,order:void 0,takerOrMaker:void 0,price:a,amount:o,cost:n,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pair:r.id};let o=await this.publicGetTradesPair(this.extend(a,s));if(1===o.length){const e=o[0];Object.keys(e).length||(o=[])}return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,a,o={}){if(await this.loadMarkets(),"limit"!==t)throw new r(this.id+" allows limit orders only");const n={currency_pair:this.marketId(e),action:"buy"===i?"bid":"ask",amount:s,price:a},d=await this.privatePostTrade(this.extend(n,o));return{info:d,id:d.return.order_id.toString()}}async cancelOrder(e,t,i={}){const s={order_id:e};return await this.privatePostCancelOrder(this.extend(s,i))}parseOrder(e,t){let i=this.safeString(e,"action");i="bid"===i?"buy":"sell";const s=this.safeTimestamp(e,"timestamp");if(!t){const i=this.safeString(e,"currency_pair");i in this.markets_by_id&&(t=this.markets_by_id[i])}const r=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount");let o=void 0;void 0!==r&&void 0!==a&&(o=r*a);const n=this.safeString(e,"id");let d=void 0;return void 0!==t&&(d=t.symbol),{id:n,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,status:"open",symbol:d,type:"limit",side:i,price:r,cost:o,amount:a,filled:void 0,remaining:void 0,trades:void 0,fee:void 0}}parseOrders(e,t,i,s,r={}){const a=[],o=Object.keys(e);let n=void 0;void 0!==t&&(n=t.symbol);for(let d=0;d<o.length;d++){const i=o[d],s=this.extend({id:i},e[i]);a.push(this.extend(this.parseOrder(s,t),r))}return this.filterBySymbolSinceLimit(a,n,i,s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==e&&(r=this.market(e),a.currency_pair=r.id);const o=await this.privatePostActiveOrders(this.extend(a,s));return this.parseOrders(o.return,r,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==e&&(r=this.market(e),a.currency_pair=r.id);const o=await this.privatePostTradeHistory(this.extend(a,s));return this.parseOrders(o.return,r,t,i)}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const o=this.currency(e);if("JPY"===e)throw new r(this.id+" withdraw() does not allow "+e+" withdrawals");const n={currency:o.id,amount:t,address:i};void 0!==s&&(n.message=s);const d=await this.privatePostWithdraw(this.extend(n,a));return{info:d,id:d.return.txid,fee:d.return.fee}}nonce(){return parseFloat(this.milliseconds()/1e3).toFixed(8)}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/";if("public"===t)o+="api/"+this.version+"/"+this.implodeParams(e,s);else if("fapi"===t)o+="fapi/"+this.version+"/"+this.implodeParams(e,s);else{this.checkRequiredCredentials(),o+="ecapi"===t?"ecapi":"tlapi"===t?"tlapi":"tapi";const i=this.nonce();a=this.urlencode(this.extend({method:e,nonce:i},s)),r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,c){if(void 0===n)return;const h=this.id+" "+o,l=this.safeString(n,"error");if(void 0!==l)throw this.throwExactlyMatchedException(this.exceptions.exact,l,h),this.throwBroadlyMatchedException(this.exceptions.broad,l,h),new r(h);if(!this.safeValue(n,"success",!0))throw new r(h)}}},"3NQs":function(e,t,i){"use strict";var s=t;s.inherits=function(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e},s.version="6.5.0",s.utils=i("Y/HJ"),s.curve=i("LE+o"),s.curves=i("9kyK"),s.ec=i("IjNm")},"3QcU":function(e,t,i){"use strict";const s=i("OjXq"),{AccountSuspended:r,BadRequest:a,BadResponse:o,NetworkError:n,DDoSProtection:d,AuthenticationError:c,PermissionDenied:h,ArgumentsRequired:l,ExchangeError:u,InsufficientFunds:f,InvalidOrder:p,InvalidNonce:m,OrderNotFound:y}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"digifinex",name:"DigiFinex",countries:["SG"],version:"v3",rateLimit:900,has:{cancelOrders:!0,fetchOrders:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchTickers:!0,fetchMyTrades:!0,fetchLedger:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","4h":"240","12h":"720","1d":"1D","1w":"1W"},urls:{logo:"https://user-images.githubusercontent.com/1294454/62184319-304e8880-b366-11e9-99fe-8011d6929195.jpg",api:"https://openapi.digifinex.vip",www:"https://www.digifinex.vip",doc:["https://docs.digifinex.vip"],fees:"https://digifinex.zendesk.com/hc/en-us/articles/360000328422-Fee-Structure-on-DigiFinex",referral:"https://www.digifinex.vip/en-ww/from/DhOzBg/3798****5114"},api:{v2:{get:["ticker"]},public:{get:["{market}/symbols","kline","margin/currencies","margin/symbols","markets","order_book","ping","spot/symbols","time","trades"]},private:{get:["{market}/financelog","{market}/mytrades","{market}/order","{market}/order/current","{market}/order/history","margin/assets","margin/financelog","margin/mytrades","margin/order","margin/order/current","margin/order/history","margin/positions","otc/financelog","spot/assets","spot/financelog","spot/mytrades","spot/order","spot/order/current","spot/order/history"],post:["{market}/order/cancel","{market}/order/new","margin/order/cancel","margin/order/new","margin/position/close","spot/order/cancel","spot/order/new","transfer"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002}},exceptions:{exact:{10001:[a,"Wrong request method, please check it's a GET ot POST request"],10002:[c,"Invalid ApiKey"],10003:[c,"Sign doesn't match"],10004:[a,"Illegal request parameters"],10005:[d,"Request frequency exceeds the limit"],10006:[h,"Unauthorized to execute this request"],10007:[h,"IP address Unauthorized"],10008:[m,"Timestamp for this request is invalid, timestamp must within 1 minute"],10009:[n,"Unexist endpoint, please check endpoint URL"],10011:[r,"ApiKey expired. Please go to client side to re-create an ApiKey"],20001:[h,"Trade is not open for this trading pair"],20002:[h,"Trade of this trading pair is suspended"],20003:[p,"Invalid price or amount"],20007:[p,"Price precision error"],20008:[p,"Amount precision error"],20009:[p,"Amount is less than the minimum requirement"],20010:[p,"Cash Amount is less than the minimum requirement"],20011:[f,"Insufficient balance"],20012:[a,"Invalid trade type, valid value: buy/sell)"],20013:[p,"No order info found"],20014:[a,"Invalid date, Valid format: 2018-07-25)"],20015:[a,"Date exceeds the limit"],20018:[h,"Your trading rights have been banned by the system"],20019:[a,'Wrong trading pair symbol. Correct format:"usdt_btc". Quote asset is in the front'],20020:[d,"You have violated the API operation trading rules and temporarily forbid trading. At present, we have certain restrictions on the user's transaction rate and withdrawal rate."],5e4:[u,"Exception error"]},broad:{}},options:{defaultType:"spot",types:["spot","margin","otc"]},commonCurrencies:{BHT:"Black House Test"}})}async fetchMarketsByType(e,t={}){const i="publicGet"+this.capitalize(e)+"Symbols",s=await this[i](t),r=this.safeValue(s,"symbols_list",[]),a=[];for(let o=0;o<r.length;o++){const t=r[o],i=this.safeString(t,"symbol"),s=this.safeString(t,"base_asset"),n=this.safeString(t,"quote_asset"),d=this.safeCurrencyCode(s),c=this.safeCurrencyCode(n),h=d+"/"+c,l={amount:this.safeInteger(t,"amount_precision"),price:this.safeInteger(t,"price_precision")},u={amount:{min:this.safeFloat(t,"minimum_amount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(t,"minimum_value"),max:void 0}},f=void 0,p="spot"===e,m="margin"===e;a.push({id:i,symbol:h,base:d,quote:c,baseId:s,quoteId:n,active:f,type:e,spot:p,margin:m,precision:l,limits:u,info:t})}return a}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=this.safeValue(t,"data",[]),s=[];for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"market"),[a,o]=t.split("_"),n=this.safeCurrencyCode(a),d=this.safeCurrencyCode(o),c=n+"/"+d,h={amount:this.safeInteger(e,"volume_precision"),price:this.safeInteger(e,"price_precision")},l={amount:{min:this.safeFloat(e,"min_volume"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(e,"min_amount"),max:void 0}},u=void 0;s.push({id:t,symbol:c,base:n,quote:d,baseId:a,quoteId:o,active:u,precision:h,limits:l,info:e})}return s}async fetchBalance(e={}){const t=this.safeString(this.options,"defaultType","spot"),i=this.safeString(e,"type",t);e=this.omit(e,"type");const s="privateGet"+this.capitalize(i)+"Assets",r=await this[s](e),a=this.safeValue(r,"list",[]),o={info:r};for(let n=0;n<a.length;n++){const e=a[n],t=this.safeString(e,"currency"),i=this.safeCurrencyCode(t),s=this.account();s.used=this.safeFloat(e,"frozen"),s.free=this.safeFloat(e,"free"),s.total=this.safeFloat(e,"total"),o[i]=s}return this.parseBalance(o)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id};void 0!==t&&(s.limit=t);const r=await this.publicGetOrderBook(this.extend(s,i)),a=this.safeTimestamp(r,"date");return this.parseOrderBook(r,a)}async fetchTickers(e,t={}){const i=this.safeValue(t,"apiKey",this.apiKey);if(!i)throw new l(this.id+" fetchTicker is a private v2 endpoint that requires an `exchange.apiKey` credential or an `apiKey` extra parameter");await this.loadMarkets();const s={apiKey:i},r=await this.v2GetTicker(this.extend(s,t)),a={},o=this.safeValue(r,"ticker",{}),n=this.safeInteger(r,"date"),d=Object.keys(o);for(let c=0;c<d.length;c++){const e=d[c],t=this.extend({date:n},o[e]),[i,s]=e.split("_"),r=s+"_"+i;let h=void 0,l=void 0;if(r in this.markets_by_id)h=this.markets_by_id[r],l=h.symbol;else{l=this.safeCurrencyCode(s)+"/"+this.safeCurrencyCode(i)}a[l]=this.parseTicker(t,h)}return a}async fetchTicker(e,t={}){const i=this.safeValue(t,"apiKey",this.apiKey);if(!i)throw new l(this.id+" fetchTicker is a private v2 endpoint that requires an `exchange.apiKey` credential or an `apiKey` extra parameter");await this.loadMarkets();const s=this.market(e),r=s.quoteId+"_"+s.baseId,a={symbol:r,apiKey:i},o=await this.v2GetTicker(this.extend(a,t)),n=this.safeInteger(o,"date"),d=this.safeValue(o,"ticker",{});let c=this.safeValue(d,r,{});return c=this.extend({date:n},c),this.parseTicker(c,s)}parseTicker(e,t){let i=void 0;void 0!==t&&(i=t.symbol);const s=this.safeTimestamp(e,"date"),r=this.safeFloat(e,"last"),a=this.safeFloat(e,"change");return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:a,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"base_vol"),info:e}}parseTrade(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"order_id"),r=this.safeTimestamp2(e,"date","timestamp"),a=this.safeString2(e,"type","side"),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount");let d=void 0;void 0!==o&&void 0!==n&&(d=o*n);let c=void 0;const h=this.safeString(e,"symbol");if(void 0!==h)if(h in this.markets_by_id)c=(t=this.markets_by_id[t]).symbol;else{const[e,t]=h.split("_");c=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}void 0===c&&void 0!==t&&(c=t.symbol);const l=this.safeValue(e,"is_maker"),u=this.safeFloat(e,"fee");let f=void 0;if(void 0!==u){const t=this.safeString(e,"fee_currency");f={cost:u,currency:this.safeCurrencyCode(t)}}return{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:c,type:void 0,order:s,side:a,price:o,amount:n,cost:d,takerOrMaker:l,fee:f}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==i&&(a.limit=i);const o=await this.publicGetTrades(this.extend(a,s)),n=this.safeValue(o,"data",[]);return this.parseTrades(n,r,t,i)}parseOHLCV(e,t,i="1m",s,r){return[1e3*e[0],e[5],e[3],e[4],e[2],e[1]]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={symbol:a.id,period:this.timeframes[t]};if(void 0!==i){const e=parseInt(i/1e3);if(o.start_time=e,void 0!==s){const i=this.parseTimeframe(t);o.end_time=this.sum(e,s*i)}}else if(void 0!==s){const e=this.seconds(),i=this.parseTimeframe(t);o.startTime=this.sum(e,-s*i)}const n=await this.publicGetKline(this.extend(o,r)),d=this.safeValue(n,"data",[]);return this.parseOHLCVs(d,a,t,i,s)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),n=this.safeString(this.options,"defaultType","spot"),d=this.safeString(a,"type",n);a=this.omit(a,"type");const c={market:d,symbol:o.id,amount:this.amountToPrecision(e,s)};let h="";"market"===t?h="_market":c.price=this.priceToPrecision(e,r),c.type=i+h;const l=await this.privatePostMarketOrderNew(this.extend(c,a)),u=this.parseOrder(l,o);return this.extend(u,{symbol:e,side:i,type:t,amount:s,price:r})}async cancelOrder(e,t,i={}){await this.loadMarkets();const s=this.safeString(this.options,"defaultType","spot"),r=this.safeString(i,"type",s);i=this.omit(i,"type");const a={market:r,order_id:e},o=await this.privatePostMarketOrderCancel(this.extend(a,i));if(1!==this.safeValue(o,"success",[]).length)throw new y(this.id+" cancelOrder "+e+" not found");return o}async cancelOrders(e,t,i={}){await this.loadMarkets();const s=this.safeString(this.options,"defaultType","spot"),r=this.safeString(i,"type",s);i=this.omit(i,"type");const a={market:r,order_id:e.join(",")},o=await this.privatePostCancelOrder(this.extend(a,i));if(this.safeValue(o,"success",[]).length<1)throw new y(this.id+" cancelOrders error");return o}parseOrderStatus(e){return this.safeString({0:"open",1:"open",2:"closed",3:"canceled",4:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"order_id"),s=this.safeTimestamp(e,"created_date"),r=this.safeTimestamp(e,"finished_date");let a=this.safeString(e,"type"),o=void 0;if(void 0!==a){const e=a.split("_");e.length>1?(a=e[0],o=e[1]):o="limit"}const n=this.parseOrderStatus(this.safeString(e,"status"));if(void 0===t){const i=e.symbol.toUpperCase();i in this.markets_by_id&&(t=this.markets_by_id[i])}let d=void 0;const c=this.safeString(e,"symbol");if(void 0!==c)if(c in this.markets_by_id)d=(t=this.markets_by_id[c]).symbol;else{const[e,t]=c.split("_");d=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}const h=this.safeFloat(e,"amount"),l=this.safeFloat(e,"executed_amount"),u=this.safeFloat(e,"price"),f=this.safeFloat(e,"avg_price");let p=void 0,m=void 0;return void 0!==l&&(void 0!==f&&(m=l*f),void 0!==h&&(p=Math.max(0,h-l))),{info:e,id:i,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:r,symbol:d,type:o,side:a,price:u,amount:h,filled:l,remaining:p,cost:m,average:f,status:n,fee:void 0}}async fetchOpenOrders(e,t,i,s={}){const r=this.safeString(this.options,"defaultType","spot"),a=this.safeString(s,"type",r);s=this.omit(s,"type"),await this.loadMarkets();let o=void 0;const n={market:a};void 0!==e&&(o=this.market(e),n.symbol=o.id);const d=await this.privateGetMarketOrderCurrent(this.extend(n,s)),c=this.safeValue(d,"data",[]);return this.parseOrders(c,o,t,i)}async fetchOrders(e,t,i,s={}){const r=this.safeString(this.options,"defaultType","spot"),a=this.safeString(s,"type",r);s=this.omit(s,"type"),await this.loadMarkets();let o=void 0;const n={market:a};void 0!==e&&(o=this.market(e),n.symbol=o.id),void 0!==t&&(n.start_time=parseInt(t/1e3)),void 0!==i&&(n.limit=i);const d=await this.privateGetMarketOrderHistory(this.extend(n,s)),c=this.safeValue(d,"data",[]);return this.parseOrders(c,o,t,i)}async fetchOrder(e,t,i={}){const s=this.safeString(this.options,"defaultType","spot"),r=this.safeString(i,"type",s);i=this.omit(i,"type"),await this.loadMarkets();let a=void 0;void 0!==t&&(a=this.market(t));const o={market:r,order_id:e},n=await this.privateGetMarketOrder(this.extend(o,i)),d=this.safeValue(n,"data",{});return this.parseOrder(d,a)}async fetchMyTrades(e,t,i,s={}){const r=this.safeString(this.options,"defaultType","spot"),a=this.safeString(s,"type",r);s=this.omit(s,"type"),await this.loadMarkets();let o=void 0;const n={market:a};void 0!==e&&(o=this.market(e),n.symbol=o.id),void 0!==t&&(n.start_time=parseInt(t/1e3)),void 0!==i&&(n.limit=i);const d=await this.privateGetMarketMytrades(this.extend(n,s)),c=this.safeValue(d,"list",[]);return this.parseTrades(c,o,t,i)}parseLedgerEntryType(e){return this.safeString({},e,e)}parseLedgerEntry(e,t){const i=this.safeString(e,"num"),s=this.parseLedgerEntryType(this.safeString(e,"type")),r=this.safeCurrencyCode(this.safeString(e,"currency_mark"),t),a=this.safeTimestamp(e,"time");return{info:e,id:i,direction:void 0,account:void 0,referenceId:void 0,referenceAccount:void 0,type:s,currency:r,amount:void 0,before:void 0,after:this.safeFloat(e,"balance"),status:"ok",timestamp:a,datetime:this.iso8601(a),fee:void 0}}async fetchLedger(e,t,i,s={}){const r=this.safeString(this.options,"defaultType","spot"),a=this.safeString(s,"type",r);s=this.omit(s,"type"),await this.loadMarkets();const o={market:a};let n=void 0;void 0!==e&&(n=this.currency(e),o.currency_mark=n.id),void 0!==t&&(o.start_time=parseInt(t/1e3)),void 0!==i&&(o.limit=i);const d=await this.privateGetMarketFinancelog(this.extend(o,s)),c=this.safeValue(d,"data",{}),h=this.safeValue(c,"finance",[]);return this.parseLedger(h,n,t,i)}sign(e,t="public",i="GET",s={},r,a){const o="v2"===t?t:this.version;let n=this.urls.api+"/"+o+"/"+this.implodeParams(e,s);const d=this.omit(s,this.extractParams(e)),c=this.urlencode(this.keysort(d));if("private"===t){const e=this.nonce().toString(),t=c,s=this.hmac(this.encode(t),this.encode(this.secret));"GET"===i?c&&(n+="?"+c):"POST"===i&&(r={"Content-Type":"application/x-www-form-urlencoded"},c&&(a=c)),r={"ACCESS-KEY":this.apiKey,"ACCESS-SIGN":s,"ACCESS-TIMESTAMP":e}}else c&&(n+="?"+c);return{url:n,method:i,body:a,headers:r}}dateUTC8(e){const t=this.safeValue(this.options,"timedelta",288e5);return this.ymd(e+t)}handleErrors(e,t,i,s,r,a,n,d,c){if(!n)return;const h=this.safeString(n,"code");if("0"===h)return;const l=this.id+" "+a;if(void 0===h)throw new o(l);const f=[u,l],[p,m]=this.safeValue(this.exceptions.exact,h,f);throw new p(m)}}},"3mKH":function(e,t,i){(function(e,s,r){var a=i("eoLT"),o=i("wfEq"),n=i("5Ekh"),d=t.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},c=t.IncomingMessage=function(t,i,o,d){var c=this;if(n.Readable.call(c),c._mode=o,c.headers={},c.rawHeaders=[],c.trailers={},c.rawTrailers=[],c.on("end",(function(){e.nextTick((function(){c.emit("close")}))})),"fetch"===o){if(c._fetchResponse=i,c.url=i.url,c.statusCode=i.status,c.statusMessage=i.statusText,i.headers.forEach((function(e,t){c.headers[t.toLowerCase()]=e,c.rawHeaders.push(t,e)})),a.writableStream){var h=new WritableStream({write:function(e){return new Promise((function(t,i){c._destroyed?i():c.push(new s(e))?t():c._resumeFetch=t}))},close:function(){r.clearTimeout(d),c._destroyed||c.push(null)},abort:function(e){c._destroyed||c.emit("error",e)}});try{return void i.body.pipeTo(h).catch((function(e){r.clearTimeout(d),c._destroyed||c.emit("error",e)}))}catch(p){}}var l=i.body.getReader();!function e(){l.read().then((function(t){if(!c._destroyed){if(t.done)return r.clearTimeout(d),void c.push(null);c.push(new s(t.value)),e()}})).catch((function(e){r.clearTimeout(d),c._destroyed||c.emit("error",e)}))}()}else{if(c._xhr=t,c._pos=0,c.url=t.responseURL,c.statusCode=t.status,c.statusMessage=t.statusText,t.getAllResponseHeaders().split(/\r?\n/).forEach((function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var i=t[1].toLowerCase();"set-cookie"===i?(void 0===c.headers[i]&&(c.headers[i]=[]),c.headers[i].push(t[2])):void 0!==c.headers[i]?c.headers[i]+=", "+t[2]:c.headers[i]=t[2],c.rawHeaders.push(t[1],t[2])}})),c._charset="x-user-defined",!a.overrideMimeType){var u=c.rawHeaders["mime-type"];if(u){var f=u.match(/;\s*charset=([^;])(;|$)/);f&&(c._charset=f[1].toLowerCase())}c._charset||(c._charset="utf-8")}}};o(c,n.Readable),c.prototype._read=function(){var e=this._resumeFetch;e&&(this._resumeFetch=null,e())},c.prototype._onXHRProgress=function(){var e=this,t=e._xhr,i=null;switch(e._mode){case"text:vbarray":if(t.readyState!==d.DONE)break;try{i=new r.VBArray(t.responseBody).toArray()}catch(h){}if(null!==i){e.push(new s(i));break}case"text":try{i=t.responseText}catch(h){e._mode="text:vbarray";break}if(i.length>e._pos){var a=i.substr(e._pos);if("x-user-defined"===e._charset){for(var o=new s(a.length),n=0;n<a.length;n++)o[n]=255&a.charCodeAt(n);e.push(o)}else e.push(a,e._charset);e._pos=i.length}break;case"arraybuffer":if(t.readyState!==d.DONE||!t.response)break;i=t.response,e.push(new s(new Uint8Array(i)));break;case"moz-chunked-arraybuffer":if(i=t.response,t.readyState!==d.LOADING||!i)break;e.push(new s(new Uint8Array(i)));break;case"ms-stream":if(i=t.response,t.readyState!==d.LOADING)break;var c=new r.MSStreamReader;c.onprogress=function(){c.result.byteLength>e._pos&&(e.push(new s(new Uint8Array(c.result.slice(e._pos)))),e._pos=c.result.byteLength)},c.onload=function(){e.push(null)},c.readAsArrayBuffer(i)}e._xhr.readyState===d.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,i("5IsQ"),i("zkTx").Buffer,i("pCvA"))},"4+3C":function(e,t,i){(function(e){var s=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),i={},s=0;s<t.length;s++)i[t[s]]=Object.getOwnPropertyDescriptor(e,t[s]);return i},r=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],i=0;i<arguments.length;i++)t.push(n(arguments[i]));return t.join(" ")}i=1;for(var s=arguments,a=s.length,o=String(e).replace(r,(function(e){if("%%"===e)return"%";if(i>=a)return e;switch(e){case"%s":return String(s[i++]);case"%d":return Number(s[i++]);case"%j":try{return JSON.stringify(s[i++])}catch(t){return"[Circular]"}default:return e}})),d=s[i];i<a;d=s[++i])m(d)||!w(d)?o+=" "+d:o+=" "+n(d);return o},t.deprecate=function(i,s){if("undefined"!==typeof e&&!0===e.noDeprecation)return i;if("undefined"===typeof e)return function(){return t.deprecate(i,s).apply(this,arguments)};var r=!1;return function(){if(!r){if(e.throwDeprecation)throw new Error(s);e.traceDeprecation?console.trace(s):console.error(s),r=!0}return i.apply(this,arguments)}};var a,o={};function n(e,i){var s={seen:[],stylize:c};return arguments.length>=3&&(s.depth=arguments[2]),arguments.length>=4&&(s.colors=arguments[3]),p(i)?s.showHidden=i:i&&t._extend(s,i),v(s.showHidden)&&(s.showHidden=!1),v(s.depth)&&(s.depth=2),v(s.colors)&&(s.colors=!1),v(s.customInspect)&&(s.customInspect=!0),s.colors&&(s.stylize=d),h(s,e,s.depth)}function d(e,t){var i=n.styles[t];return i?"\x1b["+n.colors[i][0]+"m"+e+"\x1b["+n.colors[i][1]+"m":e}function c(e,t){return e}function h(e,i,s){if(e.customInspect&&i&&T(i.inspect)&&i.inspect!==t.inspect&&(!i.constructor||i.constructor.prototype!==i)){var r=i.inspect(s,e);return b(r)||(r=h(e,r,s)),r}var a=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(b(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(i,"string")}if(y(t))return e.stylize(""+t,"number");if(p(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,i);if(a)return a;var o=Object.keys(i),n=function(e){var t={};return e.forEach((function(e,i){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(i)),_(i)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return l(i);if(0===o.length){if(T(i)){var d=i.name?": "+i.name:"";return e.stylize("[Function"+d+"]","special")}if(g(i))return e.stylize(RegExp.prototype.toString.call(i),"regexp");if(k(i))return e.stylize(Date.prototype.toString.call(i),"date");if(_(i))return l(i)}var c,w="",O=!1,x=["{","}"];(f(i)&&(O=!0,x=["[","]"]),T(i))&&(w=" [Function"+(i.name?": "+i.name:"")+"]");return g(i)&&(w=" "+RegExp.prototype.toString.call(i)),k(i)&&(w=" "+Date.prototype.toUTCString.call(i)),_(i)&&(w=" "+l(i)),0!==o.length||O&&0!=i.length?s<0?g(i)?e.stylize(RegExp.prototype.toString.call(i),"regexp"):e.stylize("[Object]","special"):(e.seen.push(i),c=O?function(e,t,i,s,r){for(var a=[],o=0,n=t.length;o<n;++o)I(t,String(o))?a.push(u(e,t,i,s,String(o),!0)):a.push("");return r.forEach((function(r){r.match(/^\d+$/)||a.push(u(e,t,i,s,r,!0))})),a}(e,i,s,n,o):o.map((function(t){return u(e,i,s,n,t,O)})),e.seen.pop(),function(e,t,i){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return i[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+i[1];return i[0]+t+" "+e.join(", ")+" "+i[1]}(c,w,x)):x[0]+w+x[1]}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function u(e,t,i,s,r,a){var o,n,d;if((d=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]}).get?n=d.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):d.set&&(n=e.stylize("[Setter]","special")),I(s,r)||(o="["+r+"]"),n||(e.seen.indexOf(d.value)<0?(n=m(i)?h(e,d.value,null):h(e,d.value,i-1)).indexOf("\n")>-1&&(n=a?n.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+n.split("\n").map((function(e){return"   "+e})).join("\n")):n=e.stylize("[Circular]","special")),v(o)){if(a&&r.match(/^\d+$/))return n;(o=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+n}function f(e){return Array.isArray(e)}function p(e){return"boolean"===typeof e}function m(e){return null===e}function y(e){return"number"===typeof e}function b(e){return"string"===typeof e}function v(e){return void 0===e}function g(e){return w(e)&&"[object RegExp]"===O(e)}function w(e){return"object"===typeof e&&null!==e}function k(e){return w(e)&&"[object Date]"===O(e)}function _(e){return w(e)&&("[object Error]"===O(e)||e instanceof Error)}function T(e){return"function"===typeof e}function O(e){return Object.prototype.toString.call(e)}function x(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(i){if(v(a)&&(a=e.env.NODE_DEBUG||""),i=i.toUpperCase(),!o[i])if(new RegExp("\\b"+i+"\\b","i").test(a)){var s=e.pid;o[i]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",i,s,e)}}else o[i]=function(){};return o[i]},t.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=f,t.isBoolean=p,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=b,t.isSymbol=function(e){return"symbol"===typeof e},t.isUndefined=v,t.isRegExp=g,t.isObject=w,t.isDate=k,t.isError=_,t.isFunction=T,t.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},t.isBuffer=i("EwJK");var S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var e=new Date,t=[x(e.getHours()),x(e.getMinutes()),x(e.getSeconds())].join(":");return[e.getDate(),S[e.getMonth()],t].join(" ")}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",C(),t.format.apply(t,arguments))},t.inherits=i("r4FO"),t._extend=function(e,t){if(!t||!w(t))return e;for(var i=Object.keys(t),s=i.length;s--;)e[i[s]]=t[i[s]];return e};var E="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function M(e,t){if(!e){var i=new Error("Promise was rejected with a falsy value");i.reason=e,e=i}return t(e)}t.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(E&&e[E]){var t;if("function"!==typeof(t=e[E]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,E,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,i,s=new Promise((function(e,s){t=e,i=s})),r=[],a=0;a<arguments.length;a++)r.push(arguments[a]);r.push((function(e,s){e?i(e):t(s)}));try{e.apply(this,r)}catch(o){i(o)}return s}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),E&&Object.defineProperty(t,E,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,s(e))},t.promisify.custom=E,t.callbackify=function(t){if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');function i(){for(var i=[],s=0;s<arguments.length;s++)i.push(arguments[s]);var r=i.pop();if("function"!==typeof r)throw new TypeError("The last argument must be of type Function");var a=this,o=function(){return r.apply(a,arguments)};t.apply(this,i).then((function(t){e.nextTick(o,null,t)}),(function(t){e.nextTick(M,t,o)}))}return Object.setPrototypeOf(i,Object.getPrototypeOf(t)),Object.defineProperties(i,s(t)),i}}).call(this,i("5IsQ"))},"4kqU":function(e,t,i){"use strict";e.exports=i("z1Oi")(i("Yrgj"))},"5EA2":function(e){e.exports=JSON.parse('{"COMPRESSED_TYPE_INVALID":"compressed should be a boolean","EC_PRIVATE_KEY_TYPE_INVALID":"private key should be a Buffer","EC_PRIVATE_KEY_LENGTH_INVALID":"private key length is invalid","EC_PRIVATE_KEY_RANGE_INVALID":"private key range is invalid","EC_PRIVATE_KEY_TWEAK_ADD_FAIL":"tweak out of range or resulting private key is invalid","EC_PRIVATE_KEY_TWEAK_MUL_FAIL":"tweak out of range","EC_PRIVATE_KEY_EXPORT_DER_FAIL":"couldn\'t export to DER format","EC_PRIVATE_KEY_IMPORT_DER_FAIL":"couldn\'t import from DER format","EC_PUBLIC_KEYS_TYPE_INVALID":"public keys should be an Array","EC_PUBLIC_KEYS_LENGTH_INVALID":"public keys Array should have at least 1 element","EC_PUBLIC_KEY_TYPE_INVALID":"public key should be a Buffer","EC_PUBLIC_KEY_LENGTH_INVALID":"public key length is invalid","EC_PUBLIC_KEY_PARSE_FAIL":"the public key could not be parsed or is invalid","EC_PUBLIC_KEY_CREATE_FAIL":"private was invalid, try again","EC_PUBLIC_KEY_TWEAK_ADD_FAIL":"tweak out of range or resulting public key is invalid","EC_PUBLIC_KEY_TWEAK_MUL_FAIL":"tweak out of range","EC_PUBLIC_KEY_COMBINE_FAIL":"the sum of the public keys is not valid","ECDH_FAIL":"scalar was invalid (zero or overflow)","ECDSA_SIGNATURE_TYPE_INVALID":"signature should be a Buffer","ECDSA_SIGNATURE_LENGTH_INVALID":"signature length is invalid","ECDSA_SIGNATURE_PARSE_FAIL":"couldn\'t parse signature","ECDSA_SIGNATURE_PARSE_DER_FAIL":"couldn\'t parse DER signature","ECDSA_SIGNATURE_SERIALIZE_DER_FAIL":"couldn\'t serialize signature to DER format","ECDSA_SIGN_FAIL":"nonce generation function failed or private key is invalid","ECDSA_RECOVER_FAIL":"couldn\'t recover public key from signature","MSG32_TYPE_INVALID":"message should be a Buffer","MSG32_LENGTH_INVALID":"message length is invalid","OPTIONS_TYPE_INVALID":"options should be an Object","OPTIONS_DATA_TYPE_INVALID":"options.data should be a Buffer","OPTIONS_DATA_LENGTH_INVALID":"options.data length is invalid","OPTIONS_NONCEFN_TYPE_INVALID":"options.noncefn should be a Function","RECOVERY_ID_TYPE_INVALID":"recovery should be a Number","RECOVERY_ID_VALUE_INVALID":"recovery should have value between -1 and 4","TWEAK_TYPE_INVALID":"tweak should be a Buffer","TWEAK_LENGTH_INVALID":"tweak length is invalid"}')},"5Kmp":function(e,t,i){"use strict";const s=i("mZ7+"),{ExchangeError:r,InvalidAddress:a,ArgumentsRequired:o,InsufficientFunds:n,AuthenticationError:d,OrderNotFound:c,InvalidOrder:h,BadRequest:l,InvalidNonce:u,BadSymbol:f,OnMaintenance:p}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitfinex2",name:"Bitfinex",countries:["VG"],version:"v2",certified:!1,pro:!1,has:{CORS:!1,cancelAllOrders:!0,createDepositAddress:!0,createLimitOrder:!0,createMarketOrder:!0,createOrder:!0,cancelOrder:!0,deposit:!1,editOrder:!1,fetchDepositAddress:!0,fetchClosedOrders:!1,fetchFundingFees:!1,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!1,fetchOpenOrder:!0,fetchClosedOrder:!0,fetchOrderTrades:!0,fetchStatus:!0,fetchTickers:!0,fetchTradingFee:!1,fetchTradingFees:!1,fetchTransactions:!1,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","3h":"3h","6h":"6h","12h":"12h","1d":"1D","1w":"7D","2w":"14D","1M":"1M"},rateLimit:1500,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766244-e328a50c-5ed2-11e7-947b-041416579bb3.jpg",api:{v1:"https://api.bitfinex.com",public:"https://api-pub.bitfinex.com",private:"https://api.bitfinex.com"},www:"https://www.bitfinex.com",doc:["https://docs.bitfinex.com/v2/docs/","https://github.com/bitfinexcom/bitfinex-api-node"],fees:"https://www.bitfinex.com/fees"},api:{v1:{get:["symbols","symbols_details"]},public:{get:["conf/{config}","conf/pub:{action}:{object}","conf/pub:{action}:{object}:{detail}","conf/pub:map:{object}","conf/pub:map:{object}:{detail}","conf/pub:map:currency:{detail}","conf/pub:map:currency:sym","conf/pub:map:currency:label","conf/pub:map:currency:unit","conf/pub:map:currency:undl","conf/pub:map:currency:pool","conf/pub:map:currency:explorer","conf/pub:map:tx:method","conf/pub:list:{object}","conf/pub:list:{object}:{detail}","conf/pub:list:currency","conf/pub:list:pair:exchange","conf/pub:list:pair:margin","conf/pub:list:competitions","conf/pub:info:{object}","conf/pub:info:{object}:{detail}","conf/pub:info:pair","conf/pub:info:tx:status","conf/pub:fees","platform/status","tickers","ticker/{symbol}","trades/{symbol}/hist","book/{symbol}/{precision}","book/{symbol}/P0","book/{symbol}/P1","book/{symbol}/P2","book/{symbol}/P3","book/{symbol}/R0","stats1/{key}:{size}:{symbol}:{side}/{section}","stats1/{key}:{size}:{symbol}:{side}/last","stats1/{key}:{size}:{symbol}:{side}/hist","stats1/{key}:{size}:{symbol}/{section}","stats1/{key}:{size}:{symbol}/last","stats1/{key}:{size}:{symbol}/hist","stats1/{key}:{size}:{symbol}:long/last","stats1/{key}:{size}:{symbol}:long/hist","stats1/{key}:{size}:{symbol}:short/last","stats1/{key}:{size}:{symbol}:short/hist","candles/trade:{timeframe}:{symbol}/{section}","candles/trade:{timeframe}:{symbol}/last","candles/trade:{timeframe}:{symbol}/hist","status/{type}","status/deriv","liquidations/hist","rankings/{key}:{timeframe}:{symbol}/{section}","rankings/{key}:{timeframe}:{symbol}/hist"],post:["calc/trade/avg","calc/fx"]},private:{post:["auth/r/wallets","auth/r/wallets/hist","auth/r/orders","auth/r/orders/{symbol}","auth/w/order/submit","auth/w/order/update","auth/w/order/cancel","auth/w/order/multi","auth/w/order/cancel/multi","auth/r/orders/{symbol}/hist","auth/r/orders/hist","auth/r/order/{symbol}:{id}/trades","auth/r/trades/{symbol}/hist","auth/r/trades/hist","auth/r/ledgers/{currency}/hist","auth/r/ledgers/hist","auth/r/info/margin/{key}","auth/r/info/margin/base","auth/r/info/margin/sym_all","auth/r/positions","auth/w/position/claim","auth/r/positions/hist","auth/r/positions/audit","auth/w/deriv/collateral/set","auth/r/funding/offers","auth/r/funding/offers/{symbol}","auth/w/funding/offer/submit","auth/w/funding/offer/cancel","auth/w/funding/offer/cancel/all","auth/w/funding/close","auth/w/funding/auto","auth/w/funding/keep","auth/r/funding/offers/{symbol}/hist","auth/r/funding/offers/hist","auth/r/funding/loans","auth/r/funding/loans/hist","auth/r/funding/loans/{symbol}","auth/r/funding/loans/{symbol}/hist","auth/r/funding/credits","auth/r/funding/credits/hist","auth/r/funding/credits/{symbol}","auth/r/funding/credits/{symbol}/hist","auth/r/funding/trades/{symbol}/hist","auth/r/funding/trades/hist","auth/r/info/funding/{key}","auth/r/info/user","auth/r/logins/hist","auth/w/transfer","auth/w/deposit/address","auth/w/deposit/invoice","auth/w/withdraw","auth/r/movements/{currency}/hist","auth/r/movements/hist","auth/r/alerts","auth/w/alert/set","auth/w/alert/price:{symbol}:{price}/del","auth/w/alert/{type}:{symbol}:{price}/del","auth/calc/order/avail","auth/w/settings/set","auth/r/settings","auth/w/settings/del"]}},fees:{trading:{maker:.001,taker:.002},funding:{withdraw:{BTC:4e-4,BCH:1e-4,ETH:.00135,EOS:0,LTC:.001,OMG:.15097,IOT:0,NEO:0,ETC:.01,XRP:.02,ETP:.01,ZEC:.001,BTG:0,DASH:.01,XMR:1e-4,QTM:.01,EDO:.23687,DAT:9.8858,AVT:1.1251,SAN:.35977,USDT:5,SPK:16.971,BAT:1.1209,GNT:2.8789,SNT:9.0848,QASH:1.726,YYW:7.9464}}},options:{precision:"R0",exchangeTypes:{"EXCHANGE MARKET":"market","EXCHANGE LIMIT":"limit"},orderTypes:{market:"EXCHANGE MARKET",limit:"EXCHANGE LIMIT"},fiat:{USD:"USD",EUR:"EUR",JPY:"JPY",GBP:"GBP"}},exceptions:{exact:{10020:l,10100:d,10114:u,20060:p},broad:{address:a,"available balance is only":n,"not enough exchange balance":n,"Order not found":c,"symbol: invalid":f,"Invalid order":h}}})}isFiat(e){return e in this.options.fiat}getCurrencyId(e){return"f"+e}async fetchStatus(e={}){const t=await this.publicGetPlatformStatus(e),i=1===this.safeValue(t,0)?"ok":"maintenance";return this.status=this.extend(this.status,{status:i,updated:this.milliseconds()}),this.status}async fetchMarkets(e={}){const t=await this.v1GetSymbolsDetails(e),i=[];for(let s=0;s<t.length;s++){const e=t[s];let r=this.safeStringUpper(e,"pair"),a=void 0,o=void 0;if(r.indexOf(":")>=0){const e=r.split(":");a=e[0],o=e[1]}else a=r.slice(0,3),o=r.slice(3,6);const n=this.safeCurrencyCode(a),d=this.safeCurrencyCode(o),c=n+"/"+d;r="t"+r,a=this.getCurrencyId(a),o=this.getCurrencyId(o);const h={price:this.safeInteger(e,"price_precision"),amount:this.safeInteger(e,"price_precision")},l={amount:{min:this.safeFloat(e,"minimum_order_size"),max:this.safeFloat(e,"maximum_order_size")},price:{min:Math.pow(10,-h.price),max:Math.pow(10,h.price)}};l.cost={min:l.amount.min*l.price.min,max:void 0},i.push({id:r,symbol:c,base:n,quote:d,baseId:a,quoteId:o,active:!0,precision:h,limits:l,info:e,swap:!1,spot:!1,futures:!1})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostAuthRWallets(e),i=this.safeString(e,"type","exchange"),s={info:t};for(let r=0;r<t.length;r++){const e=t[r],a=e[0];let o=e[1];const n=e[2],d=e[4];if(a===i){"t"===o[0]&&(o=o.slice(1));const e=this.safeCurrencyCode(o),t=this.account();t.total=n,d?(t.free=d,t.used=t.total-t.free):0===d?(t.free=0,t.used=n):t.free=n,s[e]=t}}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.safeValue(this.options,"precision","R0"),r={symbol:this.marketId(e),precision:s};void 0!==t&&(r.len=t);const a=this.extend(r,i),o=await this.publicGetBookSymbolPrecision(a),n=this.milliseconds(),d={bids:[],asks:[],timestamp:n,datetime:this.iso8601(n),nonce:void 0},c="R0"===a.precision?1:0;for(let h=0;h<o.length;h++){const e=o[h],t=e[c],i=Math.abs(e[2]);d[e[2]>0?"bids":"asks"].push([t,i])}return d.bids=this.sortBy(d.bids,0,!0),d.asks=this.sortBy(d.asks,0),d}parseTicker(e,t){const i=this.milliseconds();let s=void 0;void 0!==t&&(s=t.symbol);const r=e.length,a=e[r-4];return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:e[r-2],low:e[r-1],bid:e[r-10],bidVolume:void 0,ask:e[r-8],askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:e[r-6],percentage:100*e[r-5],average:void 0,baseVolume:e[r-3],quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i={};if(void 0!==e){const t=this.marketIds(e);i.symbols=t.join(",")}else i.symbols="ALL";const s=await this.publicGetTickers(this.extend(i,t)),r={};for(let a=0;a<s.length;a++){const e=s[a],t=e[0];if(t in this.markets_by_id){const i=this.markets_by_id[t];r[i.symbol]=this.parseTicker(e,i)}}return r}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetTickerSymbol(this.extend(s,t));return this.parseTicker(r,i)}parseSymbol(e){if(void 0===e)return e;let t=void 0,i=void 0;if((e=e.replace("t","")).indexOf(":")>=0){const s=e.split(":");t=s[0],i=s[1]}else t=e.slice(0,3),i=e.slice(3,6);return this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(i)}parseTrade(e,t){const i=e.length>5,s=e[0].toString();let r=e[i?4:2],a=void 0;const o=e[i?5:3];let n=void 0,d=void 0,c=void 0,h=void 0,l=void 0,u=void 0;const f=e[i?2:1];if(i){const i=e[1];u=i in this.markets_by_id?(t=this.markets_by_id[i]).symbol:this.parseSymbol(i),d=e[3].toString(),c=1===e[8]?"maker":"taker";let s=e[9];const r=this.safeCurrencyCode(e[10]);if(void 0!==s){if(s=-s,u in this.markets)s=this.feeToPrecision(u,s);else{const e="f"+r;if(e in this.currencies_by_id){const t=this.currencies_by_id[e];s=this.currencyToPrecision(t.code,s)}}l={cost:parseFloat(s),currency:r}}const a=e[6];h=this.safeString(this.options.exchangeTypes,a)}return void 0===u&&void 0!==t&&(u=t.symbol),void 0!==r&&(n=r<0?"sell":"buy",r=Math.abs(r),void 0===a&&void 0!==o&&(a=r*o)),{id:s,timestamp:f,datetime:this.iso8601(f),symbol:u,order:d,side:n,type:h,takerOrMaker:c,price:o,amount:r,cost:a,fee:l,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e);let a="-1";const o={symbol:r.id};void 0!==t&&(o.start=t,a="1"),void 0!==i&&(o.limit=i),o.sort=a;const n=await this.publicGetTradesSymbolHist(this.extend(o,s)),d=this.sortBy(n,1);return this.parseTrades(d,r,void 0,i)}async fetchOHLCV(e,t="1m",i,s=100,r={}){await this.loadMarkets();const a=this.market(e);void 0===s&&(s=100),void 0===i&&(i=this.milliseconds()-this.parseTimeframe(t)*s*1e3);const o={symbol:a.id,timeframe:this.timeframes[t],sort:1,start:i,limit:s},n=await this.publicGetCandlesTradeTimeframeSymbolHist(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}parseOrderStatus(e){return this.safeString({ACTIVE:"open","PARTIALLY FILLED":"open",EXECUTED:"closed",CANCELED:"canceled","INSUFFICIENT MARGIN":"canceled",RSN_DUST:"rejected",RSN_PAUSE:"rejected"},e,e)}parseOrder(e,t){const i=this.safeString(e,0);let s=void 0;const r=this.safeString(e,3);r in this.markets_by_id?t=this.markets_by_id[r]:s=this.parseSymbol(r),void 0===s&&void 0!==t&&(s=t.symbol);const a=this.safeInteger(e,5),o=Math.abs(this.safeFloat(e,6)),n=Math.abs(this.safeFloat(e,7)),d=n-o,c=e[7]<0?"sell":"buy",h=this.safeString(e,8),l=this.safeString(this.safeValue(this.options,"exchangeTypes"),h);let u=void 0;const f=this.safeString(e,13);if(void 0!==f){const e=f.split(" @ ");u=this.parseOrderStatus(this.safeString(e,0))}const p=this.safeFloat(e,16),m=this.safeFloat(e,17),y=p*d;return{info:e,id:i,clientOrderId:this.safeString(e,2),timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:s,type:l,side:c,price:p,amount:n,cost:y,average:m,filled:d,remaining:o,status:u,fee:void 0,trades:void 0}}async createOrder(e,t,i,s,a,o={}){await this.loadMarkets();const n=this.market(e),d=this.safeValue(this.options,"orderTypes",{}),c=this.safeString(d,t,t);s="sell"===i?-s:s;const h={symbol:n.id,type:c,amount:this.numberToString(s)};"market"!==t&&(h.price=this.numberToString(a));const l=await this.privatePostAuthWOrderSubmit(this.extend(h,o));if("SUCCESS"!==this.safeString(l,6)){const e=l[5],t=l[7];throw new r(this.id+" "+l[6]+": "+t+" (#"+e+")")}const u=this.safeValue(l,4,[]),f=this.safeValue(u,0);return this.parseOrder(f,n)}async cancelAllOrders(e,t={}){const i=await this.privatePostAuthWOrderCancelMulti(this.extend({all:1},t)),s=this.safeValue(i,4,[]);return this.parseOrders(s)}async cancelOrder(e,t,i={}){const s=this.safeValue(i,"cid");let r=void 0;if(void 0!==s){const e=this.safeValue(i,"cidDate");if(void 0===e)throw new h(this.id+" canceling an order by client order id ('cid') requires both 'cid' and 'cid_date' ('YYYY-MM-DD')");r={cid:s,cid_date:e}}else r={id:parseInt(e)};const a=await this.privatePostAuthWOrderCancel(this.extend(r,i)),o=this.safeValue(a,4);return this.parseOrder(o)}async fetchOpenOrder(e,t,i={}){const s={id:[parseInt(e)]},r=await this.fetchOpenOrders(t,void 0,void 0,this.extend(s,i)),a=this.safeValue(r,0);if(void 0===a)throw new c(this.id+" order "+e+" not found");return a}async fetchClosedOrder(e,t,i={}){const s={id:[parseInt(e)]},r=await this.fetchClosedOrders(t,void 0,void 0,this.extend(s,i)),a=this.safeValue(r,0);if(void 0===a)throw new c(this.id+" order "+e+" not found");return a}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0,o=void 0;return void 0===e?o=await this.privatePostAuthROrders(this.extend(r,s)):(a=this.market(e),r.symbol=a.id,o=await this.privatePostAuthROrdersSymbol(this.extend(r,s))),this.parseOrders(o,a,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0,o=void 0;return void 0===e?o=await this.privatePostAuthROrdersHist(this.extend(r,s)):(a=this.market(e),r.symbol=a.id,o=await this.privatePostAuthROrdersSymbolHist(this.extend(r,s))),void 0!==t&&(r.start=t),void 0!==i&&(r.limit=i),this.parseOrders(o,a,t,i)}async fetchOrderTrades(e,t,i,s,r={}){if(void 0===t)throw new o(this.id+" fetchOrderTrades() requires a symbol argument");await this.loadMarkets();const a=this.market(t),n={id:parseInt(e),symbol:a.id},d=await this.privatePostAuthROrderSymbolIdTrades(this.extend(n,r));return this.parseTrades(d,a,i,s)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={end:this.milliseconds()};void 0!==t&&(a.start=t),void 0!==i&&(a.limit=i);let o="privatePostAuthRTradesHist";void 0!==e&&(r=this.market(e),a.symbol=r.id,o="privatePostAuthRTradesSymbolHist");const n=await this[o](this.extend(a,s));return this.parseTrades(n,r,t,i)}async createDepositAddress(e,t={}){await this.loadMarkets();return await this.fetchDepositAddress(e,this.extend({op_renew:1},t))}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={method:this.getCurrencyName(e),wallet:"exchange",op_renew:0},s=await this.privatePostAuthWDepositAddress(this.extend(i,t)),r=this.safeValue(s,4,[]),a=this.safeString(r,5),o=void 0===a?this.safeString(r,4):a,n=void 0===a?void 0:this.safeString(r,4);return this.checkAddress(o),{currency:e,address:o,tag:n,info:s}}parseTransaction(e,t){const i=this.safeValue(e,4,[]),s=this.safeInteger(e,0);let r=void 0;void 0!==t&&(r=t.code);let a=this.safeFloat(i,8);void 0!==a&&(a=Math.abs(a));const o=this.safeFloat(i,5);let n=this.safeValue(i,0),d="ok";return 0===n&&(n=void 0,d="failed"),{info:e,id:n,txid:void 0,timestamp:s,datetime:this.iso8601(s),address:void 0,tag:this.safeString(i,3),type:"withdrawal",amount:o,currency:r,status:d,updated:void 0,fee:{currency:r,cost:a,rate:void 0}}}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a=this.currency(e),o={method:this.getCurrencyName(e),wallet:"exchange",amount:this.numberToString(t),address:i};void 0!==s&&(o.payment_id=s);const n=await this.privatePostAuthWWithdraw(this.extend(o,r)),d=this.safeString(n,7);"success"!==d&&this.throwBroadlyMatchedException(this.exceptions.broad,d,d);const c=this.parseTransaction(n,a);return this.extend(c,{address:i})}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));o="v1"===t?t+o:this.version+o;let d=this.urls.api[t]+"/"+o;if("public"===t&&Object.keys(n).length&&(d+="?"+this.urlencode(n)),"private"===t){this.checkRequiredCredentials();const e=this.nonce().toString(),t="/api/"+o+e+(a=this.json(n)),i=this.hmac(this.encode(t),this.encode(this.secret),"sha384");r={"bfx-nonce":e,"bfx-apikey":this.apiKey,"bfx-signature":i,"Content-Type":"application/json"}}return{url:d,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){const d=await this.fetch2(e,t,i,s,a,o);if(d){if("message"in d){if(d.message.indexOf("not enough exchange balance")>=0)throw new n(this.id+" "+this.json(d));throw new r(this.id+" "+this.json(d))}return d}if(""===d)throw new r(this.id+" returned empty response");return d}handleErrors(e,t,i,s,a,o,n,d,c){if(500===e){const e=this.numberToString(n[1]),t=n[2],i=this.id+" "+t;throw this.throwExactlyMatchedException(this.exceptions.exact,e,i),this.throwExactlyMatchedException(this.exceptions.exact,t,i),this.throwBroadlyMatchedException(this.exceptions.broad,t,i),new r(this.id+" "+t+" (#"+e+")")}}}},"6IP2":function(e,t,i){"use strict";const s=i("OjXq"),{BadSymbol:r,ExchangeError:a,InsufficientFunds:o,OrderNotFound:n,InvalidOrder:d,NullResponse:c}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"hitbtc",name:"HitBTC",countries:["HK"],rateLimit:1500,version:"1",has:{CORS:!1,fetchTrades:!0,fetchTickers:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchOrderTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766555-8eaec20e-5edc-11e7-9c5b-6dc69fc42f5e.jpg",api:"https://api.hitbtc.com",www:"https://hitbtc.com",referral:"https://hitbtc.com/?ref_id=5a5d39a65d466",doc:"https://github.com/hitbtc-com/hitbtc-api/blob/master/APIv1.md",fees:["https://hitbtc.com/fees-and-limits","https://support.hitbtc.com/hc/en-us/articles/115005148605-Fees-and-limits"]},api:{public:{get:["{symbol}/orderbook","{symbol}/ticker","{symbol}/trades","{symbol}/trades/recent","symbols","ticker","time"]},trading:{get:["balance","orders/active","orders/recent","order","trades/by/order","trades"],post:["new_order","cancel_order","cancel_orders"]},payment:{get:["balance","address/{currency}","transactions","transactions/{transaction}"],post:["transfer_to_trading","transfer_to_main","address/{currency}","payout"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.07/100,taker:.07/100},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001,BCC:.0018,ETH:.00215,BCH:.0018,USDT:100,DASH:.03,BTG:5e-4,LTC:.003,ZEC:1e-4,XMR:.09,"1ST":.84,ADX:5.7,AE:6.7,AEON:.01006,AIR:565,AMP:9,ANT:6.7,ARDR:1,ARN:18.5,ART:26,ATB:4e-4,ATL:27,ATM:504,ATS:860,AVT:1.9,BAS:113,BCN:.1,"DAO.Casino":124,BKB:46,BMC:32,BMT:100,BNT:2.57,BQX:4.7,BTM:40,BTX:.04,BUS:.004,CCT:115,CDT:100,CDX:30,CFI:61,CLD:.88,CND:574,CNX:.04,COSS:65,CSNO:16,CTR:15,CTX:146,CVC:8.46,DBIX:.0168,DCN:12e4,DCT:.02,DDF:342,DENT:6240,DGB:.4,DGD:.01,DICE:.32,DLT:.26,DNT:.21,DOGE:2,DOV:34,DRPU:24,DRT:240,DSH:.017,EBET:84,EBTC:20,EBTCOLD:6.6,ECAT:14,EDG:2,EDO:2.9,ELE:.00172,ELM:.004,EMC:.03,EMGO:14,ENJ:163,EOS:1.5,ERO:34,ETBS:15,ETC:.002,ETP:.004,EVX:5.4,EXN:456,FRD:65,FUEL:123.00105,FUN:202.9598309,FYN:1.849,FYP:66.13,GNO:.0034,GUP:4,GVT:1.2,HAC:144,HDG:7,HGT:1082,HPC:.4,HVN:120,ICN:.55,ICO:34,ICOS:.35,IND:76,INDI:5913,ITS:15.0012,IXT:11,KBR:143,KICK:112,LA:41,LAT:1.44,LIFE:13e3,LRC:27,LSK:.3,LUN:.34,MAID:5,MANA:143,MCAP:5.44,MIPS:43,MNE:1.33,MSP:121,MTH:92,MYB:3.9,NDC:165,NEBL:.04,NET:3.96,NTO:998,NXC:13.39,NXT:3,OAX:15,ODN:.004,OMG:2,OPT:335,ORME:2.8,OTN:.57,PAY:3.1,PIX:96,PLBT:.33,PLR:114,PLU:.87,POE:784,POLL:3.5,PPT:2,PRE:32,PRG:39,PRO:41,PRS:60,PTOY:.5,QAU:63,QCN:.03,QTUM:.04,QVT:64,REP:.02,RKC:15,RVT:14,SAN:2.24,SBD:.03,SCL:2.6,SISA:1640,SKIN:407,SMART:.4,SMS:.0375,SNC:36,SNGLS:4,SNM:48,SNT:233,STEEM:.01,STRAT:.01,STU:14,STX:11,SUB:17,SUR:3,SWT:.51,TAAS:.91,TBT:2.37,TFL:15,TIME:.03,TIX:7.1,TKN:1,TKR:84,TNT:90,TRST:1.6,TRX:1395,UET:480,UGT:15,VEN:14,VERI:.037,VIB:50,VIBE:145,VOISE:618,WEALTH:.0168,WINGS:2.4,WTC:.75,XAUR:3.23,XDN:.01,XEM:15,XUC:.9,YOYOW:140,ZAP:24,ZRX:23,ZSC:191},deposit:{BTC:0,ETH:0,BCH:0,USDT:0,BTG:0,LTC:0,ZEC:0,XMR:0,"1ST":0,ADX:0,AE:0,AEON:0,AIR:0,AMP:0,ANT:0,ARDR:0,ARN:0,ART:0,ATB:0,ATL:0,ATM:0,ATS:0,AVT:0,BAS:0,BCN:0,"DAO.Casino":0,BKB:0,BMC:0,BMT:0,BNT:0,BQX:0,BTM:0,BTX:0,BUS:0,CCT:0,CDT:0,CDX:0,CFI:0,CLD:0,CND:0,CNX:0,COSS:0,CSNO:0,CTR:0,CTX:0,CVC:0,DBIX:0,DCN:0,DCT:0,DDF:0,DENT:0,DGB:0,DGD:0,DICE:0,DLT:0,DNT:0,DOGE:0,DOV:0,DRPU:0,DRT:0,DSH:0,EBET:0,EBTC:0,EBTCOLD:0,ECAT:0,EDG:0,EDO:0,ELE:0,ELM:0,EMC:0,EMGO:0,ENJ:0,EOS:0,ERO:0,ETBS:0,ETC:0,ETP:0,EVX:0,EXN:0,FRD:0,FUEL:0,FUN:0,FYN:0,FYP:0,GNO:0,GUP:0,GVT:0,HAC:0,HDG:0,HGT:0,HPC:0,HVN:0,ICN:0,ICO:0,ICOS:0,IND:0,INDI:0,ITS:0,IXT:0,KBR:0,KICK:0,LA:0,LAT:0,LIFE:0,LRC:0,LSK:0,LUN:0,MAID:0,MANA:0,MCAP:0,MIPS:0,MNE:0,MSP:0,MTH:0,MYB:0,NDC:0,NEBL:0,NET:0,NTO:0,NXC:0,NXT:0,OAX:0,ODN:0,OMG:0,OPT:0,ORME:0,OTN:0,PAY:0,PIX:0,PLBT:0,PLR:0,PLU:0,POE:0,POLL:0,PPT:0,PRE:0,PRG:0,PRO:0,PRS:0,PTOY:0,QAU:0,QCN:0,QTUM:0,QVT:0,REP:0,RKC:0,RVT:0,SAN:0,SBD:0,SCL:0,SISA:0,SKIN:0,SMART:0,SMS:0,SNC:0,SNGLS:0,SNM:0,SNT:0,STEEM:0,STRAT:0,STU:0,STX:0,SUB:0,SUR:0,SWT:0,TAAS:0,TBT:0,TFL:0,TIME:0,TIX:0,TKN:0,TKR:0,TNT:0,TRST:0,TRX:0,UET:0,UGT:0,VEN:0,VERI:0,VIB:0,VIBE:0,VOISE:0,WEALTH:0,WINGS:0,WTC:0,XAUR:0,XDN:0,XEM:0,XUC:0,YOYOW:0,ZAP:0,ZRX:0,ZSC:0}}},commonCurrencies:{BET:"DAO.Casino",CAT:"BitClave",CPT:"Cryptaur",DRK:"DASH",EMGO:"MGO",GET:"Themis",HSR:"HC",LNC:"LinkerCoin",PLA:"PlayChip",UNC:"Unigame",USD:"USDT",XBT:"BTC"},exceptions:{exact:{2001:r},broad:{}},options:{defaultTimeInForce:"FOK"}})}async fetchMarkets(e={}){const t=await this.publicGetSymbols(e),i=this.safeValue(t,"symbols"),s=[];for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"symbol"),a=this.safeString(e,"commodity"),o=this.safeString(e,"currency"),n=this.safeFloat(e,"lot"),d=this.safeFloat(e,"step"),c=this.safeCurrencyCode(a),h=this.safeCurrencyCode(o),l=c+"/"+h;s.push({info:e,id:t,symbol:l,base:c,quote:h,baseId:a,quoteId:o,lot:n,step:d,active:!0,maker:this.safeFloat(e,"provideLiquidityRate"),taker:this.safeFloat(e,"takeLiquidityRate"),precision:{amount:this.precisionFromString(e.lot),price:this.precisionFromString(e.step)},limits:{amount:{min:n,max:void 0},price:{min:d,max:void 0},cost:{min:void 0,max:void 0}}})}return s}async fetchBalance(e={}){await this.loadMarkets();let t=this.safeString(e,"type","trading");t+="GetBalance";const i=this.omit(e,"type"),s=await this[t](i),r=this.safeValue(s,"balance",[]),a={info:s};for(let o=0;o<r.length;o++){const e=r[o],t=this.safeString(e,"currency_code"),i=this.safeCurrencyCode(t),s=this.account();s.free=this.safeFloat2(e,"cash","balance"),s.used=this.safeFloat(e,"reserved"),a[i]=s}return this.parseBalance(a)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=await this.publicGetSymbolOrderbook(this.extend({symbol:this.marketId(e)},i));return this.parseOrderBook(s)}parseTicker(e,t){const i=this.safeInteger(e,"timestamp");let s=void 0;t&&(s=t.symbol);const r=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"volume_quote"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t),s=Object.keys(i),r={};for(let a=0;a<s.length;a++){const e=s[a],t=this.markets_by_id[e],o=t.symbol,n=i[e];r[o]=this.parseTicker(n,t)}return r}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetSymbolTicker(this.extend(s,t));if("message"in r)throw new a(this.id+" "+r.message);return this.parseTicker(r,i)}parseTrade(e,t){return Array.isArray(e)?this.parsePublicTrade(e,t):this.parseOrderTrade(e,t)}parsePublicTrade(e,t){let i=void 0;void 0!==t&&(i=t.symbol);let s=void 0;e.length>4&&(s=e[4]);const r=parseFloat(e[1]),a=parseFloat(e[2]),o=r*a;return{info:e,id:e[0].toString(),timestamp:e[3],datetime:this.iso8601(e[3]),symbol:i,type:void 0,side:s,order:void 0,takerOrMaker:void 0,price:r,amount:a,cost:o,fee:void 0}}parseOrderTrade(e,t){let i=void 0;void 0!==t&&(i=t.symbol);let s=this.safeFloat(e,"execQuantity");t&&(s*=t.lot);const r=this.safeFloat(e,"execPrice"),a=r*s,o={cost:this.safeFloat(e,"fee"),currency:void 0,rate:void 0},n=this.safeInteger(e,"timestamp"),d=this.safeString(e,"tradeId"),c=this.safeString(e,"clientOrderId"),h=this.safeString(e,"side");return{info:e,id:d,order:c,timestamp:n,datetime:this.iso8601(n),symbol:i,type:void 0,side:h,price:r,amount:s,cost:a,fee:o}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==t&&(a.by="ts",a.from=t),void 0!==i&&(a.max_results=i);const o=await this.publicGetSymbolTrades(this.extend(a,s));return this.parseTrades(o.trades,r,t,i)}async createOrder(e,t,i,s,r,o={}){await this.loadMarkets();const n=this.market(e),c=parseFloat(s)/n.lot,h=Math.round(c),l=c-h;if(Math.abs(l)>n.step)throw new a(this.id+" order amount should be evenly divisible by lot unit size of "+n.lot.toString());const u={clientOrderId:this.milliseconds().toString(),symbol:n.id,side:i,quantity:h.toString(),type:t};"limit"===t?u.price=this.priceToPrecision(e,r):u.timeInForce=this.options.defaultTimeInForce;const f=await this.tradingPostNewOrder(this.extend(u,o)),p=this.parseOrder(f.ExecutionReport,n);if("rejected"===p.status)throw new d(this.id+" order was rejected by the exchange "+this.json(p));return p}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={clientOrderId:e};return await this.tradingPostCancelOrder(this.extend(s,i))}parseOrderStatus(e){return this.safeString({new:"open",partiallyFilled:"open",filled:"closed",canceled:"canceled",rejected:"rejected",expired:"expired"},e)}parseOrder(e,t){let i=this.safeInteger(e,"lastTimestamp");void 0===i&&(i=this.safeInteger(e,"timestamp"));let s=void 0;void 0===t&&(t=this.markets_by_id[e.symbol]);const r=this.parseOrderStatus(this.safeString(e,"orderStatus"));let a=this.safeFloat(e,"orderPrice");a=this.safeFloat(e,"price",a),a=this.safeFloat(e,"avgPrice",a);let o=this.safeFloat(e,"orderQuantity");o=this.safeFloat(e,"quantity",o);let n=this.safeFloat(e,"quantityLeaves");n=this.safeFloat(e,"leavesQuantity",n);let d=void 0,c=void 0;const h=void 0!==o,l=void 0!==n;if(void 0!==t)s=t.symbol,h&&(o*=t.lot),l&&(n*=t.lot);else{const i=this.safeString(e,"symbol");i in this.markets_by_id&&(t=this.markets_by_id[i])}h&&l&&(d=o-n,void 0!==a&&(c=a*d));const u=this.safeFloat(e,"fee");let f=void 0;void 0!==t&&(s=t.symbol,f=t.quote);const p={cost:u,currency:f,rate:void 0},m=this.safeString(e,"clientOrderId"),y=this.safeString(e,"type"),b=this.safeString(e,"side");return{id:m,clientOrderId:m,info:e,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:r,symbol:s,type:y,side:b,price:a,cost:c,amount:o,filled:d,remaining:n,fee:p}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={clientOrderId:e},r=await this.tradingGetOrder(this.extend(s,i));if(r.orders[0])return this.parseOrder(r.orders[0]);throw new n(this.id+" fetchOrder() error: "+this.response)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={sort:"desc",statuses:["new","partiallyFiiled"].join(",")};void 0!==e&&(r=this.market(e),a.symbols=r.id);const o=await this.tradingGetOrdersActive(this.extend(a,s)),n=this.safeValue(o,"orders");if(void 0===n)throw new c(this.id+" fetchOpenOrders() received a null response from the exchange: "+this.json(o));return this.parseOrders(n,r,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={sort:"desc",statuses:["filled","canceled","rejected","expired"].join(","),max_results:1e3};void 0!==e&&(r=this.market(e),a.symbols=r.id);const o=await this.tradingGetOrdersRecent(this.extend(a,s)),n=this.safeValue(o,"orders");if(void 0===n)throw new c(this.id+" fetchClosedOrders() received a null response from the exchange: "+this.json(o));return this.parseOrders(n,r,t,i)}async fetchOrderTrades(e,t,i,s,r={}){await this.loadMarkets();let a=void 0;void 0!==t&&(a=this.market(t));const o={clientOrderId:e},n=await this.tradingGetTradesByOrder(this.extend(o,r));return this.parseTrades(n.trades,a,i,s)}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a={currency_code:this.currency(e).id,amount:t,address:i};void 0!==s&&(a.extra_id=s);const o=await this.paymentPostPayout(this.extend(a,r));return{info:o,id:o.transaction}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="/api/"+this.version+"/"+t+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();const e={nonce:this.nonce(),apikey:this.apiKey};n=this.extend(e,n),o+="GET"===i?"?"+this.urlencode(n):"?"+this.urlencode(e);let t=o;"POST"===i&&Object.keys(n).length&&(t+=a=this.urlencode(n)),r={"Content-Type":"application/x-www-form-urlencoded","X-Signature":this.hmac(this.encode(t),this.encode(this.secret),"sha512").toLowerCase()}}return o=this.urls.api+o,{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},r,n){const d=await this.fetch2(e,t,i,s,r,n);if("code"in d){if("ExecutionReport"in d&&"orderExceedsLimit"===d.ExecutionReport.orderRejectReason)throw new o(this.id+" "+this.json(d));throw new a(this.id+" "+this.json(d))}return d}handleErrors(e,t,i,s,r,o,n,d,c){if(!n)return;const h=this.safeValue(n,"error");if(h){const e=this.safeValue(h,"code"),t=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,e,t),this.throwBroadlyMatchedException(this.exceptions.broad,h,t),new a(t)}}}},"6kI6":function(e,t,i){"use strict";const s=i("OjXq"),{AuthenticationError:r,ExchangeError:a,PermissionDenied:o,ExchangeNotAvailable:n,InvalidOrder:d,OrderNotFound:c,InsufficientFunds:h,ArgumentsRequired:l,BadSymbol:u,BadRequest:f,RequestTimeout:p}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"huobipro",name:"Huobi Pro",countries:["CN"],rateLimit:2e3,userAgent:this.userAgents.chrome39,version:"v1",accounts:void 0,accountsById:void 0,hostname:"api.huobi.pro",pro:!0,has:{CORS:!1,fetchTickers:!0,fetchDepositAddress:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchTradingLimits:!0,fetchMyTrades:!0,withdraw:!0,fetchCurrencies:!0,fetchDeposits:!0,fetchWithdrawals:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"60min","4h":"4hour","1d":"1day","1w":"1week","1M":"1mon","1y":"1year"},urls:{test:{market:"https://api.testnet.huobi.pro",public:"https://api.testnet.huobi.pro",private:"https://api.testnet.huobi.pro"},logo:"https://user-images.githubusercontent.com/1294454/76137448-22748a80-604e-11ea-8069-6e389271911d.jpg",api:{market:"https://{hostname}",public:"https://{hostname}",private:"https://{hostname}",v2Public:"https://{hostname}",v2Private:"https://{hostname}"},www:"https://www.huobi.pro",referral:"https://www.huobi.co/en-us/topic/invited/?invite_code=rwrd3",doc:"https://huobiapi.github.io/docs/spot/v1/cn/",fees:"https://www.huobi.pro/about/fee/"},api:{v2Public:{get:["reference/currencies"]},v2Private:{get:["account/withdraw/quota","account/deposit/address","reference/transact-fee-rate"],post:["sub-user/management"]},market:{get:["history/kline","detail/merged","depth","trade","history/trade","detail","tickers"]},public:{get:["common/symbols","common/currencys","common/timestamp","common/exchange","settings/currencys"]},private:{get:["account/accounts","account/accounts/{id}/balance","account/accounts/{sub-uid}","account/history","cross-margin/loan-info","fee/fee-rate/get","order/openOrders","order/orders","order/orders/{id}","order/orders/{id}/matchresults","order/orders/getClientOrder","order/history","order/matchresults","dw/withdraw-virtual/addresses","query/deposit-withdraw","margin/loan-orders","margin/accounts/balance","points/actions","points/orders","subuser/aggregate-balance","stable-coin/exchange_rate","stable-coin/quote"],post:["futures/transfer","order/batch-orders","order/orders/place","order/orders/submitCancelClientOrder","order/orders/batchCancelOpenOrders","order/orders","order/orders/{id}/place","order/orders/{id}/submitcancel","order/orders/batchcancel","dw/balance/transfer","dw/withdraw/api/create","dw/withdraw-virtual/create","dw/withdraw-virtual/{id}/place","dw/withdraw-virtual/{id}/cancel","dw/transfer-in/margin","dw/transfer-out/margin","margin/orders","margin/orders/{id}/repay","stable-coin/exchange","subuser/transfer"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002}},exceptions:{exact:{"api-not-support-temp-addr":o,timeout:p,"gateway-internal-error":n,"account-frozen-balance-insufficient-error":h,"invalid-amount":d,"order-limitorder-amount-min-error":d,"order-marketorder-amount-min-error":d,"order-limitorder-price-min-error":d,"order-limitorder-price-max-error":d,"order-orderstate-error":c,"order-queryorder-invalid":c,"order-update-error":n,"api-signature-check-failed":r,"api-signature-not-valid":r,"base-record-invalid":c,"invalid symbol":u,"invalid-parameter":f,"base-symbol-trade-disabled":u}},options:{fetchOrdersByStatesMethod:"private_get_order_orders",fetchOpenOrdersMethod:"fetch_open_orders_v1",createMarketBuyOrderRequiresPrice:!0,fetchMarketsMethod:"publicGetCommonSymbols",fetchBalanceMethod:"privateGetAccountAccountsIdBalance",createOrderMethod:"privatePostOrderOrdersPlace",language:"en-US"},commonCurrencies:{GET:"Themis",HOT:"Hydro Protocol"}})}async fetchTradingLimits(e,t={}){await this.loadMarkets(),void 0===e&&(e=this.symbols);const i={};for(let s=0;s<e.length;s++){const r=e[s];i[r]=await this.fetchTradingLimitsById(this.marketId(r),t)}return i}async fetchTradingLimitsById(e,t={}){const i={symbol:e},s=await this.publicGetCommonExchange(this.extend(i,t));return this.parseTradingLimits(this.safeValue(s,"data",{}))}parseTradingLimits(e,t,i={}){return{info:e,limits:{amount:{min:this.safeFloat(e,"limit-order-must-greater-than"),max:this.safeFloat(e,"limit-order-must-less-than")}}}}async fetchMarkets(e={}){const t=this.options.fetchMarketsMethod,i=await this[t](e),s=this.safeValue(i,"data");if(s.length<1)throw new a(this.id+" publicGetCommonSymbols returned empty response: "+this.json(s));const r=[];for(let a=0;a<s.length;a++){const e=s[a],t=this.safeString(e,"base-currency"),i=this.safeString(e,"quote-currency"),o=t+i,n=this.safeCurrencyCode(t),d=this.safeCurrencyCode(i),c=n+"/"+d,h={amount:e["amount-precision"],price:e["price-precision"]},l="OMG"===n?0:.002,u="OMG"===n?0:.002,f=this.safeFloat(e,"min-order-amt",Math.pow(10,-h.amount)),p=this.safeFloat(e,"max-order-amt"),m=this.safeFloat(e,"min-order-value",0),y="online"===this.safeString(e,"state");r.push({id:o,symbol:c,base:n,quote:d,baseId:t,quoteId:i,active:y,precision:h,taker:u,maker:l,limits:{amount:{min:f,max:p},price:{min:Math.pow(10,-h.price),max:void 0},cost:{min:m,max:void 0}},info:e})}return r}parseTicker(e,t){let i=void 0;void 0!==t&&(i=t.symbol);const s=this.safeInteger(e,"ts");let r=void 0,a=void 0,o=void 0,n=void 0;"bid"in e&&Array.isArray(e.bid)&&(r=this.safeFloat(e.bid,0),o=this.safeFloat(e.bid,1)),"ask"in e&&Array.isArray(e.ask)&&(a=this.safeFloat(e.ask,0),n=this.safeFloat(e.ask,1));const d=this.safeFloat(e,"open"),c=this.safeFloat(e,"close");let h=void 0,l=void 0,u=void 0;void 0!==d&&void 0!==c&&(h=c-d,u=this.sum(d,c)/2,void 0!==c&&c>0&&(l=h/d*100));const f=this.safeFloat(e,"amount"),p=this.safeFloat(e,"vol");let m=void 0;return void 0!==f&&void 0!==p&&f>0&&(m=p/f),{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:r,bidVolume:o,ask:a,askVolume:n,vwap:m,open:d,close:c,last:c,previousClose:void 0,change:h,percentage:l,average:u,baseVolume:f,quoteVolume:p,info:e}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id,type:"step0"},r=await this.marketGetDepth(this.extend(s,i));if("tick"in r){if(!r.tick)throw new a(this.id+" fetchOrderBook() returned empty response: "+this.json(r));const e=this.safeValue(r,"tick"),t=this.safeInteger(e,"ts",this.safeInteger(r,"ts")),i=this.parseOrderBook(e,t);return i.nonce=this.safeInteger(e,"version"),i}throw new a(this.id+" fetchOrderBook() returned unrecognized response: "+this.json(r))}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.marketGetDetailMerged(this.extend(s,t)),a=this.parseTicker(r.tick,i),o=this.safeValue(r,"ts");return a.timestamp=o,a.datetime=this.iso8601(o),a}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.marketGetTickers(t),s=this.safeValue(i,"data"),r=this.safeInteger(i,"ts"),a={};for(let o=0;o<s.length;o++){const e=this.safeString(s[o],"symbol"),t=this.safeValue(this.markets_by_id,e);let i=e;if(void 0!==t){i=t.symbol;const e=this.parseTicker(s[o],t);e.timestamp=r,e.datetime=this.iso8601(r),a[i]=e}}return a}parseTrade(e,t){let i=void 0;if(void 0===t){const i=this.safeString(e,"symbol");i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(i=t.symbol);const s=this.safeInteger2(e,"ts","created-at"),r=this.safeString(e,"order-id");let a=this.safeString(e,"direction"),o=this.safeString(e,"type");if(void 0!==o){const e=o.split("-");a=e[0],o=e[1]}const n=this.safeString(e,"role"),d=this.safeFloat(e,"price"),c=this.safeFloat2(e,"filled-amount","amount");let h=void 0;void 0!==d&&void 0!==c&&(h=c*d);let l=void 0,u=this.safeFloat(e,"filled-fees"),f=void 0;void 0!==t&&(f="buy"===a?t.base:t.quote);const p=this.safeFloat(e,"filled-points");void 0!==p&&(void 0!==u&&0!==u||(u=p,f=this.safeCurrencyCode(this.safeString(e,"fee-deduct-currency")))),void 0!==u&&(l={cost:u,currency:f});const m=this.safeString2(e,"trade-id","tradeId");return{id:this.safeString(e,"id",m),info:e,order:r,timestamp:s,datetime:this.iso8601(s),symbol:i,type:o,side:a,takerOrMaker:n,price:d,amount:c,cost:h,fee:l}}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==e&&(r=this.market(e),a.symbol=r.id),void 0!==i&&(a.size=i),void 0!==t&&(a["start-date"]=this.ymd(t));const o=await this.privateGetOrderMatchresults(this.extend(a,s));return this.parseTrades(o.data,r,t,i)}async fetchTrades(e,t,i=1e3,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==i&&(a.size=i);const o=await this.marketGetHistoryTrade(this.extend(a,s)),n=this.safeValue(o,"data");let d=[];for(let c=0;c<n.length;c++){const e=this.safeValue(n[c],"data",[]);for(let t=0;t<e.length;t++){const i=this.parseTrade(e[t],r);d.push(i)}}return d=this.sortBy(d,"timestamp"),this.filterBySymbolSinceLimit(d,e,t,i)}parseOHLCV(e,t,i="1m",s,r){return[this.safeTimestamp(e,"id"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"amount")]}async fetchOHLCV(e,t="1m",i,s=1e3,r={}){await this.loadMarkets();const a=this.market(e),o={symbol:a.id,period:this.timeframes[t]};void 0!==s&&(o.size=s);const n=await this.marketGetHistoryKline(this.extend(o,r));return this.parseOHLCVs(n.data,a,t,i,s)}async fetchAccounts(e={}){return await this.loadMarkets(),(await this.privateGetAccountAccounts(e)).data}async fetchCurrencies(e={}){const t={language:this.options.language},i=await this.publicGetSettingsCurrencys(this.extend(t,e)),s=this.safeValue(i,"data"),r={};for(let a=0;a<s.length;a++){const e=s[a],t=this.safeValue(e,"name"),i=this.safeInteger(e,"withdraw-precision"),o=this.safeCurrencyCode(t),n=e.visible&&e["deposit-enabled"]&&e["withdraw-enabled"],d=this.safeString(e,"display-name");r[o]={id:t,code:o,type:"crypto",name:d,active:n,fee:void 0,precision:i,limits:{amount:{min:Math.pow(10,-i),max:Math.pow(10,i)},price:{min:Math.pow(10,-i),max:Math.pow(10,i)},cost:{min:void 0,max:void 0},deposit:{min:this.safeFloat(e,"deposit-min-amount"),max:Math.pow(10,i)},withdraw:{min:this.safeFloat(e,"withdraw-min-amount"),max:Math.pow(10,i)}},info:e}}return r}async fetchBalance(e={}){await this.loadMarkets(),await this.loadAccounts();const t=this.options.fetchBalanceMethod,i={id:this.accounts[0].id},s=await this[t](this.extend(i,e)),r=this.safeValue(s.data,"list",[]),a={info:s};for(let o=0;o<r.length;o++){const e=r[o],t=this.safeString(e,"currency"),i=this.safeCurrencyCode(t);let s=void 0;s=i in a?a[i]:this.account(),"trade"===e.type&&(s.free=this.safeFloat(e,"balance")),"frozen"===e.type&&(s.used=this.safeFloat(e,"balance")),a[i]=s}return this.parseBalance(a)}async fetchOrdersByStates(e,t,i,s,r={}){await this.loadMarkets();const a={states:e};let o=void 0;void 0!==t&&(o=this.market(t),a.symbol=o.id);const n=this.safeString(this.options,"fetchOrdersByStatesMethod","private_get_order_orders"),d=await this[n](this.extend(a,r));return this.parseOrders(d.data,o,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privateGetOrderOrdersId(this.extend(s,i)),a=this.safeValue(r,"data");return this.parseOrder(a)}async fetchOrders(e,t,i,s={}){return await this.fetchOrdersByStates("pre-submitted,submitted,partial-filled,filled,partial-canceled,canceled",e,t,i,s)}async fetchOpenOrders(e,t,i,s={}){const r=this.safeString(this.options,"fetchOpenOrdersMethod","fetch_open_orders_v1");return await this[r](e,t,i,s)}async fetchOpenOrdersV1(e,t,i,s={}){if(void 0===e)throw new l(this.id+" fetchOpenOrdersV1 requires a symbol argument");return await this.fetchOrdersByStates("pre-submitted,submitted,partial-filled",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByStates("filled,partial-canceled,canceled",e,t,i,s)}async fetchOpenOrdersV2(e,t,i,s={}){if(await this.loadMarkets(),void 0===e)throw new l(this.id+" fetchOpenOrders requires a symbol argument");const r=this.market(e);let a=this.safeString(s,"account-id");if(void 0===a){await this.loadAccounts();for(let e=0;e<this.accounts.length;e++){const t=this.accounts[e];if("spot"===t.type&&(a=this.safeString(t,"id"),void 0!==a))break}}const o={symbol:r.id,"account-id":a};void 0!==i&&(o.size=i);const n=this.omit(s,"account-id"),d=await this.privateGetOrderOpenOrders(this.extend(o,n)),c=this.safeValue(d,"data",[]);return this.parseOrders(c,r,t,i)}parseOrderStatus(e){return this.safeString({"partial-filled":"open","partial-canceled":"canceled",filled:"closed",canceled:"canceled",submitted:"open"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id");let s=void 0,r=void 0,a=void 0;if("type"in e){const t=e.type.split("-");s=t[0],r=t[1],a=this.parseOrderStatus(this.safeString(e,"state"))}let o=void 0;if(void 0===t&&"symbol"in e&&e.symbol in this.markets_by_id){const i=e.symbol;t=this.markets_by_id[i]}void 0!==t&&(o=t.symbol);const n=this.safeInteger(e,"created-at");let d=this.safeFloat(e,"amount");const c=this.safeFloat2(e,"filled-amount","field-amount");"market"===r&&"buy"===s&&(d="closed"===a?c:void 0);let h=this.safeFloat(e,"price");0===h&&(h=void 0);const l=this.safeFloat2(e,"filled-cash-amount","field-cash-amount");let u=void 0,f=void 0;void 0!==c&&(void 0!==d&&(u=d-c),void 0!==l&&c>0&&(f=l/c));const p=this.safeFloat2(e,"filled-fees","field-fees");let m=void 0;if(void 0!==p){let e=void 0;void 0!==t&&(e="sell"===s?t.quote:t.base),m={cost:p,currency:e}}return{info:e,id:i,clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,symbol:o,type:r,side:s,price:h,average:f,cost:l,amount:d,filled:c,remaining:u,status:a,fee:m}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets(),await this.loadAccounts();const o=this.market(e),n={"account-id":this.accounts[0].id,symbol:o.id,type:i+"-"+t};if("market"===t&&"buy"===i)if(this.options.createMarketBuyOrderRequiresPrice){if(void 0===r)throw new d(this.id+" market buy order requires price argument to calculate cost (total amount of quote currency to spend for buying, amount * price). To switch off this warning exception and specify cost in the amount argument, set .options['createMarketBuyOrderRequiresPrice'] = false. Make sure you know what you're doing.");n.amount=this.costToPrecision(e,parseFloat(s)*parseFloat(r))}else n.amount=this.costToPrecision(e,s);else n.amount=this.amountToPrecision(e,s);"limit"!==t&&"ioc"!==t&&"limit-maker"!==t||(n.price=this.priceToPrecision(e,r));const c=this.options.createOrderMethod,h=await this[c](this.extend(n,a)),l=this.milliseconds();return{info:h,id:this.safeString(h,"data"),timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,status:void 0,symbol:e,type:t,side:i,price:r,amount:s,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0}}async cancelOrder(e,t,i={}){const s=await this.privatePostOrderOrdersIdSubmitcancel({id:e});return this.extend(this.parseOrder(s),{id:e,status:"canceled"})}currencyToPrecision(e,t){return this.decimalToPrecision(t,0,this.currencies[e].precision)}calculateFee(e,t,i,s,r,a="taker",o={}){const n=this.markets[e],d=n[a];let c=s*d,h="quote";return"sell"===i?c*=r:h="base",{type:a,currency:n[h],rate:d,cost:parseFloat(this.currencyToPrecision(n[h],c))}}parseDepositAddress(e,t){const i=this.safeString(e,"address"),s=this.safeString(e,"addressTag"),r=this.safeString(e,"currency"),a=this.safeCurrencyCode(r);return this.checkAddress(i),{currency:a,address:i,tag:s,info:e}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currency:i.id},r=await this.v2PrivateGetAccountDepositAddress(this.extend(s,t)),a=this.safeValue(r,"data",[]);return this.parseDepositAddress(this.safeValue(a,0,{}),i)}async fetchDeposits(e,t,i,s={}){(void 0===i||i>100)&&(i=100),await this.loadMarkets();let r=void 0;void 0!==e&&(r=this.currency(e));const a={type:"deposit",from:0};void 0!==r&&(a.currency=r.id),void 0!==i&&(a.size=i);const o=await this.privateGetQueryDepositWithdraw(this.extend(a,s));return this.parseTransactions(o.data,r,t,i)}async fetchWithdrawals(e,t,i,s={}){(void 0===i||i>100)&&(i=100),await this.loadMarkets();let r=void 0;void 0!==e&&(r=this.currency(e));const a={type:"withdraw",from:0};void 0!==r&&(a.currency=r.id),void 0!==i&&(a.size=i);const o=await this.privateGetQueryDepositWithdraw(this.extend(a,s));return this.parseTransactions(o.data,r,t,i)}parseTransaction(e,t){const i=this.safeInteger(e,"created-at"),s=this.safeInteger(e,"updated-at"),r=this.safeCurrencyCode(this.safeString(e,"currency"));let a=this.safeString(e,"type");"withdraw"===a&&(a="withdrawal");const o=this.parseTransactionStatus(this.safeString(e,"state")),n=this.safeString(e,"address-tag");let d=this.safeFloat(e,"fee");return void 0!==d&&(d=Math.abs(d)),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"tx-hash"),timestamp:i,datetime:this.iso8601(i),address:this.safeString(e,"address"),tag:n,type:a,amount:this.safeFloat(e,"amount"),currency:r,status:o,updated:s,fee:{currency:r,cost:d,rate:void 0}}}parseTransactionStatus(e){return this.safeString({unknown:"failed",confirming:"pending",confirmed:"ok",safe:"ok",orphan:"failed",submitted:"pending",canceled:"canceled",reexamine:"pending",reject:"failed",pass:"pending","wallet-reject":"failed","confirm-error":"failed",repealed:"failed","wallet-transfer":"pending","pre-transfer":"pending"},e,e)}async withdraw(e,t,i,s,r={}){await this.loadMarkets(),this.checkAddress(i);const a={address:i,amount:t,currency:this.currency(e).id.toLowerCase()};void 0!==s&&(a["addr-tag"]=s);const o=await this.privatePostDwWithdrawApiCreate(this.extend(a,r));return{info:o,id:this.safeString(o,"data")}}sign(e,t="public",i="GET",s={},r,a){let o="/";"market"===t?o+=t:"public"===t||"private"===t?o+=this.version:"v2Public"!==t&&"v2Private"!==t||(o+="v2"),o+="/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("private"===t||"v2Private"===t){this.checkRequiredCredentials();const e=this.ymdhms(this.milliseconds(),"T");let t={SignatureMethod:"HmacSHA256",SignatureVersion:"2",AccessKeyId:this.apiKey,Timestamp:e};"POST"!==i&&(t=this.extend(t,n)),t=this.keysort(t);let s=this.urlencode(t);const d=[i,this.hostname,o,s].join("\n"),c=this.hmac(this.encode(d),this.encode(this.secret),"sha256","base64");s+="&"+this.urlencode({Signature:c}),o+="?"+s,"POST"===i?(a=this.json(n),r={"Content-Type":"application/json"}):r={"Content-Type":"application/x-www-form-urlencoded"}}else Object.keys(s).length&&(o+="?"+this.urlencode(s));return o=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+o,{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,o,n,d,c){if(void 0!==n&&"status"in n){if("error"===this.safeString(n,"status")){const e=this.safeString(n,"err-code"),t=this.id+" "+o;this.throwExactlyMatchedException(this.exceptions.exact,e,t);const i=this.safeString(n,"err-msg");throw this.throwExactlyMatchedException(this.exceptions.exact,i,t),new a(t)}}}}},"6u4I":function(e,t,i){"use strict";const s=i("OjXq"),{AuthenticationError:r,ArgumentsRequired:a,ExchangeError:o,InvalidOrder:n,BadRequest:d,OrderNotFound:c,DDoSProtection:h,BadSymbol:l}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitmart",name:"BitMart",countries:["US","CN","HK","KR"],rateLimit:1e3,version:"v2",has:{CORS:!0,fetchMarkets:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchCurrencies:!0,fetchOrderBook:!0,fetchTrades:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchBalance:!0,createOrder:!0,cancelOrder:!0,cancelAllOrders:!0,fetchOrders:!1,fetchOrderTrades:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchCanceledOrders:!0,fetchOrder:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/61835713-a2662f80-ae85-11e9-9d00-6442919701fd.jpg",api:"https://openapi.bitmart.com",www:"https://www.bitmart.com/",doc:"https://github.com/bitmartexchange/bitmart-official-api-docs",referral:"http://www.bitmart.com/?r=rQCFLh"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{token:{post:["authentication"]},public:{get:["currencies","ping","steps","symbols","symbols_details","symbols/{symbol}/kline","symbols/{symbol}/orders","symbols/{symbol}/trades","ticker","time"]},private:{get:["orders","orders/{id}","trades","wallet"],post:["orders"],delete:["orders","orders/{id}"]}},timeframes:{"1m":1,"3m":3,"5m":5,"15m":15,"30m":30,"45m":45,"1h":60,"2h":120,"3h":180,"4h":240,"1d":1440,"1w":10080,"1M":43200},fees:{trading:{tierBased:!0,percentage:!0,taker:.002,maker:.001,tiers:{taker:[[0,.002],[10,.0018],[50,.0016],[250,.14/100],[1e3,.0012],[5e3,.001],[25e3,8e-4],[5e4,6e-4]],maker:[[0,.001],[10,9e-4],[50,8e-4],[250,.07/100],[1e3,6e-4],[5e3,5e-4],[25e3,4e-4],[5e4,3e-4]]}}},exceptions:{exact:{"Place order error":n,"Not found":c,"Visit too often, please try again later":h,"Unknown symbol":l},broad:{"Invalid limit. limit must be in the range":n,"Maximum price is":n,"is not present":d}},commonCurrencies:{ONE:"Menlo One",PLA:"Plair"}})}async fetchTime(e={}){const t=await this.publicGetTime(e);return this.safeInteger(t,"server_time")}async signIn(e={}){const t=this.apiKey+":"+this.secret+":"+this.uid,i={grant_type:"client_credentials",client_id:this.apiKey,client_secret:this.hmac(this.encode(t),this.encode(this.secret),"sha256")},s=await this.tokenPostAuthentication(this.extend(i,e)),a=this.safeString(s,"access_token");if(!a)throw new r(this.id+" signIn() failed to authenticate. Access token missing from response.");const o=this.safeInteger(s,"expires_in");return this.options.expires=this.sum(this.nonce(),1e3*o),this.options.accessToken=a,s}async fetchMarkets(e={}){const t=await this.publicGetSymbolsDetails(e),i=[];for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"id"),a=this.safeString(e,"base_currency"),o=this.safeString(e,"quote_currency"),n=this.safeCurrencyCode(a),d=this.safeCurrencyCode(o),c=n+"/"+d,h=this.safeString(e,"quote_increment"),l={amount:this.precisionFromString(h),price:this.safeInteger(e,"price_max_precision")},u={amount:{min:this.safeFloat(e,"base_min_size"),max:this.safeFloat(e,"base_max_size")},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}};i.push({id:r,symbol:c,base:n,quote:d,baseId:a,quoteId:o,precision:l,limits:u,info:e})}return i}parseTicker(e,t){const i=this.milliseconds(),s=this.safeString(e,"symbol_id");let r=void 0;if(void 0!==s)if(s in this.markets_by_id)r=this.markets_by_id[s].symbol;else if(void 0!==s){const[e,t]=s.split("_");r=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}const a=this.safeFloat(e,"current_price"),o=this.safeFloat(e,"fluctuation");return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"highest_price"),low:this.safeFloat(e,"lowest_price"),bid:this.safeFloat(e,"bid_1"),bidVolume:this.safeFloat(e,"bid_1_amount"),ask:this.safeFloat(e,"ask_1"),askVolume:this.safeFloat(e,"ask_1_amount"),vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:100*o,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"base_volume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i={symbol:this.marketId(e)},s=await this.publicGetTicker(this.extend(i,t));return this.parseTicker(s)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t),s={};for(let r=0;r<i.length;r++){const e=this.parseTicker(i[r]);s[e.symbol]=e}return s}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i={};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"id"),a=this.safeCurrencyCode(r),o=this.safeString(e,"name"),n=this.safeValue(e,"withdraw_enabled"),d=this.safeValue(e,"deposit_enabled"),c=n&&d;i[a]={id:r,code:a,name:o,info:e,active:c,fee:void 0,precision:void 0,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}}}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)},r=await this.publicGetSymbolsSymbolOrders(this.extend(s,i));return this.parseOrderBook(r,void 0,"buys","sells","price","amount")}parseTrade(e,t){const i=this.safeString(e,"trade_id"),s=this.safeInteger2(e,"timestamp","order_time");let r=this.safeStringLower(e,"type");void 0===r&&"entrustType"in e&&(r=e.entrustType?"sell":"buy");const a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount");let n=void 0;void 0!==a&&void 0!==o&&(n=o*a);const d=this.safeInteger(e,"entrust_id"),c=this.safeString(e,"symbol");let h=void 0;if(void 0!==c)if(c in this.markets_by_id)h=(t=this.markets_by_id[c]).symbol;else{const[e,t]=c.split("_");h=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}void 0===h&&void 0!==t&&(h=t.symbol);const l=this.safeFloat(e,"fees");let u=void 0;if(void 0!==l){let e=void 0;void 0!==t&&(e="buy"===r?t.base:t.quote),u={cost:l,currency:e}}return{info:e,id:i,order:d,timestamp:s,datetime:this.iso8601(s),symbol:h,type:void 0,side:r,price:a,amount:o,cost:n,takerOrMaker:void 0,fee:u}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id},o=await this.publicGetSymbolsSymbolTrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const r=this.market(e);i=void 0===i?50:Math.min(i,50);const o={symbol:r.id,offset:0,limit:i},n=await this.privateGetTrades(this.extend(o,s)),d=this.safeValue(n,"trades",[]);return this.parseTrades(d,r,t,i)}async fetchOrderTrades(e,t,i,s,r={}){await this.loadMarkets();const a={entrust_id:e};return await this.fetchMyTrades(t,i,s,this.extend(a,r))}parseOHLCV(e,t,i="1m",s,r){return[this.safeInteger(e,"timestamp"),this.safeFloat(e,"open_price"),this.safeFloat(e,"highest_price"),this.safeFloat(e,"lowest_price"),this.safeFloat(e,"current_price"),this.safeFloat(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,r={}){if(void 0===i&&void 0===s)throw new a(this.id+" fetchOHLCV requires either a `since` argument or a `limit` argument (or both)");await this.loadMarkets();const o=this.market(e),n=this.parseTimeframe(t)*s*1e3;let d=this.milliseconds();void 0===i?i=d-n:d=this.sum(i,n);const c={symbol:o.id,from:i,to:d,step:this.timeframes[t]},h=await this.publicGetSymbolsSymbolKline(this.extend(c,r));return this.parseOHLCVs(h,o,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetWallet(e),i={info:t};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"id"),a=this.safeCurrencyCode(r),o=this.account();o.free=this.safeFloat(e,"available"),o.used=this.safeFloat(e,"frozen"),i[a]=o}return this.parseBalance(i)}parseOrder(e,t){const i=this.safeString(e,"entrust_id"),s=this.milliseconds(),r=this.parseOrderStatus(this.safeString(e,"status"));let a=void 0;const o=this.safeString(e,"symbol");if(void 0!==o)if(o in this.markets_by_id)t=this.markets_by_id[o];else{const[e,t]=o.split("_");a=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}void 0===a&&void 0!==t&&(a=t.symbol);const n=this.safeFloat(e,"price"),d=this.safeFloat(e,"original_amount");let c=void 0,h=this.safeFloat(e,"executed_amount"),l=this.safeFloat(e,"remaining_amount");void 0!==d&&(void 0!==l&&void 0===h&&(h=d-l),void 0!==h&&(void 0===l&&(l=d-h),void 0===c&&void 0!==n&&(c=n*h)));const u=this.safeString(e,"side");return{id:i,clientOrderId:void 0,info:e,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:a,type:void 0,side:u,price:n,amount:d,cost:void 0,average:void 0,filled:h,remaining:l,status:r,fee:void 0,trades:void 0}}parseOrderStatus(e){return this.safeString({0:"all",1:"open",2:"open",3:"closed",4:"canceled",5:"open",6:"closed"},e,e)}async createOrder(e,t,i,s,r,a={}){if("limit"!==t)throw new o(this.id+" allows limit orders only");await this.loadMarkets();const n=this.market(e),d={symbol:n.id,side:i.toLowerCase(),amount:this.amountToPrecision(e,s),price:this.priceToPrecision(e,r)},c=await this.privatePostOrders(this.extend(d,a));return this.parseOrder(c,n)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s=parseInt(e),r={id:s,entrust_id:s},a=await this.privateDeleteOrdersId(this.extend(r,i));return this.parseOrder(a)}async cancelAllOrders(e,t={}){if(void 0===e)throw new a(this.id+" cancelAllOrders requires a symbol argument");const i=this.safeString(t,"side");if(void 0===i)throw new a(this.id+" cancelAllOrders requires a `side` parameter ('buy' or 'sell')");await this.loadMarkets();const s={symbol:this.market(e).id,side:i};return await this.privateDeleteOrders(this.extend(s,t))}async fetchOrdersByStatus(e,t,i,s,r={}){if(void 0===t)throw new a(this.id+" fetchOrdersByStatus requires a symbol argument");await this.loadMarkets();const o=this.market(t);void 0===s&&(s=500);const n={symbol:o.id,status:e,offset:0,limit:s},d=await this.privateGetOrders(this.extend(n,r)),c=this.safeValue(d,"orders",[]);return this.parseOrders(c,o,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByStatus(5,e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByStatus(3,e,t,i,s)}async fetchCanceledOrders(e,t,i,s={}){return await this.fetchOrdersByStatus(4,e,t,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privateGetOrdersId(this.extend(s,i));return this.parseOrder(r)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,o){let n=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s),d=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(d).length&&(n+="?"+this.urlencode(d));else if("token"===t)this.checkRequiredCredentials(),o=this.urlencode(d),a={"Content-Type":"application/x-www-form-urlencoded"};else{const t=this.nonce();this.checkRequiredCredentials();const s=this.safeString(this.options,"accessToken");if(void 0===s)throw new r(this.id+" "+e+" endpoint requires an accessToken option or a prior call to signIn() method");const c=this.safeInteger(this.options,"expires");if(void 0!==c&&t>=c)throw new r(this.id+" accessToken expired, supply a new accessToken or call the signIn() method");if(Object.keys(d).length&&(n+="?"+this.urlencode(d)),a={"Content-Type":"application/json","X-BM-TIMESTAMP":t.toString(),"X-BM-AUTHORIZATION":"Bearer "+s},"GET"!==i){d=this.keysort(d),o=this.json(d);const e=this.urlencode(d);a["X-BM-SIGNATURE"]=this.hmac(this.encode(e),this.encode(this.secret),"sha256")}}return{url:n,method:i,body:o,headers:a}}handleErrors(e,t,i,s,r,a,n,d,c){if(void 0===n)return;const h=this.id+" "+a,l=this.safeString2(n,"message","msg");if(void 0!==l)throw this.throwExactlyMatchedException(this.exceptions.exact,l,h),this.throwBroadlyMatchedException(this.exceptions.broad,l,h),new o(h)}}},"7aZo":function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ArgumentsRequired:a,ExchangeNotAvailable:o,InvalidNonce:n,BadRequest:d,InsufficientFunds:c,PermissionDenied:h,DDoSProtection:l,InvalidOrder:u,AuthenticationError:f}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"dsx",name:"DSX",countries:["UK"],rateLimit:1500,version:"v3",has:{CORS:!1,createMarketOrder:!1,fetchOHLCV:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!1,fetchOrderBooks:!1,createDepositAddress:!0,fetchDepositAddress:!0,fetchTransactions:!0,fetchTickers:!0,fetchMyTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/76909626-cb2bb100-68bc-11ea-99e0-28ba54f04792.jpg",api:{public:"https://dsx.uk/mapi",private:"https://dsx.uk/tapi",dwapi:"https://dsx.uk/dwapi"},www:"https://dsx.uk",doc:["https://dsx.uk/developers/publicApi"]},fees:{trading:{tierBased:!0,percentage:!0,maker:.0015,taker:.0025}},timeframes:{"1m":"m","1h":"h","1d":"d"},api:{public:{get:["barsFromMoment/{pair}/{period}/{start}","depth/{pair}","info","lastBars/{pair}/{period}/{amount}","periodBars/{pair}/{period}/{start}/{end}","ticker/{pair}","trades/{pair}"]},private:{post:["info/account","history/transactions","history/trades","history/orders","orders","order/cancel","order/status","order/new","volume","fees"]},dwapi:{post:["deposit/cryptoaddress","withdraw/crypto","withdraw/fiat","withdraw/submit","transaction/status"]}},exceptions:{exact:{"Sign is invalid":f,"Order was rejected. Incorrect price.":u,"Order was rejected. You don't have enough money.":c,"This method is blocked for your pair of keys":h},broad:{INVALID_PARAMETER:d,"Invalid pair name":r,"invalid api key":f,"invalid sign":f,"api key dont have trade permission":f,"invalid parameter":u,"invalid order":u,"Requests too often":l,"not available":o,"data unavailable":o,"external service unavailable":o,"nonce is invalid":n}},options:{fetchTickersMaxLength:250},commonCurrencies:{DSH:"DASH"}})}async fetchMarkets(e={}){const t=await this.publicGetInfo(e),i=this.safeValue(t,"pairs"),s=Object.keys(i),r=[];for(let a=0;a<s.length;a++){const e=s[a],t=i[e],o=this.safeString(t,"base_currency"),n=this.safeString(t,"quoted_currency"),d=this.safeCurrencyCode(o),c=this.safeCurrencyCode(n),h=d+"/"+c,l={amount:this.safeInteger(t,"decimal_places"),price:this.safeInteger(t,"decimal_places")},u={amount:{min:this.safeFloat(t,"min_amount"),max:this.safeFloat(t,"max_amount")},price:{min:this.safeFloat(t,"min_price"),max:this.safeFloat(t,"max_price")},cost:{min:this.safeFloat(t,"min_total")}},f=0===this.safeInteger(t,"hidden"),p=d.toLowerCase()+c.toLowerCase();r.push({id:e,otherId:p,symbol:h,base:d,quote:c,baseId:o,quoteId:n,active:f,precision:l,limits:u,info:t})}return r}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostInfoAccount(),i=this.safeValue(t,"return"),s={info:t},r=this.safeValue(i,"funds"),a=Object.keys(r);for(let o=0;o<a.length;o++){const e=a[o],t=this.safeCurrencyCode(e),i=this.safeValue(r,e,{}),n=this.account();n.free=this.safeFloat(i,"available"),n.total=this.safeFloat(i,"total"),s[t]=n}return this.parseBalance(s)}parseTicker(e,t){const i=this.safeTimestamp(e,"updated");let s=void 0;const r=this.safeString(e,"pair");void 0!==(t=this.parseMarket(r))&&(s=t.symbol);let a=this.safeFloat(e,"avg");void 0!==a&&a>0&&(a=1/a);const o=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:a,baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"vol_cur"),info:e}}parseTrade(e,t){const i=this.safeTimestamp(e,"timestamp");let s=this.safeString(e,"type");"ask"===s?s="sell":"bid"===s&&(s="buy");const r=this.safeFloat2(e,"rate","price"),a=this.safeString2(e,"number","id"),o=this.safeString(e,"orderId"),n=this.safeString(e,"pair");let d=void 0;void 0!==(t=this.parseMarket(n))&&(d=t.symbol);const c=this.safeFloat2(e,"amount","volume");let h=void 0,l=void 0;const u=this.safeFloat(e,"commission");if(void 0!==u){const t=this.safeString(e,"commissionCurrency");l={cost:u,currency:this.safeCurrencyCode(t)}}const f=this.safeValue(e,"is_your_order");void 0!==f&&(h="taker",f&&(h="maker"),void 0===l&&(l=this.calculateFee(d,"limit",s,c,r,h)));let p=void 0;return void 0!==r&&void 0!==c&&(p=r*c),{id:a,order:o,timestamp:i,datetime:this.iso8601(i),symbol:d,type:"limit",side:s,takerOrMaker:h,price:r,amount:c,cost:p,fee:l,info:e}}parseTrades(e,t,i,s,r={}){let a=[];if(Array.isArray(e))for(let n=0;n<e.length;n++)a.push(this.parseTrade(e[n],t));else{const i=Object.keys(e);for(let s=0;s<i.length;s++){const o=i[s],n=this.parseTrade(e[o],t);a.push(this.extend(n,{id:o},r))}}a=this.sortBy(a,"timestamp");const o=void 0!==t?t.symbol:void 0;return this.filterBySymbolSinceLimit(a,o,i,s)}calculateFee(e,t,i,s,r,a="taker",o={}){const n=this.markets[e];let d="quote";const c=n[a];let h=parseFloat(this.costToPrecision(e,s*c));return"sell"===i?h*=r:d="base",{type:a,currency:n[d],rate:c,cost:h}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),a={pair:s.id};void 0!==t&&(a.limit=t);const o=await this.publicGetDepthPair(this.extend(a,i));if(!(s.id in o))throw new r(this.id+" "+s.symbol+" order book is empty or not available");const n=o[s.id];return this.parseOrderBook(n)}async fetchOrderBooks(e,t,i={}){await this.loadMarkets();let s=void 0;if(void 0===e){if(s=this.ids.join("-"),s.length>2048){const e=this.ids.length;throw new r(this.id+" has "+e.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchOrderBooks")}}else s=this.marketIds(e),s=s.join("-");const a={pair:s};void 0!==t&&(a.limit=t);const o=await this.publicGetDepthPair(this.extend(a,i)),n={};s=Object.keys(o);for(let r=0;r<s.length;r++){const e=s[r];let t=e;if(e in this.markets_by_id){t=this.markets_by_id[e].symbol}n[t]=this.parseOrderBook(o[e])}return n}async fetchTickers(e,t={}){await this.loadMarkets();let i=this.ids;if(void 0===e){const e=i.length;i=i.join("-");const t=this.safeInteger(this.options,"fetchTickersMaxLength",2048);if(i.length>this.options.fetchTickersMaxLength)throw new a(this.id+" has "+e.toString()+" markets exceeding max URL length for this endpoint ("+t.toString()+" characters), please, specify a list of symbols of interest in the first argument to fetchTickers")}else i=this.marketIds(e),i=i.join("-");const s={pair:i},r=await this.publicGetTickerPair(this.extend(s,t)),o={},n=Object.keys(r);for(let a=0;a<n.length;a++){const e=n[a],t=r[e];let i=e,s=void 0;e in this.markets_by_id&&(s=this.markets_by_id[e],i=s.symbol),o[i]=this.parseTicker(t,s)}return o}async fetchTicker(e,t={}){return(await this.fetchTickers([e],t))[e]}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pair:r.id};void 0!==i&&(a.limit=i);const o=await this.publicGetTradesPair(this.extend(a,s));if(Array.isArray(o)){if(0===o.length)return[]}return this.parseTrades(o[r.id],r,t,i)}parseOHLCV(e,t,i="1m",s,r){return[this.safeInteger(e,"timestamp"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"amount")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={pair:a.id,period:this.timeframes[t]};let n="publicGetLastBarsPairPeriodAmount";if(void 0===i)void 0===s&&(s=100),o.amount=s;else if(n="publicGetPeriodBarsPairPeriodStartEnd",o.start=parseInt(i/1e3),void 0===s)o.end=this.seconds();else{const e=1e3*this.parseTimeframe(t),r=this.sum(i,e*s);o.end=parseInt(r/1e3)}const d=await this[n](this.extend(o,r)),c=this.safeValue(d,a.id,[]);return this.parseOHLCVs(c,a,t,i,s)}async createOrder(e,t,i,s,r,o={}){await this.loadMarkets();const n=this.market(e);if("market"===t&&void 0===r)throw new a(this.id+" createOrder requires a price argument even for market orders, that is the worst price that you agree to fill your order for");const d={pair:n.id,type:i,volume:this.amountToPrecision(e,s),rate:this.priceToPrecision(e,r),orderType:t};r=parseFloat(r),s=parseFloat(s);const c=await this.privatePostOrderNew(this.extend(d,o));let h="open",l=0,u=s;const f=this.safeValue(c,"return");let p=this.safeString2(f,"orderId","order_id");"0"===p&&(p=this.safeString(f,"initOrderId","init_order_id"),h="closed"),l=this.safeFloat(f,"received",0),u=this.safeFloat(f,"remains",s);const m=this.milliseconds();return{info:c,id:p,timestamp:m,datetime:this.iso8601(m),lastTradeTimestamp:void 0,status:h,symbol:e,type:t,side:i,price:r,cost:r*l,amount:s,remaining:u,filled:l,fee:void 0}}parseOrderStatus(e){return this.safeString({0:"open",1:"closed",2:"canceled",3:"canceling",7:"canceled"},e,e)}parseMarket(e){if(e in this.markets_by_id)return this.markets_by_id[e];{let t=this.safeValue(this.options,"markets_by_other_id");if(void 0===t&&(this.options.markets_by_other_id=this.indexBy(this.markets,"otherId"),t=this.options.markets_by_other_id),e in t)return t[e]}}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.parseOrderStatus(this.safeString(e,"status")),r=this.safeTimestamp(e,"timestampCreated"),a=this.safeString(e,"pair");let o=void 0;void 0!==(t=this.parseMarket(a))&&(o=t.symbol);const n=this.safeFloat(e,"remainingVolume"),d=this.safeFloat(e,"volume"),c=this.safeFloat(e,"rate");let h=void 0,l=void 0;void 0!==d&&void 0!==n&&(h=d-n,l=c*h);const u=this.safeString(e,"orderType"),f=this.safeString(e,"type");let p=void 0;const m=this.safeValue(e,"deals",[]);let y=void 0,b=void 0;if(m.length>0){y=this.parseTrades(m);let e=void 0,t=void 0;for(let i=0;i<y.length;i++){const s=y[i];void 0===e&&(e=0),e=this.sum(e,s.fee.cost),t=s.fee.currency,b=s.timestamp}void 0!==e&&(p={cost:e,currency:t})}return{info:e,id:i,clientOrderId:void 0,symbol:o,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:b,type:u,side:f,price:c,cost:l,amount:d,remaining:n,filled:h,status:s,fee:p,trades:y}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={orderId:parseInt(e)},r=await this.privatePostOrderStatus(this.extend(s,i));return this.parseOrder(this.extend({id:e},r.return))}parseOrdersById(e,t,i,s){const r=Object.keys(e),a=[];for(let o=0;o<r.length;o++){const t=r[o],i=this.parseOrder(this.extend({id:t.toString()},e[t]));a.push(i)}return this.filterBySymbolSinceLimit(a,t,i,s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r=await this.privatePostOrders(this.extend({},s));return this.parseOrdersById(this.safeValue(r,"return",{}),e,t,i)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r={};void 0!==i&&(r.count=i);const a=await this.privatePostHistoryOrders(this.extend(r,s));return this.parseOrdersById(this.safeValue(a,"return",{}),e,t,i)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e},r=await this.privatePostOrderCancel(this.extend(s,i));return e in this.orders&&(this.orders[e].status="canceled"),r}parseOrders(e,t,i,s,r={}){const a=[],o=Object.keys(e);let n=void 0;void 0!==t&&(n=t.symbol);for(let d=0;d<o.length;d++){const i=o[d],s=this.extend({id:i},e[i]);a.push(this.extend(this.parseOrder(s,t),r))}return this.filterBySymbolSinceLimit(a,n,i,s)}async fetchClosedOrders(e,t,i,s={}){const r=await this.fetchOrders(e,t,i,s);return this.filterBy(r,"status","closed")}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==e&&(r=this.market(e),a.pair=r.id),void 0!==i&&(a.count=parseInt(i)),void 0!==t&&(a.since=parseInt(t/1e3));const o=await this.privatePostHistoryTrades(this.extend(a,s));let n=[];return"return"in o&&(n=o.return),this.parseTrades(n,r,t,i)}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==e&&(r=this.currency(e),a.currency=r.id),void 0!==t&&(a.since=t),void 0!==i&&(a.count=i);const o=await this.privatePostHistoryTransactions(this.extend(a,s)),n=this.safeValue(o,"return",[]);return this.parseTransactions(n,r,t,i)}parseTransactionStatus(e){return this.safeString({1:"failed",2:"ok",3:"pending",4:"failed"},e,e)}parseTransaction(e,t){const i=this.safeTimestamp(e,"timestamp");let s=this.safeString(e,"type");void 0!==s&&("Incoming"===s?s="deposit":"Withdraw"===s&&(s="withdrawal"));const r=this.safeString(e,"currency"),a=this.safeCurrencyCode(r,t),o=this.parseTransactionStatus(this.safeString(e,"status"));return{id:this.safeString(e,"id"),txid:this.safeString(e,"txid"),timestamp:i,datetime:this.iso8601(i),address:this.safeString(e,"address"),type:s,amount:this.safeFloat(e,"amount"),currency:a,status:o,fee:{currency:a,cost:this.safeFloat(e,"commission"),rate:void 0},info:e}}async createDepositAddress(e,t={}){return await this.fetchDepositAddress(e,this.extend({new:1},t))}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.dwapiPostDepositCryptoaddress(this.extend(i,t)),r=this.safeValue(s,"return",{}),a=this.safeString(r,"address");return this.checkAddress(a),{currency:e,address:a,tag:void 0,info:s}}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const o=this.currency(e),n=this.safeValue(r,"commission");if(void 0===n)throw new a(this.id+" withdraw() requires a `commission` (withdrawal fee) parameter (string)");r=this.omit(r,n);const d={currency:o.id,amount:parseFloat(t),address:i,commission:n};void 0!==s&&(d.address+=":"+s);const c=await this.dwapiPostWithdrawCrypto(this.extend(d,r)),h=this.safeValue(c,"return",{});return{info:c,id:this.safeString(h,"transactionId")}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t];const n=this.omit(s,this.extractParams(e));if("private"===t||"dwapi"===t){o+="/"+this.version+"/"+this.implodeParams(e,s),this.checkRequiredCredentials();const t=this.nonce();a=this.urlencode(this.extend({nonce:t},n));const i=this.decode(this.hmac(this.encode(a),this.encode(this.secret),"sha512","base64"));r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:i}}else"public"===t?(o+="/"+this.implodeParams(e,s),Object.keys(n).length&&(o+="?"+this.urlencode(n))):(o+="/"+this.implodeParams(e,s),"GET"===i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):Object.keys(n).length&&(a=this.json(n),r={"Content-Type":"application/json"}));return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,c){if(void 0!==n&&"success"in n){let e=this.safeValue(n,"success",!1);if("string"===typeof e&&(e="true"===e||"1"===e),!e){const e=this.safeString(n,"code"),t=this.safeString(n,"error"),i=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,e,i),this.throwExactlyMatchedException(this.exceptions.exact,t,i),this.throwBroadlyMatchedException(this.exceptions.broad,t,i),new r(i)}}}}},"8DMd":function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ArgumentsRequired:a,InsufficientFunds:o,OrderNotFound:n,InvalidOrder:d,AuthenticationError:c}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinex",name:"CoinEx",version:"v1",countries:["CN"],rateLimit:1e3,has:{fetchTickers:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,withdraw:!0,fetchDeposits:!0,fetchWithdrawals:!0},timeframes:{"1m":"1min","3m":"3min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","12h":"12hour","1d":"1day","3d":"3day","1w":"1week"},urls:{logo:"https://user-images.githubusercontent.com/1294454/38046312-0b450aac-32c8-11e8-99ab-bc6b136b6cc7.jpg",api:"https://api.coinex.com",www:"https://www.coinex.com",doc:"https://github.com/coinexcom/coinex_exchange_api/wiki",fees:"https://www.coinex.com/fees",referral:"https://www.coinex.com/register?refer_code=yw5fz"},api:{public:{get:["common/currency/rate","common/asset/config","market/info","market/list","market/ticker","market/ticker/all","market/depth","market/deals","market/kline"]},private:{get:["balance/coin/deposit","balance/coin/withdraw","balance/info","future/account","future/config","future/limitprice","future/loan/history","future/market","margin/account","margin/config","margin/loan/history","margin/market","order","order/deals","order/finished","order/finished/{id}","order/pending","order/status","order/status/batch","order/user/deals"],post:["balance/coin/withdraw","future/flat","future/loan","future/transfer","margin/flat","margin/loan","margin/transfer","order/batchlimit","order/ioc","order/limit","order/market","sub_account/transfer"],delete:["balance/coin/withdraw","order/pending/batch","order/pending"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BCH:0,BTC:.001,LTC:.001,ETH:.001,ZEC:1e-4,DASH:1e-4}}},limits:{amount:{min:.001,max:void 0}},precision:{amount:8,price:8},options:{createMarketBuyOrderRequiresPrice:!0}})}async fetchMarkets(e={}){const t=await this.publicGetMarketInfo(e),i=this.safeValue(t,"data",{}),s=[],r=Object.keys(i);for(let a=0;a<r.length;a++){const e=i[r[a]],t=this.safeString(e,"name"),o=this.safeString(e,"trading_name"),n=o,d=this.safeString(e,"pricing_name"),c=this.safeCurrencyCode(n),h=this.safeCurrencyCode(d);let l=c+"/"+h;o===t&&(l=t);const u={amount:this.safeInteger(e,"trading_decimal"),price:this.safeInteger(e,"pricing_decimal")},f=void 0;s.push({id:t,symbol:l,base:c,quote:h,baseId:n,quoteId:d,active:f,taker:this.safeFloat(e,"taker_fee_rate"),maker:this.safeFloat(e,"maker_fee_rate"),info:e,precision:u,limits:{amount:{min:this.safeFloat(e,"min_amount"),max:void 0},price:{min:Math.pow(10,-u.price),max:void 0}}})}return s}parseTicker(e,t){const i=this.safeInteger(e,"date");let s=void 0;void 0!==t&&(s=t.symbol),e=this.safeValue(e,"ticker",{});const r=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat2(e,"vol","volume"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},r=await this.publicGetMarketTicker(this.extend(s,t));return this.parseTicker(r.data,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetMarketTickerAll(t),s=this.safeValue(i,"data"),r=this.safeInteger(s,"date"),a=this.safeValue(s,"ticker"),o=Object.keys(a),n={};for(let d=0;d<o.length;d++){const e=o[d];let t=e,i=void 0;e in this.markets_by_id&&(i=this.markets_by_id[e],t=i.symbol);const s={date:r,ticker:a[e]};n[t]=this.parseTicker(s,i)}return n}async fetchOrderBook(e,t=20,i={}){await this.loadMarkets(),void 0===t&&(t=20);const s={market:this.marketId(e),merge:"0.0000000001",limit:t.toString()},r=await this.publicGetMarketDepth(this.extend(s,i));return this.parseOrderBook(r.data)}parseTrade(e,t){let i=this.safeTimestamp(e,"create_time");void 0===i&&(i=this.safeInteger(e,"date_ms"));const s=this.safeString(e,"id"),r=this.safeString(e,"order_id"),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount"),n=this.safeString(e,"market");let d=void 0;void 0!==(t=this.safeValue(this.markets_by_id,n,t))&&(d=t.symbol);let c=this.safeFloat(e,"deal_money");c||(c=parseFloat(this.costToPrecision(d,a*o)));let h=void 0;const l=this.safeFloat(e,"fee");if(void 0!==l){const t=this.safeString(e,"fee_asset");h={cost:l,currency:this.safeCurrencyCode(t)}}const u=this.safeString(e,"role"),f=this.safeString(e,"type");return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:d,id:s,order:r,type:void 0,side:f,takerOrMaker:u,price:a,amount:o,cost:c,fee:h}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market:r.id},o=await this.publicGetMarketDeals(this.extend(a,s));return this.parseTrades(o.data,r,t,i)}parseOHLCV(e,t,i="5m",s,r){return[1e3*e[0],parseFloat(e[1]),parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[2]),parseFloat(e[5])]}async fetchOHLCV(e,t="5m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={market:a.id,type:this.timeframes[t]},n=await this.publicGetMarketKline(this.extend(o,r));return this.parseOHLCVs(n.data,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalanceInfo(e),i={info:t},s=this.safeValue(t,"data"),r=Object.keys(s);for(let a=0;a<r.length;a++){const e=r[a],t=this.safeCurrencyCode(e),o=this.safeValue(s,e,{}),n=this.account();n.free=this.safeFloat(o,"available"),n.used=this.safeFloat(o,"frozen"),i[t]=n}return this.parseBalance(i)}parseOrderStatus(e){return this.safeString({not_deal:"open",part_deal:"open",done:"closed",cancel:"canceled"},e,e)}parseOrder(e,t){const i=this.safeTimestamp(e,"create_time"),s=this.safeFloat(e,"price"),r=this.safeFloat(e,"deal_money"),a=this.safeFloat(e,"amount"),o=this.safeFloat(e,"deal_amount"),n=this.safeFloat(e,"avg_price");let d=void 0;const c=this.safeString(e,"market");t=this.safeValue(this.markets_by_id,c);const h=this.safeString(e,"fee_asset");let l=this.safeCurrencyCode(h);void 0!==t&&(d=t.symbol,void 0===l&&(l=t.quote));const u=this.safeFloat(e,"left"),f=this.parseOrderStatus(this.safeString(e,"status")),p=this.safeString(e,"order_type"),m=this.safeString(e,"type");return{id:this.safeString(e,"id"),clientOrderId:void 0,datetime:this.iso8601(i),timestamp:i,lastTradeTimestamp:void 0,status:f,symbol:d,type:p,side:m,price:s,cost:r,average:n,amount:a,filled:o,remaining:u,trades:void 0,fee:{currency:l,cost:this.safeFloat(e,"deal_fee")},info:e}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o="privatePostOrder"+this.capitalize(t),n=this.market(e),c={market:n.id,type:i};if(s=parseFloat(s),"market"===t&&"buy"===i)if(this.options.createMarketBuyOrderRequiresPrice){if(void 0===r)throw new d(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");r=parseFloat(r),c.amount=this.costToPrecision(e,s*r)}else c.amount=this.costToPrecision(e,s);else c.amount=this.amountToPrecision(e,s);"limit"!==t&&"ioc"!==t||(c.price=this.priceToPrecision(e,r));const h=await this[o](this.extend(c,a)),l=this.parseOrder(h.data,n),u=l.id;return this.orders[u]=l,l}async cancelOrder(e,t,i={}){await this.loadMarkets();const s=this.market(t),r={id:e,market:s.id},a=await this.privateDeleteOrderPending(this.extend(r,i));return this.parseOrder(a.data,s)}async fetchOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={id:e,market:s.id},o=await this.privateGetOrder(this.extend(r,i));return this.parseOrder(o.data,s)}async fetchOrdersByStatus(e,t,i,s,r={}){await this.loadMarkets(),void 0===s&&(s=100);const a={page:1,limit:s};let o=void 0;void 0!==t&&(o=this.market(t),a.market=o.id);const n="privateGetOrder"+this.capitalize(e),d=await this[n](this.extend(a,r));return this.parseOrders(d.data.data,o,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByStatus("pending",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByStatus("finished",e,t,i,s)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets(),void 0===i&&(i=100);const r={page:1,limit:i};let a=void 0;void 0!==e&&(a=this.market(e),r.market=a.id);const o=await this.privateGetOrderUserDeals(this.extend(r,s));return this.parseTrades(o.data.data,a,t,i)}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a=this.currency(e);s&&(i=i+":"+s);const o={coin_type:a.id,coin_address:i,actual_amount:parseFloat(t),transfer_method:"1"},n=await this.privatePostBalanceCoinWithdraw(this.extend(o,r)),d=this.safeValue(n,"data",{});return this.parseTransaction(d,a)}parseTransactionStatus(e){return this.safeString({audit:"pending",pass:"pending",processing:"pending",confirming:"pending",not_pass:"failed",cancel:"canceled",finish:"ok",fail:"failed"},e,e)}parseTransaction(e,t){const i=this.safeString2(e,"coin_withdraw_id","coin_deposit_id"),s=this.safeString(e,"coin_address");let r=this.safeString(e,"remark");void 0!==r&&r.length<1&&(r=void 0);let a=this.safeValue(e,"tx_id");void 0!==a&&a.length<1&&(a=void 0);const o=this.safeString(e,"coin_type"),n=this.safeCurrencyCode(o,t),d=this.safeTimestamp(e,"create_time"),c="coin_withdraw_id"in e?"withdraw":"deposit",h=this.parseTransactionStatus(this.safeString(e,"status"),c),l=this.safeFloat(e,"amount");let u=this.safeFloat(e,"tx_fee");"deposit"===c&&(u=0);const f={cost:u,currency:n};return{info:e,id:i,txid:a,timestamp:d,datetime:this.iso8601(d),address:s,tag:r,type:c,amount:l,currency:n,status:h,updated:void 0,fee:f}}async fetchWithdrawals(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchWithdrawals requires a currency code argument");await this.loadMarkets();const r=this.currency(e),o={coin_type:r.id};void 0!==i&&(o.Limit=i);const n=await this.privateGetBalanceCoinWithdraw(this.extend(o,s));return this.parseTransactions(n.data,r,t,i)}async fetchDeposits(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchDeposits requires a currency code argument");await this.loadMarkets();const r=this.currency(e),o={coin_type:r.id};void 0!==i&&(o.Limit=i);const n=await this.privateGetBalanceCoinDeposit(this.extend(o,s));return this.parseTransactions(n.data,r,t,i)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){e=this.implodeParams(e,s);let o=this.urls.api+"/"+this.version+"/"+e,n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();const e=this.nonce();n=this.extend({access_id:this.apiKey,tonce:e.toString()},n),n=this.keysort(n);const t=this.urlencode(n);r={Authorization:this.hash(this.encode(t+"&secret_key="+this.secret)).toUpperCase(),"Content-Type":"application/json"},"GET"===i||"DELETE"===i?o+="?"+t:a=this.json(n)}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,h){const l=await this.fetch2(e,t,i,s,a,h),u=this.safeString(l,"code"),f=this.safeValue(l,"data"),p=this.safeString(l,"message");if("0"!==u||void 0===f||"Ok"!==p&&!f){const e={24:c,25:c,107:o,600:n,601:d,602:d,606:d};throw new(this.safeValue(e,u,r))(l.message)}return l}}},"8TUC":function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var s=i("ZERR"),r=i("e0KM"),a=i("vb3U"),o=i("BbEw");t.defineProperties=function(t,i,n){if(t.raw=[],t._fields=[],t.toJSON=function(e){if(void 0===e&&(e=!1),e){var i={};return t._fields.forEach((function(e){i[e]="0x"+t[e].toString("hex")})),i}return o.baToJSON(t.raw)},t.serialize=function(){return a.encode(t.raw)},i.forEach((function(i,r){function a(){return t.raw[r]}function n(a){"00"!==(a=o.toBuffer(a)).toString("hex")||i.allowZero||(a=e.allocUnsafe(0)),i.allowLess&&i.length?(a=o.stripZeros(a),s(i.length>=a.length,"The field "+i.name+" must not have more "+i.length+" bytes")):i.allowZero&&0===a.length||!i.length||s(i.length===a.length,"The field "+i.name+" must have byte length of "+i.length),t.raw[r]=a}t._fields.push(i.name),Object.defineProperty(t,i.name,{enumerable:!0,configurable:!0,get:a,set:n}),i.default&&(t[i.name]=i.default),i.alias&&Object.defineProperty(t,i.alias,{enumerable:!1,configurable:!0,set:n,get:a})})),n)if("string"===typeof n&&(n=e.from(r.stripHexPrefix(n),"hex")),e.isBuffer(n)&&(n=a.decode(n)),Array.isArray(n)){if(n.length>t._fields.length)throw new Error("wrong number of fields in data");n.forEach((function(e,i){t[t._fields[i]]=o.toBuffer(e)}))}else{if("object"!==typeof n)throw new Error("invalid data");var d=Object.keys(n);i.forEach((function(e){-1!==d.indexOf(e.name)&&(t[e.name]=n[e.name]),-1!==d.indexOf(e.alias)&&(t[e.alias]=n[e.alias])}))}}}).call(this,i("zkTx").Buffer)},"98kT":function(e,t,i){"use strict";const s=i("OjXq"),{AuthenticationError:r,ExchangeError:a,NotSupported:o,PermissionDenied:n,InvalidNonce:d,OrderNotFound:c,InsufficientFunds:h,InvalidAddress:l,InvalidOrder:u}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitstamp",name:"Bitstamp",countries:["GB"],rateLimit:1e3,version:"v2",userAgent:this.userAgents.chrome,pro:!0,has:{CORS:!0,fetchDepositAddress:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchMyTrades:!0,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27786377-8c8ab57e-5fe9-11e7-8ea4-2b05b6bcceec.jpg",api:{public:"https://www.bitstamp.net/api",private:"https://www.bitstamp.net/api",v1:"https://www.bitstamp.net/api"},www:"https://www.bitstamp.net",doc:"https://www.bitstamp.net/api"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["order_book/{pair}/","ticker_hour/{pair}/","ticker/{pair}/","transactions/{pair}/","trading-pairs-info/"]},private:{post:["balance/","balance/{pair}/","bch_withdrawal/","bch_address/","user_transactions/","user_transactions/{pair}/","open_orders/all/","open_orders/{pair}/","order_status/","cancel_order/","buy/{pair}/","buy/market/{pair}/","buy/instant/{pair}/","sell/{pair}/","sell/market/{pair}/","sell/instant/{pair}/","ltc_withdrawal/","ltc_address/","eth_withdrawal/","eth_address/","xrp_withdrawal/","xrp_address/","transfer-to-main/","transfer-from-main/","withdrawal-requests/","withdrawal/open/","withdrawal/status/","withdrawal/cancel/","liquidation_address/new/","liquidation_address/info/"]},v1:{post:["bitcoin_deposit_address/","unconfirmed_btc/","bitcoin_withdrawal/","ripple_withdrawal/","ripple_address/"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.005,maker:.005,tiers:{taker:[[0,.005],[2e4,.0025],[1e5,.0024],[2e5,.0022],[4e5,.002],[6e5,.0015],[1e6,.14/100],[2e6,.0013],[4e6,.0012],[2e7,.0011],[20000001,.001]],maker:[[0,.005],[2e4,.0025],[1e5,.0024],[2e5,.0022],[4e5,.002],[6e5,.0015],[1e6,.14/100],[2e6,.0013],[4e6,.0012],[2e7,.0011],[20000001,.001]]}},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:0,BCH:0,LTC:0,ETH:0,XRP:0,USD:25,EUR:.9},deposit:{BTC:0,BCH:0,LTC:0,ETH:0,XRP:0,USD:25,EUR:0}}},exceptions:{exact:{"No permission found":n,"API key not found":r,"IP address not allowed":n,"Invalid nonce":d,"Invalid signature":r,"Authentication failed":r,"Missing key, signature and nonce parameters":r,"Your account is frozen":n,"Please update your profile with your FATCA information, before using API.":n,"Order not found":c,"Price is more than 20% below market price.":u},broad:{"Minimum order size is":u,"Check your account balance for details.":h,"Ensure this value has at least":l}}})}async fetchMarkets(e={}){const t=await this.publicGetTradingPairsInfo(e),i=[];for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"name");let[a,o]=r.split("/");const n=a.toLowerCase(),d=o.toLowerCase();a=this.safeCurrencyCode(a),o=this.safeCurrencyCode(o);const c=a+"/"+o,h=n+"_"+d,l=this.safeString(e,"url_symbol"),u={amount:e.base_decimals,price:e.counter_decimals},f=e.minimum_order.split(" ")[0],p="Enabled"===e.trading;i.push({id:l,symbol:c,base:a,quote:o,baseId:n,quoteId:d,symbolId:h,info:e,active:p,precision:u,limits:{amount:{min:Math.pow(10,-u.amount),max:void 0},price:{min:Math.pow(10,-u.price),max:void 0},cost:{min:parseFloat(f),max:void 0}}})}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair:this.marketId(e)},r=await this.publicGetOrderBookPair(this.extend(s,i)),a=this.safeInteger(r,"microtimestamp"),o=parseInt(a/1e3),n=this.parseOrderBook(r,o);return n.nonce=a,n}async fetchTicker(e,t={}){await this.loadMarkets();const i={pair:this.marketId(e)},s=await this.publicGetTickerPair(this.extend(i,t)),r=this.safeTimestamp(s,"timestamp"),a=this.safeFloat(s,"vwap"),o=this.safeFloat(s,"volume");let n=void 0;void 0!==o&&void 0!==a&&(n=o*a);const d=this.safeFloat(s,"last");return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:a,open:this.safeFloat(s,"open"),close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:o,quoteVolume:n,info:s}}getCurrencyIdFromTransaction(e){const t=this.safeStringLower(e,"currency");if(void 0!==t)return t;e=this.omit(e,["fee","price","datetime","type","status","id"]);const i=Object.keys(e);for(let s=0;s<i.length;s++){const t=i[s];if(t.indexOf("_")<0){const i=this.safeFloat(e,t);if(void 0!==i&&0!==i)return t}}}getMarketFromTrade(e){e=this.omit(e,["fee","price","datetime","tid","type","order_id","side"]);const t=Object.keys(e),i=t.length;if(i>2)throw new a(this.id+" getMarketFromTrade too many keys: "+this.json(t)+" in the trade: "+this.json(e));if(2===i){let e=t[0]+t[1];if(e in this.markets_by_id)return this.markets_by_id[e];if(e=t[1]+t[0],e in this.markets_by_id)return this.markets_by_id[e]}}getMarketFromTrades(e){const t=this.indexBy(e,"symbol"),i=Object.keys(t);if(1===i.length)return this.markets[i[0]]}parseTrade(e,t){const i=this.safeString2(e,"id","tid");let s=void 0,r=void 0,a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount");const n=this.safeString(e,"order_id");let d=this.safeFloat(e,"cost");if(void 0===t){const i=Object.keys(e);for(let e=0;e<i.length;e++)if(i[e].indexOf("_")>=0){const s=i[e].replace("_","");s in this.markets_by_id&&(t=this.markets_by_id[s])}void 0===t&&(t=this.getMarketFromTrade(e))}const c=this.safeFloat(e,"fee");let h=void 0;void 0!==t&&(a=this.safeFloat(e,t.symbolId,a),o=this.safeFloat(e,t.baseId,o),d=this.safeFloat(e,t.quoteId,d),h=t.quote,s=t.symbol);let l=this.safeString2(e,"date","datetime");void 0!==l&&(l.indexOf(" ")>=0?l=this.parse8601(l):(l=parseInt(l),l*=1e3)),"id"in e?void 0!==o&&(o<0?(r="sell",o=-o):r="buy"):(r=this.safeString(e,"type"),"1"===r?r="sell":"0"===r&&(r="buy")),void 0===d&&void 0!==a&&void 0!==o&&(d=a*o),void 0!==d&&(d=Math.abs(d));let u=void 0;return void 0!==c&&(u={cost:c,currency:h}),{id:i,info:e,timestamp:l,datetime:this.iso8601(l),symbol:s,order:n,type:void 0,side:r,takerOrMaker:void 0,price:a,amount:o,cost:d,fee:u}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pair:r.id,time:"hour"},o=await this.publicGetTransactionsPair(this.extend(a,s));return this.parseTrades(o,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostBalance(e),i={info:t},s=Object.keys(this.currencies);for(let r=0;r<s.length;r++){const e=s[r],a=this.currency(e).id,o=this.account();o.free=this.safeFloat(t,a+"_available"),o.used=this.safeFloat(t,a+"_reserved"),o.total=this.safeFloat(t,a+"_balance"),i[e]=o}return this.parseBalance(i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e);let n="privatePost"+this.capitalize(i);const d={pair:o.id,amount:this.amountToPrecision(e,s)};"market"===t?n+="Market":d.price=this.priceToPrecision(e,r),n+="Pair";const c=await this[n](this.extend(d,a)),h=this.parseOrder(c,o);return this.extend(h,{type:t})}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e};return await this.privatePostCancelOrder(this.extend(s,i))}parseOrderStatus(e){return this.safeString({"In Queue":"open",Open:"open",Finished:"closed",Canceled:"canceled"},e,e)}async fetchOrderStatus(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privatePostOrderStatus(this.extend(s,i));return this.parseOrderStatus(this.safeString(r,"status"))}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=void 0;void 0!==t&&(s=this.market(t));const r={id:e},a=await this.privatePostOrderStatus(this.extend(r,i));return this.parseOrder(a,s)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};let a="privatePostUserTransactions",o=void 0;void 0!==e&&(o=this.market(e),r.pair=o.id,a+="Pair"),void 0!==i&&(r.limit=i);const n=await this[a](this.extend(r,s)),d=this.filterBy(n,"type","2");return this.parseTrades(d,o,t,i)}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const r={};void 0!==i&&(r.limit=i);const a=await this.privatePostUserTransactions(this.extend(r,s));let o=void 0;void 0!==e&&(o=this.currency(e));const n=this.filterByArray(a,"type",["0","1"],!1);return this.parseTransactions(n,o,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};void 0!==t&&(r.timedelta=this.milliseconds()-t);const a=await this.privatePostWithdrawalRequests(this.extend(r,s));return this.parseTransactions(a,void 0,t,i)}parseTransaction(e,t){const i=this.parse8601(this.safeString(e,"datetime")),s=this.safeString(e,"id"),r=this.getCurrencyIdFromTransaction(e),a=this.safeCurrencyCode(r,t),o=this.safeFloat(e,"fee");let n=void 0,d=void 0;"amount"in e?d=this.safeFloat(e,"amount"):void 0!==t?(d=this.safeFloat(e,t.id,d),n=t.code):void 0!==a&&void 0!==r&&(d=this.safeFloat(e,r,d),n=a),void 0!==d&&(d=Math.abs(d));let c="ok";"status"in e&&(c=this.parseTransactionStatus(this.safeString(e,"status")));let h=void 0;if("type"in e){const t=this.safeString(e,"type");"0"===t?h="deposit":"1"===t&&(h="withdrawal")}else h="withdrawal";const l=this.safeString(e,"transaction_id");let u=void 0,f=this.safeString(e,"address");if(void 0!==f){const e=f.split("?dt=");e.length>1&&(f=e[0],u=e[1])}const p=f,m=u;let y=void 0;return void 0!==o&&(y={currency:n,cost:o,rate:void 0}),{info:e,id:s,txid:l,timestamp:i,datetime:this.iso8601(i),addressFrom:void 0,addressTo:p,address:f,tagFrom:void 0,tagTo:m,tag:u,type:h,amount:d,currency:a,status:c,updated:void 0,fee:y}}parseTransactionStatus(e){return this.safeString({0:"pending",1:"pending",2:"ok",3:"canceled",4:"failed"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id");let s=this.safeString(e,"type");void 0!==s&&(s="1"===s?"sell":"buy");const r=this.parse8601(this.safeString(e,"datetime"));let a=void 0,o=void 0,n=this.safeStringLower(e,"currency_pair");void 0!==n&&(n=n.replace("/",""),n in this.markets_by_id&&(o=(t=this.markets_by_id[n]).symbol));let d=this.safeFloat(e,"amount"),c=0;const h=[],l=this.safeValue(e,"transactions",[]);let u=void 0,f=void 0;const p=l.length;if(p>0){u=0;for(let e=0;e<p;e++){const r=this.parseTrade(this.extend({order_id:i,side:s},l[e]),t);c=this.sum(c,r.amount),u=this.sum(u,r.fee.cost),void 0===f&&(f=0),f=this.sum(f,r.cost),h.push(r)}a=h[p-1].timestamp}const m=this.parseOrderStatus(this.safeString(e,"status"));"closed"===m&&void 0===d&&(d=c);let y=void 0;void 0!==d&&(y=d-c);let b=this.safeFloat(e,"price");void 0===t&&(t=this.getMarketFromTrades(h));let v=void 0;void 0!==t&&(void 0===o&&(o=t.symbol),v=t.quote),void 0===f?void 0!==b&&(f=b*c):void 0===b&&c>0&&(b=f/c);let g=void 0;return void 0!==u&&void 0!==v&&(g={cost:u,currency:v}),{id:i,clientOrderId:void 0,datetime:this.iso8601(r),timestamp:r,lastTradeTimestamp:a,status:m,symbol:o,type:void 0,side:s,price:b,cost:f,amount:d,filled:c,remaining:y,trades:h,fee:g,info:e}}async fetchOpenOrders(e,t,i,s={}){let r=void 0;await this.loadMarkets(),void 0!==e&&(r=this.market(e));const a=await this.privatePostOpenOrdersAll(s),o=[];for(let n=0;n<a.length;n++){const e=this.parseOrder(a[n],r);o.push(this.extend(e,{status:"open",type:"limit"}))}return void 0===e?this.filterBySinceLimit(o,t,i):this.filterBySymbolSinceLimit(o,e,t,i)}getCurrencyName(e){return"BTC"===e?"bitcoin":e.toLowerCase()}isFiat(e){return"USD"===e||"EUR"===e}async fetchDepositAddress(e,t={}){if(this.isFiat(e))throw new o(this.id+" fiat fetchDepositAddress() for "+e+" is not implemented yet");const i=this.getCurrencyName(e),s="BTC"===e;let r=s?"v1":"private";r+="Post"+this.capitalize(i),r+=s?"Deposit":"",r+="Address";let a=await this[r](t);s&&(a=JSON.parse(a));const n=s?a:this.safeString(a,"address"),d=s?void 0:this.safeString(a,"destination_tag");return this.checkAddress(n),{currency:e,address:n,tag:d,info:a}}async withdraw(e,t,i,s,r={}){if(this.checkAddress(i),this.isFiat(e))throw new o(this.id+" fiat withdraw() for "+e+" is not implemented yet");const a=this.getCurrencyName(e),n={amount:t,address:i};let d="BTC"===e?"v1":"private";d+="Post"+this.capitalize(a)+"Withdrawal","XRP"===e&&void 0!==s&&(n.destination_tag=s);const c=await this[d](this.extend(n,r));return{info:c,id:c.id}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/";"v1"!==t&&(o+=this.version+"/"),o+=this.implodeParams(e,s);let n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{if(this.checkRequiredCredentials(),"v1"===this.safeValue(this.options,"auth","v2")||"v1"===t){const e=this.nonce().toString(),t=e+this.uid+this.apiKey,i=this.encode(this.hmac(this.encode(t),this.encode(this.secret)));n=this.extend({key:this.apiKey,signature:i.toUpperCase(),nonce:e},n),a=this.urlencode(n),r={"Content-Type":"application/x-www-form-urlencoded"}}else{const e="BITSTAMP "+this.apiKey,t=this.uuid(),s=this.milliseconds().toString(),d="v2";let c="";r={"X-Auth":e,"X-Auth-Nonce":t,"X-Auth-Timestamp":s,"X-Auth-Version":d},"POST"===i&&Object.keys(n).length&&(a=this.urlencode(n),c="application/x-www-form-urlencoded",r["Content-Type"]=c);const h=a||"",l=e+i+o.replace("https://","")+c+t+s+d+h,u=this.encode(this.hmac(this.encode(l),this.encode(this.secret)));r["X-Auth-Signature"]=u}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,o,n,d,c,h){if(void 0===d)return;const l=this.safeString(d,"status"),u=this.safeValue(d,"error");if("error"===l||void 0!==u){let e=[];if("string"===typeof u)e.push(u);else if(void 0!==u){const t=Object.keys(u);for(let i=0;i<t.length;i++){const s=t[i],r=this.safeValue(u,s);Array.isArray(r)?e=this.arrayConcat(e,r):e.push(r)}}const t=this.safeValue(d,"reason",{});if("string"===typeof t)e.push(t);else{const i=this.safeValue(t,"__all__",[]);for(let t=0;t<i.length;t++)e.push(i[t])}if("API0005"===this.safeString(d,"code"))throw new r(this.id+" invalid signature, use the uid for the main account if you have subaccounts");const i=this.id+" "+n;for(let s=0;s<e.length;s++){const t=e[s];this.throwExactlyMatchedException(this.exceptions.exact,t,i),this.throwBroadlyMatchedException(this.exceptions.broad,t,i)}throw new a(i)}}}},"9SAk":function(e,t,i){"use strict";const s=i("BVIH");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"fcoinjp",name:"FCoinJP",countries:["JP"],hostname:"fcoinjp.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/54219174-08b66b00-4500-11e9-862d-f522d0fe08c6.jpg",fees:"https://fcoinjp.zendesk.com/hc/en-us/articles/360018727371",www:"https://www.fcoinjp.com",referral:void 0}})}}},"9Uy0":function(e,t,i){"use strict";var s=i("FSRv");function r(e){const t=function(t,i){return"string"===typeof t&&"//"===t.slice(0,2)?e("https:"+t,i):e(t,i)};return t.http=e.http,t.https=e.https,t}e.exports=function(e){return e&&e.Promise&&(s.Promise=e.Promise),{fetch:r(s),Headers:s.Headers,Request:s.Request,Response:s.Response}}},"9kyK":function(e,t,i){"use strict";var s,r=t,a=i("3NQs"),o=a.utils.assert;function n(e){"short"===e.type?this.curve=new a.curve.short(e):"edwards"===e.type?this.curve=new a.curve.edwards(e):this.curve=new a.curve.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function d(e,t){Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get:function(){var i=new n(t);return Object.defineProperty(r,e,{configurable:!0,enumerable:!0,value:i}),i}})}r.PresetCurve=n,d("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:"SHA256",gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),d("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:"SHA256",gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),d("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:"SHA256",gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),d("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:"SHA384",gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),d("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:"SHA512",gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),d("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:"SHA256",gRed:!1,g:["9"]}),d("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:"SHA256",gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{s=i("twX1")}catch(c){s=void 0}d("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:"SHA256",beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",s]})},ANQQ:function(e,t,i){(function(t,s,r){var a=i("eoLT"),o=i("wfEq"),n=i("3mKH"),d=i("5Ekh"),c=i("NY/1"),h=n.IncomingMessage,l=n.readyStates;var u=e.exports=function(e){var i,s=this;d.Writable.call(s),s._opts=e,s._body=[],s._headers={},e.auth&&s.setHeader("Authorization","Basic "+new t(e.auth).toString("base64")),Object.keys(e.headers).forEach((function(t){s.setHeader(t,e.headers[t])}));var r=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!a.abortController)r=!1,i=!0;else if("prefer-streaming"===e.mode)i=!1;else if("allow-wrong-content-type"===e.mode)i=!a.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");i=!0}s._mode=function(e,t){return a.fetch&&t?"fetch":a.mozchunkedarraybuffer?"moz-chunked-arraybuffer":a.msstream?"ms-stream":a.arraybuffer&&e?"arraybuffer":a.vbArray&&e?"text:vbarray":"text"}(i,r),s._fetchTimer=null,s.on("finish",(function(){s._onFinish()}))};o(u,d.Writable),u.prototype.setHeader=function(e,t){var i=e.toLowerCase();-1===f.indexOf(i)&&(this._headers[i]={name:e,value:t})},u.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},u.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},u.prototype._onFinish=function(){var e=this;if(!e._destroyed){var i=e._opts,o=e._headers,n=null;"GET"!==i.method&&"HEAD"!==i.method&&(n=a.arraybuffer?c(t.concat(e._body)):a.blobConstructor?new s.Blob(e._body.map((function(e){return c(e)})),{type:(o["content-type"]||{}).value||""}):t.concat(e._body).toString());var d=[];if(Object.keys(o).forEach((function(e){var t=o[e].name,i=o[e].value;Array.isArray(i)?i.forEach((function(e){d.push([t,e])})):d.push([t,i])})),"fetch"===e._mode){var h=null;if(a.abortController){var u=new AbortController;h=u.signal,e._fetchAbortController=u,"requestTimeout"in i&&0!==i.requestTimeout&&(e._fetchTimer=s.setTimeout((function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()}),i.requestTimeout))}s.fetch(e._opts.url,{method:e._opts.method,headers:d,body:n||void 0,mode:"cors",credentials:i.withCredentials?"include":"same-origin",signal:h}).then((function(t){e._fetchResponse=t,e._connect()}),(function(t){s.clearTimeout(e._fetchTimer),e._destroyed||e.emit("error",t)}))}else{var f=e._xhr=new s.XMLHttpRequest;try{f.open(e._opts.method,e._opts.url,!0)}catch(p){return void r.nextTick((function(){e.emit("error",p)}))}"responseType"in f&&(f.responseType=e._mode.split(":")[0]),"withCredentials"in f&&(f.withCredentials=!!i.withCredentials),"text"===e._mode&&"overrideMimeType"in f&&f.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in i&&(f.timeout=i.requestTimeout,f.ontimeout=function(){e.emit("requestTimeout")}),d.forEach((function(e){f.setRequestHeader(e[0],e[1])})),e._response=null,f.onreadystatechange=function(){switch(f.readyState){case l.LOADING:case l.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(f.onprogress=function(){e._onXHRProgress()}),f.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{f.send(n)}catch(p){return void r.nextTick((function(){e.emit("error",p)}))}}}},u.prototype._onXHRProgress=function(){(function(e){try{var t=e.status;return null!==t&&0!==t}catch(i){return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},u.prototype._connect=function(){var e=this;e._destroyed||(e._response=new h(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",(function(t){e.emit("error",t)})),e.emit("response",e._response))},u.prototype._write=function(e,t,i){this._body.push(e),i()},u.prototype.abort=u.prototype.destroy=function(){this._destroyed=!0,s.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},u.prototype.end=function(e,t,i){"function"===typeof e&&(i=e,e=void 0),d.Writable.prototype.end.call(this,e,t,i)},u.prototype.flushHeaders=function(){},u.prototype.setTimeout=function(){},u.prototype.setNoDelay=function(){},u.prototype.setSocketKeepAlive=function(){};var f=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,i("zkTx").Buffer,i("pCvA"),i("5IsQ"))},Achu:function(e,t,i){"use strict";var s=function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var s=0;s<8;s++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}();e.exports=function(e,t,i,r){var a=s,o=r+i;e^=-1;for(var n=r;n<o;n++)e=e>>>8^a[255&(e^t[n])];return-1^e}},AvHZ:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var s=i("4kqU"),r=i("8kJ5"),a=i("BbEw"),o=i("TJ1y");function n(e,t){return t?e-(2*t+35):e-27}function d(e){return 0===e||1===e}t.ecsign=function(e,t,i){var r=s.sign(e,t),a=r.recovery;return{r:r.signature.slice(0,32),s:r.signature.slice(32,64),v:i?a+(2*i+35):a+27}},t.ecrecover=function(t,i,r,o,c){var h=e.concat([a.setLength(r,32),a.setLength(o,32)],64),l=n(i,c);if(!d(l))throw new Error("Invalid signature v value");var u=s.recover(t,h,l);return s.publicKeyConvert(u,!1).slice(1)},t.toRpcSig=function(t,i,s,r){if(!d(n(t,r)))throw new Error("Invalid signature v value");return a.bufferToHex(e.concat([a.setLengthLeft(i,32),a.setLengthLeft(s,32),a.toBuffer(t)]))},t.fromRpcSig=function(e){var t=a.toBuffer(e);if(65!==t.length)throw new Error("Invalid signature length");var i=t[64];return i<27&&(i+=27),{v:i,r:t.slice(0,32),s:t.slice(32,64)}},t.isValidSignature=function(e,t,i,s,a){void 0===s&&(s=!0);var o=new r("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),c=new r("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(32!==t.length||32!==i.length)return!1;if(!d(n(e,a)))return!1;var h=new r(t),l=new r(i);return!(h.isZero()||h.gt(c)||l.isZero()||l.gt(c))&&(!s||1!==l.cmp(o))},t.hashPersonalMessage=function(t){var i=e.from("\x19Ethereum Signed Message:\n"+t.length.toString(),"utf-8");return o.keccak(e.concat([i,t]))}}).call(this,i("zkTx").Buffer)},"BG8/":function(e,t,i){"use strict";const s=i("NQdM"),{ExchangeError:r}=i("ucJe");e.exports=class extends s{describe(){const e=this.deepExtend(super.describe(),{id:"btctradeim",name:"BtcTrade.im",countries:["HK"],urls:{referral:"https://m.baobi.com/invite?inv=1765b2",logo:"https://user-images.githubusercontent.com/1294454/36770531-c2142444-1c5b-11e8-91e2-a4d90dc85fe8.jpg",api:{web:"https://api.btctrade.im/coin",rest:"https://api.btctrade.im/api/v1"},www:"https://www.btctrade.im",doc:"https://www.btctrade.im/help.api.html",fees:"https://www.btctrade.im/spend.price.html"},status:{status:"error",updated:void 0,eta:void 0,url:void 0},fees:{trading:{maker:.002,taker:.002},funding:{withdraw:{BTC:.001}}}});return e.options.quoteIds=["btc","eth","usc"],e}async request(e,t="public",i="GET",s={},a,o){const n=await this.fetch2(e,t,i,s,a,o);if("web"===t)return n;const d=this.safeValue(n,"data");if(d){if("0"!==this.safeString(n,"code")){const e=this.safeString(n,"msg","Error");throw new r(e)}return d}return n}}},BVIH:function(e,t,i){"use strict";const s=i("OjXq"),{BadSymbol:r,ExchangeError:a,ExchangeNotAvailable:o,ArgumentsRequired:n,InsufficientFunds:d,InvalidOrder:c,RateLimitExceeded:h,InvalidNonce:l,AuthenticationError:u,NotSupported:f}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"fcoin",name:"FCoin",countries:["CN"],rateLimit:2e3,userAgent:this.userAgents.chrome39,version:"v2",accounts:void 0,accountsById:void 0,hostname:"fcoin.com",has:{CORS:!1,fetchDepositAddress:!1,fetchOHLCV:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchOrderBook:!0,fetchOrderBooks:!1,fetchTradingLimits:!1,withdraw:!1,fetchCurrencies:!1},timeframes:{"1m":"M1","3m":"M3","5m":"M5","15m":"M15","30m":"M30","1h":"H1","1d":"D1","1w":"W1","1M":"MN"},urls:{logo:"https://user-images.githubusercontent.com/1294454/42244210-c8c42e1e-7f1c-11e8-8710-a5fb63b165c4.jpg",api:{public:"https://api.{hostname}",private:"https://api.{hostname}",market:"https://api.{hostname}",openapi:"https://www.{hostname}"},www:"https://www.fcoin.com",referral:"https://www.fcoin.com/i/Z5P7V",doc:"https://developer.fcoin.com",fees:"https://fcoinjp.zendesk.com/hc/en-us/articles/360018727371"},api:{openapi:{get:["symbols"]},market:{get:["ticker/{symbol}","depth/{level}/{symbol}","trades/{symbol}","candles/{timeframe}/{symbol}"]},public:{get:["symbols","currencies","server-time"]},private:{get:["accounts/balance","assets/accounts/balance","broker/otc/suborders","broker/otc/suborders/{id}","broker/otc/suborders/{id}/payments","broker/otc/users","broker/otc/users/me/balances","broker/otc/users/me/balance","broker/leveraged_accounts/account","broker/leveraged_accounts","orders","orders/{order_id}","orders/{order_id}/match-results"],post:["assets/accounts/assets-to-spot","accounts/spot-to-assets","broker/otc/assets/transfer/in","broker/otc/assets/transfer/out","broker/otc/suborders","broker/otc/suborders/{id}/pay_confirm","broker/otc/suborders/{id}/cancel","broker/leveraged/assets/transfer/in","broker/leveraged/assets/transfer/out","orders","orders/{order_id}/submit-cancel"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:-2e-4,taker:3e-4}},limits:{amount:{min:.01,max:1e5}},options:{createMarketBuyOrderRequiresPrice:!0,fetchMarketsMethod:"fetch_markets_from_open_api",limits:{"BTM/USDT":{amount:{min:.1,max:1e7}},"ETC/USDT":{amount:{min:.001,max:4e5}},"ETH/USDT":{amount:{min:.001,max:1e4}},"LTC/USDT":{amount:{min:.001,max:4e4}},"BCH/USDT":{amount:{min:.001,max:5e3}},"BTC/USDT":{amount:{min:.001,max:1e3}},"ICX/ETH":{amount:{min:.01,max:3e6}},"OMG/ETH":{amount:{min:.01,max:5e5}},"FT/USDT":{amount:{min:1,max:1e7}},"ZIL/ETH":{amount:{min:1,max:1e7}},"ZIP/ETH":{amount:{min:1,max:1e7}},"FT/BTC":{amount:{min:1,max:1e7}},"FT/ETH":{amount:{min:1,max:1e7}}}},exceptions:{400:f,401:u,405:f,429:h,1002:o,1016:d,2136:u,3008:c,6004:l,6005:u,40003:r},commonCurrencies:{DAG:"DAGX",PAI:"PCHAIN",MT:"Mariana Token"}})}async fetchMarkets(e={}){const t=this.safeString(this.options,"fetchMarketsMethod","fetch_markets_from_open_api");return await this[t](e)}async fetchMarketsFromOpenAPI(e={}){const t=await this.openapiGetSymbols(e),i=this.safeValue(t,"data",{}),s=this.safeValue(i,"symbols",{}),r=Object.keys(s),a=[];for(let o=0;o<r.length;o++){const e=s[r[o]],t=this.safeString(e,"symbol"),i=this.safeString(e,"base_currency"),n=this.safeString(e,"quote_currency"),d=this.safeCurrencyCode(i),c=this.safeCurrencyCode(n),h=d+"/"+c,l={price:this.safeInteger(e,"price_decimal"),amount:this.safeInteger(e,"amount_decimal")},u={amount:{min:this.safeFloat(e,"limit_amount_min"),max:this.safeFloat(e,"limit_amount_max")},price:{min:Math.pow(10,-l.price),max:Math.pow(10,l.price)},cost:{min:void 0,max:void 0}},f=this.safeValue(e,"tradeable",!1);a.push({id:t,symbol:h,base:d,quote:c,baseId:i,quoteId:n,active:f,precision:l,limits:u,info:e})}return a}async fetchMarketsFromAPI(e={}){const t=await this.publicGetSymbols(e),i=[],s=this.safeValue(t,"data");for(let r=0;r<s.length;r++){const e=s[r],t=this.safeString(e,"name"),a=this.safeString(e,"base_currency"),o=this.safeString(e,"quote_currency"),n=this.safeCurrencyCode(a),d=this.safeCurrencyCode(o),c=n+"/"+d,h={price:e.price_decimal,amount:e.amount_decimal};let l={price:{min:Math.pow(10,-h.price),max:Math.pow(10,h.price)}};const u=this.safeValue(e,"tradable",!1);c in this.options.limits&&(l=this.extend(this.options.limits[c],l)),i.push({id:t,symbol:c,base:n,quote:d,baseId:a,quoteId:o,active:u,precision:h,limits:l,info:e})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccountsBalance(e),i={info:t},s=this.safeValue(t,"data");for(let r=0;r<s.length;r++){const e=s[r],t=this.safeString(e,"currency"),a=this.safeCurrencyCode(t),o=this.account();o.free=this.safeFloat(e,"available"),o.total=this.safeFloat(e,"balance"),o.used=this.safeFloat(e,"frozen"),i[a]=o}return this.parseBalance(i)}parseBidsAsks(e,t=0,i=1){const s=[],r=e.length,a=parseInt(r/2);for(let o=0;o<a;o++){const r=2*o,a=this.sum(r,t),n=this.sum(r,i);s.push([this.safeFloat(e,a),this.safeFloat(e,n)])}return s}async fetchOrderBook(e,t,i={}){if(await this.loadMarkets(),void 0!==t){if(20!==t&&150!==t)throw new a(this.id+" fetchOrderBook supports limit of 20 or 150. Other values are not accepted");t="L"+t.toString()}else t="L20";const s={symbol:this.marketId(e),level:t},r=await this.marketGetDepthLevelSymbol(this.extend(s,i)),o=this.safeValue(r,"data");return this.parseOrderBook(o,o.ts,"bids","asks",0,1)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.marketGetTickerSymbol(this.extend(s,t));return this.parseTicker(r.data,i)}parseTicker(e,t){let i=void 0;if(void 0===t){const i=this.safeString(e,"type");if(void 0!==i){const e=i.split(".")[1];e in this.markets_by_id&&(t=this.markets_by_id[e])}}const s=e.ticker,r=this.safeFloat(s,0);return void 0!==t&&(i=t.symbol),{symbol:i,timestamp:void 0,datetime:this.iso8601(void 0),high:this.safeFloat(s,7),low:this.safeFloat(s,8),bid:this.safeFloat(s,2),bidVolume:this.safeFloat(s,3),ask:this.safeFloat(s,4),askVolume:this.safeFloat(s,5),vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(s,9),quoteVolume:this.safeFloat(s,10),info:e}}parseTrade(e,t){let i=void 0;void 0!==t&&(i=t.symbol);const s=this.safeInteger(e,"ts"),r=this.safeStringLower(e,"side"),a=this.safeString(e,"id"),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount");let d=void 0;void 0!==o&&void 0!==n&&(d=n*o);return{id:a,info:e,timestamp:s,datetime:this.iso8601(s),symbol:i,type:void 0,order:void 0,side:r,takerOrMaker:void 0,price:o,amount:n,cost:d,fee:void 0}}async fetchTrades(e,t,i=50,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id,limit:i};void 0!==t&&(a.timestamp=parseInt(t/1e3));const o=await this.marketGetTradesSymbol(this.extend(a,s));return this.parseTrades(o.data,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o={symbol:this.marketId(e),side:i,type:t};if("market"===t&&"buy"===i)if(this.options.createMarketBuyOrderRequiresPrice){if(void 0===r)throw new c(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");o.amount=this.costToPrecision(e,s*r)}else o.amount=this.costToPrecision(e,s);else o.amount=this.amountToPrecision(e,s);"limit"!==t&&"ioc"!==t&&"fok"!==t||(o.price=this.priceToPrecision(e,r));const n=await this.privatePostOrders(this.extend(o,a));return{info:n,id:n.data}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},r=await this.privatePostOrdersOrderIdSubmitCancel(this.extend(s,i)),a=this.parseOrder(r);return this.extend(a,{id:e,status:"canceled"})}parseOrderStatus(e){return this.safeString({submitted:"open",canceled:"canceled",partial_filled:"open",partial_canceled:"canceled",filled:"closed",pending_cancel:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"side"),r=this.parseOrderStatus(this.safeString(e,"state"));let a=void 0;if(void 0===t){const i=this.safeString(e,"symbol");i in this.markets_by_id&&(t=this.markets_by_id[i])}const o=this.safeString(e,"type"),n=this.safeInteger(e,"created_at"),d=this.safeFloat(e,"amount"),c=this.safeFloat(e,"filled_amount");let h=void 0,l=this.safeFloat(e,"price"),u=this.safeFloat(e,"executed_value");void 0!==c&&(void 0!==d&&(h=d-c),void 0===u?void 0!==l&&(u=l*c):u>0&&c>0&&(l=u/c));let f=void 0,p=void 0;const m=this.safeFloat(e,"fees_income");return void 0!==m&&m>0?(void 0!==t&&(a=t.symbol,f="buy"===s?t.quote:t.base),p=-m):(p=this.safeFloat(e,"fill_fees"),void 0!==t&&(a=t.symbol,f="buy"===s?t.base:t.quote)),{info:e,id:i,clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,symbol:a,type:o,side:s,price:l,cost:u,amount:d,remaining:h,filled:c,average:void 0,status:r,fee:{cost:p,currency:f},trades:void 0}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},r=await this.privateGetOrdersOrderId(this.extend(s,i));return this.parseOrder(r.data)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({states:"submitted,partial_filled"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({states:"partial_canceled,filled"},s))}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new n(this.id+" fetchOrders() requires a `symbol` argument");await this.loadMarkets();const r=this.market(e),a={symbol:r.id,states:"submitted,partial_filled,partial_canceled,filled,canceled"};void 0!==i&&(a.limit=i);const o=await this.privateGetOrders(this.extend(a,s));return this.parseOrders(o.data,r,t,i)}parseOHLCV(e,t,i="1m",s,r){return[this.safeTimestamp(e,"id"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"base_vol")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e);void 0===s&&(s=20);const o={symbol:a.id,timeframe:this.timeframes[t],limit:s};if(void 0!==i){const e=parseInt(i/1e3),r=s*this.parseTimeframe(t);o.before=this.sum(e,r)-1}const n=await this.marketGetCandlesTimeframeSymbol(this.extend(o,r));return this.parseOHLCVs(n.data,a,t,i,s)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="/";const n="openapi"===t,d="private"===t;o+=n?t+"/":"",o+=this.version+"/",o+=d||n?"":t+"/",o+=this.implodeParams(e,s);let c=this.omit(s,this.extractParams(e)),h=this.implodeParams(this.urls.api[t],{hostname:this.hostname});if(h+=o,d){this.checkRequiredCredentials();const e=this.nonce().toString();c=this.keysort(c),"GET"===i&&Object.keys(c).length&&(h+="?"+this.rawencode(c));let t=i+h+e;"POST"===i&&Object.keys(c).length&&(a=this.json(c),t+=this.urlencode(c));const s=this.stringToBase64(this.encode(t));let o=this.hmac(s,this.encode(this.secret),"sha1","binary");o=this.decode(this.stringToBase64(o)),r={"FC-ACCESS-KEY":this.apiKey,"FC-ACCESS-SIGNATURE":o,"FC-ACCESS-TIMESTAMP":e,"Content-Type":"application/json"}}else Object.keys(c).length&&(h+="?"+this.urlencode(c));return{url:h,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,o,n,d,c){if(void 0===n)return;const h=this.safeString(n,"status");if("0"!==h&&"ok"!==h){const e=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions,h,e),new a(e)}}}},BVgh:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,AuthenticationError:a,ExchangeNotAvailable:o}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"exx",name:"EXX",countries:["CN"],rateLimit:100,userAgent:this.userAgents.chrome,has:{fetchOrder:!0,fetchTickers:!0,fetchOpenOrders:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/37770292-fbf613d0-2de4-11e8-9f79-f2dc451b8ccb.jpg",api:{public:"https://api.exx.com/data/v1",private:"https://trade.exx.com/api"},www:"https://www.exx.com/",doc:"https://www.exx.com/help/restApi",fees:"https://www.exx.com/help/rate",referral:"https://www.exx.com/r/fde4260159e53ab8a58cc9186d35501f?recommQd=1"},api:{public:{get:["markets","tickers","ticker","depth","trades"]},private:{get:["order","cancel","getOrder","getOpenOrders","getBalance"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BCC:3e-4,BCD:0,BOT:10,BTC:.001,BTG:0,BTM:25,BTS:3,EOS:1,ETC:.01,ETH:.01,ETP:.012,HPY:0,HSR:.001,INK:20,LTC:.005,MCO:.6,MONA:.01,QASH:5,QCASH:5,QTUM:.01,USDT:5}}},commonCurrencies:{TV:"TIV"},exceptions:{103:a}})}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=Object.keys(t),s=[];for(let r=0;r<i.length;r++){const e=i[r],a=t[e],[o,n]=e.split("_"),d=this.safeCurrencyCode(o),c=this.safeCurrencyCode(n),h=d+"/"+c,l=!0===a.isOpen,u={amount:parseInt(a.amountScale),price:parseInt(a.priceScale)};s.push({id:e,symbol:h,base:d,quote:c,baseId:o,quoteId:n,active:l,precision:u,limits:{amount:{min:Math.pow(10,-u.amount),max:Math.pow(10,u.amount)},price:{min:Math.pow(10,-u.price),max:Math.pow(10,u.price)},cost:{min:void 0,max:void 0}},info:a})}return s}parseTicker(e,t){const i=t.symbol,s=this.safeInteger(e,"date");e=e.ticker;const r=this.safeFloat(e,"last");return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:this.safeFloat(e,"riseRate"),percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={currency:i.id},r=await this.publicGetTicker(this.extend(s,t));return this.parseTicker(r,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(t),s={},r=this.milliseconds(),a=Object.keys(i);for(let o=0;o<a.length;o++){const e=a[o];if(!(e in this.marketsById))continue;const t=this.marketsById[e],n=t.symbol,d={date:r,ticker:i[e]};s[n]=this.parseTicker(d,t)}return s}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={currency:this.marketId(e)},r=await this.publicGetDepth(this.extend(s,i)),a=this.safeTimestamp(r,"timestamp");return this.parseOrderBook(r,a)}parseTrade(e,t){const i=this.safeTimestamp(e,"date"),s=this.safeFloat(e,"price"),r=this.safeFloat(e,"amount");let a=void 0;void 0!==s&&void 0!==r&&(a=s*r);let o=void 0;void 0!==t&&(o=t.symbol);const n=this.safeString(e,"type");return{id:this.safeString(e,"tid"),info:e,timestamp:i,datetime:this.iso8601(i),symbol:o,order:void 0,type:"limit",side:n,takerOrMaker:void 0,price:s,amount:r,cost:a,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={currency:r.id},o=await this.publicGetTrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetGetBalance(e),i={info:t},s=this.safeValue(t,"funds"),r=Object.keys(s);for(let a=0;a<r.length;a++){const e=r[a],t=s[e],o=this.safeCurrencyCode(e),n={free:this.safeFloat(t,"balance"),used:this.safeFloat(t,"freeze"),total:this.safeFloat(t,"total")};i[o]=n}return this.parseBalance(i)}parseOrder(e,t){const i=t.symbol,s=parseInt(e.trade_date),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"trade_money"),o=this.safeFloat(e,"total_amount"),n=this.safeFloat(e,"trade_amount",0),d=parseFloat(this.amountToPrecision(i,o-n));let c=this.safeInteger(e,"status");c=1===c?"canceled":2===c?"closed":"open";let h=void 0;return"fees"in e&&(h={cost:this.safeFloat(e,"fees"),currency:t.quote}),{id:this.safeString(e,"id"),clientOrderId:void 0,datetime:this.iso8601(s),timestamp:s,lastTradeTimestamp:void 0,status:c,symbol:i,type:"limit",side:e.type,price:r,cost:a,amount:o,filled:n,remaining:d,trades:void 0,fee:h,info:e}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),n={currency:o.id,type:i,price:r,amount:s},d=await this.privateGetOrder(this.extend(n,a)),c=this.safeString(d,"id"),h=this.parseOrder({id:c,trade_date:this.milliseconds(),total_amount:s,price:r,type:i,info:d},o);return this.orders[c]=h,h}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e,currency:this.market(t).id};return await this.privateGetCancel(this.extend(s,i))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s=this.market(t),r={id:e,currency:s.id},a=await this.privateGetGetOrder(this.extend(r,i));return this.parseOrder(a,s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={currency:r.id},o=await this.privateGetGetOpenOrders(this.extend(a,s));return Array.isArray(o)?this.parseOrders(o,r,t,i):[]}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/"+e;if("public"===t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();const e=this.urlencode(this.keysort(this.extend({accesskey:this.apiKey,nonce:this.nonce()},s)));o+="?"+e+"&signature="+this.hmac(this.encode(e),this.encode(this.secret),"sha512"),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,d,c,h){if(void 0===d)return;const l=this.safeString(d,"code"),u=this.safeString(d,"message"),f=this.id+" "+n;if("100"===l)return;if(void 0!==l){if(this.throwExactlyMatchedException(this.exceptions,l,f),"308"===l)return;throw new r(f)}const p=this.safeValue(d,"result");if(void 0!==p&&!p)throw"\u670d\u52a1\u7aef\u5fd9\u788c"===u?new o(f):new r(f)}}},BbEw:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var s=i("e0KM"),r=i("8kJ5");t.zeros=function(t){return e.allocUnsafe(t).fill(0)},t.setLengthLeft=function(e,i,s){void 0===s&&(s=!1);var r=t.zeros(i);return e=t.toBuffer(e),s?e.length<i?(e.copy(r),r):e.slice(0,i):e.length<i?(e.copy(r,i-e.length),r):e.slice(-i)},t.setLength=t.setLengthLeft,t.setLengthRight=function(e,i){return t.setLength(e,i,!0)},t.unpad=function(e){for(var t=(e=s.stripHexPrefix(e))[0];e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e},t.stripZeros=t.unpad,t.toBuffer=function(t){if(!e.isBuffer(t))if(Array.isArray(t))t=e.from(t);else if("string"===typeof t){if(!s.isHexString(t))throw new Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: "+t);t=e.from(s.padToEven(s.stripHexPrefix(t)),"hex")}else if("number"===typeof t)t=s.intToBuffer(t);else if(null===t||void 0===t)t=e.allocUnsafe(0);else if(r.isBN(t))t=t.toArrayLike(e);else{if(!t.toArray)throw new Error("invalid type");t=e.from(t.toArray())}return t},t.bufferToInt=function(e){return new r(t.toBuffer(e)).toNumber()},t.bufferToHex=function(e){return"0x"+(e=t.toBuffer(e)).toString("hex")},t.fromSigned=function(e){return new r(e).fromTwos(256)},t.toUnsigned=function(t){return e.from(t.toTwos(256).toArray())},t.addHexPrefix=function(e){return"string"!==typeof e?e:s.isHexPrefixed(e)?e:"0x"+e},t.baToJSON=function(i){if(e.isBuffer(i))return"0x"+i.toString("hex");if(i instanceof Array){for(var s=[],r=0;r<i.length;r++)s.push(t.baToJSON(i[r]));return s}}}).call(this,i("zkTx").Buffer)},Bqph:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,BadRequest:a,AuthenticationError:o,InvalidOrder:n,InsufficientFunds:d,OrderNotFound:c,PermissionDenied:h,AddressPending:l}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"upbit",name:"Upbit",countries:["KR"],version:"v1",rateLimit:1e3,certified:!0,pro:!0,has:{CORS:!0,createDepositAddress:!0,createMarketOrder:!0,fetchDepositAddress:!0,fetchClosedOrders:!0,fetchMyTrades:!1,fetchOHLCV:!0,fetchOrder:!0,fetchOrderBooks:!0,fetchOpenOrders:!0,fetchOrders:!1,fetchTickers:!0,withdraw:!0,fetchDeposits:!0,fetchWithdrawals:!0,fetchTransactions:!1},timeframes:{"1m":"minutes","3m":"minutes","5m":"minutes","15m":"minutes","30m":"minutes","1h":"minutes","4h":"minutes","1d":"days","1w":"weeks","1M":"months"},hostname:"api.upbit.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/49245610-eeaabe00-f423-11e8-9cba-4b0aed794799.jpg",api:{public:"https://{hostname}",private:"https://{hostname}"},www:"https://upbit.com",doc:"https://docs.upbit.com/docs/%EC%9A%94%EC%B2%AD-%EC%88%98-%EC%A0%9C%ED%95%9C",fees:"https://upbit.com/service_center/guide"},api:{public:{get:["market/all","candles/{timeframe}","candles/{timeframe}/{unit}","candles/minutes/{unit}","candles/minutes/1","candles/minutes/3","candles/minutes/5","candles/minutes/15","candles/minutes/30","candles/minutes/60","candles/minutes/240","candles/days","candles/weeks","candles/months","trades/ticks","ticker","orderbook"]},private:{get:["accounts","orders/chance","order","orders","withdraws","withdraw","withdraws/chance","deposits","deposit","deposits/coin_addresses","deposits/coin_address"],post:["orders","withdraws/coin","withdraws/krw","deposits/generate_coin_address"],delete:["order"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.0025,taker:.0025},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},exceptions:{exact:{"This key has expired.":o,"Missing request parameter error. Check the required parameters!":a,"side is missing, side does not have a valid value":n},broad:{thirdparty_agreement_required:h,out_of_scope:h,order_not_found:c,insufficient_funds:d,invalid_access_key:o,jwt_verification:o,create_ask_error:r,create_bid_error:r,volume_too_large:n,invalid_funds:n}},options:{createMarketBuyOrderRequiresPrice:!0,fetchTickersMaxLength:4096,fetchOrderBooksMaxLength:4096,symbolSeparator:"-",tradingFeesByQuoteCurrency:{KRW:5e-4}}})}async fetchCurrency(e,t={}){await this.loadMarkets();const i=this.currency(e);return await this.fetchCurrencyById(i.id,t)}async fetchCurrencyById(e,t={}){const i={currency:e},s=await this.privateGetWithdrawsChance(this.extend(i,t)),r=this.safeValue(s,"member_level",{}),a=this.safeValue(s,"currency",{}),o=this.safeValue(s,"withdraw_limit",{}),n=this.safeValue(o,"can_withdraw"),d=this.safeString(a,"wallet_state"),c=this.safeValue(r,"wallet_locked"),h=this.safeValue(r,"locked");let l=!0;void 0!==n&&n?l=!1:"working"!==d?l=!1:void 0!==c&&c?l=!1:void 0!==h&&h&&(l=!1);const u=this.safeFloat(o,"onetime"),f=this.safeFloat(o,"daily",u),p=this.safeFloat(o,"remaining_daily",f);let m=void 0;m=p>0?p:f;const y=this.safeString(a,"code"),b=this.safeCurrencyCode(y);return{info:s,id:y,code:b,name:b,active:l,fee:this.safeFloat(a,"withdraw_fee"),precision:void 0,limits:{withdraw:{min:this.safeFloat(o,"minimum"),max:m}}}}async fetchMarket(e,t={}){await this.loadMarkets();const i=this.market(e);return await this.fetchMarketById(i.id,t)}async fetchMarketById(e,t={}){const i={market:e},s=await this.privateGetOrdersChance(this.extend(i,t)),r=this.safeValue(s,"market"),a=this.safeValue(r,"bid"),o=this.safeValue(r,"ask"),n=this.safeString(r,"id"),d=this.safeString(o,"currency"),c=this.safeString(a,"currency"),h=this.safeCurrencyCode(d),l=this.safeCurrencyCode(c),u=h+"/"+l,f={amount:8,price:8},p="active"===this.safeString(r,"state"),m=this.safeFloat(s,"bid_fee"),y=this.safeFloat(s,"ask_fee"),b=Math.max(m,y);return{info:s,id:n,symbol:u,base:h,quote:l,baseId:d,quoteId:c,active:p,precision:f,maker:b,taker:b,limits:{amount:{min:this.safeFloat(o,"min_total"),max:void 0},price:{min:Math.pow(10,-f.price),max:void 0},cost:{min:this.safeFloat(a,"min_total"),max:this.safeFloat(r,"max_total")}}}}async fetchMarkets(e={}){const t=await this.publicGetMarketAll(e),i=[];for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"market"),[a,o]=r.split("-"),n=this.safeCurrencyCode(o),d=this.safeCurrencyCode(a),c=n+"/"+d,h={amount:8,price:8},l=!0,u=this.safeFloat(this.options.tradingFeesByQuoteCurrency,d,this.fees.trading.maker),f=this.safeFloat(this.options.tradingFeesByQuoteCurrency,d,this.fees.trading.taker);i.push({id:r,symbol:c,base:n,quote:d,baseId:o,quoteId:a,active:l,info:e,precision:h,maker:u,taker:f,limits:{amount:{min:Math.pow(10,-h.amount),max:void 0},price:{min:Math.pow(10,-h.price),max:void 0},cost:{min:void 0,max:void 0}}})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccounts(e),i={info:t};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"currency"),a=this.safeCurrencyCode(r),o=this.account();o.free=this.safeFloat(e,"balance"),o.used=this.safeFloat(e,"locked"),i[a]=o}return this.parseBalance(i)}getSymbolFromMarketId(e,t){if(void 0===e)return;if(void 0!==(t=this.safeValue(this.markets_by_id,e,t)))return t.symbol;const[i,s]=e.split(this.options.symbolSeparator);return this.safeCurrencyCode(i)+"/"+this.safeCurrencyCode(s)}async fetchOrderBooks(e,t,i={}){await this.loadMarkets();let s=void 0;if(void 0===e){if(s=this.ids.join(","),s.length>this.options.fetchOrderBooksMaxLength){const e=this.ids.length;throw new r(this.id+" has "+e.toString()+" symbols ("+s.length.toString()+" characters) exceeding max URL length ("+this.options.fetchOrderBooksMaxLength.toString()+" characters), you are required to specify a list of symbols in the first argument to fetchOrderBooks")}}else s=this.marketIds(e),s=s.join(",");const a={markets:s},o=await this.publicGetOrderbook(this.extend(a,i)),n={};for(let r=0;r<o.length;r++){const e=o[r],t=this.getSymbolFromMarketId(this.safeString(e,"market")),i=this.safeInteger(e,"timestamp");n[t]={bids:this.sortBy(this.parseBidsAsks(e.orderbook_units,"bid_price","bid_size"),0,!0),asks:this.sortBy(this.parseBidsAsks(e.orderbook_units,"ask_price","ask_size"),0),timestamp:i,datetime:this.iso8601(i),nonce:void 0}}return n}async fetchOrderBook(e,t,i={}){const s=await this.fetchOrderBooks([e],t,i);return this.safeValue(s,e)}parseTicker(e,t){const i=this.safeInteger(e,"trade_timestamp"),s=this.getSymbolFromMarketId(this.safeString2(e,"market","code"),t),r=this.safeFloat(e,"prev_closing_price"),a=this.safeFloat(e,"trade_price"),o=this.safeFloat(e,"signed_change_price"),n=this.safeFloat(e,"signed_change_rate");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high_price"),low:this.safeFloat(e,"low_price"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"opening_price"),close:a,last:a,previousClose:r,change:o,percentage:n,average:void 0,baseVolume:this.safeFloat(e,"acc_trade_volume_24h"),quoteVolume:this.safeFloat(e,"acc_trade_price_24h"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=void 0;if(void 0===e){if(i=this.ids.join(","),i.length>this.options.fetchTickersMaxLength){const e=this.ids.length;throw new r(this.id+" has "+e.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchTickers")}}else i=this.marketIds(e),i=i.join(",");const s={markets:i},a=await this.publicGetTicker(this.extend(s,t)),o={};for(let r=0;r<a.length;r++){const e=this.parseTicker(a[r]);o[e.symbol]=e}return o}async fetchTicker(e,t={}){const i=await this.fetchTickers([e],t);return this.safeValue(i,e)}parseTrade(e,t){const i=this.safeString2(e,"sequential_id","uuid");let s=this.safeInteger(e,"timestamp");void 0===s&&(s=this.parse8601(this.safeString(e,"created_at")));let r=void 0;const a=this.safeStringLower2(e,"ask_bid","side");"ask"===a?r="sell":"bid"===a&&(r="buy");let o=this.safeFloat(e,"funds");const n=this.safeFloat2(e,"trade_price","price"),d=this.safeFloat2(e,"trade_volume","volume");void 0===o&&void 0!==d&&void 0!==n&&(o=n*d);const c=this.safeString2(e,"market","code");let h=void 0,l=void 0,u=void 0;if(void 0!==(t=this.safeValue(this.markets_by_id,c,t)))u=t.symbol,l=t.quote;else{const[e,t]=c.split("-"),i=this.safeCurrencyCode(e),s=this.safeCurrencyCode(t);u=i+"/"+s,l=s}const f=this.safeString(e,a+"_fee");return void 0!==f&&(h={currency:l,cost:f}),{id:i,info:e,order:void 0,timestamp:s,datetime:this.iso8601(s),symbol:u,type:"limit",side:r,takerOrMaker:void 0,price:n,amount:d,cost:o,fee:h}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e);void 0===i&&(i=200);const a={market:r.id,count:i},o=await this.publicGetTradesTicks(this.extend(a,s));return this.parseTrades(o,r,t,i)}parseOHLCV(e,t,i="1d",s,r){return[this.parse8601(this.safeString(e,"candle_date_time_utc")),this.safeFloat(e,"opening_price"),this.safeFloat(e,"high_price"),this.safeFloat(e,"low_price"),this.safeFloat(e,"trade_price"),this.safeFloat(e,"candle_acc_trade_volume")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o=this.parseTimeframe(t),n=this.timeframes[t];void 0===s&&(s=200);const d={market:a.id,timeframe:n,count:s};let c="publicGetCandlesTimeframe";if("minutes"===n){const e=Math.round(o/60);d.unit=e,c+="Unit"}void 0!==i&&(d.to=this.iso8601(this.sum(i,o*s*1e3)));const h=await this[c](this.extend(d,r));return this.parseOHLCVs(h,a,t,i,s)}async createOrder(e,t,i,s,r,a={}){if("market"===t&&"buy"===i&&this.options.createMarketBuyOrderRequiresPrice){if(void 0===r)throw new n(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");s*=r}let o=void 0;if("buy"===i)o="bid";else{if("sell"!==i)throw new n(this.id+" createOrder allows buy or sell side only!");o="ask"}await this.loadMarkets();const d={market:this.market(e).id,side:o};"limit"===t?(d.volume=this.amountToPrecision(e,s),d.price=this.priceToPrecision(e,r),d.ord_type=t):"market"===t&&("buy"===i?(d.ord_type="price",d.price=this.priceToPrecision(e,s)):"sell"===i&&(d.ord_type=t,d.volume=this.amountToPrecision(e,s)));const c=await this.privatePostOrders(this.extend(d,a));return this.parseOrder(c)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={uuid:e},r=await this.privateDeleteOrder(this.extend(s,i));return this.parseOrder(r)}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==i&&(r.limit=i);const o=await this.privateGetDeposits(this.extend(r,s));return this.parseTransactions(o,a,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==i&&(r.limit=i);const o=await this.privateGetWithdraws(this.extend(r,s));return this.parseTransactions(o,a,t,i)}parseTransactionStatus(e){return this.safeString({ACCEPTED:"ok",submitting:"pending",submitted:"pending",almost_accepted:"pending",rejected:"failed",accepted:"pending",processing:"pending",done:"ok",canceled:"canceled"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"uuid"),s=this.safeFloat(e,"amount"),r=this.safeString(e,"txid"),a=this.parse8601(this.safeString(e,"done_at")),o=this.parse8601(this.safeString(e,"created_at",a));let n=this.safeString(e,"type");"withdraw"===n&&(n="withdrawal");const d=this.safeString(e,"currency"),c=this.safeCurrencyCode(d),h=this.parseTransactionStatus(this.safeString(e,"state")),l=this.safeFloat(e,"fee");return{info:e,id:i,currency:c,amount:s,address:void 0,tag:void 0,status:h,type:n,updated:a,txid:r,timestamp:o,datetime:this.iso8601(o),fee:{currency:c,cost:l}}}parseOrderStatus(e){return this.safeString({wait:"open",done:"closed",cancel:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"uuid");let s=this.safeString(e,"side");s="bid"===s?"buy":"sell";let r=this.safeString(e,"ord_type");const a=this.parse8601(this.safeString(e,"created_at")),o=this.parseOrderStatus(this.safeString(e,"state"));let n=void 0,d=this.safeFloat(e,"price");const c=this.safeFloat(e,"volume"),h=this.safeFloat(e,"remaining_volume"),l=this.safeFloat(e,"executed_volume");let u=void 0;"price"===r&&(r="market",u=d,d=void 0);let f=void 0,p=void 0,m=this.safeFloat(e,"paid_fee"),y=void 0;const b=this.safeString(e,"market");let v=void 0;if(void 0!==(t=this.safeValue(this.markets_by_id,b)))v=t.symbol,y=t.quote;else{const[e,t]=b.split("-"),i=this.safeCurrencyCode(e),s=this.safeCurrencyCode(t);v=i+"/"+s,y=s}let g=this.safeValue(e,"trades",[]);g=this.parseTrades(g,t,void 0,void 0,{order:i});const w=g.length;if(w>0){n=g[w-1].timestamp;let e=!1;void 0===m&&(e=!0,m=0),u=0;for(let t=0;t<w;t++){const i=g[t];if(u=this.sum(u,i.cost),e){const e=this.safeValue(g[t],"fee",{}),i=this.safeFloat(e,"cost");void 0!==i&&(m=this.sum(m,i))}}f=u/l}return void 0!==m&&(p={currency:y,cost:m}),{info:e,id:i,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:n,symbol:v,type:r,side:s,price:d,cost:u,average:f,amount:c,filled:l,remaining:h,status:o,fee:p,trades:g}}async fetchOrdersByState(e,t,i,s,r={}){await this.loadMarkets();const a={state:e};let o=void 0;void 0!==t&&(o=this.market(t),a.market=o.id);const n=await this.privateGetOrders(this.extend(a,r));return this.parseOrders(n,o,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByState("wait",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByState("done",e,t,i,s)}async fetchCanceledOrders(e,t,i,s={}){return await this.fetchOrdersByState("cancel",e,t,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={uuid:e},r=await this.privateGetOrder(this.extend(s,i));return this.parseOrder(r)}parseDepositAddresses(e){const t=[];for(let i=0;i<e.length;i++)t.push(this.parseDepositAddress(e[i]));return t}async fetchDepositAddresses(e,t={}){await this.loadMarkets();const i=await this.privateGetDepositsCoinAddresses(t);return this.parseDepositAddresses(i)}parseDepositAddress(e,t){const i=this.safeString(e,"deposit_address"),s=this.safeString(e,"secondary_address"),r=this.safeString(e,"currency"),a=this.safeCurrencyCode(r);return this.checkAddress(i),{currency:a,address:i,tag:s,info:e}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s=await this.privateGetDepositsCoinAddress(this.extend({currency:i.id},t));return this.parseDepositAddress(s)}async createDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privatePostDepositsGenerateCoinAddress(this.extend(i,t));if(void 0!==this.safeString(s,"message"))throw new l(this.id+" is generating "+e+" deposit address, call fetchDepositAddress or createDepositAddress one more time later to retrieve the generated address");return this.parseDepositAddress(s)}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a=this.currency(e),o={amount:t};let n="privatePostWithdraws";"KRW"!==e?(n+="Coin",o.currency=a.id,o.address=i,void 0!==s&&(o.secondary_address=s)):n+="Krw";const d=await this[n](this.extend(o,r));return this.parseTransaction(d)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.implodeParams(this.urls.api[t],{hostname:this.hostname});o+="/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("POST"!==i&&Object.keys(n).length&&(o+="?"+this.urlencode(n)),"private"===t){this.checkRequiredCredentials();const e=this.nonce(),t={access_key:this.apiKey,nonce:e};if(Object.keys(n).length){const e=this.urlencode(n),i=this.hash(this.encode(e),"sha512");t.query_hash=i,t.query_hash_alg="SHA512"}r={Authorization:"Bearer "+this.jwt(t,this.encode(this.secret))},"GET"!==i&&"DELETE"!==i&&(a=this.json(s),r["Content-Type"]="application/json")}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,c){if(void 0===n)return;const h=this.safeValue(n,"error");if(void 0!==h){const e=this.safeString(h,"message"),t=this.safeString(h,"name"),i=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,e,i),this.throwExactlyMatchedException(this.exceptions.exact,t,i),this.throwBroadlyMatchedException(this.exceptions.broad,e,i),this.throwBroadlyMatchedException(this.exceptions.broad,t,i),new r(i)}}}},BtsK:function(e,t,i){"use strict";const s=i("/IoK"),r=i("Bxj7"),a=i("tk5I");function o(e){const t=[];for(let i=0;i<e.length;i++)t[i/4|0]|=e[i]<<24-8*i;return s.lib.WordArray.create(t,e.length)}e.exports={json:(e,t)=>JSON.stringify(e),unjson:JSON.parse,isJsonEncodedObject:e=>"string"===typeof e&&e.length>=2&&("{"===e[0]||"["===e[0]),stringToBinary(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return s.lib.WordArray.create(t)},stringToBase64:e=>s.enc.Latin1.parse(e).toString(s.enc.Base64),utf16ToBase64:e=>s.enc.Utf16.parse(e).toString(s.enc.Base64),base64ToBinary:e=>s.enc.Base64.parse(e),base64ToString:e=>s.enc.Base64.parse(e).toString(s.enc.Utf8),binaryToBase64:e=>e.toString(s.enc.Base64),base16ToBinary:e=>s.enc.Hex.parse(e),binaryToBase16:e=>e.toString(s.enc.Hex),binaryConcat:(...e)=>e.reduce((e,t)=>e.concat(t)),binaryConcatArray:e=>e.reduce((e,t)=>e.concat(t)),urlencode:e=>r.stringify(e),urlencodeWithArrayRepeat:e=>r.stringify(e,{arrayFormat:"repeat"}),rawencode:e=>r.stringify(e,{encode:!1}),encode:e=>e,decode:e=>e,urlencodeBase64:e=>e.replace(/[=]+$/,"").replace(/\+/g,"-").replace(/\//g,"_"),numberToLE:(e,t)=>{return o(new a(e).toArray("le",t))},numberToBE:(e,t)=>{return o(new a(e).toArray("be",t))}},e.exports.byteArrayToWordArray=o},Bu4C:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeNotAvailable:r,ExchangeError:a,DDoSProtection:o,BadSymbol:n}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"whitebit",name:"WhiteBit",version:"v2",countries:["EE"],rateLimit:500,has:{cancelOrder:!1,CORS:!1,createDepositAddress:!1,createLimitOrder:!1,createMarketOrder:!1,createOrder:!1,deposit:!1,editOrder:!1,fetchBalance:!1,fetchBidsAsks:!1,fetchCurrencies:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOrderBook:!0,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,privateAPI:!1,publicAPI:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","8h":"8h","12h":"12h","1d":"1d","3d":"3d","1w":"1w","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/66732963-8eb7dd00-ee66-11e9-849b-10d9282bb9e0.jpg",api:{web:"https://whitebit.com/",publicV2:"https://whitebit.com/api/v2/public",publicV1:"https://whitebit.com/api/v1/public"},www:"https://www.whitebit.com",doc:"https://documenter.getpostman.com/view/7473075/SVSPomwS?version=latest#intro",fees:"https://whitebit.com/fee-schedule",referral:"https://whitebit.com/referral/d9bdf40e-28f2-4b52-b2f9-cd1415d82963"},api:{web:{get:["v1/healthcheck"]},publicV1:{get:["markets","tickers","ticker","symbols","depth/result","history","kline"]},publicV2:{get:["markets","ticker","assets","fee","depth/{market}","trades/{market}"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001}},options:{fetchTradesMethod:"fetchTradesV1"},exceptions:{exact:{503:r},broad:{"Market is not available":n}}})}async fetchMarkets(e={}){const t=await this.publicV2GetMarkets(e),i=this.safeValue(t,"result"),s=[];for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"name"),a=this.safeString(e,"stock"),o=this.safeString(e,"money"),n=this.safeCurrencyCode(a),d=this.safeCurrencyCode(o),c={id:t,symbol:n+"/"+d,base:n,quote:d,baseId:a,quoteId:o,info:e,active:this.safeValue(e,"tradesEnabled"),precision:{amount:this.safeInteger(e,"stockPrec"),price:this.safeInteger(e,"moneyPrec")},limits:{amount:{min:this.safeFloat(e,"minAmount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(e,"minTotal"),max:void 0}}};s.push(c)}return s}async fetchCurrencies(e={}){const t=await this.publicV2GetAssets(e),i=this.safeValue(t,"result"),s=Object.keys(i),r={};for(let a=0;a<s.length;a++){const e=s[a],t=i[e],o=this.safeValue(t,"canDeposit",!0),n=this.safeValue(t,"canWithdraw",!0),d=o&&n,c=this.safeCurrencyCode(e);r[c]={id:e,code:c,info:t,name:void 0,active:d,fee:void 0,precision:void 0,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(t,"minWithdrawal"),max:this.safeFloat(t,"maxWithdrawal")}}}}return r}async fetchTradingFees(e={}){const t=await this.publicV2GetFee(e),i=this.safeValue(t,"result");return{maker:this.safeFloat(i,"makerFee"),taker:this.safeFloat(i,"takerFee")}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},r=await this.publicV1GetTicker(this.extend(s,t)),a=this.safeValue(r,"result",{});return this.parseTicker(a,i)}parseTicker(e,t){const i=this.safeTimestamp(e,"at",this.milliseconds());e=this.safeValue(e,"ticker",e);let s=void 0;void 0!==t&&(s=t.symbol);const r=this.safeFloat(e,"last"),a=this.safeFloat(e,"change");let o=void 0;return void 0!==a&&(o=this.numberToString(.01*a)),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:r,last:r,previousClose:void 0,change:o,percentage:a,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"deal"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicV1GetTickers(t),s=this.safeValue(i,"result"),r=Object.keys(s),a={};for(let o=0;o<r.length;o++){const e=r[o];let t=void 0,i=e;if(e in this.markets_by_id)t=this.markets_by_id[e],i=t.symbol;else{const[t,s]=e.split("_");i=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(s)}const n=this.parseTicker(s[e],t);a[i]=this.extend(n,{symbol:i})}return this.filterByArray(a,"symbol",e)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.market(e).id};void 0!==t&&(s.limit=t);const r=await this.publicV2GetDepthMarket(this.extend(s,i)),a=this.safeValue(r,"result",{}),o=this.parse8601(this.safeString(a,"lastUpdateTimestamp"));return this.parseOrderBook(a,o)}async fetchTradesV1(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market:r.id,lastId:1};void 0!==i&&(a.limit=i);const o=await this.publicV1GetHistory(this.extend(a,s)),n=this.safeValue(o,"result",[]);return this.parseTrades(n,r,t,i)}async fetchTradesV2(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market:r.id};void 0!==i&&(a.limit=i);const o=await this.publicV2GetTradesMarket(this.extend(a,s)),n=this.safeValue(o,"result",[]);return this.parseTrades(n,r,t,i)}async fetchTrades(e,t,i,s={}){const r=this.safeString(this.options,"fetchTradesMethod","fetchTradesV2");return await this[r](e,t,i,s)}parseTrade(e,t){let i=this.safeValue(e,"time");i="string"===typeof i?this.parse8601(i):parseInt(1e3*i);const s=this.safeFloat(e,"price"),r=this.safeFloat2(e,"amount","volume"),a=this.safeString2(e,"id","tradeId");let o=this.safeString(e,"type");if(void 0===o){o=this.safeValue(e,"isBuyerMaker")?"buy":"sell"}let n=void 0;void 0!==t&&(n=t.symbol);let d=void 0;return void 0!==r&&void 0!==s&&(d=r*s),{info:e,timestamp:i,datetime:this.iso8601(i),symbol:n,id:a,order:void 0,type:void 0,takerOrMaker:void 0,side:o,price:s,amount:r,cost:d,fee:void 0}}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={market:a.id,interval:this.timeframes[t]};void 0!==i&&(o.start=parseInt(i/1e3)),void 0!==s&&(o.limit=s);const n=await this.publicV1GetKline(this.extend(o,r)),d=this.safeValue(n,"result");return this.parseOHLCVs(d,a,t,i,s)}parseOHLCV(e,t,i="1m",s,r){return[1e3*e[0],parseFloat(e[1]),parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[2]),parseFloat(e[5])]}async fetchStatus(e={}){const t=await this.webGetV1Healthcheck(e);let i="ok";return 503===this.safeInteger(t,"status")&&(i="maintenance"),this.status=this.extend(this.status,{status:i,updated:this.milliseconds()}),this.status}sign(e,t="publicV1",i="GET",s={},r,a){const o=this.omit(s,this.extractParams(e));let n=this.urls.api[t]+"/"+this.implodeParams(e,s);return Object.keys(o).length&&(n+="?"+this.urlencode(o)),{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,n,d,c,h){if(418===e||429===e)throw new o(this.id+" "+e.toString()+" "+t+" "+n);if(404===e)throw new a(this.id+" "+e.toString()+" endpoint not found");if(void 0!==d){if(!this.safeValue(d,"success")){const e=this.id+" "+n,t=this.safeString(d,"status");throw"string"===typeof t&&this.throwExactlyMatchedException(this.exceptions.exact,t,e),this.throwBroadlyMatchedException(this.exceptions.broad,n,e),new a(e)}}}}},BupB:function(e,t,i){"use strict";const s=i("OjXq");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"lykke",name:"Lykke",countries:["CH"],version:"v1",rateLimit:200,has:{CORS:!1,fetchOHLCV:!1,fetchTrades:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchOrder:!0,fetchOrders:!0},requiredCredentials:{apiKey:!0,secret:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/34487620-3139a7b0-efe6-11e7-90f5-e520cef74451.jpg",api:{mobile:"https://public-api.lykke.com/api",public:"https://hft-api.lykke.com/api",private:"https://hft-api.lykke.com/api"},test:{mobile:"https://public-api.lykke.com/api",public:"https://hft-service-dev.lykkex.net/api",private:"https://hft-service-dev.lykkex.net/api"},www:"https://www.lykke.com",doc:["https://hft-api.lykke.com/swagger/ui/","https://www.lykke.com/lykke_api"],fees:"https://www.lykke.com/trading-conditions"},api:{mobile:{get:["Market/{market}","Trades/{AssetPairId}"]},public:{get:["AssetPairs","AssetPairs/{id}","IsAlive","OrderBooks","OrderBooks/{AssetPairId}"]},private:{get:["Orders","Orders/{id}","Wallets"],post:["Orders/limit","Orders/market","Orders/{id}/Cancel"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:0,taker:0},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001},deposit:{BTC:0}}},commonCurrencies:{XPD:"Lykke XPD"}})}parseTrade(e,t){let i=void 0;if(void 0===t){const i=this.safeString(e,"AssetPairId");t=this.safeValue(this.markets_by_id,i)}t&&(i=t.symbol);const s=this.safeString(e,"id"),r=this.parse8601(this.safeString(e,"dateTime")),a=this.safeStringLower(e,"action"),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"volume"),d=o*n;return{id:s,info:e,timestamp:r,datetime:this.iso8601(r),symbol:i,type:void 0,order:void 0,side:a,takerOrMaker:void 0,price:o,amount:n,cost:d,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e);void 0===i&&(i=100);const a={AssetPairId:r.id,skip:0,take:i},o=await this.mobileGetTradesAssetPairId(this.extend(a,s));return this.parseTrades(o,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetWallets(e),i={info:t};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"AssetId"),a=this.safeCurrencyCode(r),o=this.account();o.total=this.safeFloat(e,"Balance"),o.used=this.safeFloat(e,"Reserved"),i[a]=o}return this.parseBalance(i)}async cancelOrder(e,t,i={}){return await this.privatePostOrdersIdCancel({id:e})}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),n={AssetPairId:o.id,OrderAction:this.capitalize(i),Volume:s};"market"===t?n.Asset="buy"===i?o.base:o.quote:"limit"===t&&(n.Price=r);const d="privatePostOrders"+this.capitalize(t);return{id:void 0,info:await this[d](this.extend(n,a))}}async fetchMarkets(e={}){const t=await this.publicGetAssetPairs(),i=[];for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"Id"),a=this.safeString(e,"Name"),[o,n]=a.split("/"),d=this.safeCurrencyCode(o),c=this.safeCurrencyCode(n),h=d+"/"+c,l={amount:this.safeInteger(e,"Accuracy"),price:this.safeInteger(e,"InvertedAccuracy")};i.push({id:r,symbol:h,base:d,quote:c,active:!0,info:e,precision:l,limits:{amount:{min:Math.pow(10,-l.amount),max:Math.pow(10,l.amount)},price:{min:Math.pow(10,-l.price),max:Math.pow(10,l.price)},cost:{min:void 0,max:void 0}}})}return i}parseTicker(e,t){const i=this.milliseconds();let s=void 0;t&&(s=t.symbol);const r=this.safeFloat(e,"lastPrice");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(e,"volume24H"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},r=await this.mobileGetMarketMarket(this.extend(s,t));return this.parseTicker(r,i)}parseOrderStatus(e){return this.safeString({Open:"open",Pending:"open",InOrderBook:"open",Processing:"open",Matched:"closed",Cancelled:"canceled",Rejected:"rejected",Replaced:"canceled"},e,e)}parseOrder(e,t){const i=this.parseOrderStatus(this.safeString(e,"Status"));let s=void 0;if(void 0===t){const i=this.safeString(e,"AssetPairId");t=this.safeValue(this.markets_by_id,i)}t&&(s=t.symbol);const r=this.parse8601(this.safeString(e,"LastMatchTime"));let a=void 0;"Registered"in e&&e.Registered?a=this.parse8601(e.Registered):"CreatedAt"in e&&e.CreatedAt&&(a=this.parse8601(e.CreatedAt));const o=this.safeFloat(e,"Price"),n=this.safeFloat(e,"Volume"),d=this.safeFloat(e,"RemainingVolume"),c=n-d,h=c*o;return{info:e,id:this.safeString(e,"Id"),clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:r,symbol:s,type:void 0,side:void 0,price:o,cost:h,average:void 0,amount:n,filled:c,remaining:d,status:i,fee:void 0}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privateGetOrdersId(this.extend(s,i));return this.parseOrder(r)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r=await this.privateGetOrders(s);return this.parseOrders(r,void 0,t,i)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r=await this.privateGetOrders(this.extend({status:"InOrderBook"},s));return this.parseOrders(r,void 0,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const r=await this.privateGetOrders(this.extend({status:"Matched"},s));return this.parseOrders(r,void 0,t,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=await this.publicGetOrderBooksAssetPairId(this.extend({AssetPairId:this.marketId(e)},i)),r={timestamp:void 0,bids:[],asks:[]};let a=void 0;for(let o=0;o<s.length;o++){const e=s[o];e.IsBuy?r.bids=this.arrayConcat(r.bids,e.Prices):r.asks=this.arrayConcat(r.asks,e.Prices);const t=this.parse8601(e.Timestamp);a=void 0===a?t:Math.max(a,t)}return this.parseOrderBook(r,a,"bids","asks","Price","Volume")}parseBidAsk(e,t=0,i=1){const s=this.safeFloat(e,t);let r=this.safeFloat(e,i);return r<0&&(r=-r),[s,r]}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));return"mobile"===t?Object.keys(n).length&&(o+="?"+this.urlencode(n)):"public"===t?Object.keys(n).length&&(o+="?"+this.urlencode(n)):"private"===t&&("GET"===i&&Object.keys(n).length&&(o+="?"+this.urlencode(n)),this.checkRequiredCredentials(),r={"api-key":this.apiKey,Accept:"application/json","Content-Type":"application/json"},"POST"===i&&Object.keys(s).length&&(a=this.json(s))),{url:o,method:i,body:a,headers:r}}}},Bxj7:function(e,t,i){"use strict";var s=i("b+ih"),r=i("S63X"),a=i("Hy3L");e.exports={formats:a,parse:r,stringify:s}},C92A:function(e,t,i){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},CGOH:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ArgumentsRequired:a,ExchangeNotAvailable:o,InsufficientFunds:n,OrderNotFound:d,DDoSProtection:c,InvalidOrder:h,AuthenticationError:l}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"tidex",name:"Tidex",countries:["UK"],rateLimit:2e3,version:"3",userAgent:this.userAgents.chrome,has:{CORS:!1,createMarketOrder:!1,fetchOrderBooks:!0,fetchOrder:!0,fetchOrders:"emulated",fetchOpenOrders:!0,fetchClosedOrders:"emulated",fetchTickers:!0,fetchMyTrades:!0,withdraw:!0,fetchCurrencies:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/30781780-03149dc4-a12e-11e7-82bb-313b269d24d4.jpg",api:{web:"https://gate.tidex.com/api",public:"https://api.tidex.com/api/3",private:"https://api.tidex.com/tapi"},www:"https://tidex.com",doc:"https://tidex.com/exchange/public-api",referral:"https://tidex.com/exchange/?ref=57f5638d9cd7",fees:["https://tidex.com/exchange/assets-spec","https://tidex.com/exchange/pairs-spec"]},api:{web:{get:["currency","pairs","tickers","orders","ordershistory","trade-data","trade-data/{id}"]},public:{get:["info","ticker/{pair}","depth/{pair}","trades/{pair}"]},private:{post:["getInfoExt","getInfo","Trade","ActiveOrders","OrderInfo","CancelOrder","TradeHistory","CoinDepositAddress","WithdrawCoin","CreateCoupon","RedeemCoupon"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001}},commonCurrencies:{DSH:"DASH",EMGO:"MGO",MGO:"WMGO"},exceptions:{exact:{803:h,804:h,805:h,806:h,807:h,831:n,832:n,833:d},broad:{"Invalid pair name":r,"invalid api key":l,"invalid sign":l,"api key dont have trade permission":l,"invalid parameter":h,"invalid order":h,"Requests too often":c,"not available":o,"data unavailable":o,"external service unavailable":o}},options:{fetchTickersMaxLength:2048}})}async fetchCurrencies(e={}){const t=await this.webGetCurrency(e),i={};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"symbol"),a=e.amountPoint,o=this.safeCurrencyCode(r);let n=!0===e.visible;const d=!0===e.withdrawEnable,c=!0===e.depositEnable;d&&c||(n=!1);const h=this.safeString(e,"name");i[o]={id:r,code:o,name:h,active:n,precision:a,funding:{withdraw:{active:d,fee:e.withdrawFee},deposit:{active:c,fee:0}},limits:{amount:{min:void 0,max:Math.pow(10,a)},price:{min:Math.pow(10,-a),max:Math.pow(10,a)},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(e,"withdrawMinAmount"),max:void 0},deposit:{min:this.safeFloat(e,"depositMinAmount"),max:void 0}},info:e}}return i}calculateFee(e,t,i,s,r,a="taker",o={}){const n=this.markets[e];let d="quote";const c=n[a];let h=parseFloat(this.costToPrecision(e,s*c));return"sell"===i?h*=r:d="base",{type:a,currency:n[d],rate:c,cost:h}}async fetchMarkets(e={}){const t=(await this.publicGetInfo(e)).pairs,i=Object.keys(t),s=[];for(let r=0;r<i.length;r++){const e=i[r],a=t[e],[o,n]=e.split("_"),d=this.safeCurrencyCode(o),c=this.safeCurrencyCode(n),h=d+"/"+c,l={amount:this.safeInteger(a,"decimal_places"),price:this.safeInteger(a,"decimal_places")},u={amount:{min:this.safeFloat(a,"min_amount"),max:this.safeFloat(a,"max_amount")},price:{min:this.safeFloat(a,"min_price"),max:this.safeFloat(a,"max_price")},cost:{min:this.safeFloat(a,"min_total")}},f=0===this.safeInteger(a,"hidden");s.push({id:e,symbol:h,base:d,quote:c,baseId:o,quoteId:n,active:f,taker:a.fee/100,precision:l,limits:u,info:a})}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGetInfoExt(e),i=this.safeValue(t,"return"),s={info:i},r=this.safeValue(i,"funds",{}),a=Object.keys(r);for(let o=0;o<a.length;o++){const e=a[o],t=this.safeCurrencyCode(e),i=this.safeValue(r,e,{}),n=this.account();n.free=this.safeFloat(i,"value"),n.used=this.safeFloat(i,"inOrders"),s[t]=n}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),a={pair:s.id};void 0!==t&&(a.limit=t);const o=await this.publicGetDepthPair(this.extend(a,i));if(!(s.id in o))throw new r(this.id+" "+s.symbol+" order book is empty or not available");const n=o[s.id];return this.parseOrderBook(n)}async fetchOrderBooks(e,t,i={}){await this.loadMarkets();let s=void 0;if(void 0===e){if(s=this.ids.join("-"),s.length>2048){const e=this.ids.length;throw new r(this.id+" has "+e.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchOrderBooks")}}else s=this.marketIds(e),s=s.join("-");const a={pair:s};void 0!==t&&(a.limit=t);const o=await this.publicGetDepthPair(this.extend(a,i)),n={};s=Object.keys(o);for(let r=0;r<s.length;r++){const e=s[r];let t=e;e in this.markets_by_id&&(t=this.markets_by_id[e].symbol),n[t]=this.parseOrderBook(o[e])}return n}parseTicker(e,t){let i=this.safeTimestamp(e,"updated"),s=void 0;void 0!==t&&(s=t.symbol,t.active||(i=void 0));const r=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"avg"),baseVolume:this.safeFloat(e,"vol_cur"),quoteVolume:this.safeFloat(e,"vol"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=this.ids;if(void 0===e){const e=i.length;if(i=i.join("-"),i.length>this.options.fetchTickersMaxLength){const t=this.safeInteger(this.options,"fetchTickersMaxLength",2048);throw new a(this.id+" has "+e.toString()+" markets exceeding max URL length for this endpoint ("+t.toString()+" characters), please, specify a list of symbols of interest in the first argument to fetchTickers")}}else i=this.marketIds(e),i=i.join("-");const s={pair:i},r=await this.publicGetTickerPair(this.extend(s,t)),o={},n=Object.keys(r);for(let a=0;a<n.length;a++){const e=n[a];let t=e,i=void 0;e in this.markets_by_id&&(i=this.markets_by_id[e],t=i.symbol),o[t]=this.parseTicker(r[e],i)}return o}async fetchTicker(e,t={}){return(await this.fetchTickers([e],t))[e]}parseTrade(e,t){const i=this.safeTimestamp(e,"timestamp");let s=this.safeString(e,"type");"ask"===s?s="sell":"bid"===s&&(s="buy");const r=this.safeFloat2(e,"rate","price"),a=this.safeString2(e,"trade_id","tid"),o=this.safeString(e,"order_id");if("pair"in e){const i=this.safeString(e,"pair");t=this.safeValue(this.markets_by_id,i,t)}let n=void 0;void 0!==t&&(n=t.symbol);const d=this.safeFloat(e,"amount");let c=void 0,h=void 0;const l=this.safeFloat(e,"commission");if(void 0!==l){const t=this.safeString(e,"commissionCurrency");h={cost:l,currency:this.safeCurrencyCode(t)}}const u=this.safeValue(e,"is_your_order");void 0!==u&&(c="taker",u&&(c="maker"),void 0===h&&(h=this.calculateFee(n,"limit",s,d,r,c)));let f=void 0;return void 0!==d&&void 0!==r&&(f=d*r),{id:a,order:o,timestamp:i,datetime:this.iso8601(i),symbol:n,type:"limit",side:s,takerOrMaker:c,price:r,amount:d,cost:f,fee:h,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pair:r.id};void 0!==i&&(a.limit=i);const o=await this.publicGetTradesPair(this.extend(a,s));if(Array.isArray(o)){if(0===o.length)return[]}return this.parseTrades(o[r.id],r,t,i)}async createOrder(e,t,i,s,a,o={}){if("market"===t)throw new r(this.id+" allows limit orders only");await this.loadMarkets();const n={pair:this.market(e).id,type:i,amount:this.amountToPrecision(e,s),rate:this.priceToPrecision(e,a)};a=parseFloat(a),s=parseFloat(s);const d=await this.privatePostTrade(this.extend(n,o));let c=void 0,h="open",l=0,u=s;"return"in d&&(c=this.safeString(d.return,"order_id"),"0"===c&&(c=this.safeString(d.return,"init_order_id"),h="closed"),l=this.safeFloat(d.return,"received",0),u=this.safeFloat(d.return,"remains",s));const f=this.milliseconds(),p={id:c,timestamp:f,datetime:this.iso8601(f),lastTradeTimestamp:void 0,status:h,symbol:e,type:t,side:i,price:a,cost:a*l,amount:s,remaining:u,filled:l,fee:void 0};return this.orders[c]=p,this.extend({info:d},p)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:parseInt(e)},r=await this.privatePostCancelOrder(this.extend(s,i));return e in this.orders&&(this.orders[e].status="canceled"),r}parseOrderStatus(e){return this.safeString({0:"open",1:"closed",2:"canceled",3:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.parseOrderStatus(this.safeString(e,"status")),r=this.safeTimestamp(e,"timestamp_created");let a=void 0;if(void 0===t){const i=this.safeString(e,"pair");i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(a=t.symbol);let o=void 0,n=void 0;const d=this.safeFloat(e,"rate");let c=void 0,h=void 0;"start_amount"in e?(n=this.safeFloat(e,"start_amount"),o=this.safeFloat(e,"amount")):(o=this.safeFloat(e,"amount"),i in this.orders&&(n=this.orders[i].amount)),void 0!==n&&void 0!==o&&(c=n-o,h=d*c);return{info:e,id:i,symbol:a,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,type:"limit",side:e.type,price:d,cost:h,amount:n,remaining:o,filled:c,status:s,fee:void 0}}parseOrders(e,t,i,s,r={}){const a=[],o=Object.keys(e);let n=void 0;void 0!==t&&(n=t.symbol);for(let d=0;d<o.length;d++){const i=o[d],s=this.extend({id:i},e[i]);a.push(this.extend(this.parseOrder(s,t),r))}return this.filterBySymbolSinceLimit(a,n,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:parseInt(e)},r=await this.privatePostOrderInfo(this.extend(s,i));e=e.toString();const a=this.parseOrder(this.extend({id:e},r.return[e])),o=e in this.orders?this.orders[e]:{};return this.orders[e]=this.extend(o,a),this.orders[e]}updateCachedOrders(e,t){for(let r=0;r<e.length;r++){const t=e[r].id;this.orders[t]=e[r]}const i=this.indexBy(e,"id"),s=Object.keys(this.orders);for(let r=0;r<s.length;r++){const e=s[r];let a=this.orders[e];if(!(e in i)){if(void 0!==t&&t!==a.symbol)continue;"open"===a.status&&(a=this.extend(a,{status:"closed",cost:void 0,filled:a.amount,remaining:0}),void 0===a.cost&&void 0!==a.filled&&(a.cost=a.filled*a.price),this.orders[e]=a)}}return this.toArray(this.orders)}async fetchOrders(e,t,i,s={}){if("fetchOrdersRequiresSymbol"in this.options&&this.options.fetchOrdersRequiresSymbol&&void 0===e)throw new a(this.id+" fetchOrders requires a `symbol` argument");await this.loadMarkets();const r={};let o=void 0;void 0!==e&&(o=this.market(e),r.pair=o.id);const n=await this.privatePostActiveOrders(this.extend(r,s)),d=this.safeValue(n,"return",[]),c=this.parseOrders(d,o),h=this.updateCachedOrders(c,e),l=this.filterBySymbol(h,e);return this.filterBySinceLimit(l,t,i)}async fetchOpenOrders(e,t,i,s={}){const r=await this.fetchOrders(e,t,i,s);return this.filterBy(r,"status","open")}async fetchClosedOrders(e,t,i,s={}){const r=await this.fetchOrders(e,t,i,s);return this.filterBy(r,"status","closed")}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==e&&(r=this.market(e),a.pair=r.id),void 0!==i&&(a.count=parseInt(i)),void 0!==t&&(a.since=parseInt(t/1e3));const o=await this.privatePostTradeHistory(this.extend(a,s)),n=this.safeValue(o,"return",[]);return this.parseTrades(n,r,t,i)}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const o={coinName:this.currency(e).id,amount:parseFloat(t),address:i};if(void 0!==s)throw new r(this.id+" withdraw() does not support the tag argument yet due to a lack of docs on withdrawing with tag/memo on behalf of the exchange.");const n=await this.privatePostWithdrawCoin(this.extend(o,a));return{info:n,id:n.return.tId}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t];const n=this.omit(s,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();const t=this.nonce();a=this.urlencode(this.extend({nonce:t,method:e},n));const i=this.hmac(this.encode(a),this.encode(this.secret),"sha512");r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:i}}else"public"===t?(o+="/"+this.implodeParams(e,s),Object.keys(n).length&&(o+="?"+this.urlencode(n))):(o+="/"+this.implodeParams(e,s),"GET"===i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):Object.keys(n).length&&(a=this.json(n),r={"Content-Type":"application/json"}));return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,c){if(void 0!==n&&"success"in n){let e=this.safeValue(n,"success",!1);if("string"===typeof e&&(e="true"===e||"1"===e),!e){const e=this.safeString(n,"code"),t=this.safeString(n,"error"),i=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,e,i),this.throwExactlyMatchedException(this.exceptions.exact,t,i),this.throwBroadlyMatchedException(this.exceptions.broad,t,i),new r(i)}}}}},"COu+":function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,InvalidOrder:a,AuthenticationError:o,InsufficientFunds:n,BadRequest:d}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bleutrade",name:"Bleutrade",countries:["BR"],rateLimit:1e3,certified:!1,has:{CORS:!0,cancelOrder:!1,createLimitOrder:!1,createMarketOrder:!1,createOrder:!1,editOrder:!1,withdraw:!1,fetchTrades:!1,fetchTickers:!0,fetchTicker:!0,fetchOrders:!1,fetchClosedOrders:!0,fetchWithdrawals:!0,fetchOrderTrades:!1,fetchLedger:!0,fetchDepositAddress:!0},timeframes:{"15m":"15m","20m":"20m","30m":"30m","1h":"1h","2h":"2h","3h":"3h","4h":"4h","6h":"6h","8h":"8h","12h":"12h","1d":"1d"},hostname:"bleutrade.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/30303000-b602dbe6-976d-11e7-956d-36c5049c01e7.jpg",api:{v3Private:"https://{hostname}/api/v3/private",v3Public:"https://{hostname}/api/v3/public"},www:["https://bleutrade.com"],doc:["https://app.swaggerhub.com/apis-docs/bleu/white-label/3.0.0"],fees:"https://bleutrade.com/fees/"},api:{v3Public:{get:["getassets","getmarkets","getticker","getmarketsummary","getmarketsummaries","getorderbook","getmarkethistory","getcandles"]},v3Private:{post:["getbalance","getbalances","buylimit","selllimit","buylimitami","selllimitami","buystoplimit","sellstoplimit","ordercancel","getopenorders","getcloseorders","getdeposithistory","getdepositaddress","getmytransactions","withdraw","directtransfer","getwithdrawhistory","getlimits"]}},commonCurrencies:{EPC:"Epacoin"},exceptions:{exact:{ERR_INSUFICIENT_BALANCE:n,ERR_LOW_VOLUME:d},broad:{"Order is not open":a,"Invalid Account / Api KEY / Api Secret":o}},fees:{trading:{tierBased:!1,percentage:!0,taker:.0025,maker:.0025}},options:{parseOrderStatus:!0,symbolSeparator:"_"}})}async fetchCurrencies(e={}){const t=(await this.v3PublicGetGetassets(e)).result,i={};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"Asset"),a=this.safeCurrencyCode(r);i[a]={id:r,code:a,name:this.safeString(e,"AssetLong"),active:this.safeValue(e,"IsActive")&&!this.safeValue(e,"MaintenanceMode"),fee:this.safeFloat(e,"WithdrawTxFee"),precision:this.safeFloat(e,"DecimalPlaces"),info:e}}return i}async fetchMarkets(e={}){const t=await this.v3PublicGetGetmarkets(e),i=[],s=this.safeValue(t,"result");for(let r=0;r<s.length;r++){const e=s[r],t=this.safeString(e,"MarketName"),a=this.safeString(e,"MarketCurrency"),o=this.safeString(e,"BaseCurrency"),n=this.safeCurrencyCode(a),d=this.safeCurrencyCode(o),c=n+"/"+d,h={amount:8,price:8},l=this.safeValue(e,"IsActive",!1);i.push({id:t,symbol:c,base:n,quote:d,baseId:a,quoteId:o,active:l,info:e,precision:h,maker:this.fees.trading.maker,taker:this.fees.trading.taker,limits:{amount:{min:this.safeFloat(e,"MinTradeSize"),max:void 0},price:{min:Math.pow(10,-h.price),max:void 0}}})}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.marketId(e),type:"ALL"};void 0!==t&&(s.depth=t);const a=await this.v3PublicGetGetorderbook(this.extend(s,i)),o=this.safeValue(a,"result");if(!o)throw new r(this.id+" no orderbook data in "+this.json(a));return this.parseOrderBook(o,void 0,"buy","sell","Rate","Quantity")}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},r=(await this.v3PublicGetGetmarketsummary(this.extend(s,t))).result[0];return this.parseTicker(r,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.v3PublicGetGetmarketsummaries(t),s=this.safeValue(i,"result"),r=[];for(let a=0;a<s.length;a++){const e=this.parseTicker(s[a]);r.push(e)}return this.filterByArray(r,"symbol",e)}parseTicker(e,t){const i=this.parse8601(this.safeString(e,"TimeStamp"));let s=void 0;const r=this.safeString(e,"MarketName");void 0!==r&&(r in this.markets_by_id?t=this.markets_by_id[r]:s=this.parseSymbol(r)),void 0===s&&void 0!==t&&(s=t.symbol);const a=this.safeFloat(e,"PrevDay"),o=this.safeFloat(e,"Last");let n=void 0,d=void 0;return void 0!==o&&void 0!==a&&(n=o-a,a>0&&(d=n/a*100)),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"High"),low:this.safeFloat(e,"Low"),bid:this.safeFloat(e,"Bid"),bidVolume:void 0,ask:this.safeFloat(e,"Ask"),askVolume:void 0,vwap:void 0,open:a,close:o,last:o,previousClose:void 0,change:n,percentage:d,average:void 0,baseVolume:this.safeFloat(e,"Volume"),quoteVolume:this.safeFloat(e,"BaseVolume"),info:e}}parseOHLCV(e,t,i="1d",s,r){return[this.parse8601(e.TimeStamp+"+00:00"),this.safeFloat(e,"Open"),this.safeFloat(e,"High"),this.safeFloat(e,"Low"),this.safeFloat(e,"Close"),this.safeFloat(e,"Volume")]}async fetchOHLCV(e,t="15m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={period:this.timeframes[t],market:a.id,count:s},n=await this.v3PublicGetGetcandles(this.extend(o,r));return this.parseOHLCVs(n.result,a,t,i,s)}async createOrder(e,t,i,s,r,o={}){if("limit"!==t)throw new a(this.id+" allows limit orders only");await this.loadMarkets();const n={rate:this.priceToPrecision(e,r),quantity:this.amountToPrecision(e,s),tradeType:"buy"===i?"1":"0",market:this.marketId(e)};let d=void 0;return d="buy"===i?await this.v3PrivatePostBuylimit(this.extend(n,o)):await this.v3PrivatePostSelllimit(this.extend(n,o)),{info:d,id:this.safeString(d,"result")}}async cancelOrder(e,t,i={}){const s={orderid:e};return await this.v3PrivatePostOrdercancel(this.extend(s,i))}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==e&&(r=this.market(e),a.market=r.id);const o=await this.v3PrivatePostGetopenorders(this.extend(a,s)),n=this.safeValue(o,"result",[]);return this.parseOrders(n,r,t,i)}parseSymbol(e){let[t,i]=e.split(this.options.symbolSeparator);return t=this.safeCurrencyCode(t),i=this.safeCurrencyCode(i),t+"/"+i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.v3PrivatePostGetbalances(e),i={info:t},s=t.result;for(let r=0;r<s.length;r++){const e=s[r],t=this.safeString(e,"Asset"),a=this.safeCurrencyCode(t),o=this.account();o.free=this.safeFloat(e,"Available"),o.total=this.safeFloat(e,"Balance"),i[a]=o}return this.parseBalance(i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.market(e),r.market=a.id);const o=await this.v3PrivatePostGetcloseorders(this.extend(r,s)),n=this.safeValue(o,"result",[]);return this.parseOrders(n,a,t,i)}async fetchTransactionsWithMethod(e,t,i,s,r={}){await this.loadMarkets();const a=await this[e](r),o=this.safeValue(a,"result",[]);return this.parseTransactions(o,t,i,s)}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactionsWithMethod("v3PrivatePostGetdeposithistory",e,t,i,s)}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactionsWithMethod("v3PrivatePostGetwithdrawhistory",e,t,i,s)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={asset:this.currency(e).id},s=(await this.v3PrivatePostGetdepositaddress(this.extend(i,t))).result,r=this.safeString(s,"DepositAddress");return{currency:e,address:this.checkAddress(r),info:s}}parseLedgerEntryType(e){return this.safeString({TRADE:"trade",WITHDRAW:"transaction"},e,e)}parseLedgerEntry(e,t){const i=this.safeCurrencyCode(this.safeString(e,"CoinSymbol"),t),s=this.safeString(e,"Description"),r=this.parseLedgerEntryType(this.safeString(e,"Type"));let a=void 0,o=void 0;const n="trade"===r?", ":"; ",d=s.split(n);for(let u=0;u<d.length;u++){let e=d[u];if(0===e.indexOf("fee")){e=e.replace("fee ","");let t=parseFloat(e);t<0&&(t=-t),o={cost:t,currency:i}}else 0===e.indexOf("order id")&&(a=e.replace("order id ",""))}const c=this.parse8601(this.safeString(e,"TimeStamp"));let h=this.safeFloat(e,"Amount"),l=void 0;return void 0!==h&&(l="in",h<0&&(l="out",h=-h)),{id:this.safeString(e,"ID"),info:e,timestamp:c,datetime:this.iso8601(c),direction:l,account:void 0,referenceId:a,referenceAccount:void 0,type:r,currency:i,amount:h,before:void 0,after:void 0,status:"ok",fee:o}}async fetchLedger(e,t,i,s={}){await this.loadMarkets();const r=(await this.v3PrivatePostGetmytransactions(this.extend({},s))).result;return this.parseLedger(r,e,t,i)}parseOrder(e,t){const i=this.safeString(e,"Type").toLowerCase(),s=this.parseOrderStatus(this.safeString(e,"Status"));let r=void 0;const a=this.safeString(e,"Exchange");void 0===a?void 0!==t&&(r=t.symbol):r=a in this.markets_by_id?(t=this.markets_by_id[a]).symbol:this.parseSymbol(a);let o=void 0;"Created"in e&&(o=this.parse8601(e.Created+"+00:00"));let n=this.safeFloat(e,"Price"),d=void 0;const c=this.safeFloat(e,"Quantity"),h=this.safeFloat(e,"QuantityRemaining");let l=void 0;void 0!==c&&void 0!==h&&(l=c-h),d||n&&l&&(d=n*l),n||d&&l&&(n=d/l);const u=this.safeFloat(e,"PricePerUnit");return{info:e,id:this.safeString(e,"OrderID"),clientOrderId:void 0,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:void 0,symbol:r,type:"limit",side:i,price:n,cost:d,average:u,amount:c,filled:l,remaining:h,status:s,fee:void 0}}parseOrderStatus(e){return this.safeString({OK:"closed",OPEN:"open",CANCELED:"canceled"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"ID");let s=this.safeFloat(e,"Amount"),r="deposit";s<0&&(s=Math.abs(s),r="withdrawal");const a=this.safeString(e,"Asset"),o=this.safeCurrencyCode(a,t),n=this.safeString(e,"Label"),d=this.parse8601(this.safeString(e,"Timestamp"));let c=this.safeString(e,"TransactionID"),h=void 0,l=void 0;const u=n.split(";");3===u.length?(s=parseFloat(u[0]),h=u[1],l=parseFloat(u[2])):h=n;let f=void 0;void 0!==l&&(f={currency:o,cost:l});let p="ok";return"CANCELED"===c&&(c=void 0,p="canceled"),{info:e,timestamp:d,datetime:this.iso8601(d),id:i,currency:o,amount:s,address:h,tag:void 0,status:p,type:r,updated:void 0,txid:c,fee:f}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+"/";if("v3Private"===t){this.checkRequiredCredentials();const t={apikey:this.apiKey,nonce:this.nonce()};o+=e+"?"+this.urlencode(this.extend(t,s)),r={apisign:this.hmac(this.encode(o),this.encode(this.secret),"sha512")}}else o+=e+"?"+this.urlencode(s);return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,c){if(void 0!==n&&"{"===o[0]){const e=this.safeValue(n,"success");if(void 0===e)throw new r(this.id+": malformed response: "+this.json(n));if(!e){const e=this.id+" "+o,t=this.safeString(n,"result");this.throwBroadlyMatchedException(this.exceptions.broad,t,e),this.throwExactlyMatchedException(this.exceptions.exact,t,e);const i=this.safeString(n,"message");throw this.throwBroadlyMatchedException(this.exceptions.broad,i,e),this.throwExactlyMatchedException(this.exceptions.exact,i,e),new r(e)}}}}},Dgeu:function(e,t,i){(function(t){var s=i("2YIc").Ber,r=i("JxtV")._,a=i("JxtV");e.exports={privateExport:function(e,t){t=t||{};var i=e.n.toBuffer(),r=e.d.toBuffer(),o=e.p.toBuffer(),n=e.q.toBuffer(),d=e.dmp1.toBuffer(),c=e.dmq1.toBuffer(),h=e.coeff.toBuffer(),l=i.length+r.length+o.length+n.length+d.length+c.length+h.length+512,u=new s.Writer({size:l});u.startSequence(),u.writeInt(0),u.writeBuffer(i,2),u.writeInt(e.e),u.writeBuffer(r,2),u.writeBuffer(o,2),u.writeBuffer(n,2),u.writeBuffer(d,2),u.writeBuffer(c,2),u.writeBuffer(h,2),u.endSequence();var f=new s.Writer({size:l});return f.startSequence(),f.writeInt(0),f.startSequence(),f.writeOID("1.2.840.113549.1.1.1"),f.writeNull(),f.endSequence(),f.writeBuffer(u.buffer,4),f.endSequence(),"der"===t.type?f.buffer:"-----BEGIN PRIVATE KEY-----\n"+a.linebrk(f.buffer.toString("base64"),64)+"\n-----END PRIVATE KEY-----"},privateImport:function(e,i,o){var n;if("der"!==(o=o||{}).type){if(t.isBuffer(i)&&(i=i.toString("utf8")),!r.isString(i))throw Error("Unsupported key format");var d=a.trimSurroundingText(i,"-----BEGIN PRIVATE KEY-----","-----END PRIVATE KEY-----").replace("-----END PRIVATE KEY-----","").replace(/\s+|\n\r|\n|\r$/gm,"");n=t.from(d,"base64")}else{if(!t.isBuffer(i))throw Error("Unsupported key format");n=i}var c=new s.Reader(n);if(c.readSequence(),c.readInt(0),"1.2.840.113549.1.1.1"!==new s.Reader(c.readString(48,!0)).readOID(6,!0))throw Error("Invalid Public key format");var h=new s.Reader(c.readString(4,!0));h.readSequence(),h.readString(2,!0),e.setPrivate(h.readString(2,!0),h.readString(2,!0),h.readString(2,!0),h.readString(2,!0),h.readString(2,!0),h.readString(2,!0),h.readString(2,!0),h.readString(2,!0))},publicExport:function(e,t){t=t||{};var i=e.n.toBuffer(),r=i.length+512,o=new s.Writer({size:r});o.writeByte(0),o.startSequence(),o.writeBuffer(i,2),o.writeInt(e.e),o.endSequence();var n=new s.Writer({size:r});return n.startSequence(),n.startSequence(),n.writeOID("1.2.840.113549.1.1.1"),n.writeNull(),n.endSequence(),n.writeBuffer(o.buffer,3),n.endSequence(),"der"===t.type?n.buffer:"-----BEGIN PUBLIC KEY-----\n"+a.linebrk(n.buffer.toString("base64"),64)+"\n-----END PUBLIC KEY-----"},publicImport:function(e,i,o){var n;if("der"!==(o=o||{}).type){if(t.isBuffer(i)&&(i=i.toString("utf8")),r.isString(i)){var d=a.trimSurroundingText(i,"-----BEGIN PUBLIC KEY-----","-----END PUBLIC KEY-----").replace(/\s+|\n\r|\n|\r$/gm,"");n=t.from(d,"base64")}}else{if(!t.isBuffer(i))throw Error("Unsupported key format");n=i}var c=new s.Reader(n);if(c.readSequence(),"1.2.840.113549.1.1.1"!==new s.Reader(c.readString(48,!0)).readOID(6,!0))throw Error("Invalid Public key format");var h=new s.Reader(c.readString(3,!0));h.readByte(),h.readSequence(),e.setPublic(h.readString(2,!0),h.readString(2,!0))},autoImport:function(t,i){return/^[\S\s]*-----BEGIN PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END PRIVATE KEY-----[\S\s]*$/g.test(i)?(e.exports.privateImport(t,i),!0):!!/^[\S\s]*-----BEGIN PUBLIC KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END PUBLIC KEY-----[\S\s]*$/g.test(i)&&(e.exports.publicImport(t,i),!0)}}}).call(this,i("zkTx").Buffer)},DiNA:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"mixcoins",name:"MixCoins",countries:["GB","HK"],rateLimit:1500,version:"v1",userAgent:this.userAgents.chrome,has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/30237212-ed29303c-9535-11e7-8af8-fcd381cfa20c.jpg",api:"https://mixcoins.com/api",www:"https://mixcoins.com",doc:"https://mixcoins.com/help/api/"},api:{public:{get:["ticker/","trades/","depth/"]},private:{post:["cancel","info","orders","order","transactions","trade"]}},markets:{"BTC/USDT":{id:"btc_usdt",symbol:"BTC/USDT",base:"BTC",quote:"USDT",baseId:"btc",quoteId:"usdt",maker:.0015,taker:.0025},"ETH/BTC":{id:"eth_btc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",baseId:"eth",quoteId:"btc",maker:.001,taker:.0015},"BCH/BTC":{id:"bch_btc",symbol:"BCH/BTC",base:"BCH",quote:"BTC",baseId:"bch",quoteId:"btc",maker:.001,taker:.0015},"LSK/BTC":{id:"lsk_btc",symbol:"LSK/BTC",base:"LSK",quote:"BTC",baseId:"lsk",quoteId:"btc",maker:.0015,taker:.0025},"BCH/USDT":{id:"bch_usdt",symbol:"BCH/USDT",base:"BCH",quote:"USDT",baseId:"bch",quoteId:"usdt",maker:.001,taker:.0015},"ETH/USDT":{id:"eth_usdt",symbol:"ETH/USDT",base:"ETH",quote:"USDT",baseId:"eth",quoteId:"usdt",maker:.001,taker:.0015}}})}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostInfo(e),i=this.safeValue(t.result,"wallet"),s={info:t},r=Object.keys(i);for(let a=0;a<r.length;a++){const e=r[a],t=this.safeCurrencyCode(e),o=this.safeValue(i,e,{}),n=this.account();n.free=this.safeFloat(o,"avail"),n.used=this.safeFloat(o,"lock"),s[t]=n}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.marketId(e)},r=await this.publicGetDepth(this.extend(s,i));return this.parseOrderBook(r.result)}async fetchTicker(e,t={}){await this.loadMarkets();const i={market:this.marketId(e)},s=await this.publicGetTicker(this.extend(i,t)),r=this.safeValue(s,"result"),a=this.milliseconds(),o=this.safeFloat(r,"last");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(r,"high"),low:this.safeFloat(r,"low"),bid:this.safeFloat(r,"buy"),bidVolume:void 0,ask:this.safeFloat(r,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(r,"vol"),quoteVolume:void 0,info:r}}parseTrade(e,t){const i=this.safeTimestamp(e,"date");let s=void 0;void 0!==t&&(s=t.symbol);const r=this.safeString(e,"id"),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount");let n=void 0;return void 0!==a&&void 0!==o&&(n=a*o),{id:r,info:e,timestamp:i,datetime:this.iso8601(i),symbol:s,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:a,amount:o,cost:n,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market:r.id},o=await this.publicGetTrades(this.extend(a,s));return this.parseTrades(o.result,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o={market:this.marketId(e),op:i,amount:s};"market"===t?(o.order_type=1,o.price=r):o.order_type=0;const n=await this.privatePostTrade(this.extend(o,a));return{info:n,id:n.result.id.toString()}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e};return await this.privatePostCancel(this.extend(s,i))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+e;if("public"===t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();const e=this.nonce();a=this.urlencode(this.extend({nonce:e},s)),r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.secret,"sha512")}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){const n=await this.fetch2(e,t,i,s,a,o);if("status"in n&&200===n.status)return n;throw new r(this.id+" "+this.json(n))}}},EwJK:function(e,t){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},F33t:function(e,t,i){"use strict";const s=i("OjXq"),{InsufficientFunds:r,OrderNotFound:a}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"acx",name:"ACX",countries:["AU"],rateLimit:1e3,version:"v2",has:{CORS:!0,fetchTickers:!0,fetchOHLCV:!0,withdraw:!0,fetchOrder:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","4h":"240","12h":"720","1d":"1440","3d":"4320","1w":"10080"},urls:{logo:"https://user-images.githubusercontent.com/1294454/30247614-1fe61c74-9621-11e7-9e8c-f1a627afa279.jpg",extension:".json",api:"https://acx.io/api",www:"https://acx.io",doc:"https://acx.io/documents/api_v2"},api:{public:{get:["depth","k_with_pending_trades","k","markets","order_book","order_book/{market}","tickers","tickers/{market}","timestamp","trades","trades/{market}"]},private:{get:["members/me","deposits","deposit","deposit_address","orders","order","trades/my","withdraws","withdraw"],post:["orders","orders/multi","orders/clear","order/delete","withdraw"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002},funding:{tierBased:!1,percentage:!0,withdraw:{}}},commonCurrencies:{PLA:"Plair"},exceptions:{2002:r,2003:a}})}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=[];for(let s=0;s<t.length;s++){const e=t[s],r=e.id,a=e.name;let o=this.safeString(e,"base_unit"),n=this.safeString(e,"quote_unit");if(void 0===o||void 0===n){const e=a.split("/");o=e[0].toLowerCase(),n=e[1].toLowerCase()}let d=o.toUpperCase(),c=n.toUpperCase();d=this.safeCurrencyCode(d),c=this.safeCurrencyCode(c);const h={amount:8,price:8};i.push({id:r,symbol:a,base:d,quote:c,baseId:o,quoteId:n,precision:h,info:e})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetMembersMe(e),i=this.safeValue(t,"accounts"),s={info:i};for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"currency"),a=this.safeCurrencyCode(t),o=this.account();o.free=this.safeFloat(e,"balance"),o.used=this.safeFloat(e,"locked"),s[a]=o}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.market(e).id};void 0!==t&&(s.limit=t);const r=await this.publicGetDepth(this.extend(s,i)),a=this.safeTimestamp(r,"timestamp");return this.parseOrderBook(r,a)}parseTicker(e,t){const i=this.safeTimestamp(e,"at");e=e.ticker;let s=void 0;t&&(s=t.symbol);const r=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(t),s=Object.keys(i),r={};for(let a=0;a<s.length;a++){const e=s[a];let t=void 0,o=e;if(e in this.markets_by_id)t=this.markets_by_id[e],o=t.symbol;else{let t=e.slice(0,3),i=e.slice(3,6);t=t.toUpperCase(),i=i.toUpperCase(),t=this.safeCurrencyCode(t),i=this.safeCurrencyCode(i),o=t+"/"+i}r[o]=this.parseTicker(i[e],t)}return r}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},r=await this.publicGetTickersMarket(this.extend(s,t));return this.parseTicker(r,i)}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"created_at")),s=this.safeString(e,"tid");let r=void 0;return void 0!==t&&(r=t.symbol),{info:e,id:s,timestamp:i,datetime:this.iso8601(i),symbol:r,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"volume"),cost:this.safeFloat(e,"funds"),fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market:r.id},o=await this.publicGetTrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}parseOHLCV(e,t,i="1m",s,r){return[1e3*e[0],e[1],e[2],e[3],e[4],e[5]]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e);void 0===s&&(s=500);const o={market:a.id,period:this.timeframes[t],limit:s};void 0!==i&&(o.timestamp=parseInt(i/1e3));const n=await this.publicGetK(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}parseOrderStatus(e){return this.safeString({done:"closed",wait:"open",cancel:"canceled"},e,e)}parseOrder(e,t){let i=void 0;if(void 0!==t)i=t.symbol;else{const t=this.safeString(e,"market");i=this.markets_by_id[t].symbol}const s=this.parse8601(this.safeString(e,"created_at")),r=this.parseOrderStatus(this.safeString(e,"state")),a=this.safeString(e,"type"),o=this.safeString(e,"side");return{id:this.safeString(e,"id"),clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,status:r,symbol:i,type:a,side:o,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"volume"),filled:this.safeFloat(e,"executed_volume"),remaining:this.safeFloat(e,"remaining_volume"),trades:void 0,fee:void 0,info:e}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:parseInt(e)},r=await this.privateGetOrder(this.extend(s,i));return this.parseOrder(r)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o={market:this.marketId(e),side:i,volume:s.toString(),ord_type:t};"limit"===t&&(o.price=r.toString());const n=await this.privatePostOrders(this.extend(o,a)),d=this.safeValue(n,"market"),c=this.safeValue(this.markets_by_id,d);return this.parseOrder(n,c)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privatePostOrderDelete(this.extend(s,i)),o=this.parseOrder(r),n=o.status;if("closed"===n||"canceled"===n)throw new a(this.id+" "+this.json(o));return o}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a={currency:this.currency(e).id,sum:t,address:i};return{info:await this.privatePostWithdraw(this.extend(a,r)),id:void 0}}nonce(){return this.milliseconds()}encodeParams(e){if("orders"in e){const t=e.orders;let i=this.urlencode(this.keysort(this.omit(e,"orders")));for(let e=0;e<t.length;e++){const s=t[e],r=Object.keys(s);for(let e=0;e<r.length;e++){const t=r[e];i+="&orders%5B%5D%5B"+t+"%5D="+s[t].toString()}}return i}return this.urlencode(this.keysort(e))}sign(e,t="public",i="GET",s={},r,a){let o="/api/"+this.version+"/"+this.implodeParams(e,s);"extension"in this.urls&&(o+=this.urls.extension);const n=this.omit(s,this.extractParams(e));let d=this.urls.api+o;if("public"===t)Object.keys(n).length&&(d+="?"+this.urlencode(n));else{this.checkRequiredCredentials();const e=this.nonce().toString(),t=this.encodeParams(this.extend({access_key:this.apiKey,tonce:e},s)),n=i+"|"+o+"|"+t,c=t+"&signature="+this.hmac(this.encode(n),this.encode(this.secret));"GET"===i?d+="?"+c:(a=c,r={"Content-Type":"application/x-www-form-urlencoded"})}return{url:d,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,o,n,d){if(void 0!==o&&400===e){const e=this.safeValue(o,"error"),t=this.safeString(e,"code"),i=this.id+" "+this.json(o);this.throwExactlyMatchedException(this.exceptions,t,i)}}}},FIEc:function(e,t,i){"use strict";const s=i("OjXq");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"independentreserve",name:"Independent Reserve",countries:["AU","NZ"],rateLimit:1e3,has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/30521662-cf3f477c-9bcb-11e7-89bc-d1ac85012eda.jpg",api:{public:"https://api.independentreserve.com/Public",private:"https://api.independentreserve.com/Private"},www:"https://www.independentreserve.com",doc:"https://www.independentreserve.com/API"},api:{public:{get:["GetValidPrimaryCurrencyCodes","GetValidSecondaryCurrencyCodes","GetValidLimitOrderTypes","GetValidMarketOrderTypes","GetValidOrderTypes","GetValidTransactionTypes","GetMarketSummary","GetOrderBook","GetAllOrders","GetTradeHistorySummary","GetRecentTrades","GetFxRates"]},private:{post:["PlaceLimitOrder","PlaceMarketOrder","CancelOrder","GetOpenOrders","GetClosedOrders","GetClosedFilledOrders","GetOrderDetails","GetAccounts","GetTransactions","GetDigitalCurrencyDepositAddress","GetDigitalCurrencyDepositAddresses","SynchDigitalCurrencyDepositAddressWithBlockchain","WithdrawDigitalCurrency","RequestFiatWithdrawal","GetTrades","GetBrokerageFees"]}},fees:{trading:{taker:.005,maker:.005,percentage:!0,tierBased:!1}},commonCurrencies:{PLA:"PlayChip"}})}async fetchMarkets(e={}){const t=await this.publicGetGetValidPrimaryCurrencyCodes(e),i=await this.publicGetGetValidSecondaryCurrencyCodes(e),s=[];for(let r=0;r<t.length;r++){const e=t[r],a=this.safeCurrencyCode(e);for(let t=0;t<i.length;t++){const r=i[t],o=this.safeCurrencyCode(r),n=e+"/"+r,d=a+"/"+o;s.push({id:n,symbol:d,base:a,quote:o,baseId:e,quoteId:r,info:n})}}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGetAccounts(e),i={info:t};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"CurrencyCode"),a=this.safeCurrencyCode(r),o=this.account();o.free=this.safeFloat(e,"AvailableBalance"),o.total=this.safeFloat(e,"TotalBalance"),i[a]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={primaryCurrencyCode:s.baseId,secondaryCurrencyCode:s.quoteId},a=await this.publicGetGetOrderBook(this.extend(r,i)),o=this.parse8601(this.safeString(a,"CreatedTimestampUtc"));return this.parseOrderBook(a,o,"BuyOrders","SellOrders","Price","Volume")}parseTicker(e,t){const i=this.parse8601(this.safeString(e,"CreatedTimestampUtc"));let s=void 0;t&&(s=t.symbol);const r=this.safeFloat(e,"LastPrice");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"DayHighestPrice"),low:this.safeFloat(e,"DayLowestPrice"),bid:this.safeFloat(e,"CurrentHighestBidPrice"),bidVolume:void 0,ask:this.safeFloat(e,"CurrentLowestOfferPrice"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"DayAvgPrice"),baseVolume:this.safeFloat(e,"DayVolumeXbtInSecondaryCurrrency"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={primaryCurrencyCode:i.baseId,secondaryCurrencyCode:i.quoteId},r=await this.publicGetGetMarketSummary(this.extend(s,t));return this.parseTicker(r,i)}parseOrder(e,t){let i=void 0;const s=this.safeString(e,"PrimaryCurrencyCode"),r=this.safeString(e,"PrimaryCurrencyCode");let a=void 0,o=void 0;void 0!==s&&void 0!==r?(a=this.safeCurrencyCode(s),o=this.safeCurrencyCode(r),i=a+"/"+o):void 0!==t&&(i=t.symbol,a=t.base,o=t.quote);let n=this.safeValue(e,"Type");n.indexOf("Market")>=0?n="market":n.indexOf("Limit")>=0&&(n="limit");let d=void 0;n.indexOf("Bid")>=0?d="buy":n.indexOf("Offer")>=0&&(d="sell");const c=this.parse8601(this.safeString(e,"CreatedTimestampUtc"));let h=this.safeFloat(e,"VolumeOrdered");void 0===h&&(h=this.safeFloat(e,"Volume"));const l=this.safeFloat(e,"VolumeFilled");let u=void 0;const f=this.safeFloat(e,"FeePercent");let p=void 0;void 0!==h&&void 0!==l&&(u=h-l,void 0!==f&&(p=f*l));const m={rate:f,cost:p,currency:a},y=this.safeString(e,"OrderGuid"),b=this.parseOrderStatus(this.safeString(e,"Status")),v=this.safeFloat(e,"Value"),g=this.safeFloat(e,"AvgPrice"),w=this.safeFloat(e,"Price",g);return{info:e,id:y,clientOrderId:void 0,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:void 0,symbol:i,type:n,side:d,price:w,cost:v,average:g,amount:h,filled:l,remaining:u,status:b,fee:m}}parseOrderStatus(e){return this.safeString({Open:"open",PartiallyFilled:"open",Filled:"closed",PartiallyFilledAndCancelled:"canceled",Cancelled:"canceled",PartiallyFilledAndExpired:"canceled",Expired:"canceled"},e,e)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s=await this.privatePostGetOrderDetails(this.extend({orderGuid:e},i));let r=void 0;return void 0!==t&&(r=this.market(t)),this.parseOrder(s,r)}async fetchMyTrades(e,t,i=50,s={}){await this.loadMarkets();const r=this.safeInteger(s,"pageIndex",1);void 0===i&&(i=50);const a=this.ordered({pageIndex:r,pageSize:i}),o=await this.privatePostGetTrades(this.extend(a,s));let n=void 0;return void 0!==e&&(n=this.market(e)),this.parseTrades(o.Data,n,t,i)}parseTrade(e,t){const i=this.parse8601(e.TradeTimestampUtc),s=this.safeString(e,"TradeGuid"),r=this.safeString(e,"OrderGuid"),a=this.safeFloat2(e,"Price","SecondaryCurrencyTradePrice"),o=this.safeFloat2(e,"VolumeTraded","PrimaryCurrencyAmount");let n=void 0;void 0!==a&&void 0!==o&&(n=a*o);let d=void 0;void 0!==t&&(d=t.symbol);let c=this.safeString(e,"OrderType");return void 0!==c&&(c.indexOf("Bid")>=0?c="buy":c.indexOf("Offer")>=0&&(c="sell")),{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:d,order:r,type:void 0,side:c,takerOrMaker:void 0,price:a,amount:o,cost:n,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={primaryCurrencyCode:r.baseId,secondaryCurrencyCode:r.quoteId,numberOfRecentTradesToRetrieve:50},o=await this.publicGetGetRecentTrades(this.extend(a,s));return this.parseTrades(o.Trades,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),n=this.capitalize(t),d="privatePostPlace"+n+"Order";let c=n;c+="sell"===i?"Offer":"Bid";const h=this.ordered({primaryCurrencyCode:o.baseId,secondaryCurrencyCode:o.quoteId,orderType:c});"limit"===t&&(h.price=r),h.volume=s;const l=await this[d](this.extend(h,a));return{info:l,id:l.OrderGuid}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={orderGuid:e};return await this.privatePostCancelOrder(this.extend(s,i))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/"+e;if("public"===t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();const e=this.nonce(),t=[o,"apiKey="+this.apiKey,"nonce="+e.toString()],i=Object.keys(s);for(let r=0;r<i.length;r++){const e=i[r],a=s[e].toString();t.push(e+"="+a)}const n=t.join(","),d=this.hmac(this.encode(n),this.encode(this.secret)),c=this.ordered({});c.apiKey=this.apiKey,c.nonce=e,c.signature=d.toUpperCase();for(let r=0;r<i.length;r++){const e=i[r];c[e]=s[e]}a=this.json(c),r={"Content-Type":"application/json"}}return{url:o,method:i,body:a,headers:r}}}},FSRv:function(e,t,i){"use strict";(function(s,r){Object.defineProperty(t,"__esModule",{value:!0});const a=Symbol("buffer"),o=Symbol("type");class n{constructor(){this[o]="";const e=arguments[0],t=arguments[1],i=[];if(e){const t=e,r=Number(t.length);for(let e=0;e<r;e++){const r=t[e];let o;o=r instanceof s?r:ArrayBuffer.isView(r)?s.from(r.buffer,r.byteOffset,r.byteLength):r instanceof ArrayBuffer?s.from(r):r instanceof n?r[a]:s.from("string"===typeof r?r:String(r)),i.push(o)}}this[a]=s.concat(i);let r=t&&void 0!==t.type&&String(t.type).toLowerCase();r&&!/[^\u0020-\u007E]/.test(r)&&(this[o]=r)}get size(){return this[a].length}get type(){return this[o]}slice(){const e=this.size,t=arguments[0],i=arguments[1];let s,r;s=void 0===t?0:t<0?Math.max(e+t,0):Math.min(t,e),r=void 0===i?e:i<0?Math.max(e+i,0):Math.min(i,e);const o=Math.max(r-s,0),d=this[a].slice(s,s+o),c=new n([],{type:arguments[2]});return c[a]=d,c}}function d(e,t,i){Error.call(this,e),this.message=e,this.type=t,i&&(this.code=this.errno=i.code),Error.captureStackTrace(this,this.constructor)}Object.defineProperties(n.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(n.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.name="FetchError";const c=i("ZG6w");const h=i("ZG6w").PassThrough,l=Symbol("Body internals");function u(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.size;let a=void 0===r?0:r;var o=i.timeout;let h=void 0===o?0:o;null==e?e=null:"string"===typeof e||p(e)||e instanceof n||s.isBuffer(e)||"[object ArrayBuffer]"===Object.prototype.toString.call(e)||e instanceof c||(e=String(e)),this[l]={body:e,disturbed:!1,error:null},this.size=a,this.timeout=h,e instanceof c&&e.on("error",(function(e){t[l].error=new d(`Invalid response body while trying to fetch ${t.url}: ${e.message}`,"system",e)}))}function f(){var e=this;if(this[l].disturbed)return u.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[l].disturbed=!0,this[l].error)return u.Promise.reject(this[l].error);if(null===this.body)return u.Promise.resolve(s.alloc(0));if("string"===typeof this.body)return u.Promise.resolve(s.from(this.body));if(this.body instanceof n)return u.Promise.resolve(this.body[a]);if(s.isBuffer(this.body))return u.Promise.resolve(this.body);if("[object ArrayBuffer]"===Object.prototype.toString.call(this.body))return u.Promise.resolve(s.from(this.body));if(!(this.body instanceof c))return u.Promise.resolve(s.alloc(0));let t=[],i=0,r=!1;return new u.Promise((function(a,o){let n;e.timeout&&(n=setTimeout((function(){r=!0,o(new d(`Response timeout while trying to fetch ${e.url} (over ${e.timeout}ms)`,"body-timeout"))}),e.timeout)),e.body.on("error",(function(t){o(new d(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t))})),e.body.on("data",(function(s){if(!r&&null!==s){if(e.size&&i+s.length>e.size)return r=!0,void o(new d(`content size at ${e.url} over limit: ${e.size}`,"max-size"));i+=s.length,t.push(s)}})),e.body.on("end",(function(){if(!r){clearTimeout(n);try{a(s.concat(t))}catch(i){o(new d(`Could not create Buffer from response body for ${e.url}: ${i.message}`,"system",i))}}}))}))}function p(e){return"object"===typeof e&&"function"===typeof e.append&&"function"===typeof e.delete&&"function"===typeof e.get&&"function"===typeof e.getAll&&"function"===typeof e.has&&"function"===typeof e.set&&("URLSearchParams"===e.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(e)||"function"===typeof e.sort)}function m(e){let t,i,s=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return s instanceof c&&"function"!==typeof s.getBoundary&&(t=new h,i=new h,s.pipe(t),s.pipe(i),e[l].body=t,s=i),s}function y(e){const t=e.body;return null===t?0:"string"===typeof t?s.byteLength(t):p(t)?s.byteLength(String(t)):t instanceof n?t.size:s.isBuffer(t)?t.length:"[object ArrayBuffer]"===Object.prototype.toString.call(t)?t.byteLength:t&&"function"===typeof t.getLengthSync&&(t._lengthRetrievers&&0==t._lengthRetrievers.length||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}u.prototype={get body(){return this[l].body},get bodyUsed(){return this[l].disturbed},arrayBuffer(){return f.call(this).then((function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}))},blob(){let e=this.headers&&this.headers.get("content-type")||"";return f.call(this).then((function(t){return Object.assign(new n([],{type:e.toLowerCase()}),{[a]:t})}))},json(){var e=this;return f.call(this).then((function(t){try{return JSON.parse(t.toString())}catch(i){return u.Promise.reject(new d(`invalid json response body at ${e.url} reason: ${i.message}`,"invalid-json"))}}))},text(){return f.call(this).then((function(e){return e.toString()}))},buffer(){return f.call(this)},textConverted(){var e=this;return f.call(this).then((function(t){return function(e,t){if("function"!==typeof convert)throw new Error("The package `encoding` must be installed to use the textConverted() function");const i=t.get("content-type");let s,r,a="utf-8";i&&(s=/charset=([^;]*)/i.exec(i));r=e.slice(0,1024).toString(),!s&&r&&(s=/<meta.+?charset=(['"])(.+?)\1/i.exec(r));!s&&r&&(s=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(r),s&&(s=/charset=(.*)/i.exec(s.pop())));!s&&r&&(s=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(r));s&&(a=s.pop(),"gb2312"!==a&&"gbk"!==a||(a="gb18030"));return convert(e,"UTF-8",a).toString()}(t,e.headers)}))}},Object.defineProperties(u.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),u.mixIn=function(e){for(const t of Object.getOwnPropertyNames(u.prototype))if(!(t in e)){const i=Object.getOwnPropertyDescriptor(u.prototype,t);Object.defineProperty(e,t,i)}},u.Promise=r.Promise;const b=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,v=/[^\t\x20-\x7e\x80-\xff]/;function g(e){if(e=`${e}`,b.test(e))throw new TypeError(`${e} is not a legal HTTP header name`)}function w(e){if(e=`${e}`,v.test(e))throw new TypeError(`${e} is not a legal HTTP header value`)}function k(e,t){t=t.toLowerCase();for(const i in e)if(i.toLowerCase()===t)return i}const _=Symbol("map");class T{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[_]=Object.create(null),e instanceof T){const t=e.raw(),i=Object.keys(t);for(const e of i)for(const i of t[e])this.append(e,i)}else if(null==e);else{if("object"!==typeof e)throw new TypeError("Provided initializer must be an object");{const t=e[Symbol.iterator];if(null!=t){if("function"!==typeof t)throw new TypeError("Header pairs must be iterable");const i=[];for(const t of e){if("object"!==typeof t||"function"!==typeof t[Symbol.iterator])throw new TypeError("Each header pair must be iterable");i.push(Array.from(t))}for(const e of i){if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(e[0],e[1])}}else for(const i of Object.keys(e)){const t=e[i];this.append(i,t)}}}}get(e){g(e=`${e}`);const t=k(this[_],e);return void 0===t?null:this[_][t].join(", ")}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=O(this),s=0;for(;s<i.length;){var r=i[s];const a=r[0],o=r[1];e.call(t,o,a,this),i=O(this),s++}}set(e,t){t=`${t}`,g(e=`${e}`),w(t);const i=k(this[_],e);this[_][void 0!==i?i:e]=[t]}append(e,t){t=`${t}`,g(e=`${e}`),w(t);const i=k(this[_],e);void 0!==i?this[_][i].push(t):this[_][e]=[t]}has(e){return g(e=`${e}`),void 0!==k(this[_],e)}delete(e){g(e=`${e}`);const t=k(this[_],e);void 0!==t&&delete this[_][t]}raw(){return this[_]}keys(){return S(this,"key")}values(){return S(this,"value")}[Symbol.iterator](){return S(this,"key+value")}}function O(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";return Object.keys(e[_]).sort().map("key"===t?function(e){return e.toLowerCase()}:"value"===t?function(t){return e[_][t].join(", ")}:function(t){return[t.toLowerCase(),e[_][t].join(", ")]})}T.prototype.entries=T.prototype[Symbol.iterator],Object.defineProperty(T.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(T.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const x=Symbol("internal");function S(e,t){const i=Object.create(C);return i[x]={target:e,kind:t,index:0},i}const C=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==C)throw new TypeError("Value of `this` is not a HeadersIterator");var e=this[x];const t=e.target,i=e.kind,s=e.index,r=O(t,i);return s>=r.length?{value:void 0,done:!0}:(this[x].index=s+1,{value:r[s],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function I(e){const t=Object.assign({__proto__:null},e[_]),i=k(e[_],"Host");return void 0!==i&&(t[i]=t[i][0]),t}Object.defineProperty(C,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});const E=i("sOO9").STATUS_CODES,M=Symbol("Response internals");class A{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.call(this,e,t);const i=t.status||200;this[M]={url:t.url,status:i,statusText:t.statusText||E[i],headers:new T(t.headers)}}get url(){return this[M].url}get status(){return this[M].status}get ok(){return this[M].status>=200&&this[M].status<300}get statusText(){return this[M].statusText}get headers(){return this[M].headers}clone(){return new A(m(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok})}}u.mixIn(A.prototype),Object.defineProperties(A.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(A.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});var F=i("ly6l");const B=F.format,P=F.parse,q=Symbol("Request internals");function L(e){return"object"===typeof e&&"object"===typeof e[q]}class D{constructor(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};L(e)?t=P(e.url):(t=e&&e.href?P(e.href):P(`${e}`),e={});let r=i.method||e.method||"GET";if(r=r.toUpperCase(),(null!=i.body||L(e)&&null!==e.body)&&("GET"===r||"HEAD"===r))throw new TypeError("Request with GET/HEAD method cannot have body");let a=null!=i.body?i.body:L(e)&&null!==e.body?m(e):null;u.call(this,a,{timeout:i.timeout||e.timeout||0,size:i.size||e.size||0});const o=new T(i.headers||e.headers||{});if(null!=i.body){const e=function(e){const t=e.body;return null===t?null:"string"===typeof t?"text/plain;charset=UTF-8":p(t)?"application/x-www-form-urlencoded;charset=UTF-8":t instanceof n?t.type||null:s.isBuffer(t)?null:"[object ArrayBuffer]"===Object.prototype.toString.call(t)?null:"function"===typeof t.getBoundary?`multipart/form-data;boundary=${t.getBoundary()}`:null}(this);null===e||o.has("Content-Type")||o.append("Content-Type",e)}this[q]={method:r,redirect:i.redirect||e.redirect||"follow",headers:o,parsedURL:t},this.follow=void 0!==i.follow?i.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==i.compress?i.compress:void 0===e.compress||e.compress,this.counter=i.counter||e.counter||0,this.agent=i.agent||e.agent}get method(){return this[q].method}get url(){return B(this[q].parsedURL)}get headers(){return this[q].headers}get redirect(){return this[q].redirect}clone(){return new D(this)}}u.mixIn(D.prototype),Object.defineProperty(D.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(D.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0}});const V=i("sOO9"),R=i("w7gO");const G=i("ZG6w").PassThrough;const N=i("ly6l").resolve,H=i("GYwP");function U(e,t){if(!U.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return u.Promise=U.Promise,new U.Promise((function(i,r){const o=new D(e,t),c=function(e){const t=e[q].parsedURL,i=new T(e[q].headers);if(i.has("Accept")||i.set("Accept","*/*"),!t.protocol||!t.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(t.protocol))throw new TypeError("Only HTTP(S) protocols are supported");let s=null;if(null==e.body&&/^(POST|PUT)$/i.test(e.method)&&(s="0"),null!=e.body){const t=y(e);"number"===typeof t&&(s=String(t))}return s&&i.set("Content-Length",s),i.has("User-Agent")||i.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),e.compress&&i.set("Accept-Encoding","gzip,deflate"),i.has("Connection")||e.agent||i.set("Connection","close"),Object.assign({},t,{method:e.method,headers:I(i),agent:e.agent})}(o),h=(0,("https:"===c.protocol?R:V).request)(c);let l;function u(){h.abort(),clearTimeout(l)}o.timeout&&h.once("socket",(function(e){l=setTimeout((function(){r(new d(`network timeout at: ${o.url}`,"request-timeout")),u()}),o.timeout)})),h.on("error",(function(e){r(new d(`request to ${o.url} failed, reason: ${e.message}`,"system",e)),u()})),h.on("response",(function(e){clearTimeout(l);const t=function(e){const t=new T;for(const i of Object.keys(e))if(!b.test(i))if(Array.isArray(e[i]))for(const s of e[i])v.test(s)||(void 0===t[_][i]?t[_][i]=[s]:t[_][i].push(s));else v.test(e[i])||(t[_][i]=[e[i]]);return t}(e.headers);if(U.isRedirect(e.statusCode)){const s=t.get("Location"),a=null===s?null:N(o.url,s);switch(o.redirect){case"error":return r(new d(`redirect mode is set to error: ${o.url}`,"no-redirect")),void u();case"manual":null!==a&&t.set("Location",a);break;case"follow":if(null===a)break;if(o.counter>=o.follow)return r(new d(`maximum redirect reached at: ${o.url}`,"max-redirect")),void u();const s={headers:new T(o.headers),follow:o.follow,counter:o.counter+1,agent:o.agent,compress:o.compress,method:o.method,body:o.body};return 303!==e.statusCode&&o.body&&null===y(o)?(r(new d("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void u()):(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==o.method)||(s.method="GET",s.body=void 0,s.headers.delete("content-length")),i(U(new D(a,s))),void u())}}let s=e.pipe(new G);const a={url:o.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:o.size,timeout:o.timeout},n=t.get("Content-Encoding");if(!o.compress||"HEAD"===o.method||null===n||204===e.statusCode||304===e.statusCode)return void i(new A(s,a));const c={flush:H.Z_SYNC_FLUSH,finishFlush:H.Z_SYNC_FLUSH};if("gzip"==n||"x-gzip"==n)return s=s.pipe(H.createGunzip(c)),void i(new A(s,a));if("deflate"!=n&&"x-deflate"!=n)i(new A(s,a));else{e.pipe(new G).once("data",(function(e){s=8===(15&e[0])?s.pipe(H.createInflate()):s.pipe(H.createInflateRaw()),i(new A(s,a))}))}})),function(e,t){const i=t.body;null===i?e.end():"string"===typeof i?(e.write(i),e.end()):p(i)?(e.write(s.from(String(i))),e.end()):i instanceof n?(e.write(i[a]),e.end()):s.isBuffer(i)?(e.write(i),e.end()):"[object ArrayBuffer]"===Object.prototype.toString.call(i)?(e.write(s.from(i)),e.end()):i.pipe(e)}(h,o)}))}U.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},U.default=U,U.Promise=r.Promise,U.http=V,U.https=R,e.exports=t=U,t.Headers=T,t.Request=D,t.Response=A,t.FetchError=d}).call(this,i("zkTx").Buffer,i("pCvA"))},Fre1:function(e,t,i){"use strict";var s=i("+un8"),r=i("iak/"),a=i("Achu"),o=i("+csr"),n=i("ohDc"),d=0,c=1,h=2,l=4,u=5,f=6,p=0,m=1,y=2,b=-2,v=-3,g=-4,w=-5,k=8,_=1,T=2,O=3,x=4,S=5,C=6,I=7,E=8,M=9,A=10,F=11,B=12,P=13,q=14,L=15,D=16,V=17,R=18,G=19,N=20,H=21,U=22,j=23,K=24,z=25,X=26,W=27,Y=28,Z=29,J=30,Q=31,$=32,ee=852,te=592,ie=15;function se(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function re(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ae(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=_,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new s.Buf32(ee),t.distcode=t.distdyn=new s.Buf32(te),t.sane=1,t.back=-1,p):b}function oe(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,ae(e)):b}function ne(e,t){var i,s;return e&&e.state?(s=e.state,t<0?(i=0,t=-t):(i=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?b:(null!==s.window&&s.wbits!==t&&(s.window=null),s.wrap=i,s.wbits=t,oe(e))):b}function de(e,t){var i,s;return e?(s=new re,e.state=s,s.window=null,(i=ne(e,t))!==p&&(e.state=null),i):b}var ce,he,le=!0;function ue(e){if(le){var t;for(ce=new s.Buf32(512),he=new s.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(n(c,e.lens,0,288,ce,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;n(h,e.lens,0,32,he,0,e.work,{bits:5}),le=!1}e.lencode=ce,e.lenbits=9,e.distcode=he,e.distbits=5}function fe(e,t,i,r){var a,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new s.Buf8(o.wsize)),r>=o.wsize?(s.arraySet(o.window,t,i-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((a=o.wsize-o.wnext)>r&&(a=r),s.arraySet(o.window,t,i-r,a,o.wnext),(r-=a)?(s.arraySet(o.window,t,i-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}t.inflateReset=oe,t.inflateReset2=ne,t.inflateResetKeep=ae,t.inflateInit=function(e){return de(e,ie)},t.inflateInit2=de,t.inflate=function(e,t){var i,ee,te,ie,re,ae,oe,ne,de,ce,he,le,pe,me,ye,be,ve,ge,we,ke,_e,Te,Oe,xe,Se=0,Ce=new s.Buf8(4),Ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return b;(i=e.state).mode===B&&(i.mode=P),re=e.next_out,te=e.output,oe=e.avail_out,ie=e.next_in,ee=e.input,ae=e.avail_in,ne=i.hold,de=i.bits,ce=ae,he=oe,Te=p;e:for(;;)switch(i.mode){case _:if(0===i.wrap){i.mode=P;break}for(;de<16;){if(0===ae)break e;ae--,ne+=ee[ie++]<<de,de+=8}if(2&i.wrap&&35615===ne){i.check=0,Ce[0]=255&ne,Ce[1]=ne>>>8&255,i.check=a(i.check,Ce,2,0),ne=0,de=0,i.mode=T;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&ne)<<8)+(ne>>8))%31){e.msg="incorrect header check",i.mode=J;break}if((15&ne)!==k){e.msg="unknown compression method",i.mode=J;break}if(de-=4,_e=8+(15&(ne>>>=4)),0===i.wbits)i.wbits=_e;else if(_e>i.wbits){e.msg="invalid window size",i.mode=J;break}i.dmax=1<<_e,e.adler=i.check=1,i.mode=512&ne?A:B,ne=0,de=0;break;case T:for(;de<16;){if(0===ae)break e;ae--,ne+=ee[ie++]<<de,de+=8}if(i.flags=ne,(255&i.flags)!==k){e.msg="unknown compression method",i.mode=J;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=J;break}i.head&&(i.head.text=ne>>8&1),512&i.flags&&(Ce[0]=255&ne,Ce[1]=ne>>>8&255,i.check=a(i.check,Ce,2,0)),ne=0,de=0,i.mode=O;case O:for(;de<32;){if(0===ae)break e;ae--,ne+=ee[ie++]<<de,de+=8}i.head&&(i.head.time=ne),512&i.flags&&(Ce[0]=255&ne,Ce[1]=ne>>>8&255,Ce[2]=ne>>>16&255,Ce[3]=ne>>>24&255,i.check=a(i.check,Ce,4,0)),ne=0,de=0,i.mode=x;case x:for(;de<16;){if(0===ae)break e;ae--,ne+=ee[ie++]<<de,de+=8}i.head&&(i.head.xflags=255&ne,i.head.os=ne>>8),512&i.flags&&(Ce[0]=255&ne,Ce[1]=ne>>>8&255,i.check=a(i.check,Ce,2,0)),ne=0,de=0,i.mode=S;case S:if(1024&i.flags){for(;de<16;){if(0===ae)break e;ae--,ne+=ee[ie++]<<de,de+=8}i.length=ne,i.head&&(i.head.extra_len=ne),512&i.flags&&(Ce[0]=255&ne,Ce[1]=ne>>>8&255,i.check=a(i.check,Ce,2,0)),ne=0,de=0}else i.head&&(i.head.extra=null);i.mode=C;case C:if(1024&i.flags&&((le=i.length)>ae&&(le=ae),le&&(i.head&&(_e=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),s.arraySet(i.head.extra,ee,ie,le,_e)),512&i.flags&&(i.check=a(i.check,ee,le,ie)),ae-=le,ie+=le,i.length-=le),i.length))break e;i.length=0,i.mode=I;case I:if(2048&i.flags){if(0===ae)break e;le=0;do{_e=ee[ie+le++],i.head&&_e&&i.length<65536&&(i.head.name+=String.fromCharCode(_e))}while(_e&&le<ae);if(512&i.flags&&(i.check=a(i.check,ee,le,ie)),ae-=le,ie+=le,_e)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=E;case E:if(4096&i.flags){if(0===ae)break e;le=0;do{_e=ee[ie+le++],i.head&&_e&&i.length<65536&&(i.head.comment+=String.fromCharCode(_e))}while(_e&&le<ae);if(512&i.flags&&(i.check=a(i.check,ee,le,ie)),ae-=le,ie+=le,_e)break e}else i.head&&(i.head.comment=null);i.mode=M;case M:if(512&i.flags){for(;de<16;){if(0===ae)break e;ae--,ne+=ee[ie++]<<de,de+=8}if(ne!==(65535&i.check)){e.msg="header crc mismatch",i.mode=J;break}ne=0,de=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=B;break;case A:for(;de<32;){if(0===ae)break e;ae--,ne+=ee[ie++]<<de,de+=8}e.adler=i.check=se(ne),ne=0,de=0,i.mode=F;case F:if(0===i.havedict)return e.next_out=re,e.avail_out=oe,e.next_in=ie,e.avail_in=ae,i.hold=ne,i.bits=de,y;e.adler=i.check=1,i.mode=B;case B:if(t===u||t===f)break e;case P:if(i.last){ne>>>=7&de,de-=7&de,i.mode=W;break}for(;de<3;){if(0===ae)break e;ae--,ne+=ee[ie++]<<de,de+=8}switch(i.last=1&ne,de-=1,3&(ne>>>=1)){case 0:i.mode=q;break;case 1:if(ue(i),i.mode=N,t===f){ne>>>=2,de-=2;break e}break;case 2:i.mode=V;break;case 3:e.msg="invalid block type",i.mode=J}ne>>>=2,de-=2;break;case q:for(ne>>>=7&de,de-=7&de;de<32;){if(0===ae)break e;ae--,ne+=ee[ie++]<<de,de+=8}if((65535&ne)!==(ne>>>16^65535)){e.msg="invalid stored block lengths",i.mode=J;break}if(i.length=65535&ne,ne=0,de=0,i.mode=L,t===f)break e;case L:i.mode=D;case D:if(le=i.length){if(le>ae&&(le=ae),le>oe&&(le=oe),0===le)break e;s.arraySet(te,ee,ie,le,re),ae-=le,ie+=le,oe-=le,re+=le,i.length-=le;break}i.mode=B;break;case V:for(;de<14;){if(0===ae)break e;ae--,ne+=ee[ie++]<<de,de+=8}if(i.nlen=257+(31&ne),ne>>>=5,de-=5,i.ndist=1+(31&ne),ne>>>=5,de-=5,i.ncode=4+(15&ne),ne>>>=4,de-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=J;break}i.have=0,i.mode=R;case R:for(;i.have<i.ncode;){for(;de<3;){if(0===ae)break e;ae--,ne+=ee[ie++]<<de,de+=8}i.lens[Ie[i.have++]]=7&ne,ne>>>=3,de-=3}for(;i.have<19;)i.lens[Ie[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,Oe={bits:i.lenbits},Te=n(d,i.lens,0,19,i.lencode,0,i.work,Oe),i.lenbits=Oe.bits,Te){e.msg="invalid code lengths set",i.mode=J;break}i.have=0,i.mode=G;case G:for(;i.have<i.nlen+i.ndist;){for(;be=(Se=i.lencode[ne&(1<<i.lenbits)-1])>>>16&255,ve=65535&Se,!((ye=Se>>>24)<=de);){if(0===ae)break e;ae--,ne+=ee[ie++]<<de,de+=8}if(ve<16)ne>>>=ye,de-=ye,i.lens[i.have++]=ve;else{if(16===ve){for(xe=ye+2;de<xe;){if(0===ae)break e;ae--,ne+=ee[ie++]<<de,de+=8}if(ne>>>=ye,de-=ye,0===i.have){e.msg="invalid bit length repeat",i.mode=J;break}_e=i.lens[i.have-1],le=3+(3&ne),ne>>>=2,de-=2}else if(17===ve){for(xe=ye+3;de<xe;){if(0===ae)break e;ae--,ne+=ee[ie++]<<de,de+=8}de-=ye,_e=0,le=3+(7&(ne>>>=ye)),ne>>>=3,de-=3}else{for(xe=ye+7;de<xe;){if(0===ae)break e;ae--,ne+=ee[ie++]<<de,de+=8}de-=ye,_e=0,le=11+(127&(ne>>>=ye)),ne>>>=7,de-=7}if(i.have+le>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=J;break}for(;le--;)i.lens[i.have++]=_e}}if(i.mode===J)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=J;break}if(i.lenbits=9,Oe={bits:i.lenbits},Te=n(c,i.lens,0,i.nlen,i.lencode,0,i.work,Oe),i.lenbits=Oe.bits,Te){e.msg="invalid literal/lengths set",i.mode=J;break}if(i.distbits=6,i.distcode=i.distdyn,Oe={bits:i.distbits},Te=n(h,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,Oe),i.distbits=Oe.bits,Te){e.msg="invalid distances set",i.mode=J;break}if(i.mode=N,t===f)break e;case N:i.mode=H;case H:if(ae>=6&&oe>=258){e.next_out=re,e.avail_out=oe,e.next_in=ie,e.avail_in=ae,i.hold=ne,i.bits=de,o(e,he),re=e.next_out,te=e.output,oe=e.avail_out,ie=e.next_in,ee=e.input,ae=e.avail_in,ne=i.hold,de=i.bits,i.mode===B&&(i.back=-1);break}for(i.back=0;be=(Se=i.lencode[ne&(1<<i.lenbits)-1])>>>16&255,ve=65535&Se,!((ye=Se>>>24)<=de);){if(0===ae)break e;ae--,ne+=ee[ie++]<<de,de+=8}if(be&&0===(240&be)){for(ge=ye,we=be,ke=ve;be=(Se=i.lencode[ke+((ne&(1<<ge+we)-1)>>ge)])>>>16&255,ve=65535&Se,!(ge+(ye=Se>>>24)<=de);){if(0===ae)break e;ae--,ne+=ee[ie++]<<de,de+=8}ne>>>=ge,de-=ge,i.back+=ge}if(ne>>>=ye,de-=ye,i.back+=ye,i.length=ve,0===be){i.mode=X;break}if(32&be){i.back=-1,i.mode=B;break}if(64&be){e.msg="invalid literal/length code",i.mode=J;break}i.extra=15&be,i.mode=U;case U:if(i.extra){for(xe=i.extra;de<xe;){if(0===ae)break e;ae--,ne+=ee[ie++]<<de,de+=8}i.length+=ne&(1<<i.extra)-1,ne>>>=i.extra,de-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=j;case j:for(;be=(Se=i.distcode[ne&(1<<i.distbits)-1])>>>16&255,ve=65535&Se,!((ye=Se>>>24)<=de);){if(0===ae)break e;ae--,ne+=ee[ie++]<<de,de+=8}if(0===(240&be)){for(ge=ye,we=be,ke=ve;be=(Se=i.distcode[ke+((ne&(1<<ge+we)-1)>>ge)])>>>16&255,ve=65535&Se,!(ge+(ye=Se>>>24)<=de);){if(0===ae)break e;ae--,ne+=ee[ie++]<<de,de+=8}ne>>>=ge,de-=ge,i.back+=ge}if(ne>>>=ye,de-=ye,i.back+=ye,64&be){e.msg="invalid distance code",i.mode=J;break}i.offset=ve,i.extra=15&be,i.mode=K;case K:if(i.extra){for(xe=i.extra;de<xe;){if(0===ae)break e;ae--,ne+=ee[ie++]<<de,de+=8}i.offset+=ne&(1<<i.extra)-1,ne>>>=i.extra,de-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=J;break}i.mode=z;case z:if(0===oe)break e;if(le=he-oe,i.offset>le){if((le=i.offset-le)>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=J;break}le>i.wnext?(le-=i.wnext,pe=i.wsize-le):pe=i.wnext-le,le>i.length&&(le=i.length),me=i.window}else me=te,pe=re-i.offset,le=i.length;le>oe&&(le=oe),oe-=le,i.length-=le;do{te[re++]=me[pe++]}while(--le);0===i.length&&(i.mode=H);break;case X:if(0===oe)break e;te[re++]=i.length,oe--,i.mode=H;break;case W:if(i.wrap){for(;de<32;){if(0===ae)break e;ae--,ne|=ee[ie++]<<de,de+=8}if(he-=oe,e.total_out+=he,i.total+=he,he&&(e.adler=i.check=i.flags?a(i.check,te,he,re-he):r(i.check,te,he,re-he)),he=oe,(i.flags?ne:se(ne))!==i.check){e.msg="incorrect data check",i.mode=J;break}ne=0,de=0}i.mode=Y;case Y:if(i.wrap&&i.flags){for(;de<32;){if(0===ae)break e;ae--,ne+=ee[ie++]<<de,de+=8}if(ne!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=J;break}ne=0,de=0}i.mode=Z;case Z:Te=m;break e;case J:Te=v;break e;case Q:return g;case $:default:return b}return e.next_out=re,e.avail_out=oe,e.next_in=ie,e.avail_in=ae,i.hold=ne,i.bits=de,(i.wsize||he!==e.avail_out&&i.mode<J&&(i.mode<W||t!==l))&&fe(e,e.output,e.next_out,he-e.avail_out)?(i.mode=Q,g):(ce-=e.avail_in,he-=e.avail_out,e.total_in+=ce,e.total_out+=he,i.total+=he,i.wrap&&he&&(e.adler=i.check=i.flags?a(i.check,te,he,e.next_out-he):r(i.check,te,he,e.next_out-he)),e.data_type=i.bits+(i.last?64:0)+(i.mode===B?128:0)+(i.mode===N||i.mode===L?256:0),(0===ce&&0===he||t===l)&&Te===p&&(Te=w),Te)},t.inflateEnd=function(e){if(!e||!e.state)return b;var t=e.state;return t.window&&(t.window=null),e.state=null,p},t.inflateGetHeader=function(e,t){var i;return e&&e.state?0===(2&(i=e.state).wrap)?b:(i.head=t,t.done=!1,p):b},t.inflateSetDictionary=function(e,t){var i,s=t.length;return e&&e.state?0!==(i=e.state).wrap&&i.mode!==F?b:i.mode===F&&r(1,t,s,0)!==i.check?v:fe(e,t,s,s)?(i.mode=Q,g):(i.havedict=1,p):b},t.inflateInfo="pako inflate (from Nodeca project)"},GYwP:function(e,t,i){"use strict";(function(e){var s=i("zkTx").Buffer,r=i("ZG6w").Transform,a=i("2jjz"),o=i("4+3C"),n=i("ZERR").ok,d=i("zkTx").kMaxLength,c="Cannot create final Buffer. It would be larger than 0x"+d.toString(16)+" bytes";a.Z_MIN_WINDOWBITS=8,a.Z_MAX_WINDOWBITS=15,a.Z_DEFAULT_WINDOWBITS=15,a.Z_MIN_CHUNK=64,a.Z_MAX_CHUNK=1/0,a.Z_DEFAULT_CHUNK=16384,a.Z_MIN_MEMLEVEL=1,a.Z_MAX_MEMLEVEL=9,a.Z_DEFAULT_MEMLEVEL=8,a.Z_MIN_LEVEL=-1,a.Z_MAX_LEVEL=9,a.Z_DEFAULT_LEVEL=a.Z_DEFAULT_COMPRESSION;for(var h=Object.keys(a),l=0;l<h.length;l++){var u=h[l];u.match(/^Z/)&&Object.defineProperty(t,u,{enumerable:!0,value:a[u],writable:!1})}for(var f={Z_OK:a.Z_OK,Z_STREAM_END:a.Z_STREAM_END,Z_NEED_DICT:a.Z_NEED_DICT,Z_ERRNO:a.Z_ERRNO,Z_STREAM_ERROR:a.Z_STREAM_ERROR,Z_DATA_ERROR:a.Z_DATA_ERROR,Z_MEM_ERROR:a.Z_MEM_ERROR,Z_BUF_ERROR:a.Z_BUF_ERROR,Z_VERSION_ERROR:a.Z_VERSION_ERROR},p=Object.keys(f),m=0;m<p.length;m++){var y=p[m];f[f[y]]=y}function b(e,t,i){var r=[],a=0;function o(){for(var t;null!==(t=e.read());)r.push(t),a+=t.length;e.once("readable",o)}function n(){var t,o=null;a>=d?o=new RangeError(c):t=s.concat(r,a),r=[],e.close(),i(o,t)}e.on("error",(function(t){e.removeListener("end",n),e.removeListener("readable",o),i(t)})),e.on("end",n),e.end(t),o()}function v(e,t){if("string"===typeof t&&(t=s.from(t)),!s.isBuffer(t))throw new TypeError("Not a string or buffer");var i=e._finishFlushFlag;return e._processChunk(t,i)}function g(e){if(!(this instanceof g))return new g(e);C.call(this,e,a.DEFLATE)}function w(e){if(!(this instanceof w))return new w(e);C.call(this,e,a.INFLATE)}function k(e){if(!(this instanceof k))return new k(e);C.call(this,e,a.GZIP)}function _(e){if(!(this instanceof _))return new _(e);C.call(this,e,a.GUNZIP)}function T(e){if(!(this instanceof T))return new T(e);C.call(this,e,a.DEFLATERAW)}function O(e){if(!(this instanceof O))return new O(e);C.call(this,e,a.INFLATERAW)}function x(e){if(!(this instanceof x))return new x(e);C.call(this,e,a.UNZIP)}function S(e){return e===a.Z_NO_FLUSH||e===a.Z_PARTIAL_FLUSH||e===a.Z_SYNC_FLUSH||e===a.Z_FULL_FLUSH||e===a.Z_FINISH||e===a.Z_BLOCK}function C(e,i){var o=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||t.Z_DEFAULT_CHUNK,r.call(this,e),e.flush&&!S(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!S(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||a.Z_NO_FLUSH,this._finishFlushFlag="undefined"!==typeof e.finishFlush?e.finishFlush:a.Z_FINISH,e.chunkSize&&(e.chunkSize<t.Z_MIN_CHUNK||e.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<t.Z_MIN_WINDOWBITS||e.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<t.Z_MIN_LEVEL||e.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<t.Z_MIN_MEMLEVEL||e.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=t.Z_FILTERED&&e.strategy!=t.Z_HUFFMAN_ONLY&&e.strategy!=t.Z_RLE&&e.strategy!=t.Z_FIXED&&e.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!s.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new a.Zlib(i);var n=this;this._hadError=!1,this._handle.onerror=function(e,i){I(n),n._hadError=!0;var s=new Error(e);s.errno=i,s.code=t.codes[i],n.emit("error",s)};var d=t.Z_DEFAULT_COMPRESSION;"number"===typeof e.level&&(d=e.level);var c=t.Z_DEFAULT_STRATEGY;"number"===typeof e.strategy&&(c=e.strategy),this._handle.init(e.windowBits||t.Z_DEFAULT_WINDOWBITS,d,e.memLevel||t.Z_DEFAULT_MEMLEVEL,c,e.dictionary),this._buffer=s.allocUnsafe(this._chunkSize),this._offset=0,this._level=d,this._strategy=c,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!o._handle},configurable:!0,enumerable:!0})}function I(t,i){i&&e.nextTick(i),t._handle&&(t._handle.close(),t._handle=null)}function E(e){e.emit("close")}Object.defineProperty(t,"codes",{enumerable:!0,value:Object.freeze(f),writable:!1}),t.Deflate=g,t.Inflate=w,t.Gzip=k,t.Gunzip=_,t.DeflateRaw=T,t.InflateRaw=O,t.Unzip=x,t.createDeflate=function(e){return new g(e)},t.createInflate=function(e){return new w(e)},t.createDeflateRaw=function(e){return new T(e)},t.createInflateRaw=function(e){return new O(e)},t.createGzip=function(e){return new k(e)},t.createGunzip=function(e){return new _(e)},t.createUnzip=function(e){return new x(e)},t.deflate=function(e,t,i){return"function"===typeof t&&(i=t,t={}),b(new g(t),e,i)},t.deflateSync=function(e,t){return v(new g(t),e)},t.gzip=function(e,t,i){return"function"===typeof t&&(i=t,t={}),b(new k(t),e,i)},t.gzipSync=function(e,t){return v(new k(t),e)},t.deflateRaw=function(e,t,i){return"function"===typeof t&&(i=t,t={}),b(new T(t),e,i)},t.deflateRawSync=function(e,t){return v(new T(t),e)},t.unzip=function(e,t,i){return"function"===typeof t&&(i=t,t={}),b(new x(t),e,i)},t.unzipSync=function(e,t){return v(new x(t),e)},t.inflate=function(e,t,i){return"function"===typeof t&&(i=t,t={}),b(new w(t),e,i)},t.inflateSync=function(e,t){return v(new w(t),e)},t.gunzip=function(e,t,i){return"function"===typeof t&&(i=t,t={}),b(new _(t),e,i)},t.gunzipSync=function(e,t){return v(new _(t),e)},t.inflateRaw=function(e,t,i){return"function"===typeof t&&(i=t,t={}),b(new O(t),e,i)},t.inflateRawSync=function(e,t){return v(new O(t),e)},o.inherits(C,r),C.prototype.params=function(i,s,r){if(i<t.Z_MIN_LEVEL||i>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+i);if(s!=t.Z_FILTERED&&s!=t.Z_HUFFMAN_ONLY&&s!=t.Z_RLE&&s!=t.Z_FIXED&&s!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+s);if(this._level!==i||this._strategy!==s){var o=this;this.flush(a.Z_SYNC_FLUSH,(function(){n(o._handle,"zlib binding closed"),o._handle.params(i,s),o._hadError||(o._level=i,o._strategy=s,r&&r())}))}else e.nextTick(r)},C.prototype.reset=function(){return n(this._handle,"zlib binding closed"),this._handle.reset()},C.prototype._flush=function(e){this._transform(s.alloc(0),"",e)},C.prototype.flush=function(t,i){var r=this,o=this._writableState;("function"===typeof t||void 0===t&&!i)&&(i=t,t=a.Z_FULL_FLUSH),o.ended?i&&e.nextTick(i):o.ending?i&&this.once("end",i):o.needDrain?i&&this.once("drain",(function(){return r.flush(t,i)})):(this._flushFlag=t,this.write(s.alloc(0),"",i))},C.prototype.close=function(t){I(this,t),e.nextTick(E,this)},C.prototype._transform=function(e,t,i){var r,o=this._writableState,n=(o.ending||o.ended)&&(!e||o.length===e.length);return null===e||s.isBuffer(e)?this._handle?(n?r=this._finishFlushFlag:(r=this._flushFlag,e.length>=o.length&&(this._flushFlag=this._opts.flush||a.Z_NO_FLUSH)),void this._processChunk(e,r,i)):i(new Error("zlib binding closed")):i(new Error("invalid input"))},C.prototype._processChunk=function(e,t,i){var r=e&&e.length,a=this._chunkSize-this._offset,o=0,h=this,l="function"===typeof i;if(!l){var u,f=[],p=0;this.on("error",(function(e){u=e})),n(this._handle,"zlib binding closed");do{var m=this._handle.writeSync(t,e,o,r,this._buffer,this._offset,a)}while(!this._hadError&&v(m[0],m[1]));if(this._hadError)throw u;if(p>=d)throw I(this),new RangeError(c);var y=s.concat(f,p);return I(this),y}n(this._handle,"zlib binding closed");var b=this._handle.write(t,e,o,r,this._buffer,this._offset,a);function v(d,c){if(this&&(this.buffer=null,this.callback=null),!h._hadError){var u=a-c;if(n(u>=0,"have should not go down"),u>0){var m=h._buffer.slice(h._offset,h._offset+u);h._offset+=u,l?h.push(m):(f.push(m),p+=m.length)}if((0===c||h._offset>=h._chunkSize)&&(a=h._chunkSize,h._offset=0,h._buffer=s.allocUnsafe(h._chunkSize)),0===c){if(o+=r-d,r=d,!l)return!0;var y=h._handle.write(t,e,o,r,h._buffer,h._offset,h._chunkSize);return y.callback=v,void(y.buffer=e)}if(!l)return!1;i()}}b.buffer=e,b.callback=v},o.inherits(g,C),o.inherits(w,C),o.inherits(k,C),o.inherits(_,C),o.inherits(T,C),o.inherits(O,C),o.inherits(x,C)}).call(this,i("5IsQ"))},Gi7R:function(e,t,i){"use strict";e.exports=i("sOjj")(i("a2z/"))},GiW5:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ArgumentsRequired:a,ExchangeNotAvailable:o,InsufficientFunds:n,OrderNotFound:d,InvalidOrder:c,DDoSProtection:h,InvalidNonce:l,AuthenticationError:u,InvalidAddress:f,RateLimitExceeded:p,PermissionDenied:m}=i("ucJe"),{ROUND:y,TRUNCATE:b}=i("rwG2");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"binance",name:"Binance",countries:["JP","MT"],rateLimit:500,certified:!0,pro:!0,has:{fetchDepositAddress:!0,CORS:!1,fetchBidsAsks:!0,fetchTickers:!0,fetchTime:!0,fetchOHLCV:!0,fetchMyTrades:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:"emulated",withdraw:!0,fetchFundingFees:!0,fetchDeposits:!0,fetchWithdrawals:!0,fetchTransactions:!1,fetchTradingFee:!0,fetchTradingFees:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","8h":"8h","12h":"12h","1d":"1d","3d":"3d","1w":"1w","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/29604020-d5483cdc-87ee-11e7-94c7-d1a8d9169293.jpg",api:{web:"https://www.binance.com",wapi:"https://api.binance.com/wapi/v3",sapi:"https://api.binance.com/sapi/v1",fapiPublic:"https://fapi.binance.com/fapi/v1",fapiPrivate:"https://fapi.binance.com/fapi/v1",public:"https://api.binance.com/api/v3",private:"https://api.binance.com/api/v3",v3:"https://api.binance.com/api/v3",v1:"https://api.binance.com/api/v1"},www:"https://www.binance.com",referral:"https://www.binance.com/?ref=10205187",doc:["https://binance-docs.github.io/apidocs/spot/en"],api_management:"https://www.binance.com/en/usercenter/settings/api-management",fees:"https://www.binance.com/en/fee/schedule"},api:{web:{get:["exchange/public/product","assetWithdraw/getAllAsset.html"]},sapi:{get:["accountSnapshot","margin/asset","margin/pair","margin/allAssets","margin/allPairs","margin/priceIndex","asset/assetDividend","margin/loan","margin/repay","margin/account","margin/transfer","margin/interestHistory","margin/forceLiquidationRec","margin/order","margin/openOrders","margin/allOrders","margin/myTrades","margin/maxBorrowable","margin/maxTransferable","futures/transfer","capital/config/getall","capital/deposit/address","capital/deposit/hisrec","capital/deposit/subAddress","capital/deposit/subHisrec","capital/withdraw/history","sub-account/futures/account","sub-account/futures/accountSummary","sub-account/futures/positionRisk","sub-account/margin/account","sub-account/margin/accountSummary","sub-account/status","lending/daily/product/list","lending/daily/userLeftQuota","lending/daily/userRedemptionQuota","lending/daily/token/position","lending/union/account","lending/union/purchaseRecord","lending/union/redemptionRecord","lending/union/interestHistory"],post:["asset/dust","account/disableFastWithdrawSwitch","account/enableFastWithdrawSwitch","capital/withdraw/apply","margin/transfer","margin/loan","margin/repay","margin/order","sub-account/margin/enable","sub-account/margin/enable","sub-account/futures/enable","userDataStream","futures/transfer","lending/daily/purchase","lending/daily/redeem"],put:["userDataStream"],delete:["margin/order","userDataStream"]},wapi:{post:["withdraw","sub-account/transfer"],get:["depositHistory","withdrawHistory","depositAddress","accountStatus","systemStatus","apiTradingStatus","userAssetDribbletLog","tradeFee","assetDetail","sub-account/list","sub-account/transfer/history","sub-account/assets"]},fapiPublic:{get:["ping","time","exchangeInfo","depth","trades","historicalTrades","aggTrades","klines","fundingRate","premiumIndex","ticker/24hr","ticker/price","ticker/bookTicker","allForceOrders","openInterest","leverageBracket"]},fapiPrivate:{get:["allOrders","openOrder","openOrders","order","account","balance","positionMargin/history","positionRisk","userTrades","income"],post:["positionMargin","marginType","order","leverage","listenKey"],put:["listenKey"],delete:["order","allOpenOrders","listenKey"]},v3:{get:["ticker/price","ticker/bookTicker"]},public:{get:["ping","time","depth","trades","aggTrades","historicalTrades","klines","ticker/24hr","ticker/price","ticker/bookTicker","exchangeInfo"],put:["userDataStream"],post:["userDataStream"],delete:["userDataStream"]},private:{get:["allOrderList","openOrderList","orderList","order","openOrders","allOrders","account","myTrades"],post:["order/oco","order","order/test"],delete:["orderList","order"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001}},commonCurrencies:{BCC:"BCC",YOYO:"YOYOW"},options:{fetchTradesMethod:"publicGetAggTrades",fetchTickersMethod:"publicGetTicker24hr",defaultTimeInForce:"GTC",defaultLimitOrderType:"limit",defaultType:"spot",hasAlreadyAuthenticatedSuccessfully:!1,warnOnFetchOpenOrdersWithoutSymbol:!0,recvWindow:5e3,timeDifference:0,adjustForTimeDifference:!1,parseOrderToPrecision:!1,newOrderRespType:{market:"FULL",limit:"RESULT"}},exceptions:{"API key does not exist":u,"Order would trigger immediately.":c,"Account has insufficient balance for requested action.":n,"Rest API trading is not enabled.":o,"You don't have permission.":m,"Market is closed.":o,"-1000":o,"-1003":p,"-1013":c,"-1021":l,"-1022":u,"-1100":c,"-1104":r,"-1128":r,"-2010":r,"-2011":d,"-2013":d,"-2014":u,"-2015":u}})}nonce(){return this.milliseconds()-this.options.timeDifference}async fetchTime(e={}){const t="spot"===this.safeString2(this.options,"fetchTime","defaultType","spot")?"publicGetTime":"fapiPublicGetTime",i=await this[t](e);return this.safeInteger(i,"serverTime")}async loadTimeDifference(){const e=await this.fetchTime(),t=this.milliseconds();return this.options.timeDifference=t-e,this.options.timeDifference}async fetchMarkets(e={}){const t=this.safeString2(this.options,"fetchMarkets","defaultType","spot"),i=this.safeString(e,"type",t),s=this.omit(e,"type"),r="spot"===i?"publicGetExchangeInfo":"fapiPublicGetExchangeInfo",a=await this[r](s);this.options.adjustForTimeDifference&&await this.loadTimeDifference();const o=this.safeValue(a,"symbols"),n=[];for(let d=0;d<o.length;d++){const e=o[d],t="maintMarginPercent"in e,i=!t,s=i?"spot":"future",r=this.safeString(e,"symbol"),a=this.safeStringLower(e,"symbol"),c=e.baseAsset,h=e.quoteAsset,l=this.safeCurrencyCode(c),u=this.safeCurrencyCode(h),f=l+"/"+u,p=this.indexBy(e.filters,"filterType"),m={base:e.baseAssetPrecision,quote:e.quotePrecision,amount:e.baseAssetPrecision,price:e.quotePrecision},y={id:r,lowercaseId:a,symbol:f,base:l,quote:u,baseId:c,quoteId:h,info:e,type:s,spot:i,future:t,active:"TRADING"===this.safeString(e,"status"),precision:m,limits:{amount:{min:Math.pow(10,-m.amount),max:void 0},price:{min:void 0,max:void 0},cost:{min:-1*Math.log10(m.amount),max:void 0}}};if("PRICE_FILTER"in p){const e=p.PRICE_FILTER;y.limits.price={min:this.safeFloat(e,"minPrice"),max:void 0};const t=this.safeFloat(e,"maxPrice");void 0!==t&&t>0&&(y.limits.price.max=t),y.precision.price=this.precisionFromString(e.tickSize)}if("LOT_SIZE"in p){const e=this.safeValue(p,"LOT_SIZE",{}),t=this.safeString(e,"stepSize");y.precision.amount=this.precisionFromString(t),y.limits.amount={min:this.safeFloat(e,"minQty"),max:this.safeFloat(e,"maxQty")}}if("MARKET_LOT_SIZE"in p){const e=this.safeValue(p,"MARKET_LOT_SIZE",{});y.limits.market={min:this.safeFloat(e,"minQty"),max:this.safeFloat(e,"maxQty")}}"MIN_NOTIONAL"in p&&(y.limits.cost.min=this.safeFloat(p.MIN_NOTIONAL,"minNotional")),n.push(y)}return n}calculateFee(e,t,i,s,r,a="taker",o={}){const n=this.markets[e];let d="quote";const c=n[a];let h=s*c,l=n.precision.price;return"sell"===i?h*=r:(d="base",l=n.precision.amount),h=this.decimalToPrecision(h,y,l,this.precisionMode),{type:a,currency:n[d],rate:c,cost:parseFloat(h)}}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeString2(this.options,"fetchBalance","defaultType","spot"),i=this.safeString(e,"type",t),s="spot"===i?"privateGetAccount":"fapiPrivateGetAccount",r=this.omit(e,"type"),a=await this[s](r),o={info:a};if("spot"===i){const e=this.safeValue(a,"balances",[]);for(let t=0;t<e.length;t++){const i=e[t],s=this.safeString(i,"asset"),r=this.safeCurrencyCode(s),a=this.account();a.free=this.safeFloat(i,"free"),a.used=this.safeFloat(i,"locked"),o[r]=a}}else{const e=this.safeValue(a,"assets",[]);for(let t=0;t<e.length;t++){const i=e[t],s=this.safeString(i,"asset"),r=this.safeCurrencyCode(s),a=this.account();a.used=this.safeFloat(i,"initialMargin"),a.total=this.safeFloat(i,"marginBalance"),o[r]=a}}return this.parseBalance(o)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={symbol:s.id};void 0!==t&&(r.limit=t);const a=s.spot?"publicGetDepth":"fapiPublicGetDepth",o=await this[a](this.extend(r,i)),n=this.parseOrderBook(o);return n.nonce=this.safeInteger(o,"lastUpdateId"),n}parseTicker(e,t){const i=this.safeInteger(e,"closeTime");let s=void 0;const r=this.safeString(e,"symbol");r in this.markets_by_id&&(t=this.markets_by_id[r]),void 0!==t&&(s=t.symbol);const a=this.safeFloat(e,"lastPrice");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"highPrice"),low:this.safeFloat(e,"lowPrice"),bid:this.safeFloat(e,"bidPrice"),bidVolume:this.safeFloat(e,"bidQty"),ask:this.safeFloat(e,"askPrice"),askVolume:this.safeFloat(e,"askQty"),vwap:this.safeFloat(e,"weightedAvgPrice"),open:this.safeFloat(e,"openPrice"),close:a,last:a,previousClose:this.safeFloat(e,"prevClosePrice"),change:this.safeFloat(e,"priceChange"),percentage:this.safeFloat(e,"priceChangePercent"),average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}async fetchStatus(e={}){const t=await this.wapiGetSystemStatus(e);let i=this.safeValue(t,"status");return void 0!==i&&(i=0===i?"ok":"maintenance",this.status=this.extend(this.status,{status:i,updated:this.milliseconds()})),this.status}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=i.spot?"publicGetTicker24hr":"fapiPublicGetTicker24hr",a=await this[r](this.extend(s,t));return this.parseTicker(a,i)}parseTickers(e,t){const i=[];for(let s=0;s<e.length;s++)i.push(this.parseTicker(e[s]));return this.filterByArray(i,"symbol",t)}async fetchBidsAsks(e,t={}){await this.loadMarkets();const i=this.safeString2(this.options,"fetchOpenOrders","defaultType","spot"),s=this.safeString(t,"type",i),r=this.omit(t,"type"),a="spot"===s?"publicGetTickerBookTicker":"fapiPublicGetTickerBookTicker",o=await this[a](r);return this.parseTickers(o,e)}async fetchTickers(e,t={}){await this.loadMarkets();const i=this.options.fetchTickersMethod,s=await this[i](t);return this.parseTickers(s,e)}parseOHLCV(e,t,i="1m",s,r){return[e[0],parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[5])]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={symbol:a.id,interval:this.timeframes[t]};void 0!==i&&(o.startTime=i),void 0!==s&&(o.limit=s);const n=a.spot?"publicGetKlines":"fapiPublicGetKlines",d=await this[n](this.extend(o,r));return this.parseOHLCVs(d,a,t,i,s)}parseTrade(e,t){if("isDustTrade"in e)return this.parseDustTrade(e,t);const i=this.safeInteger2(e,"T","time"),s=this.safeFloat2(e,"p","price"),r=this.safeFloat2(e,"q","qty"),a=this.safeString2(e,"a","id");let o=void 0;const n=this.safeString(e,"orderId");"m"in e?o=e.m?"sell":"buy":"isBuyerMaker"in e?o=e.isBuyerMaker?"sell":"buy":"side"in e?o=this.safeStringLower(e,"side"):"isBuyer"in e&&(o=e.isBuyer?"buy":"sell");let d=void 0;"commission"in e&&(d={cost:this.safeFloat(e,"commission"),currency:this.safeCurrencyCode(this.safeString(e,"commissionAsset"))});let c=void 0;"isMaker"in e&&(c=e.isMaker?"maker":"taker");let h=void 0;if(void 0===t){const i=this.safeString(e,"symbol");t=this.safeValue(this.markets_by_id,i)}return void 0!==t&&(h=t.symbol),{info:e,timestamp:i,datetime:this.iso8601(i),symbol:h,id:a,order:n,type:void 0,takerOrMaker:c,side:o,price:s,amount:r,cost:s*r,fee:d}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id},o=this.safeString2(this.options,"fetchTrades","defaultType","spot"),n=this.safeString(s,"type",o),d=this.omit(s,"type"),c="future"===n?"fapiPublicGetTrades":"publicGetTrades";let h=this.safeString(this.options,"fetchTradesMethod",c);"publicGetAggTrades"===h?(void 0!==t&&(a.startTime=t,a.endTime=this.sum(t,36e5)),"future"===n&&(h="fapiPublicGetAggTrades")):"publicGetHistoricalTrades"===h&&"future"===n&&(h="fapiPublicGetHistoricalTrades"),void 0!==i&&(a.limit=i);const l=await this[h](this.extend(a,d));return this.parseTrades(l,r,t,i)}parseOrderStatus(e){return this.safeString({NEW:"open",PARTIALLY_FILLED:"open",FILLED:"closed",CANCELED:"canceled",PENDING_CANCEL:"canceling",REJECTED:"rejected",EXPIRED:"canceled"},e,e)}parseOrder(e,t){const i=this.parseOrderStatus(this.safeString(e,"status"));let s=void 0;const r=this.safeString(e,"symbol");r in this.markets_by_id&&(t=this.markets_by_id[r]),void 0!==t&&(s=t.symbol);let a=void 0;"time"in e?a=this.safeInteger(e,"time"):"transactTime"in e&&(a=this.safeInteger(e,"transactTime"));let o=this.safeFloat(e,"price");const n=this.safeFloat(e,"origQty"),d=this.safeFloat(e,"executedQty");let c=void 0,h=this.safeFloat2(e,"cummulativeQuoteQty","cumQuote");void 0!==d&&(void 0!==n&&(c=n-d,this.options.parseOrderToPrecision&&(c=parseFloat(this.amountToPrecision(s,c))),c=Math.max(c,0)),void 0!==o&&void 0===h&&(h=o*d));const l=this.safeString(e,"orderId");let u=this.safeStringLower(e,"type");"market"===u?0===o&&void 0!==h&&void 0!==d&&h>0&&d>0&&(o=h/d,this.options.parseOrderToPrecision&&(o=parseFloat(this.priceToPrecision(s,o)))):"limit_maker"===u&&(u="limit");const f=this.safeStringLower(e,"side");let p=void 0,m=void 0;const y=this.safeValue(e,"fills");if(void 0!==y){if(m=this.parseTrades(y,t),m.length>0){h=m[0].cost,p={cost:m[0].fee.cost,currency:m[0].fee.currency};for(let e=1;e<m.length;e++)h=this.sum(h,m[e].cost),p.cost=this.sum(p.cost,m[e].fee.cost)}}let b=void 0;return void 0!==h&&(d&&(b=h/d,this.options.parseOrderToPrecision&&(b=parseFloat(this.priceToPrecision(s,b)))),this.options.parseOrderToPrecision&&(h=parseFloat(this.costToPrecision(s,h)))),{info:e,id:l,clientOrderId:this.safeString(e,"clientOrderId"),timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:s,type:u,side:f,price:o,amount:n,cost:h,average:b,filled:d,remaining:c,status:i,fee:p,trades:m}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e);let n=o.spot?"privatePostOrder":"fapiPrivatePostOrder";if(o.spot){this.safeValue(a,"test",!1)&&(n+="Test",a=this.omit(a,"test"))}const d=t.toUpperCase(),h=this.safeValue(o.info,"orderTypes");if(!this.inArray(d,h))throw new c(this.id+" "+t+" is not a valid order type in "+o.type+" market "+e);const l={symbol:o.id,type:d,side:i.toUpperCase()};if("MARKET"===d){const t=this.safeFloat(a,"quoteOrderQty"),i=o.precision.price;void 0!==t?(l.quoteOrderQty=this.decimalToPrecision(t,b,i,this.precisionMode),a=this.omit(a,"quoteOrderQty")):void 0!==r?l.quoteOrderQty=this.decimalToPrecision(s*r,b,i,this.precisionMode):l.quantity=this.amountToPrecision(e,s)}else l.quantity=this.amountToPrecision(e,s);o.spot&&(l.newOrderRespType=this.safeValue(this.options.newOrderRespType,t,"RESULT"));let u=!1,f=!1,p=!1;if("LIMIT"===d?(f=!0,u=!0):"STOP_LOSS"===d||"TAKE_PROFIT"===d?(p=!0,o.future&&(f=!0)):"STOP_LOSS_LIMIT"===d||"TAKE_PROFIT_LIMIT"===d?(p=!0,f=!0,u=!0):"LIMIT_MAKER"===d?f=!0:"STOP"===d&&(p=!0,f=!0),f){if(void 0===r)throw new c(this.id+" createOrder method requires a price argument for a "+t+" order");l.price=this.priceToPrecision(e,r)}if(u&&(l.timeInForce=this.options.defaultTimeInForce),p){const i=this.safeFloat(a,"stopPrice");if(void 0===i)throw new c(this.id+" createOrder method requires a stopPrice extra param for a "+t+" order");a=this.omit(a,"stopPrice"),l.stopPrice=this.priceToPrecision(e,i)}const m=await this[n](this.extend(l,a));return this.parseOrder(m,o)}async fetchOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),r=s.spot?"privateGetOrder":"fapiPrivateGetOrder",o={symbol:s.id},n=this.safeValue(i,"origClientOrderId");void 0!==n?o.origClientOrderId=n:o.orderId=parseInt(e);const d=await this[r](this.extend(o,i));return this.parseOrder(d,s)}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchOrders requires a symbol argument");await this.loadMarkets();const r=this.market(e),o={symbol:r.id};void 0!==t&&(o.startTime=t),void 0!==i&&(o.limit=i);const n=r.spot?"privateGetAllOrders":"fapiPrivateGetAllOrders",d=await this[n](this.extend(o,s));return this.parseOrders(d,r,t,i)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let a=void 0,o=void 0,n=void 0;const d={};if(void 0!==e)a=this.market(e),d.symbol=a.id,n=a.type,o=s;else{if(this.options.warnOnFetchOpenOrdersWithoutSymbol){const e=this.symbols.length,t=parseInt(e/2);throw new r(this.id+" fetchOpenOrders WARNING: fetching open orders without specifying a symbol is rate-limited to one call per "+t.toString()+" seconds. Do not call this method frequently to avoid ban. Set "+this.id+'.options["warnOnFetchOpenOrdersWithoutSymbol"] = false to suppress this warning message.')}{const e=this.safeString2(this.options,"fetchOpenOrders","defaultType","spot");n=this.safeString(s,"type",e),o=this.omit(s,"type")}}const c="spot"===n?"privateGetOpenOrders":"fapiPrivateGetOpenOrders",h=await this[c](this.extend(d,o));return this.parseOrders(h,a,t,i)}async fetchClosedOrders(e,t,i,s={}){const r=await this.fetchOrders(e,t,i,s);return this.filterBy(r,"status","closed")}async cancelOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),r=this.safeValue(i,"origClientOrderId"),o={symbol:s.id};void 0===r?o.orderId=parseInt(e):o.origClientOrderId=r;const n=s.spot?"privateDeleteOrder":"fapiPrivateDeleteOrder",d=await this[n](this.extend(o,i));return this.parseOrder(d)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const r=this.market(e),o=r.spot?"privateGetMyTrades":"fapiPrivateGetUserTrades",n={symbol:r.id};void 0!==t&&(n.startTime=t),void 0!==i&&(n.limit=i);const d=await this[o](this.extend(n,s));return this.parseTrades(d,r,t,i)}async fetchMyDustTrades(e,t,i,s={}){await this.loadMarkets();const r=await this.wapiGetUserAssetDribbletLog(s),a=this.safeValue(r,"results",{}),o=this.safeValue(a,"rows",[]),n=[];for(let c=0;c<o.length;c++){const e=o[c].logs;for(let t=0;t<e.length;t++)e[t].isDustTrade=!0,n.push(e[t])}const d=this.parseTrades(n,void 0,t,i);return this.filterBySinceLimit(d,t,i)}parseDustTrade(e,t){const i=this.safeString(e,"tranId"),s=this.parse8601(this.safeString(e,"operateTime")),r=this.safeCurrencyCode(this.safeString(e,"fromAsset")),a=this.currency("BNB").code,o=a+"/"+r;let n=!1;o in this.markets&&(n=!0);const d={currency:a,cost:this.safeFloat(e,"serviceChargeAmount")};let c=void 0,h=void 0,l=void 0,u=void 0;n?(c=o,h=this.sum(this.safeFloat(e,"transferedAmount"),d.cost),l=this.safeFloat(e,"amount"),u="buy"):(c=r+"/"+a,h=this.safeFloat(e,"amount"),l=this.sum(this.safeFloat(e,"transferedAmount"),d.cost),u="sell");let f=void 0;void 0!==l&&h&&(f=l/h);return{id:void 0,timestamp:s,datetime:this.iso8601(s),symbol:c,order:i,type:void 0,takerOrMaker:void 0,side:u,amount:h,price:f,cost:l,fee:d,info:e}}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==e&&(r=this.currency(e),a.asset=r.id),void 0!==t&&(a.startTime=t,a.endTime=this.sum(t,7776e6));const o=await this.wapiGetDepositHistory(this.extend(a,s));return this.parseTransactions(o.depositList,r,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==e&&(r=this.currency(e),a.asset=r.id),void 0!==t&&(a.startTime=t,a.endTime=this.sum(t,7776e6));const o=await this.wapiGetWithdrawHistory(this.extend(a,s));return this.parseTransactions(o.withdrawList,r,t,i)}parseTransactionStatusByType(e,t){if(void 0===t)return e;const i={deposit:{0:"pending",1:"ok"},withdrawal:{0:"pending",1:"canceled",2:"pending",3:"failed",4:"pending",5:"failed",6:"ok"}};return e in i[t]?i[t][e]:e}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"address");let r=this.safeString(e,"addressTag");void 0!==r&&r.length<1&&(r=void 0);const a=this.safeValue(e,"txId"),o=this.safeString(e,"asset"),n=this.safeCurrencyCode(o,t);let d=void 0;const c=this.safeInteger(e,"insertTime"),h=this.safeInteger(e,"applyTime");let l=this.safeString(e,"type");void 0===l&&(void 0!==c&&void 0===h?(l="deposit",d=c):void 0===c&&void 0!==h&&(l="withdrawal",d=h));const u=this.parseTransactionStatusByType(this.safeString(e,"status"),l),f=this.safeFloat(e,"amount"),p=this.safeFloat(e,"transactionFee");let m=void 0;return void 0!==p&&(m={currency:n,cost:p}),{info:e,id:i,txid:a,timestamp:d,datetime:this.iso8601(d),address:s,tag:r,type:l,amount:f,currency:n,status:u,updated:void 0,fee:m}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={asset:this.currency(e).id},s=await this.wapiGetDepositAddress(this.extend(i,t)),r=this.safeValue(s,"success");if(void 0===r||!r)throw new f(this.id+" fetchDepositAddress returned an empty response \u2013 create the deposit address in the user settings first.");const a=this.safeString(s,"address"),o=this.safeString(s,"addressTag");return this.checkAddress(a),{currency:e,address:this.checkAddress(a),tag:o,info:s}}async fetchFundingFees(e,t={}){const i=await this.wapiGetAssetDetail(t),s=this.safeValue(i,"assetDetail",{}),r=Object.keys(s),a={};for(let o=0;o<r.length;o++){const e=r[o];a[this.safeCurrencyCode(e)]=this.safeFloat(s[e],"withdrawFee")}return{withdraw:a,deposit:{},info:i}}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a=this.currency(e),o=i.slice(0,20),n={asset:a.id,address:i,amount:parseFloat(t),name:o};void 0!==s&&(n.addressTag=s);const d=await this.wapiPostWithdraw(this.extend(n,r));return{info:d,id:this.safeString(d,"id")}}parseTradingFee(e,t){const i=this.safeString(e,"symbol");let s=i;if(i in this.markets_by_id){s=this.markets_by_id[i].symbol}return{info:e,symbol:s,maker:this.safeFloat(e,"maker"),taker:this.safeFloat(e,"taker")}}async fetchTradingFee(e,t={}){await this.loadMarkets();const i={symbol:this.market(e).id},s=await this.wapiGetTradeFee(this.extend(i,t)),r=this.safeValue(s,"tradeFee",[]),a=this.safeValue(r,0,{});return this.parseTradingFee(a)}async fetchTradingFees(e={}){await this.loadMarkets();const t=await this.wapiGetTradeFee(e),i=this.safeValue(t,"tradeFee",[]),s={};for(let r=0;r<i.length;r++){const e=this.parseTradingFee(i[r]);s[e.symbol]=e}return s}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t];o+="/"+e,"wapi"===t&&(o+=".html");const n="userDataStream"===e||"listenKey"===e;if("historicalTrades"===e){if(!this.apiKey)throw new u(this.id+" historicalTrades endpoint requires `apiKey` credential");r={"X-MBX-APIKEY":this.apiKey}}else if(n){if(!this.apiKey)throw new u(this.id+" userDataStream endpoint requires `apiKey` credential");a=this.urlencode(s),r={"X-MBX-APIKEY":this.apiKey,"Content-Type":"application/x-www-form-urlencoded"}}if("private"===t||"sapi"===t||"wapi"===t&&"systemStatus"!==e||"fapiPrivate"===t){this.checkRequiredCredentials();let n=void 0;n="sapi"===t&&"asset/dust"===e?this.urlencodeWithArrayRepeat(this.extend({timestamp:this.nonce(),recvWindow:this.options.recvWindow},s)):this.urlencode(this.extend({timestamp:this.nonce(),recvWindow:this.options.recvWindow},s)),n+="&signature="+this.hmac(this.encode(n),this.encode(this.secret)),r={"X-MBX-APIKEY":this.apiKey},"GET"===i||"DELETE"===i||"wapi"===t?o+="?"+n:(a=n,r["Content-Type"]="application/x-www-form-urlencoded")}else n||Object.keys(s).length&&(o+="?"+this.urlencode(s));return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,l){if(418===e||429===e)throw new h(this.id+" "+e.toString()+" "+t+" "+o);if(e>=400){if(o.indexOf("Price * QTY is zero or less")>=0)throw new c(this.id+" order cost = amount * price is zero or less "+o);if(o.indexOf("LOT_SIZE")>=0)throw new c(this.id+" order amount should be evenly divisible by lot size "+o);if(o.indexOf("PRICE_FILTER")>=0)throw new c(this.id+" order price is invalid, i.e. exceeds allowed price precision, exceeds min price or max price limits or is invalid float value in general, use this.priceToPrecision (symbol, amount) "+o)}if(o.length>0&&"{"===o[0]){const e=this.safeValue(n,"success",!0);if(!e){const e=this.safeString(n,"msg");let t=void 0;if(void 0!==e){try{t=JSON.parse(e)}catch(u){t=void 0}void 0!==t&&(n=t)}}const t=this.safeString(n,"msg");void 0!==t&&this.throwExactlyMatchedException(this.exceptions,t,this.id+" "+t);const i=this.safeString(n,"code");if(void 0!==i){if("200"===i)return;if("-2015"===i&&this.options.hasAlreadyAuthenticatedSuccessfully)throw new h(this.id+" temporary banned: "+o);const e=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions,i,e),new r(e)}if(!e)throw new r(this.id+" "+o)}}async request(e,t="public",i="GET",s={},r,a){const o=await this.fetch2(e,t,i,s,r,a);return"private"!==t&&"wapi"!==t||(this.options.hasAlreadyAuthenticatedSuccessfully=!0),o}}},H6LP:function(e,t,i){"use strict";const s=i("/IoK"),{capitalize:r}=i("Kqm6"),{stringToBase64:a,utf16ToBase64:o,urlencodeBase64:n}=i("BtsK"),d=i("r14B"),{numberToLE:c}=i("BtsK"),h=i("3NQs").ec,{ArgumentsRequired:l}=i("ucJe"),u=i("tk5I"),f=(e,t="md5",i="hex")=>{const a={};"keccak"===t&&(t="SHA3",a.outputLength=256);const o=s[t.toUpperCase()](e,a);return"binary"===i?o:o.toString(s.enc[r(i)])},p=(e,t,i="sha256",a="hex")=>{const o=s["Hmac"+i.toUpperCase()](e,t);if(a){const e="binary"===a?"Latin1":r(a);return o.toString(s.enc[r(e)])}return o};function m(e,t,i="RS256"){const s={RS256:"pkcs1-sha256",RS512:"pkcs1-sha512"};if(!(i in s))throw new ExchangeError(i+" is not a supported rsa signing algorithm.");return new d(t,{environment:"browser",signingScheme:s[i]}).sign(e,"base64","binary")}e.exports={hash:f,hmac:p,jwt:function(e,t,i="HS256"){const s=[n(a(JSON.stringify({alg:i,typ:"JWT"}))),n(a(JSON.stringify(e)))].join("."),r=i.slice(0,2);let o=void 0;return"HS"===r?o=n(p(s,t,{HS256:"sha256",HS384:"sha384",HS512:"sha512"}[i],"base64")):"RS"===r&&(o=n(m(s,t,i))),[s,o].join(".")},totp:e=>{const t=e=>parseInt(e,16),i=(e,t)=>(t+e).slice(-t.length);return(e=>{e=e.replace(" ","");let r=Math.round((new Date).getTime()/1e3),a=i((e=>(e<15.5?"0":"")+Math.round(e).toString(16))(Math.floor(r/30)),"0000000000000000"),o=p(s.enc.Hex.parse(a),s.enc.Hex.parse((e=>{let t="",s="";for(let r=0;r<e.length;r++){let s="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".indexOf(e.charAt(r).toUpperCase());t+=i(s.toString(2),"00000")}for(let i=0;i+4<=t.length;i+=4){let e=t.substr(i,4);s+=parseInt(e,2).toString(16)}return s})(e)),"sha1","hex"),n=t(o.substring(o.length-1)),d=(t(o.substr(2*n,8))&t("7fffffff"))+"";return d=d.substr(d.length-6,6),d})(e)},rsa:m,ecdsa:function(e,t,i="p256",s,r=!1){let a=e;void 0!==s&&(a=f(e,s,"hex"));const o=new h(i);let n=o.sign(a,t,"hex",{canonical:!0}),d=new u("0");const c=new u("1").shln(248).sub(new u("1"));for(;r&&(n.r.gt(o.nh)||n.r.lte(c)||n.s.lte(c));)n=o.sign(a,t,"hex",{canonical:!0,extraEntropy:d.toArray("le",32)}),d=d.add(new u("1"));return{r:n.r.toString(16).padStart(64,"0"),s:n.s.toString(16).padStart(64,"0"),v:n.recoveryParam}}}},HB8x:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ArgumentsRequired:a,ExchangeNotAvailable:o,PermissionDenied:n,InvalidOrder:d,AuthenticationError:c,InsufficientFunds:h,OrderNotFound:l,DDoSProtection:u}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitz",name:"Bit-Z",countries:["HK"],rateLimit:2e3,version:"v2",userAgent:this.userAgents.chrome,has:{fetchTickers:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchOrders:!0,fetchOrder:!0,createMarketOrder:!1,fetchDeposits:!0,fetchWithdrawals:!0,fetchTransactions:!1},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"60min","4h":"4hour","1d":"1day","5d":"5day","1w":"1week","1M":"1mon"},hostname:"apiv2.bitz.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/35862606-4f554f14-0b5d-11e8-957d-35058c504b6f.jpg",api:{market:"https://{hostname}",trade:"https://{hostname}",assets:"https://{hostname}"},www:"https://www.bitz.com",doc:"https://apidoc.bitz.com/en/",fees:"https://www.bitz.com/fee?type=1",referral:"https://u.bitz.com/register?invite_code=1429193"},api:{market:{get:["ticker","depth","order","tickerall","kline","symbolList","currencyRate","currencyCoinRate","coinRate"]},trade:{post:["addEntrustSheet","cancelEntrustSheet","cancelAllEntrustSheet","getUserHistoryEntrustSheet","getUserNowEntrustSheet","getEntrustSheetInfo","depositOrWithdraw"]},assets:{post:["getUserAssets"]}},fees:{trading:{maker:.002,taker:.002},funding:{withdraw:{BTC:"0.5%",DKKT:"0.5%",ETH:.01,USDT:"0.5%",LTC:"0.5%",FCT:"0.5%",LSK:"0.5%",HXI:"0.8%",ZEC:"0.5%",DOGE:"0.5%",MZC:"0.5%",ETC:"0.5%",GXS:"0.5%",XPM:"0.5%",PPC:"0.5%",BLK:"0.5%",XAS:"0.5%",HSR:"0.5%",NULS:5,VOISE:350,PAY:1.5,EOS:.6,YBCT:35,OMG:.3,OTN:.4,BTX:"0.5%",QTUM:"0.5%",DASH:"0.5%",GAME:"0.5%",BCH:"0.5%",GNT:9,SSS:1500,ARK:"0.5%",PART:"0.5%",LEO:"0.5%",DGB:"0.5%",ZSC:130,VIU:350,BTG:"0.5%",ARN:10,VTC:"0.5%",BCD:"0.5%",TRX:200,HWC:"0.5%",UNIT:"0.5%",OXY:"0.5%",MCO:.35,SBTC:"0.5%",BCX:"0.5%",ETF:"0.5%",PYLNT:.4,XRB:"0.5%",ETP:"0.5%"}}},precision:{amount:8,price:8},options:{fetchOHLCVVolume:!0,fetchOHLCVWarning:!0,lastNonceTimestamp:0},commonCurrencies:{BOX:"BOX Token",LEO:"LeoCoin",XRB:"NANO",PXC:"Pixiecoin",VTC:"VoteCoin",TTC:"TimesChain"},exceptions:{"-102":r,"-103":c,"-104":o,"-105":c,"-106":o,"-109":c,"-110":u,"-111":n,"-112":o,"-100015":c,"-100044":r,"-100101":r,"-100201":r,"-100301":r,"-100401":r,"-100302":r,"-100303":r,"-200003":c,"-200005":n,"-200025":o,"-200027":d,"-200028":d,"-200029":d,"-200030":d,"-200031":h,"-200032":r,"-200033":r,"-200034":l,"-200035":l,"-200037":d,"-200038":r,"-200055":l,"-300069":c,"-300101":r,"-300102":d,"-300103":c,"-301001":o}})}async fetchMarkets(e={}){const t=await this.marketGetSymbolList(e),i=this.safeValue(t,"data"),s=Object.keys(i),r=[];for(let a=0;a<s.length;a++){const e=s[a],t=i[e],o=this.safeString(t,"id"),n=this.safeString(t,"coinFrom"),d=this.safeString(t,"coinTo");let c=n.toUpperCase(),h=d.toUpperCase();c=this.safeCurrencyCode(c),h=this.safeCurrencyCode(h);const l=c+"/"+h,u={amount:this.safeInteger(t,"numberFloat"),price:this.safeInteger(t,"priceFloat")};r.push({info:t,id:e,numericId:o,symbol:l,base:c,quote:h,baseId:n,quoteId:d,active:!0,precision:u,limits:{amount:{min:this.safeFloat(t,"minTrade"),max:this.safeFloat(t,"maxTrade")},price:{min:Math.pow(10,-u.price),max:void 0},cost:{min:void 0,max:void 0}}})}return r}async fetchBalance(e={}){await this.loadMarkets();const t=await this.assetsPostGetUserAssets(e),i=this.safeValue(t.data,"info"),s={info:t};for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"name"),a=this.safeCurrencyCode(t),o=this.account();o.used=this.safeFloat(e,"lock"),o.total=this.safeFloat(e,"num"),o.free=this.safeFloat(e,"over"),s[a]=o}return this.parseBalance(s)}parseTicker(e,t){let i=void 0;if(void 0===t){const i=this.safeString(e,"symbol");t=this.safeValue(this.markets_by_id,i)}void 0!==t&&(i=t.symbol);const s=this.safeFloat(e,"now"),r=this.safeFloat(e,"open");let a=void 0,o=void 0;return void 0!==s&&void 0!==r&&(a=s-r,o=this.sum(s,r)/2),{symbol:i,timestamp:void 0,datetime:this.iso8601(void 0),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bidPrice"),bidVolume:this.safeFloat(e,"bidQty"),ask:this.safeFloat(e,"askPrice"),askVolume:this.safeFloat(e,"askQty"),vwap:void 0,open:r,close:s,last:s,previousClose:void 0,change:a,percentage:this.safeFloat(e,"priceChange24h"),average:o,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}parseMicrotime(e){if(void 0===e)return e;const t=e.split(" "),i=parseFloat(t[0]),s=parseInt(t[1]),r=this.sum(s,i);return parseInt(1e3*r)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.marketGetTicker(this.extend(s,t)),a=this.parseTicker(r.data,i),o=this.parseMicrotime(this.safeString(r,"microtime"));return this.extend(a,{timestamp:o,datetime:this.iso8601(o)})}async fetchTickers(e,t={}){await this.loadMarkets();const i={};if(void 0!==e){const t=this.marketIds(e);i.symbols=t.join(",")}const s=await this.marketGetTickerall(this.extend(i,t)),r=this.safeValue(s,"data"),a=this.parseMicrotime(this.safeString(s,"microtime")),o={},n=Object.keys(r);for(let d=0;d<n.length;d++){const e=n[d];let t=r[e],i=void 0;e in this.markets_by_id&&(i=this.markets_by_id[e]),t=this.parseTicker(r[e],i);let s=t.symbol;if(void 0===s)if(void 0!==i)s=i.symbol;else{const[t,i]=e.split("_");s=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(i)}void 0!==s&&(o[s]=this.extend(t,{timestamp:a,datetime:this.iso8601(a)}))}return o}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)},r=await this.marketGetDepth(this.extend(s,i)),a=this.safeValue(r,"data"),o=this.parseMicrotime(this.safeString(r,"microtime"));return this.parseOrderBook(a,o)}parseTrade(e,t){const i=this.safeString(e,"id"),s=this.safeTimestamp(e,"T");let r=void 0;void 0!==t&&(r=t.symbol);const a=this.safeFloat(e,"p"),o=this.safeFloat(e,"n");let n=void 0;void 0!==a&&void 0!==o&&(n=this.priceToPrecision(r,o*a));const d=this.safeString(e,"s");return{timestamp:s,datetime:this.iso8601(s),symbol:r,id:i,order:void 0,type:"limit",side:d,takerOrMaker:void 0,price:a,amount:o,cost:n,fee:void 0,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id},o=await this.marketGetOrder(this.extend(a,s));return this.parseTrades(o.data,r,t,i)}parseOHLCV(e,t,i="1m",s,r){return[this.safeInteger(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const o=1e3*this.parseTimeframe(t),n=this.market(e),d={symbol:n.id,resolution:this.timeframes[t]};if(void 0!==s)d.size=Math.min(s,300),void 0!==i&&(d.to=this.sum(i,s*o*1e3));else if(void 0!==i)throw new r(this.id+" fetchOHLCV requires a limit argument if the since argument is specified");const c=await this.marketGetKline(this.extend(d,a)),h=this.safeValue(c.data,"bars",void 0);return void 0===h?[]:this.parseOHLCVs(h,n,t,i,s)}parseOrderStatus(e){return this.safeString({0:"open",1:"open",2:"closed",3:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id");let s=void 0;if(void 0===t){const i=this.safeString(e,"coinFrom"),r=this.safeString(e,"coinTo");if(void 0!==i&&void 0!==r){const e=i+"_"+r;if(e in this.markets_by_id)t=this.safeValue(this.markets_by_id,e);else{s=this.safeCurrencyCode(i)+"/"+this.safeCurrencyCode(r)}}}void 0!==t&&(s=t.symbol);let r=this.safeString(e,"flag");void 0!==r&&(r="sale"===r?"sell":"buy");const a=this.safeFloat(e,"price"),o=this.safeFloat(e,"number"),n=this.safeFloat(e,"numberOver"),d=this.safeFloat(e,"numberDeal");let c=this.safeInteger(e,"timestamp");void 0===c&&(c=this.safeTimestamp(e,"created"));let h=this.safeFloat(e,"orderTotalPrice");void 0!==a&&void 0!==d&&(h=d*a);const l=this.parseOrderStatus(this.safeString(e,"status"));return{id:i,clientOrderId:void 0,datetime:this.iso8601(c),timestamp:c,lastTradeTimestamp:void 0,status:l,symbol:s,type:"limit",side:r,price:a,cost:h,amount:o,filled:d,remaining:n,trades:void 0,fee:void 0,info:e}}async createOrder(e,t,i,s,a,o={}){if(await this.loadMarkets(),"limit"!==t)throw new r(this.id+" createOrder allows limit orders only");const n=this.market(e),d="buy"===i?"1":"2";if(!this.password)throw new r(this.id+' createOrder() requires you to set exchange.password = "YOUR_TRADING_PASSWORD" (a trade password is NOT THE SAME as your login password)');const c={symbol:n.id,type:d,price:this.priceToPrecision(e,a),number:this.amountToPrecision(e,s),tradePwd:this.password},h=await this.tradePostAddEntrustSheet(this.extend(c,o)),l=this.parseMicrotime(this.safeString(h,"microtime")),u=this.extend({timestamp:l},h.data);return this.parseOrder(u,n)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={entrustSheetId:e};return await this.tradePostCancelEntrustSheet(this.extend(s,i))}async cancelOrders(e,t,i={}){await this.loadMarkets();const s={ids:e.join(",")};return await this.tradePostCancelEntrustSheet(this.extend(s,i))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={entrustSheetId:e},r=await this.tradePostGetEntrustSheetInfo(this.extend(s,i));return this.parseOrder(r.data)}async fetchOrdersWithMethod(e,t,i,s,r={}){if(void 0===t)throw new a(this.id+" fetchOpenOrders requires a symbol argument");await this.loadMarkets();const o=this.market(t),n={coinFrom:o.baseId,coinTo:o.quoteId};void 0!==s&&(n.page=1,n.pageSize=s),void 0!==i&&(n.startTime=parseInt(i/1e3));const d=await this[e](this.extend(n,r)),c=this.safeValue(d.data,"data",[]);return this.parseOrders(c,void 0,i,s)}async fetchOrders(e,t,i,s={}){return await this.fetchOrdersWithMethod("tradePostGetUserHistoryEntrustSheet",e,t,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersWithMethod("tradePostGetUserNowEntrustSheet",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersWithMethod("tradePostGetUserHistoryEntrustSheet",e,t,i,s)}parseTransactionStatus(e){return this.safeString({1:"pending",2:"pending",3:"pending",4:"ok",5:"canceled"},e,e)}parseTransaction(e,t){let i=this.safeInteger(e,"updated");0===i&&(i=void 0);const s=this.safeString(e,"coin"),r=this.safeCurrencyCode(s,t),a=this.safeStringLower(e,"type"),o=this.parseTransactionStatus(this.safeString(e,"status"));return{id:this.safeString(e,"id"),txid:this.safeString(e,"txid"),timestamp:i,datetime:this.iso8601(i),address:this.safeString(e,"wallet"),tag:this.safeString(e,"memo"),type:a,amount:this.safeFloat(e,"number"),currency:r,status:o,updated:i,fee:void 0,info:e}}parseTransactionsByType(e,t,i,s,r){const a=[];for(let o=0;o<t.length;o++){const i=this.parseTransaction(this.extend({type:e},t[o]));a.push(i)}return this.filterByCurrencySinceLimit(a,i,s,r)}parseTransactionType(e){return this.safeInteger({deposit:1,withdrawal:2},e,e)}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactionsForType("deposit",e,t,i,s)}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactionsForType("withdrawal",e,t,i,s)}async fetchTransactionsForType(e,t,i,s,r={}){if(void 0===t)throw new a(this.id+" fetchTransactions() requires a currency `code` argument");await this.loadMarkets();const o={coin:this.currency(t).id,type:this.parseTransactionType(e)};void 0!==i&&(o.startTime=parseInt(i/1e3).toString()),void 0!==s&&(o.page=1,o.pageSize=s);const n=await this.tradePostDepositOrWithdraw(this.extend(o,r)),d=this.safeValue(n.data,"data",[]);return this.parseTransactionsByType(e,d,t,i,s)}nonce(){const e=this.seconds();return e>this.options.lastNonceTimestamp&&(this.options.lastNonceTimestamp=e,this.options.lastNonce=1e5),this.options.lastNonce=this.sum(this.options.lastNonce,1),this.options.lastNonce}sign(e,t="market",i="GET",s={},r,a){let o=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+"/"+this.capitalize(t)+"/"+e,n=void 0;return"market"===t?(n=this.urlencode(s),n.length&&(o+="?"+n)):(this.checkRequiredCredentials(),a=this.rawencode(this.keysort(this.extend({apiKey:this.apiKey,timeStamp:this.seconds(),nonce:this.nonce()},s))),a+="&sign="+this.hash(this.encode(a+this.secret)),r={"Content-type":"application/x-www-form-urlencoded"}),{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,c){if(void 0===n)return;const h=this.safeString(n,"status");if(void 0!==h){const e=this.id+" "+o;if("200"===h){const t=this.safeInteger(n,"data");if(void 0!==t)throw this.throwExactlyMatchedException(this.exceptions,t,e),new r(e);return}throw this.throwExactlyMatchedException(this.exceptions,h,e),new r(e)}}}},"HE+Y":function(e,t,i){"use strict";var s=i("tk5I"),r=i("3NQs").utils.assert;e.exports=function e(t,i){if(t instanceof e)return t;r(t.r&&t.s,"Signature without r or s"),this.r=new s(t.r,16),this.s=new s(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam}},HFei:function(e,t,i){(function(t){var s=i("2YIc").Ber,r=i("JxtV")._,a=i("JxtV");e.exports={privateExport:function(e,t){t=t||{};var i=e.n.toBuffer(),r=e.d.toBuffer(),o=e.p.toBuffer(),n=e.q.toBuffer(),d=e.dmp1.toBuffer(),c=e.dmq1.toBuffer(),h=e.coeff.toBuffer(),l=i.length+r.length+o.length+n.length+d.length+c.length+h.length+512,u=new s.Writer({size:l});return u.startSequence(),u.writeInt(0),u.writeBuffer(i,2),u.writeInt(e.e),u.writeBuffer(r,2),u.writeBuffer(o,2),u.writeBuffer(n,2),u.writeBuffer(d,2),u.writeBuffer(c,2),u.writeBuffer(h,2),u.endSequence(),"der"===t.type?u.buffer:"-----BEGIN RSA PRIVATE KEY-----\n"+a.linebrk(u.buffer.toString("base64"),64)+"\n-----END RSA PRIVATE KEY-----"},privateImport:function(e,i,o){var n;if("der"!==(o=o||{}).type){if(t.isBuffer(i)&&(i=i.toString("utf8")),!r.isString(i))throw Error("Unsupported key format");var d=a.trimSurroundingText(i,"-----BEGIN RSA PRIVATE KEY-----","-----END RSA PRIVATE KEY-----").replace(/\s+|\n\r|\n|\r$/gm,"");n=t.from(d,"base64")}else{if(!t.isBuffer(i))throw Error("Unsupported key format");n=i}var c=new s.Reader(n);c.readSequence(),c.readString(2,!0),e.setPrivate(c.readString(2,!0),c.readString(2,!0),c.readString(2,!0),c.readString(2,!0),c.readString(2,!0),c.readString(2,!0),c.readString(2,!0),c.readString(2,!0))},publicExport:function(e,t){t=t||{};var i=e.n.toBuffer(),r=i.length+512,o=new s.Writer({size:r});return o.startSequence(),o.writeBuffer(i,2),o.writeInt(e.e),o.endSequence(),"der"===t.type?o.buffer:"-----BEGIN RSA PUBLIC KEY-----\n"+a.linebrk(o.buffer.toString("base64"),64)+"\n-----END RSA PUBLIC KEY-----"},publicImport:function(e,i,o){var n;if("der"!==(o=o||{}).type){if(t.isBuffer(i)&&(i=i.toString("utf8")),r.isString(i)){var d=a.trimSurroundingText(i,"-----BEGIN RSA PUBLIC KEY-----","-----END RSA PUBLIC KEY-----").replace(/\s+|\n\r|\n|\r$/gm,"");n=t.from(d,"base64")}}else{if(!t.isBuffer(i))throw Error("Unsupported key format");n=i}var c=new s.Reader(n);c.readSequence(),e.setPublic(c.readString(2,!0),c.readString(2,!0))},autoImport:function(t,i){return/^[\S\s]*-----BEGIN RSA PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END RSA PRIVATE KEY-----[\S\s]*$/g.test(i)?(e.exports.privateImport(t,i),!0):!!/^[\S\s]*-----BEGIN RSA PUBLIC KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END RSA PUBLIC KEY-----[\S\s]*$/g.test(i)&&(e.exports.publicImport(t,i),!0)}}}).call(this,i("zkTx").Buffer)},HNHa:function(e,t,i){"use strict";const s=i("OjXq");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"southxchange",name:"SouthXchange",countries:["AR"],rateLimit:1e3,has:{CORS:!0,createDepositAddress:!0,fetchOpenOrders:!0,fetchTickers:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27838912-4f94ec8a-60f6-11e7-9e5d-bbf9bd50a559.jpg",api:"https://www.southxchange.com/api",www:"https://www.southxchange.com",doc:"https://www.southxchange.com/Home/Api"},api:{public:{get:["markets","price/{symbol}","prices","book/{symbol}","trades/{symbol}"]},private:{post:["cancelMarketOrders","cancelOrder","getOrder","generatenewaddress","listOrders","listBalances","listTransactions","placeOrder","withdraw"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.003}},commonCurrencies:{SMT:"SmartNode",MTC:"Marinecoin",BHD:"Bithold"}})}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=[];for(let s=0;s<t.length;s++){const e=t[s],r=e[0],a=e[1],o=this.safeCurrencyCode(r),n=this.safeCurrencyCode(a),d=o+"/"+n,c=r+"/"+a;i.push({id:c,symbol:d,base:o,quote:n,baseId:r,quoteId:a,active:void 0,info:e})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostListBalances(e),i={info:t};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"Currency"),a=this.safeCurrencyCode(r),o=this.safeFloat(e,"Deposited"),n=this.safeFloat(e,"Unconfirmed"),d=this.account();d.free=this.safeFloat(e,"Available"),d.total=this.sum(o,n),i[a]=d}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)},r=await this.publicGetBookSymbol(this.extend(s,i));return this.parseOrderBook(r,void 0,"BuyOrders","SellOrders","Price","Amount")}parseTicker(e,t){const i=this.milliseconds();let s=void 0;t&&(s=t.symbol);const r=this.safeFloat(e,"Last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:this.safeFloat(e,"Bid"),bidVolume:void 0,ask:this.safeFloat(e,"Ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:this.safeFloat(e,"Variation24Hr"),average:void 0,baseVolume:this.safeFloat(e,"Volume24Hr"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetPrices(t),s=this.indexBy(i,"Market"),r=Object.keys(s),a={};for(let o=0;o<r.length;o++){const e=r[o];let t=e,i=void 0;e in this.markets_by_id&&(i=this.markets_by_id[e],t=i.symbol);const n=s[e];a[t]=this.parseTicker(n,i)}return a}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetPriceSymbol(this.extend(s,t));return this.parseTicker(r,i)}parseTrade(e,t){const i=this.safeTimestamp(e,"At"),s=this.safeFloat(e,"Price"),r=this.safeFloat(e,"Amount");let a=void 0;void 0!==s&&void 0!==r&&(a=s*r);const o=this.safeString(e,"Type");let n=void 0;return void 0!==t&&(n=t.symbol),{info:e,timestamp:i,datetime:this.iso8601(i),symbol:n,id:void 0,order:void 0,type:void 0,side:o,price:s,takerOrMaker:void 0,amount:r,cost:a,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id},o=await this.publicGetTradesSymbol(this.extend(a,s));return this.parseTrades(o,r,t,i)}parseOrder(e,t){const i=this.safeString(e,"ListingCurrency"),s=this.safeString(e,"ReferenceCurrency"),r=this.safeCurrencyCode(i)+"/"+this.safeCurrencyCode(s),a=this.safeFloat(e,"LimitPrice"),o=this.safeFloat(e,"OriginalAmount"),n=this.safeFloat(e,"Amount");let d=void 0,c=void 0;void 0!==o&&(c=a*o,void 0!==n&&(d=o-n));const h=this.safeStringLower(e,"Type");return{info:e,id:this.safeString(e,"Code"),clientOrderId:void 0,timestamp:void 0,datetime:this.iso8601(void 0),lastTradeTimestamp:void 0,symbol:r,type:"limit",side:h,price:a,amount:o,cost:c,filled:d,remaining:n,status:"open",fee:void 0}}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;void 0!==e&&(r=this.market(e));const a=await this.privatePostListOrders(s);return this.parseOrders(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),n={listingCurrency:o.base,referenceCurrency:o.quote,type:i,amount:s};"limit"===t&&(n.limitPrice=r);const d=await this.privatePostPlaceOrder(this.extend(n,a));return{info:d,id:d.toString()}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={orderCode:e};return await this.privatePostCancelOrder(this.extend(s,i))}async createDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privatePostGeneratenewaddress(this.extend(i,t)),r=s.split("|"),a=r.length,o=r[0];this.checkAddress(o);let n=void 0;return a>1&&(n=r[1]),{currency:e,address:o,tag:n,info:s}}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a={currency:this.currency(e).id,address:i,amount:t};return void 0!==s&&(a.address=i+"|"+s),{info:await this.privatePostWithdraw(this.extend(a,r)),id:void 0}}sign(e,t="public",i="GET",s={},r,a){const o=this.urls.api+"/"+this.implodeParams(e,s);let n=this.omit(s,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();const e=this.nonce();n=this.extend({key:this.apiKey,nonce:e},n),a=this.json(n),r={"Content-Type":"application/json",Hash:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}}return{url:o,method:i,body:a,headers:r}}}},HntW:function(e,t,i){"use strict";const s=i("YBGL");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitkk",name:"bitkk",comment:"a Chinese ZB clone",urls:{api:{public:"http://api.bitkk.com/data",private:"https://trade.bitkk.com/api"},www:"https://www.bitkk.com",doc:"https://www.bitkk.com/i/developer",fees:"https://www.bitkk.com/i/rate"}})}}},HrKg:function(e,t){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},Hy3L:function(e,t,i){"use strict";var s=String.prototype.replace,r=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return s.call(e,r,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},IBUX:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var s=i("ZERR"),r=i("e0KM"),a=i("4kqU"),o=i("8kJ5"),n=i("BbEw"),d=i("TJ1y");t.zeroAddress=function(){var e=n.zeros(20);return n.bufferToHex(e)},t.isValidAddress=function(e){return/^0x[0-9a-fA-F]{40}$/.test(e)},t.isZeroAddress=function(e){return t.zeroAddress()===n.addHexPrefix(e)},t.toChecksumAddress=function(e,t){e=r.stripHexPrefix(e).toLowerCase();for(var i=void 0!==t?t.toString()+"0x":"",s=d.keccak(i+e).toString("hex"),a="0x",o=0;o<e.length;o++)parseInt(s[o],16)>=8?a+=e[o].toUpperCase():a+=e[o];return a},t.isValidChecksumAddress=function(e,i){return t.isValidAddress(e)&&t.toChecksumAddress(e,i)===e},t.generateAddress=function(t,i){t=n.toBuffer(t);var s=new o(i);return s.isZero()?d.rlphash([t,null]).slice(-20):d.rlphash([t,e.from(s.toArray())]).slice(-20)},t.generateAddress2=function(t,i,r){var a=n.toBuffer(t),o=n.toBuffer(i),c=n.toBuffer(r);return s(20===a.length),s(32===o.length),d.keccak256(e.concat([e.from("ff","hex"),a,o,d.keccak256(c)])).slice(-20)},t.isPrecompiled=function(e){var t=n.unpad(e);return 1===t.length&&t[0]>=1&&t[0]<=8},t.isValidPrivate=function(e){return a.privateKeyVerify(e)},t.isValidPublic=function(t,i){return void 0===i&&(i=!1),64===t.length?a.publicKeyVerify(e.concat([e.from([4]),t])):!!i&&a.publicKeyVerify(t)},t.pubToAddress=function(e,t){return void 0===t&&(t=!1),e=n.toBuffer(e),t&&64!==e.length&&(e=a.publicKeyConvert(e,!1).slice(1)),s(64===e.length),d.keccak(e).slice(-20)},t.publicToAddress=t.pubToAddress,t.privateToAddress=function(e){return t.publicToAddress(t.privateToPublic(e))},t.privateToPublic=function(e){return e=n.toBuffer(e),a.publicKeyCreate(e,!1).slice(1)},t.importPublic=function(e){return 64!==(e=n.toBuffer(e)).length&&(e=a.publicKeyConvert(e,!1).slice(1)),e}}).call(this,i("zkTx").Buffer)},IjNm:function(e,t,i){"use strict";var s=i("tk5I"),r=i("02Wl"),a=i("3NQs"),o=a.utils.assert,n=i("gVbT"),d=i("HE+Y");function c(e){if(!(this instanceof c))return new c(e);"string"===typeof e&&(o(a.curves.hasOwnProperty(e),"Unknown curve "+e),e=a.curves[e]),e instanceof a.curves.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=c,c.prototype.keyPair=function(e){return new n(this,e)},c.prototype.keyFromPrivate=function(e,t){return n.fromPrivate(this,e,t)},c.prototype.keyFromPublic=function(e,t){return n.fromPublic(this,e,t)},c.prototype.genKeyPair=function(e){e||(e={});for(var t=new r({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||null,entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),a=this.n.sub(new s(2));;){var o=new s(t.generate(i));if(!(o.cmp(a)>0))return o.iaddn(1),this.keyFromPrivate(o)}},c.prototype._truncateToN=function(e,t){var i=8*e.byteLength()-this.n.bitLength();return i>0&&(e=e.ushrn(i)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},c.prototype.sign=function(e,t,i,a){"object"===typeof i&&(a=i,i=null),a||(a={}),t=this.keyFromPrivate(t,i),e=this._truncateToN(new s(e,16));for(var o=this.n.byteLength(),n=t.getPrivate().toArray("be",o),c=e.toArray("be",o),h=new r({hash:this.hash,entropy:a.extraEntropy?n.concat(a.extraEntropy):n,nonce:c,pers:a.pers,persEnc:a.persEnc||"utf8"}),l=this.n.sub(new s(1)),u=0;;u++){var f=a.k?a.k(u):new s(h.generate(this.n.byteLength()));if(!((f=this._truncateToN(f,!0)).cmpn(1)<=0||f.cmp(l)>=0)){var p=this.g.mul(f);if(!p.isInfinity()){var m=p.getX(),y=m.umod(this.n);if(0!==y.cmpn(0)){var b=f.invm(this.n).mul(y.mul(t.getPrivate()).iadd(e));if(0!==(b=b.umod(this.n)).cmpn(0)){var v=(p.getY().isOdd()?1:0)|(0!==m.cmp(y)?2:0);return a.canonical&&b.cmp(this.nh)>0&&(b=this.n.sub(b),v^=1),new d({r:y,s:b,recoveryParam:v})}}}}}},c.prototype.verify=function(e,t,i,r){e=this._truncateToN(new s(e,16)),i=this.keyFromPublic(i,r);var a=(t=new d(t,"hex")).r,o=t.s;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var n,c=o.invm(this.n),h=c.mul(e).umod(this.n),l=c.mul(a).umod(this.n);return this.curve._maxwellTrick?!(n=this.g.jmulAdd(h,i.getPublic(),l)).isInfinity()&&n.eqXToP(a):!(n=this.g.mulAdd(h,i.getPublic(),l)).isInfinity()&&0===n.getX().umod(this.n).cmp(a)},c.prototype.recoverPubKey=function(e,t,i,r){o((3&i)===i,"The recovery param is more than two bits"),t=new d(t,r);var a=this.n,n=new s(e),c=t.r,h=t.s,l=1&i,u=i>>1;if(c.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");c=u?this.curve.pointFromX(c.add(this.curve.n),l):this.curve.pointFromX(c,l);var f=t.r.invm(a),p=a.sub(n).mul(f).umod(a),m=h.mul(f).umod(a);return this.g.mulAdd(p,c,m)},c.prototype.getKeyRecoveryParam=function(e,t,i,s){if(null!==(t=new d(t,s)).recoveryParam)return t.recoveryParam;for(var r=0;r<4;r++){var a;try{a=this.recoverPubKey(e,t,r)}catch(e){continue}if(a.eq(i))return r}throw new Error("Unable to find valid recovery factor")}},JMNx:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ArgumentsRequired:a,InvalidNonce:o,OrderNotFound:n,InvalidOrder:d,InsufficientFunds:c,AuthenticationError:h,DDoSProtection:l,NotSupported:u}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"liquid",name:"Liquid",countries:["JP","CN","TW"],version:"2",rateLimit:1e3,has:{CORS:!1,fetchCurrencies:!0,fetchTickers:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/45798859-1a872600-bcb4-11e8-8746-69291ce87b04.jpg",api:"https://api.liquid.com",www:"https://www.liquid.com",doc:["https://developers.liquid.com"],fees:"https://help.liquid.com/getting-started-with-liquid/the-platform/fee-structure",referral:"https://www.liquid.com?affiliate=SbzC62lt30976"},api:{public:{get:["currencies","products","products/{id}","products/{id}/price_levels","executions","ir_ladders/{currency}","fees"]},private:{get:["accounts/balance","accounts/main_asset","accounts/{id}","accounts/{currency}/reserved_balance_details","crypto_accounts","crypto_withdrawals","executions/me","fiat_accounts","fund_infos","loan_bids","loans","orders","orders/{id}","orders/{id}/trades","trades","trades/{id}/loans","trading_accounts","trading_accounts/{id}","transactions","withdrawals"],post:["crypto_withdrawals","fund_infos","fiat_accounts","loan_bids","orders","withdrawals"],put:["crypto_withdrawal/{id}/cancel","loan_bids/{id}/close","loans/{id}","orders/{id}","orders/{id}/cancel","trades/{id}","trades/{id}/adjust_margin","trades/{id}/close","trades/close_all","trading_accounts/{id}","withdrawals/{id}/cancel"]}},exceptions:{"API rate limit exceeded. Please retry after 300s":l,"API Authentication failed":h,"Nonce is too small":o,"Order not found":n,"Can not update partially filled order":d,"Can not update non-live order":n,not_enough_free_balance:c,must_be_positive:d,less_than_order_size:d},commonCurrencies:{WIN:"WCOIN",HOT:"HOT Token"},options:{cancelOrderException:!0}})}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i={};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"currency"),a=this.safeCurrencyCode(r),o=e.depositable&&e.withdrawable,n=this.safeInteger(e,"display_precision"),d=this.safeInteger(e,"quoting_precision"),c=Math.max(n,d);i[a]={id:r,code:a,info:e,name:a,active:o,fee:this.safeFloat(e,"withdrawal_fee"),precision:c,limits:{amount:{min:Math.pow(10,-n),max:Math.pow(10,n)},price:{min:Math.pow(10,-d),max:Math.pow(10,d)},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(e,"minimum_withdrawal"),max:void 0}}}}return i}async fetchMarkets(e={}){const t=await this.publicGetProducts(),i=await this.fetchCurrencies(),s=this.indexBy(i,"code"),r=[];for(let a=0;a<t.length;a++){const e=t[a],i=e.id.toString(),o=e.base_currency,n=e.quoted_currency,d=this.safeCurrencyCode(o),c=this.safeCurrencyCode(n),h=d+"/"+c,l=this.safeFloat(e,"maker_fee"),u=this.safeFloat(e,"taker_fee"),f=!e.disabled,p=this.safeValue(s,d),m=this.safeValue(s,c),y={amount:8,price:8};let b=void 0;void 0!==p&&(b=this.safeFloat(p.info,"minimum_order_quantity"));let v=void 0;void 0!==m&&(y.price=this.safeInteger(m.info,"quoting_precision"),v=Math.pow(10,-y.price));let g=void 0;void 0!==v&&void 0!==b&&(g=v*b);const w={amount:{min:b,max:void 0},price:{min:v,max:void 0},cost:{min:g,max:void 0}};r.push({id:i,symbol:h,base:d,quote:c,baseId:o,quoteId:n,maker:l,taker:u,limits:w,precision:y,active:f,info:e})}return r}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccountsBalance(e),i={info:t};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"currency"),a=this.safeCurrencyCode(r),o=this.account();o.total=this.safeFloat(e,"balance"),i[a]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={id:this.marketId(e)},r=await this.publicGetProductsIdPriceLevels(this.extend(s,i));return this.parseOrderBook(r,void 0,"buy_price_levels","sell_price_levels")}parseTicker(e,t){const i=this.milliseconds();let s=void 0;if("last_traded_price"in e&&e.last_traded_price){e.last_traded_price.length>0&&(s=this.safeFloat(e,"last_traded_price"))}let r=void 0;if(void 0===t){const i=this.safeString(e,"id");if(i in this.markets_by_id)t=this.markets_by_id[i];else{const i=this.safeString(e,"base_currency"),s=this.safeString(e,"quoted_currency");r in this.markets?t=this.markets[r]:r=this.safeCurrencyCode(i)+"/"+this.safeCurrencyCode(s)}}void 0!==t&&(r=t.symbol);let a=void 0,o=void 0,n=void 0;const d=this.safeFloat(e,"last_price_24h");return void 0!==d&&void 0!==s&&(a=s-d,n=this.sum(s,d)/2,d>0&&(o=a/d*100)),{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high_market_ask"),low:this.safeFloat(e,"low_market_bid"),bid:this.safeFloat(e,"market_bid"),bidVolume:void 0,ask:this.safeFloat(e,"market_ask"),askVolume:void 0,vwap:void 0,open:d,close:s,last:s,previousClose:void 0,change:a,percentage:o,average:n,baseVolume:this.safeFloat(e,"volume_24h"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetProducts(t),s={};for(let r=0;r<i.length;r++){const e=this.parseTicker(i[r]);s[e.symbol]=e}return s}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={id:i.id},r=await this.publicGetProductsId(this.extend(s,t));return this.parseTicker(r,i)}parseTrade(e,t){const i=this.safeTimestamp(e,"created_at"),s=this.safeString(e,"order_id"),r=this.safeString(e,"taker_side"),a=this.safeString(e,"my_side"),o=void 0!==a?a:r;let n=void 0;void 0!==a&&(n=r===a?"taker":"maker");let d=void 0;const c=this.safeFloat(e,"price"),h=this.safeFloat(e,"quantity");return void 0!==c&&void 0!==h&&(d=c*h),{info:e,id:this.safeString(e,"id"),order:s,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:o,takerOrMaker:n,price:c,amount:h,cost:d,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={product_id:r.id};void 0!==i&&(a.limit=i),void 0!==t&&(a.timestamp=parseInt(t/1e3));const o=await this.publicGetExecutions(this.extend(a,s)),n=void 0!==t?o:o.models;return this.parseTrades(n,r,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={product_id:r.id,with_details:!0};void 0!==i&&(a.limit=i);const o=await this.privateGetExecutionsMe(this.extend(a,s));return this.parseTrades(o.models,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o={order_type:t,product_id:this.marketId(e),side:i,quantity:this.amountToPrecision(e,s)};"limit"===t&&(o.price=this.priceToPrecision(e,r));const n=await this.privatePostOrders(this.extend(o,a));return this.parseOrder(n)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privatePutOrdersIdCancel(this.extend(s,i)),a=this.parseOrder(r);if("closed"===a.status&&this.options.cancelOrderException)throw new n(this.id+" order closed already: "+this.json(r));return a}async editOrder(e,t,i,s,r,o,n={}){if(await this.loadMarkets(),void 0===o)throw new a(this.id+" editOrder requires the price argument");const d={order:{quantity:this.amountToPrecision(t,r),price:this.priceToPrecision(t,o)},id:e},c=await this.privatePutOrdersId(this.extend(d,n));return this.parseOrder(c)}parseOrderStatus(e){return this.safeString({live:"open",filled:"closed",cancelled:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeTimestamp(e,"created_at"),r=this.safeString(e,"product_id");t=this.safeValue(this.markets_by_id,r);const a=this.parseOrderStatus(this.safeString(e,"status")),o=this.safeFloat(e,"quantity");let n=this.safeFloat(e,"filled_quantity");const d=this.safeFloat(e,"price");let c=void 0,h=void 0;void 0!==t&&(c=t.symbol,h=t.quote);const l=this.safeString(e,"order_type");let u=0,f=0,p=this.safeFloat(e,"average_price");const m=this.parseTrades(this.safeValue(e,"executions",[]),t,void 0,void 0,{order:i,type:l}),y=m.length;for(let k=0;k<y;k++){const e=m[k];e.order=i,e.type=l,f=this.sum(f,e.amount),u=this.sum(u,e.cost)}let b=void 0,v=void 0;y>0&&(v=m[y-1].timestamp,!p&&f>0&&(p=u/f),void 0===b&&(b=u),void 0===n&&(n=f));let g=void 0;void 0!==o&&void 0!==n&&(g=o-n);const w=this.safeString(e,"side");return{id:i,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:v,type:l,status:a,symbol:c,side:w,price:d,amount:o,filled:n,cost:b,remaining:g,average:p,trades:m,fee:{currency:h,cost:this.safeFloat(e,"order_fee")},info:e}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privateGetOrdersId(this.extend(s,i));return this.parseOrder(r)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={with_details:1};void 0!==e&&(r=this.market(e),a.product_id=r.id),void 0!==i&&(a.limit=i);const o=await this.privateGetOrders(this.extend(a,s)),n=this.safeValue(o,"models",[]);return this.parseOrders(n,r,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"live"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"filled"},s))}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a=this.currency(e),o={currency:a.id,address:i,amount:this.currencyToPrecision(e,t)};if(void 0!==s)if("XRP"===e)o.payment_id=s;else{if("XLM"!==e)throw new u(this.id+" withdraw() only supports a tag along the address for XRP or XLM");o.memo_type="text",o.memo_value=s}const n=await this.privatePostCryptoWithdrawals(this.extend(o,r));return this.parseTransaction(n,a)}parseTransactionStatus(e){return this.safeString({pending:"pending",cancelled:"canceled",approved:"ok"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"address"),r=this.safeString2(e,"payment_id","memo_value"),a=this.safeString(e,"asset"),o=this.safeCurrencyCode(a,t),n=this.safeTimestamp(e,"created_at"),d=this.safeTimestamp(e,"updated_at"),c=this.parseTransactionStatus(this.safeString(e,"state")),h=this.safeFloat(e,"amount");return{info:e,id:i,txid:void 0,timestamp:n,datetime:this.iso8601(n),address:s,tag:r,type:"withdrawal",amount:h,currency:o,status:c,updated:d,fee:void 0}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if(r={"X-Quoine-API-Version":this.version,"Content-Type":"application/json"},"private"===t){this.checkRequiredCredentials(),"GET"===i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):Object.keys(n).length&&(a=this.json(n));const e=this.nonce(),t={path:o,nonce:e,token_id:this.apiKey,iat:Math.floor(e/1e3)};r["X-Quoine-Auth"]=this.jwt(t,this.encode(this.secret))}else Object.keys(n).length&&(o+="?"+this.urlencode(n));return o=this.urls.api+o,{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,c){if(e>=200&&e<300)return;if(401===e)return void this.throwExactlyMatchedException(this.exceptions,o,o);if(429===e)throw new l(this.id+" "+o);if(void 0===n)return;const h=this.id+" "+o,u=this.safeString(n,"message"),f=this.safeValue(n,"errors");if(void 0!==u)this.throwExactlyMatchedException(this.exceptions,u,h);else{if(void 0===f)throw new r(h);{const e=Object.keys(f);for(let t=0;t<e.length;t++){const i=f[e[t]];for(let e=0;e<i.length;e++){const t=i[e];this.throwExactlyMatchedException(this.exceptions,t,h)}}}}}}},Jix9:function(e,t,i){"use strict";const s=i("sLEj");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bequant",name:"Bequant",countries:["MT"],urls:{logo:"https://user-images.githubusercontent.com/1294454/55248342-a75dfe00-525a-11e9-8aa2-05e9dca943c6.jpg",api:{public:"https://api.bequant.io",private:"https://api.bequant.io"},www:"https://bequant.io",doc:["https://api.bequant.io/"],fees:["https://bequant.io/fees-and-limits"],referral:"https://bequant.io"}})}}},JxtV:function(e,t){e.exports.linebrk=function(e,t){for(var i="",s=0;s+t<e.length;)i+=e.substring(s,s+t)+"\n",s+=t;return i+e.substring(s,e.length)},e.exports.get32IntFromBuffer=function(e,t){t=t||0;var i;if((i=e.length-t)>0){if(i>=4)return e.readUInt32BE(t);for(var s=0,r=t+i,a=0;r>t;r--,a+=2)s+=e[r-1]*Math.pow(16,a);return s}return NaN},e.exports._={isObject:function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)},isString:function(e){return"string"==typeof e||e instanceof String},isNumber:function(e){return"number"==typeof e||!isNaN(parseFloat(e))&&isFinite(e)},omit:function(e,t){var i={};for(var s in e)e.hasOwnProperty(s)&&s!==t&&(i[s]=e[s]);return i}},e.exports.trimSurroundingText=function(e,t,i){var s=0,r=e.length,a=e.indexOf(t);a>=0&&(s=a+t.length);var o=e.indexOf(i,a);return o>=0&&(r=o),e.substring(s,r)}},Kqm6:function(e,t,i){"use strict";const s=e=>e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,s);e.exports={uuid:s,unCamelCase:e=>e.match(/^[A-Z0-9_]+$/)?e:e.replace(/[a-z0-9][A-Z]/g,e=>e[0]+"_"+e[1]).replace(/[A-Z0-9][A-Z0-9][a-z]/g,e=>e[0]+"_"+e[1]+e[2]).toLowerCase(),capitalize:e=>e.length?e.charAt(0).toUpperCase()+e.slice(1):e,strip:e=>e.replace(/^\s+|\s+$/g,"")}},Kv9R:function(e,t,i){"use strict";var s=i("tk5I"),r=i("3NQs").utils,a=r.getNAF,o=r.getJSF,n=r.assert;function d(e,t){this.type=e,this.p=new s(t.p,16),this.red=t.prime?s.red(t.prime):s.mont(this.p),this.zero=new s(0).toRed(this.red),this.one=new s(1).toRed(this.red),this.two=new s(2).toRed(this.red),this.n=t.n&&new s(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4);var i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=d,d.prototype.point=function(){throw new Error("Not implemented")},d.prototype.validate=function(){throw new Error("Not implemented")},d.prototype._fixedNafMul=function(e,t){n(e.precomputed);var i=e._getDoubles(),s=a(t,1),r=(1<<i.step+1)-(i.step%2===0?2:1);r/=3;for(var o=[],d=0;d<s.length;d+=i.step){var c=0;for(t=d+i.step-1;t>=d;t--)c=(c<<1)+s[t];o.push(c)}for(var h=this.jpoint(null,null,null),l=this.jpoint(null,null,null),u=r;u>0;u--){for(d=0;d<o.length;d++){(c=o[d])===u?l=l.mixedAdd(i.points[d]):c===-u&&(l=l.mixedAdd(i.points[d].neg()))}h=h.add(l)}return h.toP()},d.prototype._wnafMul=function(e,t){var i=4,s=e._getNAFPoints(i);i=s.wnd;for(var r=s.points,o=a(t,i),d=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(t=0;c>=0&&0===o[c];c--)t++;if(c>=0&&t++,d=d.dblp(t),c<0)break;var h=o[c];n(0!==h),d="affine"===e.type?h>0?d.mixedAdd(r[h-1>>1]):d.mixedAdd(r[-h-1>>1].neg()):h>0?d.add(r[h-1>>1]):d.add(r[-h-1>>1].neg())}return"affine"===e.type?d.toP():d},d.prototype._wnafMulAdd=function(e,t,i,s,r){for(var n=this._wnafT1,d=this._wnafT2,c=this._wnafT3,h=0,l=0;l<s;l++){var u=(x=t[l])._getNAFPoints(e);n[l]=u.wnd,d[l]=u.points}for(l=s-1;l>=1;l-=2){var f=l-1,p=l;if(1===n[f]&&1===n[p]){var m=[t[f],null,null,t[p]];0===t[f].y.cmp(t[p].y)?(m[1]=t[f].add(t[p]),m[2]=t[f].toJ().mixedAdd(t[p].neg())):0===t[f].y.cmp(t[p].y.redNeg())?(m[1]=t[f].toJ().mixedAdd(t[p]),m[2]=t[f].add(t[p].neg())):(m[1]=t[f].toJ().mixedAdd(t[p]),m[2]=t[f].toJ().mixedAdd(t[p].neg()));var y=[-3,-1,-5,-7,0,7,5,1,3],b=o(i[f],i[p]);h=Math.max(b[0].length,h),c[f]=new Array(h),c[p]=new Array(h);for(var v=0;v<h;v++){var g=0|b[0][v],w=0|b[1][v];c[f][v]=y[3*(g+1)+(w+1)],c[p][v]=0,d[f]=m}}else c[f]=a(i[f],n[f]),c[p]=a(i[p],n[p]),h=Math.max(c[f].length,h),h=Math.max(c[p].length,h)}var k=this.jpoint(null,null,null),_=this._wnafT4;for(l=h;l>=0;l--){for(var T=0;l>=0;){var O=!0;for(v=0;v<s;v++)_[v]=0|c[v][l],0!==_[v]&&(O=!1);if(!O)break;T++,l--}if(l>=0&&T++,k=k.dblp(T),l<0)break;for(v=0;v<s;v++){var x,S=_[v];0!==S&&(S>0?x=d[v][S-1>>1]:S<0&&(x=d[v][-S-1>>1].neg()),k="affine"===x.type?k.mixedAdd(x):k.add(x))}}for(l=0;l<s;l++)d[l]=null;return r?k:k.toP()},d.BasePoint=c,c.prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},d.prototype.decodePoint=function(e,t){e=r.toArray(e,t);var i=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1===2*i)return 6===e[0]?n(e[e.length-1]%2===0):7===e[0]&&n(e[e.length-1]%2===1),this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));if((2===e[0]||3===e[0])&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),3===e[0]);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(e){return this.encode(e,!0)},c.prototype._encode=function(e){var t=this.curve.p.byteLength(),i=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",t))},c.prototype.encode=function(e,t){return r.encode(this._encode(t),e)},c.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},c.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},c.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],s=this,r=0;r<t;r+=e){for(var a=0;a<e;a++)s=s.dbl();i.push(s)}return{step:e,points:i}},c.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],i=(1<<e)-1,s=1===i?null:this.dbl(),r=1;r<i;r++)t[r]=t[r-1].add(s);return{wnd:e,points:t}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(e){for(var t=this,i=0;i<e;i++)t=t.dbl();return t}},"LE+o":function(e,t,i){"use strict";var s=t;s.base=i("Kv9R"),s.short=i("e8CT"),s.mont=i("dTKc"),s.edwards=i("qB9Q")},LOya:function(e,t,i){"use strict";function s(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0});var r=i("4kqU");t.secp256k1=r;var a=i("e0KM"),o=i("8kJ5");t.BN=o;var n=i("vb3U");t.rlp=n,Object.assign(t,a),s(i("1zYm")),s(i("IBUX")),s(i("TJ1y")),s(i("AvHZ")),s(i("BbEw")),s(i("8TUC"))},LP85:function(e,t,i){"use strict";const s=Date.now,r=s,a=setTimeout,o=(e,t,i=a,r=s()+t)=>{let n=()=>{},d=!0;const c=i(()=>{d=!0;const t=r-s();t>0?n=o(e,t,i,r):e()},t);return function(){d&&(d=!1,clearTimeout(c)),n()}};class n extends Error{constructor(){super("timed out"),this.constructor=n,this.__proto__=n.prototype,this.message="timed out"}}const d=e=>{if("string"===typeof e&&e&&!e.match(/^[0-9]+$/)&&!(e.indexOf("-")<0||e.indexOf(":")<0))try{const t=Date.parse(e.indexOf("+")>=0||"Z"===e.slice(-1)?e:(e+"Z").replace(/\s(\d\d):/,"T$1:"));if(Number.isNaN(t))return;return t}catch(t){return}};e.exports={now:s,microseconds:()=>1e3*s(),milliseconds:r,seconds:()=>Math.floor(s()/1e3),iso8601:e=>{let t=void 0;if(t="number"===typeof e?Math.floor(e):parseInt(e,10),!(Number.isNaN(t)||t<0))try{return new Date(t).toISOString()}catch(i){return}},parse8601:d,parseDate:e=>{if("string"===typeof e&&e){if(e.indexOf("GMT")>=0)try{return Date.parse(e)}catch(t){return}return d(e)}},mdy:(e,t="-")=>{t=t||"";const i=new Date(e),s=i.getUTCFullYear().toString();let r=i.getUTCMonth()+1,a=i.getUTCDate();return r=r<10?"0"+r:r.toString(),a=a<10?"0"+a:a.toString(),r+t+a+t+s},ymd:(e,t="-")=>{t=t||"";const i=new Date(e),s=i.getUTCFullYear().toString();let r=i.getUTCMonth()+1,a=i.getUTCDate();return r=r<10?"0"+r:r.toString(),a=a<10?"0"+a:a.toString(),s+t+r+t+a},ymdhms:(e,t=" ")=>{const i=new Date(e),s=i.getUTCFullYear();let r=i.getUTCMonth()+1,a=i.getUTCDate(),o=i.getUTCHours(),n=i.getUTCMinutes(),d=i.getUTCSeconds();return r=r<10?"0"+r:r,a=a<10?"0"+a:a,o=o<10?"0"+o:o,n=n<10?"0"+n:n,d=d<10?"0"+d:d,s+"-"+r+"-"+a+t+o+":"+n+":"+d},setTimeout_safe:o,sleep:e=>new Promise(t=>o(t,e)),TimedOut:n,timeout:async(e,t)=>{let i=()=>{};const s=new Promise(t=>i=o(t,e));try{return await Promise.race([t,s.then(()=>{throw new n})])}finally{i()}}}},"M+3o":function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,InvalidOrder:a,AuthenticationError:o,ArgumentsRequired:n}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"braziliex",name:"Braziliex",countries:["BR"],rateLimit:1e3,has:{fetchCurrencies:!0,fetchTickers:!0,fetchOpenOrders:!0,fetchMyTrades:!0,fetchDepositAddress:!0,fetchOrder:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/34703593-c4498674-f504-11e7-8d14-ff8e44fb78c1.jpg",api:"https://braziliex.com/api/v1",www:"https://braziliex.com/",doc:"https://braziliex.com/exchange/api.php",fees:"https://braziliex.com/exchange/fees.php",referral:"https://braziliex.com/?ref=5FE61AB6F6D67DA885BC98BA27223465"},api:{public:{get:["currencies","ticker","ticker/{market}","orderbook/{market}","tradehistory/{market}"]},private:{post:["balance","complete_balance","open_orders","trade_history","deposit_address","sell","buy","cancel_order","order_status"]}},commonCurrencies:{EPC:"Epacoin",ABC:"Anti Bureaucracy Coin"},fees:{trading:{maker:.005,taker:.005}},precision:{amount:8,price:8},options:{fetchCurrencies:{expires:1e3}}})}async fetchCurrenciesFromCache(e={}){const t=this.safeValue(this.options,"fetchCurrencies",{}),i=this.safeInteger(t,"timestamp"),s=this.safeInteger(t,"expires",1e3),r=this.milliseconds();if(void 0===i||r-i>s){const i=await this.publicGetCurrencies(e);this.options.fetchCurrencies=this.extend(t,{response:i,timestamp:r})}return this.safeValue(this.options.fetchCurrencies,"response")}async fetchCurrencies(e={}){const t=await this.fetchCurrenciesFromCache(e);this.options.currencies={timestamp:this.milliseconds(),response:t};const i=Object.keys(t),s={};for(let r=0;r<i.length;r++){const e=i[r],a=t[e],o=this.safeInteger(a,"decimal"),n=this.safeCurrencyCode(e);let d=1===this.safeInteger(a,"active");0!==this.safeInteger(a,"under_maintenance")&&(d=!1);const c=1===this.safeInteger(a,"is_withdrawal_active"),h=1===this.safeInteger(a,"is_deposit_active");c&&h||(d=!1),s[n]={id:e,code:n,name:a.name,active:d,precision:o,funding:{withdraw:{active:c,fee:this.safeFloat(a,"txWithdrawalFee")},deposit:{active:h,fee:this.safeFloat(a,"txDepositFee")}},limits:{amount:{min:Math.pow(10,-o),max:Math.pow(10,o)},price:{min:Math.pow(10,-o),max:Math.pow(10,o)},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(a,"MinWithdrawal"),max:Math.pow(10,o)},deposit:{min:this.safeFloat(a,"minDeposit"),max:void 0}},info:a}}return s}async fetchMarkets(e={}){const t=await this.fetchCurrenciesFromCache(e),i=await this.publicGetTicker(),s=Object.keys(i),r=[];for(let a=0;a<s.length;a++){const e=s[a],o=i[e],[n,d]=e.split("_"),c=n.toUpperCase(),h=d.toUpperCase(),l=this.safeCurrencyCode(c),u=this.safeCurrencyCode(h),f=l+"/"+u,p=this.safeValue(t,n,{}),m=this.safeValue(t,d,{});let y=void 0;y=this.safeInteger(m,"is_fiat",0)?this.safeFloat(p,"minAmountTradeFIAT"):this.safeFloat(p,"minAmountTrade"+h);const b=1===this.safeInteger(o,"active"),v={amount:8,price:8};r.push({id:e,symbol:f,base:l,quote:u,baseId:n,quoteId:d,active:b,precision:v,limits:{amount:{min:Math.pow(10,-v.amount),max:Math.pow(10,v.amount)},price:{min:Math.pow(10,-v.price),max:Math.pow(10,v.price)},cost:{min:y,max:void 0}},info:o})}return r}parseTicker(e,t){let i=void 0;void 0!==t&&(i=t.symbol);const s=this.milliseconds(),r=this.safeFloat(e,"last");return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"highestBid24"),low:this.safeFloat(e,"lowestAsk24"),bid:this.safeFloat(e,"highestBid"),bidVolume:void 0,ask:this.safeFloat(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:this.safeFloat(e,"percentChange"),percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"baseVolume24"),quoteVolume:this.safeFloat(e,"quoteVolume24"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},r=await this.publicGetTickerMarket(this.extend(s,t));return this.parseTicker(r,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t),s={},r=Object.keys(i);for(let a=0;a<r.length;a++){const e=r[a],t=this.markets_by_id[e];s[t.symbol]=this.parseTicker(i[e],t)}return s}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.marketId(e)},r=await this.publicGetOrderbookMarket(this.extend(s,i));return this.parseOrderBook(r,void 0,"bids","asks","price","amount")}parseTrade(e,t){const i=this.parse8601(this.safeString2(e,"date_exec","date")),s=this.safeFloat(e,"price"),r=this.safeFloat(e,"amount");let a=void 0;void 0!==t&&(a=t.symbol);const o=this.safeFloat(e,"total"),n=this.safeString(e,"order_number"),d=this.safeString(e,"type");return{id:this.safeString(e,"_id"),info:e,timestamp:i,datetime:this.iso8601(i),symbol:a,order:n,type:"limit",side:d,takerOrMaker:void 0,price:s,amount:r,cost:o,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market:r.id},o=await this.publicGetTradehistoryMarket(this.extend(a,s));return this.parseTrades(o,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostCompleteBalance(e),i={info:t},s=Object.keys(t);for(let r=0;r<s.length;r++){const e=s[r],a=t[e],o=this.safeCurrencyCode(e),n=this.account();n.free=this.safeFloat(a,"available"),n.total=this.safeFloat(a,"total"),i[o]=n}return this.parseBalance(i)}parseOrder(e,t){let i=void 0;if(void 0===t){const i=this.safeString(e,"market");i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(i=t.symbol);let s=this.safeInteger(e,"timestamp");void 0===s&&(s=this.parse8601(this.safeString(e,"date")));const r=this.safeFloat(e,"price"),a=this.safeFloat(e,"total",0),o=this.safeFloat(e,"amount"),n=this.safeFloat(e,"progress"),d=o*n,c=parseFloat(this.amountToPrecision(i,o-d));let h=e;"info"in h&&(h=e.info);const l=this.safeString(e,"order_number"),u=this.safeValue(e,"fee"),f=1===n?"closed":"open";return{id:l,clientOrderId:void 0,datetime:this.iso8601(s),timestamp:s,lastTradeTimestamp:void 0,status:f,symbol:i,type:"limit",side:e.type,price:r,cost:a,amount:o,filled:d,remaining:c,trades:void 0,fee:u,info:h}}async createOrder(e,t,i,s,r,o={}){await this.loadMarkets();const n=this.market(e),d="privatePost"+this.capitalize(i),c={market:n.id,price:r,amount:s},h=await this[d](this.extend(c,o));if(1!==this.safeInteger(h,"success"))throw new a(this.id+" "+this.json(h));let l=h.message.split(" / ");l=l.slice(1);const u=l[5].split(" "),f=this.parseOrder({timestamp:this.milliseconds(),order_number:h.order_number,type:l[0].toLowerCase(),market:l[0].toLowerCase(),amount:l[2].split(" ")[1],price:l[3].split(" ")[1],total:l[4].split(" ")[1],fee:{cost:parseFloat(u[1]),currency:u[2]},progress:"0.0",info:h},n),p=f.id;return this.orders[p]=f,f}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_number:e,market:this.market(t).id};return await this.privatePostCancelOrder(this.extend(s,i))}async fetchOrder(e,t,i={}){if(void 0===t)throw new n(this.id+" fetchOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={order_number:e,market:s.id},a=await this.privatePostOrderStatus(this.extend(r,i));return this.parseOrder(a,s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market:r.id},o=await this.privatePostOpenOrders(this.extend(a,s));return this.parseOrders(o.order_open,r,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market:r.id},o=await this.privatePostTradeHistory(this.extend(a,s));return this.parseTrades(o.trade_history,r,t,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privatePostDepositAddress(this.extend(i,t)),r=this.safeString(s,"deposit_address");return this.checkAddress(r),{currency:e,address:r,tag:this.safeString(s,"payment_id"),info:s}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+t,n=this.omit(s,this.extractParams(e));if("public"===t)o+="/"+this.implodeParams(e,s),Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials(),n=this.extend({command:e,nonce:this.nonce()},n),a=this.urlencode(n);const t=this.hmac(this.encode(a),this.encode(this.secret),"sha512");r={"Content-type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:t}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,n){const d=await this.fetch2(e,t,i,s,a,n);if("string"===typeof d&&d.length<1)throw new r(this.id+" returned empty response");if("success"in d){if(0===this.safeInteger(d,"success")){const e=this.safeString(d,"message");if("Invalid APIKey"===e)throw new o(e);throw new r(e)}}return d}}},M2pJ:function(e,t,i){"use strict";var s,r=i("+un8"),a=i("i4Ti"),o=i("iak/"),n=i("Achu"),d=i("jiBz"),c=0,h=1,l=3,u=4,f=5,p=0,m=1,y=-2,b=-3,v=-5,g=-1,w=1,k=2,_=3,T=4,O=0,x=2,S=8,C=9,I=15,E=8,M=286,A=30,F=19,B=2*M+1,P=15,q=3,L=258,D=L+q+1,V=32,R=42,G=69,N=73,H=91,U=103,j=113,K=666,z=1,X=2,W=3,Y=4,Z=3;function J(e,t){return e.msg=d[t],t}function Q(e){return(e<<1)-(e>4?9:0)}function $(e){for(var t=e.length;--t>=0;)e[t]=0}function ee(e){var t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(r.arraySet(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))}function te(e,t){a._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ee(e.strm)}function ie(e,t){e.pending_buf[e.pending++]=t}function se(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function re(e,t,i,s){var a=e.avail_in;return a>s&&(a=s),0===a?0:(e.avail_in-=a,r.arraySet(t,e.input,e.next_in,a,i),1===e.state.wrap?e.adler=o(e.adler,t,a,i):2===e.state.wrap&&(e.adler=n(e.adler,t,a,i)),e.next_in+=a,e.total_in+=a,a)}function ae(e,t){var i,s,r=e.max_chain_length,a=e.strstart,o=e.prev_length,n=e.nice_match,d=e.strstart>e.w_size-D?e.strstart-(e.w_size-D):0,c=e.window,h=e.w_mask,l=e.prev,u=e.strstart+L,f=c[a+o-1],p=c[a+o];e.prev_length>=e.good_match&&(r>>=2),n>e.lookahead&&(n=e.lookahead);do{if(c[(i=t)+o]===p&&c[i+o-1]===f&&c[i]===c[a]&&c[++i]===c[a+1]){a+=2,i++;do{}while(c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&a<u);if(s=L-(u-a),a=u-L,s>o){if(e.match_start=t,o=s,s>=n)break;f=c[a+o-1],p=c[a+o]}}}while((t=l[t&h])>d&&0!==--r);return o<=e.lookahead?o:e.lookahead}function oe(e){var t,i,s,a,o,n=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=n+(n-D)){r.arraySet(e.window,e.window,n,n,0),e.match_start-=n,e.strstart-=n,e.block_start-=n,t=i=e.hash_size;do{s=e.head[--t],e.head[t]=s>=n?s-n:0}while(--i);t=i=n;do{s=e.prev[--t],e.prev[t]=s>=n?s-n:0}while(--i);a+=n}if(0===e.strm.avail_in)break;if(i=re(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=i,e.lookahead+e.insert>=q)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+q-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<q)););}while(e.lookahead<D&&0!==e.strm.avail_in)}function ne(e,t){for(var i,s;;){if(e.lookahead<D){if(oe(e),e.lookahead<D&&t===c)return z;if(0===e.lookahead)break}if(i=0,e.lookahead>=q&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+q-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-D&&(e.match_length=ae(e,i)),e.match_length>=q)if(s=a._tr_tally(e,e.strstart-e.match_start,e.match_length-q),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=q){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+q-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else s=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(s&&(te(e,!1),0===e.strm.avail_out))return z}return e.insert=e.strstart<q-1?e.strstart:q-1,t===u?(te(e,!0),0===e.strm.avail_out?W:Y):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?z:X}function de(e,t){for(var i,s,r;;){if(e.lookahead<D){if(oe(e),e.lookahead<D&&t===c)return z;if(0===e.lookahead)break}if(i=0,e.lookahead>=q&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+q-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=q-1,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-D&&(e.match_length=ae(e,i),e.match_length<=5&&(e.strategy===w||e.match_length===q&&e.strstart-e.match_start>4096)&&(e.match_length=q-1)),e.prev_length>=q&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-q,s=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-q),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+q-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=q-1,e.strstart++,s&&(te(e,!1),0===e.strm.avail_out))return z}else if(e.match_available){if((s=a._tr_tally(e,0,e.window[e.strstart-1]))&&te(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return z}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(s=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<q-1?e.strstart:q-1,t===u?(te(e,!0),0===e.strm.avail_out?W:Y):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?z:X}function ce(e,t,i,s,r){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=s,this.func=r}function he(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*B),this.dyn_dtree=new r.Buf16(2*(2*A+1)),this.bl_tree=new r.Buf16(2*(2*F+1)),$(this.dyn_ltree),$(this.dyn_dtree),$(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(P+1),this.heap=new r.Buf16(2*M+1),$(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*M+1),$(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function le(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=x,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?R:j,e.adler=2===t.wrap?0:1,t.last_flush=c,a._tr_init(t),p):J(e,y)}function ue(e){var t,i=le(e);return i===p&&((t=e.state).window_size=2*t.w_size,$(t.head),t.max_lazy_match=s[t.level].max_lazy,t.good_match=s[t.level].good_length,t.nice_match=s[t.level].nice_length,t.max_chain_length=s[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=q-1,t.match_available=0,t.ins_h=0),i}function fe(e,t,i,s,a,o){if(!e)return y;var n=1;if(t===g&&(t=6),s<0?(n=0,s=-s):s>15&&(n=2,s-=16),a<1||a>C||i!==S||s<8||s>15||t<0||t>9||o<0||o>T)return J(e,y);8===s&&(s=9);var d=new he;return e.state=d,d.strm=e,d.wrap=n,d.gzhead=null,d.w_bits=s,d.w_size=1<<d.w_bits,d.w_mask=d.w_size-1,d.hash_bits=a+7,d.hash_size=1<<d.hash_bits,d.hash_mask=d.hash_size-1,d.hash_shift=~~((d.hash_bits+q-1)/q),d.window=new r.Buf8(2*d.w_size),d.head=new r.Buf16(d.hash_size),d.prev=new r.Buf16(d.w_size),d.lit_bufsize=1<<a+6,d.pending_buf_size=4*d.lit_bufsize,d.pending_buf=new r.Buf8(d.pending_buf_size),d.d_buf=1*d.lit_bufsize,d.l_buf=3*d.lit_bufsize,d.level=t,d.strategy=o,d.method=i,ue(e)}s=[new ce(0,0,0,0,(function(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(e.lookahead<=1){if(oe(e),0===e.lookahead&&t===c)return z;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var s=e.block_start+i;if((0===e.strstart||e.strstart>=s)&&(e.lookahead=e.strstart-s,e.strstart=s,te(e,!1),0===e.strm.avail_out))return z;if(e.strstart-e.block_start>=e.w_size-D&&(te(e,!1),0===e.strm.avail_out))return z}return e.insert=0,t===u?(te(e,!0),0===e.strm.avail_out?W:Y):(e.strstart>e.block_start&&(te(e,!1),e.strm.avail_out),z)})),new ce(4,4,8,4,ne),new ce(4,5,16,8,ne),new ce(4,6,32,32,ne),new ce(4,4,16,16,de),new ce(8,16,32,32,de),new ce(8,16,128,128,de),new ce(8,32,128,256,de),new ce(32,128,258,1024,de),new ce(32,258,258,4096,de)],t.deflateInit=function(e,t){return fe(e,t,S,I,E,O)},t.deflateInit2=fe,t.deflateReset=ue,t.deflateResetKeep=le,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?y:(e.state.gzhead=t,p):y},t.deflate=function(e,t){var i,r,o,d;if(!e||!e.state||t>f||t<0)return e?J(e,y):y;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||r.status===K&&t!==u)return J(e,0===e.avail_out?v:y);if(r.strm=e,i=r.last_flush,r.last_flush=t,r.status===R)if(2===r.wrap)e.adler=0,ie(r,31),ie(r,139),ie(r,8),r.gzhead?(ie(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),ie(r,255&r.gzhead.time),ie(r,r.gzhead.time>>8&255),ie(r,r.gzhead.time>>16&255),ie(r,r.gzhead.time>>24&255),ie(r,9===r.level?2:r.strategy>=k||r.level<2?4:0),ie(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(ie(r,255&r.gzhead.extra.length),ie(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=n(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=G):(ie(r,0),ie(r,0),ie(r,0),ie(r,0),ie(r,0),ie(r,9===r.level?2:r.strategy>=k||r.level<2?4:0),ie(r,Z),r.status=j);else{var b=S+(r.w_bits-8<<4)<<8;b|=(r.strategy>=k||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(b|=V),b+=31-b%31,r.status=j,se(r,b),0!==r.strstart&&(se(r,e.adler>>>16),se(r,65535&e.adler)),e.adler=1}if(r.status===G)if(r.gzhead.extra){for(o=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>o&&(e.adler=n(e.adler,r.pending_buf,r.pending-o,o)),ee(e),o=r.pending,r.pending!==r.pending_buf_size));)ie(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>o&&(e.adler=n(e.adler,r.pending_buf,r.pending-o,o)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=N)}else r.status=N;if(r.status===N)if(r.gzhead.name){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(e.adler=n(e.adler,r.pending_buf,r.pending-o,o)),ee(e),o=r.pending,r.pending===r.pending_buf_size)){d=1;break}d=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,ie(r,d)}while(0!==d);r.gzhead.hcrc&&r.pending>o&&(e.adler=n(e.adler,r.pending_buf,r.pending-o,o)),0===d&&(r.gzindex=0,r.status=H)}else r.status=H;if(r.status===H)if(r.gzhead.comment){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(e.adler=n(e.adler,r.pending_buf,r.pending-o,o)),ee(e),o=r.pending,r.pending===r.pending_buf_size)){d=1;break}d=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,ie(r,d)}while(0!==d);r.gzhead.hcrc&&r.pending>o&&(e.adler=n(e.adler,r.pending_buf,r.pending-o,o)),0===d&&(r.status=U)}else r.status=U;if(r.status===U&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&ee(e),r.pending+2<=r.pending_buf_size&&(ie(r,255&e.adler),ie(r,e.adler>>8&255),e.adler=0,r.status=j)):r.status=j),0!==r.pending){if(ee(e),0===e.avail_out)return r.last_flush=-1,p}else if(0===e.avail_in&&Q(t)<=Q(i)&&t!==u)return J(e,v);if(r.status===K&&0!==e.avail_in)return J(e,v);if(0!==e.avail_in||0!==r.lookahead||t!==c&&r.status!==K){var g=r.strategy===k?function(e,t){for(var i;;){if(0===e.lookahead&&(oe(e),0===e.lookahead)){if(t===c)return z;break}if(e.match_length=0,i=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(te(e,!1),0===e.strm.avail_out))return z}return e.insert=0,t===u?(te(e,!0),0===e.strm.avail_out?W:Y):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?z:X}(r,t):r.strategy===_?function(e,t){for(var i,s,r,o,n=e.window;;){if(e.lookahead<=L){if(oe(e),e.lookahead<=L&&t===c)return z;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=q&&e.strstart>0&&(s=n[r=e.strstart-1])===n[++r]&&s===n[++r]&&s===n[++r]){o=e.strstart+L;do{}while(s===n[++r]&&s===n[++r]&&s===n[++r]&&s===n[++r]&&s===n[++r]&&s===n[++r]&&s===n[++r]&&s===n[++r]&&r<o);e.match_length=L-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=q?(i=a._tr_tally(e,1,e.match_length-q),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(te(e,!1),0===e.strm.avail_out))return z}return e.insert=0,t===u?(te(e,!0),0===e.strm.avail_out?W:Y):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?z:X}(r,t):s[r.level].func(r,t);if(g!==W&&g!==Y||(r.status=K),g===z||g===W)return 0===e.avail_out&&(r.last_flush=-1),p;if(g===X&&(t===h?a._tr_align(r):t!==f&&(a._tr_stored_block(r,0,0,!1),t===l&&($(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),ee(e),0===e.avail_out))return r.last_flush=-1,p}return t!==u?p:r.wrap<=0?m:(2===r.wrap?(ie(r,255&e.adler),ie(r,e.adler>>8&255),ie(r,e.adler>>16&255),ie(r,e.adler>>24&255),ie(r,255&e.total_in),ie(r,e.total_in>>8&255),ie(r,e.total_in>>16&255),ie(r,e.total_in>>24&255)):(se(r,e.adler>>>16),se(r,65535&e.adler)),ee(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?p:m)},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==R&&t!==G&&t!==N&&t!==H&&t!==U&&t!==j&&t!==K?J(e,y):(e.state=null,t===j?J(e,b):p):y},t.deflateSetDictionary=function(e,t){var i,s,a,n,d,c,h,l,u=t.length;if(!e||!e.state)return y;if(2===(n=(i=e.state).wrap)||1===n&&i.status!==R||i.lookahead)return y;for(1===n&&(e.adler=o(e.adler,t,u,0)),i.wrap=0,u>=i.w_size&&(0===n&&($(i.head),i.strstart=0,i.block_start=0,i.insert=0),l=new r.Buf8(i.w_size),r.arraySet(l,t,u-i.w_size,i.w_size,0),t=l,u=i.w_size),d=e.avail_in,c=e.next_in,h=e.input,e.avail_in=u,e.next_in=0,e.input=t,oe(i);i.lookahead>=q;){s=i.strstart,a=i.lookahead-(q-1);do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[s+q-1])&i.hash_mask,i.prev[s&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=s,s++}while(--a);i.strstart=s,i.lookahead=q-1,oe(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=q-1,i.match_available=0,e.next_in=c,e.input=h,e.avail_in=d,i.wrap=n,p},t.deflateInfo="pako deflate (from Nodeca project)"},MP7T:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btcturk",name:"BTCTurk",countries:["TR"],rateLimit:1e3,has:{CORS:!0,fetchTickers:!0,fetchOHLCV:!0},timeframes:{"1d":"1d"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27992709-18e15646-64a3-11e7-9fa2-b0950ec7712f.jpg",api:"https://www.btcturk.com/api",www:"https://www.btcturk.com",doc:"https://github.com/BTCTrader/broker-api-docs"},api:{public:{get:["ohlcdata","orderbook","ticker","trades"]},private:{get:["balance","openOrders","userTransactions"],post:["exchange","cancelOrder"]}},fees:{trading:{maker:.00236,taker:.003*1.18}}})}async fetchMarkets(e={}){const t=await this.publicGetTicker(e),i=[];for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"pair");let a=r.slice(0,3),o=r.slice(3,6);const n=this.safeCurrencyCode(a),d=this.safeCurrencyCode(o);a=a.toLowerCase(),o=o.toLowerCase();const c=n+"/"+d,h={amount:8,price:8},l=!0;i.push({id:r,symbol:c,base:n,quote:d,baseId:a,quoteId:o,active:l,info:e,precision:h,limits:{amount:{min:Math.pow(10,-h.amount),max:void 0},price:{min:Math.pow(10,-h.price),max:void 0},cost:{min:void 0,max:void 0}}})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalance(e),i={info:t},s=Object.keys(this.currencies);for(let r=0;r<s.length;r++){const e=s[r],a=this.currencies[e],o=a.id+"_available",n=a.id+"_balance",d=a.id+"_reserved";if(o in t){const s=this.account();s.free=this.safeFloat(t,o),s.total=this.safeFloat(t,n),s.used=this.safeFloat(t,d),i[e]=s}}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pairSymbol:this.market(e).id},r=await this.publicGetOrderbook(this.extend(s,i)),a=this.safeTimestamp(r,"timestamp");return this.parseOrderBook(r,a)}parseTicker(e,t){let i=void 0;t&&(i=t.symbol);const s=this.safeTimestamp(e,"timestamp"),r=this.safeFloat(e,"last");return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"average"),baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t),s={};for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"pair");let a=t,o=void 0;t in this.markets_by_id&&(o=this.markets_by_id[a],a=o.symbol),s[a]=this.parseTicker(e,o)}return s}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s=await this.fetchTickers(t);return this.safeValue2(s,i.id,e)}parseTrade(e,t){const i=this.safeTimestamp(e,"date"),s=this.safeString(e,"tid"),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount");let o=void 0;void 0!==a&&void 0!==r&&(o=a*r);let n=void 0;return void 0!==t&&(n=t.symbol),{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:n,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:r,amount:a,cost:o,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pairSymbol:r.id},o=await this.publicGetTrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}parseOHLCV(e,t,i="1d",s,r){return[this.parse8601(this.safeString(e,"Time")),this.safeFloat(e,"Open"),this.safeFloat(e,"High"),this.safeFloat(e,"Low"),this.safeFloat(e,"Close"),this.safeFloat(e,"Volume")]}async fetchOHLCV(e,t="1d",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={};void 0!==s&&(o.last=s);const n=await this.publicGetOhlcdata(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}async createOrder(e,t,i,s,a,o={}){await this.loadMarkets();const n={PairSymbol:this.marketId(e),OrderType:"buy"===i?0:1,OrderMethod:"market"===t?1:0};if("market"===t){if(!("Total"in o))throw new r(this.id+' createOrder requires the "Total" extra parameter for market orders (amount and price are both ignored)')}else n.Price=a,n.Amount=s;const d=await this.privatePostExchange(this.extend(n,o));return{info:d,id:this.safeString(d,"id")}}async cancelOrder(e,t,i={}){const s={id:e};return await this.privatePostCancelOrder(this.extend(s,i))}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,o){if("btctrader"===this.id)throw new r(this.id+" is an abstract base API for BTCExchange, BTCTurk");let n=this.urls.api+"/"+e;if("public"===t)Object.keys(s).length&&(n+="?"+this.urlencode(s));else{this.checkRequiredCredentials();const e=this.nonce().toString();o=this.urlencode(s);const t=this.base64ToBinary(this.secret),i=this.apiKey+e;a={"X-PCK":this.apiKey,"X-Stamp":e,"X-Signature":this.stringToBase64(this.hmac(this.encode(i),t,"sha256","binary")),"Content-Type":"application/x-www-form-urlencoded"}}return{url:n,method:i,body:o,headers:a}}}},MzSH:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ExchangeNotAvailable:a}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"_1btcxe",name:"1BTCXE",countries:["PA"],comment:"Crypto Capital API",has:{CORS:!0,withdraw:!0},timeframes:{"1d":"1year"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766049-2b294408-5ecc-11e7-85cc-adaff013dc1a.jpg",api:"https://1btcxe.com/api",www:"https://1btcxe.com",doc:"https://1btcxe.com/api-docs.php"},api:{public:{get:["stats","historical-prices","order-book","transactions"]},private:{post:["balances-and-info","open-orders","user-transactions","btc-deposit-address/get","btc-deposit-address/new","deposits/get","withdrawals/get","orders/new","orders/edit","orders/cancel","orders/status","withdrawals/new"]}}})}async fetchMarkets(e={}){return[{id:"USD",symbol:"BTC/USD",base:"BTC",quote:"USD",baseId:"BTC",quoteId:"USD"},{id:"EUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"BTC",quoteId:"EUR"},{id:"CNY",symbol:"BTC/CNY",base:"BTC",quote:"CNY",baseId:"BTC",quoteId:"CNY"},{id:"RUB",symbol:"BTC/RUB",base:"BTC",quote:"RUB",baseId:"BTC",quoteId:"RUB"},{id:"CHF",symbol:"BTC/CHF",base:"BTC",quote:"CHF",baseId:"BTC",quoteId:"CHF"},{id:"JPY",symbol:"BTC/JPY",base:"BTC",quote:"JPY",baseId:"BTC",quoteId:"JPY"},{id:"GBP",symbol:"BTC/GBP",base:"BTC",quote:"GBP",baseId:"BTC",quoteId:"GBP"},{id:"CAD",symbol:"BTC/CAD",base:"BTC",quote:"CAD",baseId:"BTC",quoteId:"CAD"},{id:"AUD",symbol:"BTC/AUD",base:"BTC",quote:"AUD",baseId:"BTC",quoteId:"AUD"},{id:"AED",symbol:"BTC/AED",base:"BTC",quote:"AED",baseId:"BTC",quoteId:"AED"},{id:"BGN",symbol:"BTC/BGN",base:"BTC",quote:"BGN",baseId:"BTC",quoteId:"BGN"},{id:"CZK",symbol:"BTC/CZK",base:"BTC",quote:"CZK",baseId:"BTC",quoteId:"CZK"},{id:"DKK",symbol:"BTC/DKK",base:"BTC",quote:"DKK",baseId:"BTC",quoteId:"DKK"},{id:"HKD",symbol:"BTC/HKD",base:"BTC",quote:"HKD",baseId:"BTC",quoteId:"HKD"},{id:"HRK",symbol:"BTC/HRK",base:"BTC",quote:"HRK",baseId:"BTC",quoteId:"HRK"},{id:"HUF",symbol:"BTC/HUF",base:"BTC",quote:"HUF",baseId:"BTC",quoteId:"HUF"},{id:"ILS",symbol:"BTC/ILS",base:"BTC",quote:"ILS",baseId:"BTC",quoteId:"ILS"},{id:"INR",symbol:"BTC/INR",base:"BTC",quote:"INR",baseId:"BTC",quoteId:"INR"},{id:"MUR",symbol:"BTC/MUR",base:"BTC",quote:"MUR",baseId:"BTC",quoteId:"MUR"},{id:"MXN",symbol:"BTC/MXN",base:"BTC",quote:"MXN",baseId:"BTC",quoteId:"MXN"},{id:"NOK",symbol:"BTC/NOK",base:"BTC",quote:"NOK",baseId:"BTC",quoteId:"NOK"},{id:"NZD",symbol:"BTC/NZD",base:"BTC",quote:"NZD",baseId:"BTC",quoteId:"NZD"},{id:"PLN",symbol:"BTC/PLN",base:"BTC",quote:"PLN",baseId:"BTC",quoteId:"PLN"},{id:"RON",symbol:"BTC/RON",base:"BTC",quote:"RON",baseId:"BTC",quoteId:"RON"},{id:"SEK",symbol:"BTC/SEK",base:"BTC",quote:"SEK",baseId:"BTC",quoteId:"SEK"},{id:"SGD",symbol:"BTC/SGD",base:"BTC",quote:"SGD",baseId:"BTC",quoteId:"SGD"},{id:"THB",symbol:"BTC/THB",base:"BTC",quote:"THB",baseId:"BTC",quoteId:"THB"},{id:"TRY",symbol:"BTC/TRY",base:"BTC",quote:"TRY",baseId:"BTC",quoteId:"TRY"},{id:"ZAR",symbol:"BTC/ZAR",base:"BTC",quote:"ZAR",baseId:"BTC",quoteId:"ZAR"}]}async fetchBalance(e={}){await this.loadMarkets();const t=(await this.privatePostBalancesAndInfo(e))["balances-and-info"],i={info:t},s=Object.keys(this.currencies);for(let r=0;r<s.length;r++){const e=s[r],a=this.currency(e).id,o=this.account();o.free=this.safeFloat(t.available,a),o.used=this.safeFloat(t.on_hold,a),i[e]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={currency:this.marketId(e)},r=await this.publicGetOrderBook(this.extend(s,i));return this.parseOrderBook(r["order-book"],void 0,"bid","ask","price","order_amount")}async fetchTicker(e,t={}){await this.loadMarkets();const i={currency:this.marketId(e)},s=await this.publicGetStats(this.extend(i,t)),r=this.safeValue(s,"stats",{}),a=this.safeFloat(r,"last_price");return{symbol:e,timestamp:void 0,datetime:void 0,high:this.safeFloat(r,"max"),low:this.safeFloat(r,"min"),bid:this.safeFloat(r,"bid"),bidVolume:void 0,ask:this.safeFloat(r,"ask"),askVolume:void 0,vwap:void 0,open:this.safeFloat(r,"open"),close:a,last:a,previousClose:void 0,change:this.safeFloat(r,"daily_change"),percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(r,"total_btc_traded"),info:r}}parseOHLCV(e,t,i="1d",s,r){return[this.parse8601(e.date+" 00:00:00"),void 0,void 0,void 0,this.safeFloat(e,"price"),void 0]}async fetchOHLCV(e,t="1d",i,s,r={}){await this.loadMarkets();const a=this.market(e),o=await this.publicGetHistoricalPrices(this.extend({currency:a.id,timeframe:this.timeframes[t]},r)),n=this.toArray(this.omit(o["historical-prices"],"request_currency"));return this.parseOHLCVs(n,a,t,i,s)}parseTrade(e,t){const i=this.safeTimestamp(e,"timestamp"),s=this.safeString(e,"id");let r=void 0;void 0!==t&&(r=t.symbol);const a=this.safeString(e,"maker_type"),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount");let d=void 0;return void 0!==n&&void 0!==o&&(d=n*o),{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:r,order:void 0,type:void 0,side:a,takerOrMaker:void 0,price:o,amount:n,cost:d,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={currency:r.id};void 0!==i&&(a.limit=i);const o=await this.publicGetTransactions(this.extend(a,s)),n=this.toArray(this.omit(o.transactions,"request_currency"));return this.parseTrades(n,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o={side:i,type:t,currency:this.marketId(e),amount:s};"limit"===t&&(o.limit_price=r);const n=await this.privatePostOrdersNew(this.extend(o,a));return{info:n,id:n}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e};return await this.privatePostOrdersCancel(this.extend(s,i))}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a={currency:this.currency(e).id,amount:parseFloat(t),address:i},o=await this.privatePostWithdrawalsNew(this.extend(a,r));return{info:o,id:o.result.uuid}}sign(e,t="public",i="GET",s={},a,o){if("cryptocapital"===this.id)throw new r(this.id+" is an abstract base API for _1btcxe");let n=this.urls.api+"/"+e;if("public"===t)Object.keys(s).length&&(n+="?"+this.urlencode(s));else{this.checkRequiredCredentials();const e=this.extend({api_key:this.apiKey,nonce:this.nonce()},s),t=this.json(e);e.signature=this.hmac(this.encode(t),this.encode(this.secret)),o=this.json(e),a={"Content-Type":"application/json"}}return{url:n,method:i,body:o,headers:a}}async request(e,t="public",i="GET",s={},o,n){const d=await this.fetch2(e,t,i,s,o,n);if("string"===typeof d&&d.indexOf("Maintenance")>=0)throw new a(this.id+" on maintenance");if("errors"in d){let e=[];for(let t=0;t<d.errors.length;t++){const i=d.errors[t];e.push(i.code+": "+i.message)}throw e=e.join(" "),new r(this.id+" "+e)}return d}}},N4x7:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ArgumentsRequired:a,BadRequest:o,OrderNotFound:n,InvalidOrder:d,InvalidNonce:c,InsufficientFunds:h,AuthenticationError:l,PermissionDenied:u,NotSupported:f,OnMaintenance:p,RateLimitExceeded:m}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"gemini",name:"Gemini",countries:["US"],rateLimit:1500,version:"v1",has:{fetchDepositAddress:!1,createDepositAddress:!0,CORS:!1,fetchBidsAsks:!1,fetchTickers:!1,fetchMyTrades:!0,fetchOrder:!0,fetchOrders:!1,fetchOpenOrders:!0,fetchClosedOrders:!1,createMarketOrder:!1,withdraw:!0,fetchTransactions:!0,fetchWithdrawals:!1,fetchDeposits:!1,fetchOHLCV:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27816857-ce7be644-6096-11e7-82d6-3c257263229c.jpg",api:{public:"https://api.gemini.com",private:"https://api.gemini.com",web:"https://docs.gemini.com"},www:"https://gemini.com/",doc:["https://docs.gemini.com/rest-api","https://docs.sandbox.gemini.com"],test:{public:"https://api.sandbox.gemini.com",private:"https://api.sandbox.gemini.com",web:"https://docs.sandbox.gemini.com"},fees:["https://gemini.com/api-fee-schedule","https://gemini.com/trading-fees","https://gemini.com/transfer-fees"]},api:{web:{get:["rest-api"]},public:{get:["v1/symbols","v1/pubticker/{symbol}","v1/book/{symbol}","v1/trades/{symbol}","v1/auction/{symbol}","v1/auction/{symbol}/history","v2/candles/{symbol}/{timeframe}","v2/ticker/{symbol}"]},private:{post:["v1/order/new","v1/order/cancel","v1/order/cancel/session","v1/order/cancel/all","v1/order/status","v1/orders","v1/mytrades","v1/notionalvolume","v1/tradevolume","v1/transfers","v1/balances","v1/deposit/{currency}/newAddress","v1/withdraw/{currency}","v1/heartbeat","v1/transfers"]}},fees:{trading:{taker:.0035,maker:.001}},httpExceptions:{400:o,403:u,404:n,406:h,429:m,500:r,502:r,503:p},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1hr","6h":"6hr","1d":"1day"},exceptions:{exact:{AuctionNotOpen:o,ClientOrderIdTooLong:o,ClientOrderIdMustBeString:o,ConflictingOptions:o,EndpointMismatch:o,EndpointNotFound:o,IneligibleTiming:o,InsufficientFunds:h,InvalidJson:o,InvalidNonce:c,InvalidOrderType:d,InvalidPrice:d,InvalidQuantity:d,InvalidSide:d,InvalidSignature:l,InvalidSymbol:o,InvalidTimestampInPayload:o,Maintenance:p,MarketNotOpen:d,MissingApikeyHeader:l,MissingOrderField:d,MissingRole:l,MissingPayloadHeader:l,MissingSignatureHeader:l,NoSSL:l,OptionsMustBeArray:o,OrderNotFound:n,RateLimit:m,System:r,UnsupportedOption:o},broad:{"The Gemini Exchange is currently undergoing maintenance.":p}},options:{fetchMarketsMethod:"fetch_markets_from_web"}})}async fetchMarkets(e={}){const t=this.safeValue(this.options,"fetchMarketsMethod","fetch_markets_from_api");return await this[t](e)}async fetchMarketsFromWeb(e,t={}){const i=(await this.webGetRestApi(t)).split('<h1 id="symbols-and-minimums">Symbols and minimums</h1>'),s=i.length,r=this.id+" the "+this.name+" API doc HTML markup has changed, breaking the parser of order limits and precision info for "+this.name+" markets.";if(2!==s)throw new f(r);const a=i[1].split("tbody>");if(a.length<2)throw new f(r);const o=a[1].split("<tr>\n"),n=o.length;if(n<2)throw new f(r);const d=[];for(let c=1;c<n;c++){const e=o[c],t=e.split("</td>\n");if(t.length<7)throw new f(r);let i=t[0].replace("<td>","");i=i.replace('<code class="prettyprint">',""),i=i.replace("</code>","");let s=t[2].replace("<td>",""),a=t[1].replace("<td>","");const n=t[3].replace("<td>",""),h=t[4].replace("<td>",""),l=t[5].replace("<td>",""),u=n.split(" "),p=h.split(" "),m=l.split(" ");s=s.toLowerCase(),a=a.toLowerCase();const y=this.safeCurrencyCode(s),b=this.safeCurrencyCode(a),v=y+"/"+b,g={amount:this.precisionFromString(p[0]),price:this.precisionFromString(m[0])},w=void 0;d.push({id:i,info:e,symbol:v,base:y,quote:b,baseId:s,quoteId:a,active:w,precision:g,limits:{amount:{min:parseFloat(u[0]),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}})}return d}async fetchMarketsFromAPI(e={}){const t=await this.publicGetV1Symbols(e),i=[];for(let s=0;s<t.length;s++){const e=t[s],r=e,a=e.slice(0,3),o=e.slice(3,6),n=this.safeCurrencyCode(a),d=this.safeCurrencyCode(o),c=n+"/"+d,h={amount:void 0,price:void 0};i.push({id:e,info:r,symbol:c,base:n,quote:d,baseId:a,quoteId:o,precision:h,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}})}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)};void 0!==t&&(s.limit_bids=t,s.limit_asks=t);const r=await this.publicGetV1BookSymbol(this.extend(s,i));return this.parseOrderBook(r,void 0,"bids","asks","price","amount")}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetV1PubtickerSymbol(this.extend(s,t)),a=this.safeInteger(r.volume,"timestamp"),o=i.base,n=i.quote,d=this.safeFloat(r,"last");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:void 0,low:void 0,bid:this.safeFloat(r,"bid"),bidVolume:void 0,ask:this.safeFloat(r,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(r.volume,o),quoteVolume:this.safeFloat(r.volume,n),info:r}}parseTrade(e,t){const i=this.safeInteger(e,"timestampms"),s=this.safeString(e,"tid"),r=this.safeString(e,"order_id"),a=this.safeString(e,"fee_currency"),o=this.safeCurrencyCode(a),n={cost:this.safeFloat(e,"fee_amount"),currency:o},d=this.safeFloat(e,"price"),c=this.safeFloat(e,"amount");let h=void 0;void 0!==d&&void 0!==c&&(h=d*c);const l=this.safeStringLower(e,"type");let u=void 0;return void 0!==t&&(u=t.symbol),{id:s,order:r,info:e,timestamp:i,datetime:this.iso8601(i),symbol:u,type:void 0,side:l,takerOrMaker:void 0,price:d,cost:h,amount:c,fee:n}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id},o=await this.publicGetV1TradesSymbol(this.extend(a,s));return this.parseTrades(o,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostV1Balances(e),i={info:t};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"currency"),a=this.safeCurrencyCode(r),o=this.account();o.free=this.safeFloat(e,"available"),o.total=this.safeFloat(e,"amount"),i[a]=o}return this.parseBalance(i)}parseOrder(e,t){const i=this.safeInteger(e,"timestampms"),s=this.safeFloat(e,"original_amount"),r=this.safeFloat(e,"remaining_amount"),a=this.safeFloat(e,"executed_amount");let o="closed";e.is_live&&(o="open"),e.is_cancelled&&(o="canceled");const n=this.safeFloat(e,"price"),d=this.safeFloat(e,"avg_execution_price");let c=void 0;void 0!==a&&void 0!==d&&(c=a*d);let h=this.safeString(e,"type");h="exchange limit"===h?"limit":"market buy"===h||"market sell"===h?"market":e.type;let l=void 0;if(void 0===t){const i=this.safeString(e,"symbol");i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(l=t.symbol);const u=this.safeString(e,"order_id"),f=this.safeStringLower(e,"side");return{id:u,clientOrderId:this.safeString(e,"client_order_id"),info:e,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:o,symbol:l,type:h,side:f,price:n,average:d,cost:c,amount:s,filled:a,remaining:r,fee:void 0}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},r=await this.privatePostV1OrderStatus(this.extend(s,i));return this.parseOrder(r)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r=await this.privatePostV1Orders(s);let a=this.parseOrders(r,void 0,t,i);if(void 0!==e){const t=this.market(e);a=this.filterBySymbol(a,t.symbol)}return a}async createOrder(e,t,i,s,a,o={}){if(await this.loadMarkets(),"market"===t)throw new r(this.id+" allows limit orders only");const n={client_order_id:this.nonce().toString(),symbol:this.marketId(e),amount:s.toString(),price:a.toString(),side:i,type:"exchange limit"},d=await this.privatePostV1OrderNew(this.extend(n,o));return{info:d,id:d.order_id}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e};return await this.privatePostV1OrderCancel(this.extend(s,i))}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const r=this.market(e),o={symbol:r.id};void 0!==i&&(o.limit_trades=i),void 0!==t&&(o.timestamp=parseInt(t/1e3));const n=await this.privatePostV1Mytrades(this.extend(o,s));return this.parseTrades(n,r,t,i)}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a={currency:this.currency(e).id,amount:t,address:i},o=await this.privatePostV1WithdrawCurrency(this.extend(a,r));return{info:o,id:this.safeString(o,"txHash")}}nonce(){return this.milliseconds()}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const r={};void 0!==i&&(r.limit_transfers=i),void 0!==t&&(r.timestamp=t);const a=await this.privatePostV1Transfers(this.extend(r,s));return this.parseTransactions(a)}parseTransaction(e,t){const i=this.safeInteger(e,"timestampms"),s=this.safeString(e,"currency"),r=this.safeCurrencyCode(s,t),a=this.safeString(e,"destination"),o=this.safeStringLower(e,"type");let n="pending";e.status&&(n="ok");let d=void 0;const c=this.safeFloat(e,"feeAmount");return void 0!==c&&(d={cost:c,currency:r}),{info:e,id:this.safeString(e,"eid"),txid:this.safeString(e,"txHash"),timestamp:i,datetime:this.iso8601(i),address:a,tag:void 0,type:o,amount:this.safeFloat(e,"amount"),currency:r,status:n,updated:void 0,fee:d}}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();const e=this.nonce(),t=this.extend({request:o,nonce:e},n);let i=this.json(t);i=this.stringToBase64(this.encode(i));const s=this.hmac(i,this.encode(this.secret),"sha384");r={"Content-Type":"text/plain","X-GEMINI-APIKEY":this.apiKey,"X-GEMINI-PAYLOAD":this.decode(i),"X-GEMINI-SIGNATURE":s}}else Object.keys(n).length&&(o+="?"+this.urlencode(n));return o=this.urls.api[t]+o,{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,c){if(void 0===n){if("string"===typeof o){const e=this.id+" "+o;this.throwBroadlyMatchedException(this.exceptions.broad,o,e)}return}if("error"===this.safeString(n,"result")){const e=this.safeString(n,"reason"),t=this.safeString(n,"message"),i=this.id+" "+t;throw this.throwExactlyMatchedException(this.exceptions.exact,e,i),this.throwExactlyMatchedException(this.exceptions.exact,t,i),this.throwBroadlyMatchedException(this.exceptions.broad,t,i),new r(i)}}async createDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privatePostV1DepositCurrencyNewAddress(this.extend(i,t)),r=this.safeString(s,"address");return this.checkAddress(r),{currency:e,address:r,tag:void 0,info:s}}async fetchOHLCV(e,t="5m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={timeframe:this.timeframes[t],symbol:a.id},n=await this.publicGetV2CandlesSymbolTimeframe(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}}},NCIG:function(e,t,i){"use strict";const s=i("OjXq"),{BadSymbol:r,ExchangeError:a}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coincheck",name:"coincheck",countries:["JP","ID"],rateLimit:1500,has:{CORS:!1,fetchOpenOrders:!0,fetchMyTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766464-3b5c3c74-5ed9-11e7-840e-31b32968e1da.jpg",api:"https://coincheck.com/api",www:"https://coincheck.com",doc:"https://coincheck.com/documents/exchange/api",fees:["https://coincheck.com/exchange/fee","https://coincheck.com/info/fee"]},api:{public:{get:["exchange/orders/rate","order_books","rate/{pair}","ticker","trades"]},private:{get:["accounts","accounts/balance","accounts/leverage_balance","bank_accounts","deposit_money","exchange/orders/opens","exchange/orders/transactions","exchange/orders/transactions_pagination","exchange/leverage/positions","lending/borrows/matches","send_money","withdraws"],post:["bank_accounts","deposit_money/{id}/fast","exchange/orders","exchange/transfers/to_leverage","exchange/transfers/from_leverage","lending/borrows","lending/borrows/{id}/repay","send_money","withdraws"],delete:["bank_accounts/{id}","exchange/orders/{id}","withdraws/{id}"]}},markets:{"BTC/JPY":{id:"btc_jpy",symbol:"BTC/JPY",base:"BTC",quote:"JPY",baseId:"btc",quoteId:"jpy"}},fees:{trading:{tierBased:!1,percentage:!0,maker:0,taker:0}}})}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccountsBalance(e),i={info:t},s=Object.keys(this.currencies);for(let r=0;r<s.length;r++){const e=s[r],a=this.currencyId(e);if(a in t){const s=this.account(),r=a+"_reserved";s.free=this.safeFloat(t,a),s.used=this.safeFloat(t,r),i[e]=s}}return this.parseBalance(i)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;void 0!==e&&(r=this.market(e));const a=await this.privateGetExchangeOrdersOpens(s),o=this.safeValue(a,"orders",[]),n=this.parseOrders(o,r,t,i),d=[];for(let c=0;c<n.length;c++)d.push(this.extend(n[c],{status:"open"}));return d}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"order_type"),r=this.parse8601(this.safeString(e,"created_at")),a=this.safeFloat(e,"pending_amount"),o=this.safeFloat(e,"pending_amount"),n=this.safeFloat(e,"rate");let d=void 0,c=void 0;void 0!==o&&void 0!==a&&(d=Math.max(a-o,0),void 0!==n&&(c=d*n));const h=this.safeString(e,"pair");let l=void 0;if(void 0!==h)if(h in this.markets_by_id)l=this.markets_by_id[h].symbol;else{const[e,t]=h.split("_");l=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}return{id:i,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,amount:a,remaining:o,filled:d,side:s,type:void 0,status:void 0,symbol:l,price:n,cost:c,fee:void 0,info:e}}async fetchOrderBook(e,t,i={}){if("BTC/JPY"!==e)throw new r(this.id+" fetchOrderBook () supports BTC/JPY only");await this.loadMarkets();const s=await this.publicGetOrderBooks(i);return this.parseOrderBook(s)}async fetchTicker(e,t={}){if("BTC/JPY"!==e)throw new r(this.id+" fetchTicker () supports BTC/JPY only");await this.loadMarkets();const i=await this.publicGetTicker(t),s=this.safeTimestamp(i,"timestamp"),a=this.safeFloat(i,"last");return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(i,"high"),low:this.safeFloat(i,"low"),bid:this.safeFloat(i,"bid"),bidVolume:void 0,ask:this.safeFloat(i,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(i,"volume"),quoteVolume:void 0,info:i}}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"created_at")),s=this.safeString(e,"id"),r=this.safeFloat(e,"rate"),a=this.safeString(e,"pair");t=this.safeValue(this.markets_by_id,a,t);let o=void 0,n=void 0,d=void 0;if(void 0!==a)if(a in this.markets_by_id)n=(t=this.markets_by_id[a]).baseId,d=t.quoteId,o=t.symbol;else{const e=a.split("_");n=e[0],d=e[1],o=this.safeCurrencyCode(n)+"/"+this.safeCurrencyCode(d)}void 0===o&&void 0!==t&&(o=t.symbol);let c=void 0,h=void 0,l=void 0,u=void 0,f=void 0,p=void 0;if("liquidity"in e){"T"===this.safeString(e,"liquidity")?c="taker":"M"===this.safeString(e,"liquidity")&&(c="maker");const t=this.safeValue(e,"funds",{});h=this.safeFloat(t,n),l=this.safeFloat(t,d),f={currency:this.safeString(e,"fee_currency"),cost:this.safeFloat(e,"fee")},u=this.safeString(e,"side"),p=this.safeString(e,"order_id")}else h=this.safeFloat(e,"amount"),u=this.safeString(e,"order_type");return void 0===l&&void 0!==h&&void 0!==r&&(l=h*r),{id:s,info:e,datetime:this.iso8601(i),timestamp:i,symbol:o,type:void 0,side:u,order:p,takerOrMaker:c,price:r,amount:h,cost:l,fee:f}}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a=await this.privateGetExchangeOrdersTransactions(this.extend({},s)),o=this.safeValue(a,"transactions",[]);return this.parseTrades(o,r,t,i)}async fetchTrades(e,t,i,s={}){if("BTC/JPY"!==e)throw new r(this.id+" fetchTrades () supports BTC/JPY only");await this.loadMarkets();const a=this.market(e),o={pair:a.id};void 0!==i&&(o.limit=i);const n=await this.publicGetTrades(this.extend(o,s)),d=this.safeValue(n,"data",[]);return this.parseTrades(d,a,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o={pair:this.marketId(e)};if("market"===t){const e=t+"_"+i;o.order_type=e,o[("buy"===i?e+"_":"")+"amount"]=s}else o.order_type=i,o.rate=r,o.amount=s;const n=await this.privatePostExchangeOrders(this.extend(o,a));return{info:n,id:this.safeString(n,"id")}}async cancelOrder(e,t,i={}){const s={id:e};return await this.privateDeleteExchangeOrdersId(this.extend(s,i))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();const e=this.nonce().toString();let t="";"GET"===i?Object.keys(n).length&&(o+="?"+this.urlencode(this.keysort(n))):Object.keys(n).length&&(t=a=this.urlencode(this.keysort(n)));const s=e+o+t;r={"Content-Type":"application/x-www-form-urlencoded","ACCESS-KEY":this.apiKey,"ACCESS-NONCE":e,"ACCESS-SIGNATURE":this.hmac(this.encode(s),this.encode(this.secret))}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},r,o){const n=await this.fetch2(e,t,i,s,r,o);if("public"===t)return n;if("success"in n&&n.success)return n;throw new a(this.id+" "+this.json(n))}}},NCU5:function(e,t,i){"use strict";var s=i("pRMk").Buffer,r=i("2AsB"),a=s.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),o=s.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);t.privateKeyExport=function(e,t,i){var r=s.from(i?a:o);return e.copy(r,i?8:9),t.copy(r,i?181:214),r},t.privateKeyImport=function(e){var t=e.length,i=0;if(!(t<i+1||48!==e[i])&&!(t<(i+=1)+1)&&128&e[i]){var s=127&e[i];if(i+=1,!(s<1||s>2)&&!(t<i+s)){var r=e[i+s-1]|(s>1?e[i+s-2]<<8:0);if(!(t<(i+=s)+r)&&!(t<i+3||2!==e[i]||1!==e[i+1]||1!==e[i+2])&&!(t<(i+=3)+2||4!==e[i]||e[i+1]>32||t<i+2+e[i+1]))return e.slice(i+2,i+2+e[i+1])}}},t.signatureExport=function(e){for(var t=s.concat([s.from([0]),e.r]),i=33,a=0;i>1&&0===t[a]&&!(128&t[a+1]);--i,++a);for(var o=s.concat([s.from([0]),e.s]),n=33,d=0;n>1&&0===o[d]&&!(128&o[d+1]);--n,++d);return r.encode(t.slice(a),o.slice(d))},t.signatureImport=function(e){var t=s.alloc(32,0),i=s.alloc(32,0);try{var a=r.decode(e);if(33===a.r.length&&0===a.r[0]&&(a.r=a.r.slice(1)),a.r.length>32)throw new Error("R length is too long");if(33===a.s.length&&0===a.s[0]&&(a.s=a.s.slice(1)),a.s.length>32)throw new Error("S length is too long")}catch(o){return}return a.r.copy(t,32-a.r.length),a.s.copy(i,32-a.s.length),{r:t,s:i}},t.signatureImportLax=function(e){var t=s.alloc(32,0),i=s.alloc(32,0),r=e.length,a=0;if(48===e[a++]){var o=e[a++];if(!(128&o&&(a+=o-128)>r)&&2===e[a++]){var n=e[a++];if(128&n){if(a+(o=n-128)>r)return;for(;o>0&&0===e[a];a+=1,o-=1);for(n=0;o>0;a+=1,o-=1)n=(n<<8)+e[a]}if(!(n>r-a)){var d=a;if(a+=n,2===e[a++]){var c=e[a++];if(128&c){if(a+(o=c-128)>r)return;for(;o>0&&0===e[a];a+=1,o-=1);for(c=0;o>0;a+=1,o-=1)c=(c<<8)+e[a]}if(!(c>r-a)){var h=a;for(a+=c;n>0&&0===e[d];n-=1,d+=1);if(!(n>32)){var l=e.slice(d,d+n);for(l.copy(t,32-l.length);c>0&&0===e[h];c-=1,h+=1);if(!(c>32)){var u=e.slice(h,h+c);return u.copy(i,32-u.length),{r:t,s:i}}}}}}}}}},NQdM:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,AuthenticationError:a,InvalidNonce:o,InsufficientFunds:n,InvalidOrder:d,OrderNotFound:c,DDoSProtection:h}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinegg",name:"CoinEgg",countries:["CN","UK"],has:{fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:"emulated",fetchMyTrades:!1,fetchTickers:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/36770310-adfa764e-1c5a-11e8-8e09-449daac3d2fb.jpg",api:{web:"https://trade.coinegg.com/web",rest:"https://api.coinegg.com/api/v1"},www:"https://www.coinegg.com",doc:"https://www.coinegg.com/explain.api.html",fees:"https://www.coinegg.com/fee.html",referral:"https://www.coinegg.com/user/register?invite=523218"},api:{web:{get:["symbol/ticker?right_coin={quote}","{quote}/trends","{quote}/{base}/order","{quote}/{base}/trades","{quote}/{base}/depth.js"]},public:{get:["ticker/region/{quote}","depth/region/{quote}","orders/region/{quote}"]},private:{post:["balance","trade_add/region/{quote}","trade_cancel/region/{quote}","trade_view/region/{quote}","trade_list/region/{quote}"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:.008,BCH:.002,LTC:.001,ETH:.01,ETC:.01,NEO:0,QTUM:"1%",XRP:"1%",DOGE:"1%",LSK:"1%",XAS:"1%",BTS:"1%",GAME:"1%",GOOC:"1%",NXT:"1%",IFC:"1%",DNC:"1%",BLK:"1%",VRC:"1%",XPM:"1%",VTC:"1%",TFC:"1%",PLC:"1%",EAC:"1%",PPC:"1%",FZ:"1%",ZET:"1%",RSS:"1%",PGC:"1%",SKT:"1%",JBC:"1%",RIO:"1%",LKC:"1%",ZCC:"1%",MCC:"1%",QEC:"1%",MET:"1%",YTC:"1%",HLB:"1%",MRYC:"1%",MTC:"1%",KTC:0}}},exceptions:{103:a,104:a,105:a,106:o,200:n,201:d,202:d,203:c,402:h},errorMessages:{100:"Required parameters can not be empty",101:"Illegal parameter",102:"coin does not exist",103:"Key does not exist",104:"Signature does not match",105:"Insufficient permissions",106:"Request expired(nonce error)",200:"Lack of balance",201:"Too small for the number of trading",202:"Price must be in 0 - 1000000",203:"Order does not exist",204:"Pending order amount must be above 0.001 BTC",205:"Restrict pending order prices",206:"Decimal place error",401:"System error",402:"Requests are too frequent",403:"Non-open API",404:"IP restriction does not request the resource",405:"Currency transactions are temporarily closed"},options:{quoteIds:["btc","eth","usc","usdt"]},commonCurrencies:{JBC:"JubaoCoin"}})}async fetchMarkets(e={}){const t=this.options.quoteIds,i=[];for(let s=0;s<t.length;s++){const e=t[s],r=await this.webGetSymbolTickerRightCoinQuote({quote:e}),a=this.safeValue(r,"data",[]);for(let t=0;t<a.length;t++){const s=a[t],r=s.symbol,o=r.split("_")[0];let n=o.toUpperCase(),d=e.toUpperCase();n=this.safeCurrencyCode(n),d=this.safeCurrencyCode(d);const c=n+"/"+d,h={amount:8,price:8};i.push({id:r,symbol:c,base:n,quote:d,baseId:o,quoteId:e,active:!0,precision:h,limits:{amount:{min:Math.pow(10,-h.amount),max:Math.pow(10,h.amount)},price:{min:Math.pow(10,-h.price),max:Math.pow(10,h.price)},cost:{min:void 0,max:void 0}},info:s})}}return i}parseTicker(e,t){const i=t.symbol,s=this.milliseconds(),r=this.safeFloat(e,"last"),a=this.safeFloat(e,"change");let o=void 0,n=void 0,d=void 0;if(void 0!==a){const e=a/100;o=r/this.sum(1,e),n=r-o,d=this.sum(r,o)/2}return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:o,close:r,last:r,previousClose:void 0,change:n,percentage:a,average:d,baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"quoteVol"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={coin:i.baseId,quote:i.quoteId},r=await this.publicGetTickerRegionQuote(this.extend(s,t));return this.parseTicker(r,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={coin:s.baseId,quote:s.quoteId},a=await this.publicGetDepthRegionQuote(this.extend(r,i));return this.parseOrderBook(a)}parseTrade(e,t){const i=this.safeTimestamp(e,"date"),s=this.safeFloat(e,"price"),r=this.safeFloat(e,"amount"),a=t.symbol;let o=void 0;void 0!==r&&void 0!==s&&(o=this.costToPrecision(a,s*r));const n=this.safeString(e,"type");return{id:this.safeString(e,"tid"),info:e,timestamp:i,datetime:this.iso8601(i),symbol:a,order:void 0,type:"limit",side:n,takerOrMaker:void 0,price:s,amount:r,cost:o,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={coin:r.baseId,quote:r.quoteId},o=await this.publicGetOrdersRegionQuote(this.extend(a,s));return this.parseTrades(o,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostBalance(e),i={info:t},s=this.safeValue(t,"data",{}),r=this.omit(s,"uid"),a=Object.keys(r);for(let o=0;o<a.length;o++){const e=a[o],[t,s]=e.split("_"),n=this.safeCurrencyCode(t);n in i||(i[n]=this.account());const d="lock"===s?"used":"free";i[n][d]=this.safeFloat(r,e)}return this.parseBalance(i)}parseOrder(e,t){let i=void 0;void 0!==t&&(i=t.symbol);const s=this.parse8601(this.safeString(e,"datetime")),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount_original"),o=this.safeFloat(e,"amount_outstanding");let n=void 0;void 0!==a&&void 0!==o&&(n=a-o);let d=this.safeString(e,"status");d="cancelled"===d?"canceled":o?"open":"closed";const c=this.safeValue(e,"info",e),h=this.safeString(e,"type");return{id:this.safeString(e,"id"),clientOrderId:void 0,datetime:this.iso8601(s),timestamp:s,lastTradeTimestamp:void 0,status:d,symbol:i,type:"limit",side:h,price:r,cost:void 0,amount:a,filled:n,remaining:o,trades:void 0,fee:void 0,info:c}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),n={coin:o.baseId,quote:o.quoteId,type:i,amount:s,price:r},d=await this.privatePostTradeAddRegionQuote(this.extend(n,a)),c=this.safeString(d,"id"),h=this.parseOrder({id:c,datetime:this.ymdhms(this.milliseconds()),amount_original:s,amount_outstanding:s,price:r,type:i,info:d},o);return this.orders[c]=h,h}async cancelOrder(e,t,i={}){await this.loadMarkets();const s=this.market(t),r={id:e,coin:s.baseId,quote:s.quoteId};return await this.privatePostTradeCancelRegionQuote(this.extend(r,i))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s=this.market(t),r={id:e,coin:s.baseId,quote:s.quoteId},a=await this.privatePostTradeViewRegionQuote(this.extend(r,i));return this.parseOrder(a.data,s)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={coin:r.baseId,quote:r.quoteId};void 0!==t&&(a.since=t/1e3);const o=await this.privatePostTradeListRegionQuote(this.extend(a,s));return this.parseOrders(o.data,r,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({type:"open"},s))}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="rest";"web"===t&&(o=t);let n=this.urls.api[o]+"/"+this.implodeParams(e,s),d=this.omit(s,this.extractParams(e));if("public"===t||"web"===t)Object.keys(d).length&&(n+="?"+this.urlencode(d));else{this.checkRequiredCredentials(),d=this.urlencode(this.extend({key:this.apiKey,nonce:this.nonce()},d));const e=this.hash(this.encode(this.secret));d+="&signature="+this.hmac(this.encode(d),this.encode(e)),"GET"===i?n+="?"+d:(r={"Content-type":"application/x-www-form-urlencoded"},a=d)}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,c){if(void 0===n)return;const h=this.safeValue(n,"result");if(void 0===h)return;if(!0===h)return;const l=this.safeString(n,"code"),u=this.errorMessages,f=this.safeString(u,l,"Unknown Error"),p=this.id+" "+f;throw this.throwExactlyMatchedException(this.exceptions,l,p),new r(this.id+" "+f)}}},"NY/1":function(e,t,i){var s=i("zkTx").Buffer;e.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"===typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(s.isBuffer(e)){for(var t=new Uint8Array(e.length),i=e.length,r=0;r<i;r++)t[r]=e[r];return t.buffer}throw new Error("Argument must be a Buffer")}},OacK:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,NotSupported:a,AuthenticationError:o}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"xbtce",name:"xBTCe",countries:["RU"],rateLimit:2e3,version:"v1",has:{CORS:!1,fetchTickers:!0,createMarketOrder:!1,fetchOHLCV:!1},urls:{referral:"https://xbtce.com/?agent=XX97BTCXXXG687021000B",logo:"https://user-images.githubusercontent.com/1294454/28059414-e235970c-662c-11e7-8c3a-08e31f78684b.jpg",api:"https://cryptottlivewebapi.xbtce.net:8443/api",www:"https://www.xbtce.com",doc:["https://www.xbtce.com/tradeapi","https://support.xbtce.info/Knowledgebase/Article/View/52/25/xbtce-exchange-api"]},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["currency","currency/{filter}","level2","level2/{filter}","quotehistory/{symbol}/{periodicity}/bars/ask","quotehistory/{symbol}/{periodicity}/bars/bid","quotehistory/{symbol}/level2","quotehistory/{symbol}/ticks","symbol","symbol/{filter}","tick","tick/{filter}","ticker","ticker/{filter}","tradesession"]},private:{get:["tradeserverinfo","tradesession","currency","currency/{filter}","level2","level2/{filter}","symbol","symbol/{filter}","tick","tick/{filter}","account","asset","asset/{id}","position","position/{id}","trade","trade/{id}","quotehistory/{symbol}/{periodicity}/bars/ask","quotehistory/{symbol}/{periodicity}/bars/ask/info","quotehistory/{symbol}/{periodicity}/bars/bid","quotehistory/{symbol}/{periodicity}/bars/bid/info","quotehistory/{symbol}/level2","quotehistory/{symbol}/level2/info","quotehistory/{symbol}/periodicities","quotehistory/{symbol}/ticks","quotehistory/{symbol}/ticks/info","quotehistory/cache/{symbol}/{periodicity}/bars/ask","quotehistory/cache/{symbol}/{periodicity}/bars/bid","quotehistory/cache/{symbol}/level2","quotehistory/cache/{symbol}/ticks","quotehistory/symbols","quotehistory/version"],post:["trade","tradehistory"],put:["trade"],delete:["trade"]}},commonCurrencies:{DSH:"DASH"}})}async fetchMarkets(e={}){const t=await this.privateGetSymbol(e),i=[];for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"Symbol"),a=this.safeString(e,"MarginCurrency"),o=this.safeString(e,"ProfitCurrency"),n=this.safeCurrencyCode(a),d=this.safeCurrencyCode(o);let c=n+"/"+d;c=e.IsTradeAllowed?c:r,i.push({id:r,symbol:c,base:n,quote:d,baseId:a,quoteId:o,info:e})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAsset(e),i={info:t};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"Currency"),a=this.safeCurrencyCode(r),o={free:this.safeFloat(e,"FreeAmount"),used:this.safeFloat(e,"LockedAmount"),total:this.safeFloat(e,"Amount")};i[a]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={filter:this.market(e).id},r=(await this.privateGetLevel2Filter(this.extend(s,i)))[0],a=this.safeInteger(r,"Timestamp");return this.parseOrderBook(r,a,"Bids","Asks","Price","Volume")}parseTicker(e,t){let i=0,s=void 0;"LastBuyTimestamp"in e&&i<e.LastBuyTimestamp&&(i=e.LastBuyTimestamp,s=e.LastBuyPrice),"LastSellTimestamp"in e&&i<e.LastSellTimestamp&&(i=e.LastSellTimestamp,s=e.LastSellPrice),i||(i=this.milliseconds());let r=void 0;return t&&(r=t.symbol),{symbol:r,timestamp:i,datetime:this.iso8601(i),high:e.DailyBestBuyPrice,low:e.DailyBestSellPrice,bid:e.BestBid,bidVolume:void 0,ask:e.BestAsk,askVolume:void 0,vwap:void 0,open:void 0,close:s,last:s,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:e.DailyTradedTotalVolume,quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t),s=this.indexBy(i,"Symbol"),r=Object.keys(s),a={};for(let o=0;o<r.length;o++){const e=r[o];let t=void 0,i=void 0;if(e in this.markets_by_id)t=this.markets_by_id[e],i=t.symbol;else{const t=e.slice(0,3),s=e.slice(3,6);i=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(s)}const n=s[e];a[i]=this.parseTicker(n,t)}return a}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={filter:i.id},a=await this.publicGetTickerFilter(this.extend(s,t));if(a.length<1)throw new r(this.id+" fetchTicker returned empty response, xBTCe public API error");const o=this.indexBy(a,"Symbol")[i.id];return this.parseTicker(o,i)}async fetchTrades(e,t,i,s={}){return await this.loadMarkets(),await this.privateGetTrade(s)}parseOHLCV(e,t,i="1m",s,r){return[e.Timestamp,e.Open,e.High,e.Low,e.Close,e.Volume]}async fetchOHLCV(e,t="1m",i,s,r={}){throw new a(this.id+" fetchOHLCV is disabled by the exchange")}async createOrder(e,t,i,s,a,o={}){if(await this.loadMarkets(),"market"===t)throw new r(this.id+" allows limit orders only");const n={pair:this.marketId(e),type:i,amount:s,rate:a},d=await this.privatePostTrade(this.extend(n,o));return{info:d,id:d.Id.toString()}}async cancelOrder(e,t,i={}){const s={Type:"Cancel",Id:e};return await this.privateDeleteTrade(this.extend(s,i))}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){if(!this.apiKey)throw new o(this.id+" requires apiKey for all requests, their public API is always busy");if(!this.uid)throw new o(this.id+" requires uid property for authentication and trading, their public API is always busy");let n=this.urls.api+"/"+this.version;"public"===t&&(n+="/"+t),n+="/"+this.implodeParams(e,s);const d=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(d).length&&(n+="?"+this.urlencode(d));else{this.checkRequiredCredentials(),r={"Accept-Encoding":"gzip, deflate"};const e=this.nonce().toString();"POST"===i&&(Object.keys(d).length?(r["Content-Type"]="application/json",a=this.json(d)):n+="?"+this.urlencode(d));let t=e+this.uid+this.apiKey+i+n;a&&(t+=a);const s=this.hmac(this.encode(t),this.encode(this.secret),"sha256","base64"),o=this.uid+":"+this.apiKey+":"+e+":"+this.decode(s);r.Authorization="HMAC "+o}return{url:n,method:i,body:a,headers:r}}}},OjXq:function(e,t,i){"use strict";(function(t){const s=i("cdDq"),{isNode:r,keys:a,values:o,deepExtend:n,extend:d,clone:c,flatten:h,unique:l,indexBy:u,sortBy:f,groupBy:p,aggregate:m,uuid:y,unCamelCase:b,precisionFromString:v,throttle:g,capitalize:w,now:k,timeout:_,TimedOut:T,buildOHLCVC:O,decimalToPrecision:x,defaultFetch:S}=s,{ExchangeError:C,BadSymbol:I,InvalidAddress:E,NotSupported:M,AuthenticationError:A,DDoSProtection:F,RequestTimeout:B,ExchangeNotAvailable:P,RateLimitExceeded:q}=i("ucJe"),{TRUNCATE:L,ROUND:D,DECIMAL_PLACES:V}=s.precisionConstants,R=i("tk5I");let G=void 0,N=void 0;try{G=i("QaXa"),N=i("LOya")}catch(H){}e.exports=class e{describe(){return{id:void 0,name:void 0,countries:void 0,enableRateLimit:!1,rateLimit:2e3,certified:!1,pro:!1,has:{cancelAllOrders:!1,cancelOrder:!0,cancelOrders:!1,CORS:!1,createDepositAddress:!1,createLimitOrder:!0,createMarketOrder:!0,createOrder:!0,deposit:!1,editOrder:"emulated",fetchBalance:!0,fetchBidsAsks:!1,fetchClosedOrders:!1,fetchCurrencies:!1,fetchDepositAddress:!1,fetchDeposits:!1,fetchFundingFees:!1,fetchL2OrderBook:!0,fetchLedger:!1,fetchMarkets:!0,fetchMyTrades:!1,fetchOHLCV:"emulated",fetchOpenOrders:!1,fetchOrder:!1,fetchOrderBook:!0,fetchOrderBooks:!1,fetchOrders:!1,fetchOrderTrades:!1,fetchStatus:"emulated",fetchTicker:!0,fetchTickers:!1,fetchTime:!1,fetchTrades:!0,fetchTradingFee:!1,fetchTradingFees:!1,fetchTradingLimits:!1,fetchTransactions:!1,fetchWithdrawals:!1,privateAPI:!0,publicAPI:!0,withdraw:!1},urls:{logo:void 0,api:void 0,www:void 0,doc:void 0,fees:void 0},api:void 0,requiredCredentials:{apiKey:!0,secret:!0,uid:!1,login:!1,password:!1,twofa:!1,privateKey:!1,walletAddress:!1,token:!1},markets:void 0,currencies:{},timeframes:void 0,fees:{trading:{tierBased:void 0,percentage:void 0,taker:void 0,maker:void 0},funding:{tierBased:void 0,percentage:void 0,withdraw:{},deposit:{}}},status:{status:"ok",updated:void 0,eta:void 0,url:void 0},exceptions:void 0,httpExceptions:{422:C,418:F,429:q,404:P,409:P,410:P,500:P,501:P,502:P,520:P,521:P,522:P,525:P,526:P,400:P,403:P,405:P,503:P,530:P,408:B,504:B,401:A,511:A},dontGetUsedBalanceFromStaleCache:!1,commonCurrencies:{XBT:"BTC",BCC:"BCH",DRK:"DASH",BCHABC:"BCH",BCHSV:"BSV"},precisionMode:V,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}}}constructor(e={}){Object.assign(this,s),this.options={},this.fetchOptions={},this.userAgents={chrome:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36",chrome39:"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.71 Safari/537.36"},this.headers={},this.proxy="",this.origin="*",this.minFundingAddressLength=1,this.substituteCommonCurrencyCodes=!0,this.fetchImplementation=S,this.timeout=1e4,this.verbose=!1,this.debug=!1,this.userAgent=void 0,this.twofa=void 0,this.apiKey=void 0,this.secret=void 0,this.uid=void 0,this.login=void 0,this.password=void 0,this.privateKey=void 0,this.walletAddress=void 0,this.token=void 0,this.balance={},this.orderbooks={},this.tickers={},this.orders={},this.trades={},this.transactions={},this.ohlcvs={},this.requiresWeb3=!1,this.precision={},this.enableLastJsonResponse=!0,this.enableLastHttpResponse=!0,this.enableLastResponseHeaders=!0,this.last_http_response=void 0,this.last_json_response=void 0,this.last_response_headers=void 0;const t=(e=this)=>{if(null!==e){for(const t of Object.getOwnPropertyNames(e))this[b(t)]=this[t];t(Object.getPrototypeOf(e))}};t();const i=n(this.describe(),e);for(const[s,r]of Object.entries(i))this[s]=n(this[s],r);this.httpAgent||(this.httpAgent=S.http?new S.http.Agent({keepAlive:!0}):void 0),this.httpsAgent||(this.httpsAgent=S.https?new S.https.Agent({keepAlive:!0}):void 0);for(const s in this.has)this["has"+w(s)]=!!this.has[s];this.api&&this.defineRestApi(this.api,"request"),this.initRestRateLimiter(),this.markets&&this.setMarkets(this.markets)}defaults(){return{}}nonce(){return this.seconds()}encodeURIComponent(...e){return encodeURIComponent(...e)}checkRequiredCredentials(e=!0){const t=Object.keys(this.requiredCredentials);for(let i=0;i<t.length;i++){const s=t[i];if(this.requiredCredentials[s]&&!this[s]){if(e)throw new A(this.id+" requires `"+s+"` credential");return e}}return!0}checkAddress(e){if(void 0===e)throw new E(this.id+" address is undefined");if(1===l(e).length||e.length<this.minFundingAddressLength||e.includes(" "))throw new E(this.id+" address is invalid or has less than "+this.minFundingAddressLength.toString()+' characters: "'+this.json(e)+'"');return e}initRestRateLimiter(){if(void 0===this.rateLimit)throw new Error(this.id+".rateLimit property is not configured");this.tokenBucket=this.extend({delay:1,capacity:1,defaultCost:1,maxCapacity:1e3},this.tokenBucket),this.throttle=g(this.tokenBucket),this.executeRestRequest=(e,t="GET",i,s)=>{const a=this.fetchImplementation,o={method:t,headers:i,body:s,timeout:this.timeout};this.agent?(this.agent.keepAlive=!0,o.agent=this.agent):this.httpAgent&&0===e.indexOf("http://")?o.agent=this.httpAgent:this.httpsAgent&&0===e.indexOf("https://")&&(o.agent=this.httpsAgent);const n=a(e,this.extend(o,this.fetchOptions)).catch(i=>{if(r)throw new P([this.id,t,e,i.type,i.message].join(" "));throw i}).then(r=>this.handleRestResponse(r,e,t,i,s));return _(this.timeout,n).catch(i=>{if(i instanceof T)throw new B(this.id+" "+t+" "+e+" request timed out ("+this.timeout+" ms)");throw i})}}setSandboxMode(e){if(e){if(!("test"in this.urls))throw new M(this.id+" does not have a sandbox URL");"string"===typeof this.urls.api?(this.urls.api_backup=this.urls.api,this.urls.api=this.urls.test):(this.urls.api_backup=c(this.urls.api),this.urls.api=c(this.urls.test))}else"api_backup"in this.urls&&("string"===typeof this.urls.api?this.urls.api=this.urls.api_backup:this.urls.api=c(this.urls.api_backup))}defineRestApi(e,t,i={}){for(const s of Object.keys(e))for(const r of Object.keys(e[s])){let a=e[s][r];for(let e=0;e<a.length;e++){let o=a[e].trim(),n=o.split(/[^a-zA-Z0-9]/),d=r.toUpperCase(),c=r.toLowerCase(),h=this.capitalize(c),l=n.map(this.capitalize).join(""),u=n.map(e=>e.trim().toLowerCase()).filter(e=>e.length>0).join("_"),f=s+h+this.capitalize(l),p=s+"_"+c+"_"+u;"suffixes"in i&&("camelcase"in i.suffixes&&(f+=i.suffixes.camelcase),"underscore"in i.suffixes&&(p+=i.suffixes.underscore)),"underscore_suffix"in i&&(p+=i.underscoreSuffix),"camelcase_suffix"in i&&(f+=i.camelcaseSuffix);let m=async e=>this[t](o,s,d,e||{});this[f]=m,this[p]=m}}}print(...e){console.log(...e)}fetch(e,t="GET",i,s){return r&&this.userAgent&&("string"===typeof this.userAgent?i=d({"User-Agent":this.userAgent},i):"object"===typeof this.userAgent&&"User-Agent"in this.userAgent&&(i=d(this.userAgent,i))),"function"===typeof this.proxy?(e=this.proxy(e),r&&(i=d({Origin:this.origin},i))):"string"===typeof this.proxy&&(this.proxy.length&&r&&(i=d({Origin:this.origin},i)),e=this.proxy+e),i=d(this.headers,i),this.verbose&&this.print("fetch:\n",this.id,t,e,"\nRequest:\n",i,"\n",s,"\n"),this.executeRestRequest(e,t,i,s)}async fetch2(e,t="public",i="GET",s={},r,a){this.enableRateLimit&&await this.throttle(this.rateLimit);const o=this.sign(e,t,i,s,r,a);return this.fetch(o.url,o.method,o.headers,o.body)}request(e,t="public",i="GET",s={},r,a){return this.fetch2(e,t,i,s,r,a)}parseJson(e){try{if(this.isJsonEncodedObject(e))return JSON.parse(e)}catch(H){return}}throwExactlyMatchedException(e,t,i){if(t in e)throw new e[t](i)}throwBroadlyMatchedException(e,t,i){const s=this.findBroadlyMatchedKey(e,t);if(void 0!==s)throw new e[s](i)}findBroadlyMatchedKey(e,t){const i=Object.keys(e);for(let s=0;s<i.length;s++){const e=i[s];if(t.indexOf(e)>=0)return e}}handleErrors(e,t,i,s,r,a,o,n,d){}defaultErrorHandler(e,t,i,s,r,a,o){if(e>=200&&e<=299)return;let n=a;const d=e.toString();let c=void 0;if(d in this.httpExceptions&&(c=this.httpExceptions[d]),void 0===o){const e=a.match(/offline|busy|retry|wait|unavailable|maintain|maintenance|maintenancing/i),t=a.match(/cloudflare|incapsula|overload|ddos/i);e&&(c=P,n+=" offline, on maintenance, or unreachable from this location at the moment"),t&&(c=F)}if(c===P&&(n+=" (possible reasons: "+["invalid API keys","bad or old nonce","exchange is down or offline","on maintenance","DDoS protection","rate-limiting"].join(", ")+")"),void 0!==c)throw new c([this.id,s,i,e,t,n].join(" "))}getResponseHeaders(e){const t={};return e.headers.forEach((e,i)=>{i=i.split("-").map(e=>w(e)).join("-"),t[i]=e}),t}handleRestResponse(e,t,i="GET",s,r){return e.text().then(a=>{const o=this.parseJson(a),n=this.getResponseHeaders(e);return this.enableLastResponseHeaders&&(this.last_response_headers=n),this.enableLastHttpResponse&&(this.last_http_response=a),this.enableLastJsonResponse&&(this.last_json_response=o),this.verbose&&this.print("handleRestResponse:\n",this.id,i,t,e.status,e.statusText,"\nResponse:\n",n,"\n",a,"\n"),this.handleErrors(e.status,e.statusText,t,i,n,a,o,s,r),this.defaultErrorHandler(e.status,e.statusText,t,i,n,a,o),o||a})}setMarkets(e,t){const i=Object.values(e).map(e=>n({limits:this.limits,precision:this.precision},this.fees.trading,e));if(this.markets=u(i,"symbol"),this.marketsById=u(e,"id"),this.markets_by_id=this.marketsById,this.symbols=Object.keys(this.markets).sort(),this.ids=Object.keys(this.markets_by_id).sort(),t)this.currencies=n(t,this.currencies);else{let e=i.filter(e=>"base"in e).map(e=>({id:e.baseId||e.base,numericId:void 0!==e.baseNumericId?e.baseNumericId:void 0,code:e.base,precision:e.precision?e.precision.base||e.precision.amount:8})),t=i.filter(e=>"quote"in e).map(e=>({id:e.quoteId||e.quote,numericId:void 0!==e.quoteNumericId?e.quoteNumericId:void 0,code:e.quote,precision:e.precision?e.precision.quote||e.precision.price:8}));e=f(e,"code"),t=f(t,"code"),this.baseCurrencies=u(e,"code"),this.quoteCurrencies=u(t,"code");const s=e.concat(t),r=p(s,"code"),a=Object.keys(r).map(e=>r[e].reduce((e,t)=>e.precision>t.precision?e:t,r[e][0])),o=f(h(a),"code");this.currencies=n(u(o,"code"),this.currencies)}return this.currencies_by_id=u(this.currencies,"id"),this.markets}async loadMarketsHelper(e=!1,t={}){if(!e&&this.markets)return this.markets_by_id?this.markets:this.setMarkets(this.markets);let i=void 0;this.has.fetchCurrencies&&(i=await this.fetchCurrencies());const s=await this.fetchMarkets(t);return this.setMarkets(s,i)}loadMarkets(e=!1,t={}){return(e&&!this.reloadingMarkets||!this.marketsLoading)&&(this.reloadingMarkets=!0,this.marketsLoading=this.loadMarketsHelper(e,t).then(e=>(this.reloadingMarkets=!1,e),e=>{throw this.reloadingMarkets=!1,e})),this.marketsLoading}async loadAccounts(e=!1,t={}){if(e)this.accounts=await this.fetchAccounts(t);else{if(this.accounts)return this.accounts;this.accounts=await this.fetchAccounts(t)}return this.accountsById=this.indexBy(this.accounts,"id"),this.accounts}fetchBidsAsks(e,t={}){throw new M(this.id+" fetchBidsAsks not supported yet")}async fetchOHLCVC(e,t="1m",i,s,r={}){if(!this.has.fetchTrades)throw new M(this.id+" fetchOHLCV() not supported yet");await this.loadMarkets();const a=await this.fetchTrades(e,i,s,r);return O(a,t,i,s)}async fetchOHLCV(e,t="1m",i,s,r={}){if(!this.has.fetchTrades)throw new M(this.id+" fetchOHLCV() not supported yet");await this.loadMarkets();const a=await this.fetchTrades(e,i,s,r);return O(a,t,i,s).map(e=>e.slice(0,-1))}parseTradingViewOHLCV(e,t,i="1m",s,r){const a=this.convertTradingViewToOHLCV(e);return this.parseOHLCVs(a,t,i,s,r)}convertTradingViewToOHLCV(e,t="t",i="o",s="h",r="l",a="c",o="v",n=!1){const d=[];for(let c=0;c<e[t].length;c++)d.push([n?e[t][c]:1e3*e[t][c],e[i][c],e[s][c],e[r][c],e[a][c],e[o][c]]);return d}convertOHLCVToTradingView(e,t="t",i="o",s="h",r="l",a="c",o="v",n=!1){const d={};d[t]=[],d[i]=[],d[s]=[],d[r]=[],d[a]=[],d[o]=[];for(let c=0;c<e.length;c++)d[t].push(n?e[c][0]:parseInt(e[c][0]/1e3)),d[i].push(e[c][1]),d[s].push(e[c][2]),d[r].push(e[c][3]),d[a].push(e[c][4]),d[o].push(e[c][5]);return d}fetchTicker(e,t={}){throw new M(this.id+" fetchTicker not supported yet")}fetchTickers(e,t={}){throw new M(this.id+" fetchTickers not supported yet")}purgeCachedOrders(e){const t=Object.values(this.orders).filter(t=>"open"===t.status||t.timestamp>=e);return this.orders=u(t,"id"),this.orders}fetchOrder(e,t,i={}){throw new M(this.id+" fetchOrder not supported yet")}fetchOrders(e,t,i,s={}){throw new M(this.id+" fetchOrders not supported yet")}fetchOpenOrders(e,t,i,s={}){throw new M(this.id+" fetchOpenOrders not supported yet")}fetchClosedOrders(e,t,i,s={}){throw new M(this.id+" fetchClosedOrders not supported yet")}fetchMyTrades(e,t,i,s={}){throw new M(this.id+" fetchMyTrades not supported yet")}fetchTransactions(e,t,i,s={}){throw new M(this.id+" fetchTransactions not supported yet")}fetchDeposits(e,t,i,s={}){throw new M(this.id+" fetchDeposits not supported yet")}fetchWithdrawals(e,t,i,s={}){throw new M(this.id+" fetchWithdrawals not supported yet")}fetchCurrencies(e={}){return new Promise((e,t)=>e(this.currencies))}fetchMarkets(e={}){return new Promise((e,t)=>e(Object.values(this.markets)))}async fetchOrderStatus(e,t,i={}){return(await this.fetchOrder(e,t,i)).status}account(){return{free:void 0,used:void 0,total:void 0}}commonCurrencyCode(e){return this.substituteCommonCurrencyCodes?this.safeString(this.commonCurrencies,e,e):e}currencyId(e){if(void 0===this.currencies)throw new C(this.id+" currencies not loaded");if(e in this.currencies)return this.currencies[e].id;const t={},i=Object.keys(this.commonCurrencies);for(let s=0;s<i.length;s++){const e=i[s];t[this.commonCurrencies[e]]=e}return this.safeString(t,e,e)}currency(e){if(void 0===this.currencies)throw new C(this.id+" currencies not loaded");if("string"===typeof e&&e in this.currencies)return this.currencies[e];throw new C(this.id+" does not have currency code "+e)}market(e){if(void 0===this.markets)throw new C(this.id+" markets not loaded");if("string"===typeof e&&e in this.markets)return this.markets[e];throw new I(this.id+" does not have market symbol "+e)}marketId(e){const t=this.market(e);return void 0!==t?t.id:e}marketIds(e){return e.map(e=>this.marketId(e))}symbol(e){return this.market(e).symbol||e}url(e,t={}){let i=this.implodeParams(e,t);const s=this.omit(t,this.extractParams(e));return Object.keys(s).length&&(i+="?"+this.urlencode(s)),i}parseBidAsk(e,t=0,i=1){return[parseFloat(e[t]),parseFloat(e[i])]}parseBidsAsks(e,t=0,i=1){return Object.values(e||[]).map(e=>this.parseBidAsk(e,t,i))}async fetchL2OrderBook(e,t,i={}){const s=await this.fetchOrderBook(e,t,i);return d(s,{bids:f(m(s.bids),0,!0),asks:f(m(s.asks),0)})}parseOrderBook(e,t,i="bids",s="asks",r=0,a=1){return{bids:f(i in e?this.parseBidsAsks(e[i],r,a):[],0,!0),asks:f(s in e?this.parseBidsAsks(e[s],r,a):[],0),timestamp:t,datetime:this.iso8601(t),nonce:void 0}}parseBalance(e){const t=Object.keys(this.omit(e,["info","free","used","total"]));e.free={},e.used={},e.total={};for(const i of t)void 0===e[i].total&&void 0!==e[i].free&&void 0!==e[i].used&&(e[i].total=this.sum(e[i].free,e[i].used)),void 0===e[i].free&&void 0!==e[i].total&&void 0!==e[i].used&&(e[i].free=this.sum(e[i].total,-e[i].used)),void 0===e[i].used&&void 0!==e[i].total&&void 0!==e[i].free&&(e[i].used=this.sum(e[i].total,-e[i].free)),e.free[i]=e[i].free,e.used[i]=e[i].used,e.total[i]=e[i].total;return e}async fetchPartialBalance(e,t={}){return(await this.fetchBalance(t))[e]}fetchFreeBalance(e={}){return this.fetchPartialBalance("free",e)}fetchUsedBalance(e={}){return this.fetchPartialBalance("used",e)}fetchTotalBalance(e={}){return this.fetchPartialBalance("total",e)}async fetchStatus(e={}){if(this.has.fetchTime){const t=await this.fetchTime(e);this.status=this.extend(this.status,{updated:t})}return this.status}async fetchTradingFees(e={}){throw new M(this.id+" fetchTradingFees not supported yet")}async fetchTradingFee(e,t={}){if(!this.has.fetchTradingFees)throw new M(this.id+" fetchTradingFee not supported yet");return await this.fetchTradingFees(t)}async loadTradingLimits(e,t=!1,i={}){if(this.has.fetchTradingLimits&&(t||!("limitsLoaded"in this.options))){const t=await this.fetchTradingLimits(e);for(let i=0;i<e.length;i++){const s=e[i];this.markets[s]=this.deepExtend(this.markets[s],t[s])}this.options.limitsLoaded=this.milliseconds()}return this.markets}filterBySinceLimit(e,t,i,s="timestamp",r=!1){const a=void 0!==t&&null!==t;return a&&(e=e.filter(e=>e[s]>=t)),void 0!==i&&null!==i&&(e=r&&!a?e.slice(-i):e.slice(0,i)),e}filterByValueSinceLimit(e,t,i,s,r,a="timestamp",o=!1){const n=void 0!==i&&null!==i,d=void 0!==s&&null!==s;return(n||d)&&(e=Object.values(e).filter(e=>(!n||e[t]===i)&&(!d||e[a]>=s))),void 0!==r&&null!==r&&(e=o&&!d?Object.values(e).slice(-r):Object.values(e).slice(0,r)),e}filterBySymbolSinceLimit(e,t,i,s){return this.filterByValueSinceLimit(e,"symbol",t,i,s)}filterByCurrencySinceLimit(e,t,i,s){return this.filterByValueSinceLimit(e,"currency",t,i,s)}filterByArray(e,t,i,s=!0){if(e=Object.values(e),void 0===i||null===i)return s?u(e,t):e;const r=[];for(let a=0;a<e.length;a++)i.includes(e[a][t])&&r.push(e[a]);return s?u(r,t):r}parseTrades(e,t,i,s,r={}){let a=Object.values(e||[]).map(e=>this.extend(this.parseTrade(e,t),r));a=f(a,"timestamp");const o=void 0!==t?t.symbol:void 0;return this.filterBySymbolSinceLimit(a,o,i,s)}parseTransactions(e,t,i,s,r={}){let a=Object.values(e||[]).map(e=>this.extend(this.parseTransaction(e,t),r));a=this.sortBy(a,"timestamp");const o=void 0!==t?t.code:void 0;return this.filterByCurrencySinceLimit(a,o,i,s)}parseLedger(e,t,i,s,r={}){let a=[];const o=Object.values(e||[]);for(let d=0;d<o.length;d++){const e=this.parseLedgerEntry(o[d],t);if(Array.isArray(e))for(let t=0;t<e.length;t++)a.push(this.extend(e[t],r));else a.push(this.extend(e,r))}a=this.sortBy(a,"timestamp");const n=void 0!==t?t.code:void 0;return this.filterByCurrencySinceLimit(a,n,i,s)}parseOrders(e,t,i,s,r={}){let a=Object.values(e).map(e=>this.extend(this.parseOrder(e,t),r));a=f(a,"timestamp");const o=void 0!==t?t.symbol:void 0;return this.filterBySymbolSinceLimit(a,o,i,s)}safeCurrencyCode(e,t){let i=void 0;return void 0!==e&&(i=void 0!==this.currencies_by_id&&e in this.currencies_by_id?this.currencies_by_id[e].code:this.commonCurrencyCode(e.toUpperCase())),void 0===i&&void 0!==t&&(i=t.code),i}filterBySymbol(e,t){return void 0!==t?e.filter(e=>e.symbol===t):e}parseOHLCV(e,t,i="1m",s,r){return Array.isArray(e)?e.slice(0,6):e}parseOHLCVs(e,t,i="1m",s,r){e=Object.values(e||[]);const a=[];for(let o=0;o<e.length&&!(r&&a.length>=r);o++){const n=this.parseOHLCV(e[o],t,i,s,r);s&&n[0]<s||a.push(n)}return this.sortBy(a,0)}editLimitBuyOrder(e,t,...i){return this.editLimitOrder(e,t,"buy",...i)}editLimitSellOrder(e,t,...i){return this.editLimitOrder(e,t,"sell",...i)}editLimitOrder(e,t,...i){return this.editOrder(e,t,"limit",...i)}async editOrder(e,t,...i){if(!this.enableRateLimit)throw new C(this.id+" editOrder() requires enableRateLimit = true");return await this.cancelOrder(e,t),this.createOrder(t,...i)}createLimitOrder(e,...t){return this.createOrder(e,"limit",...t)}createMarketOrder(e,...t){return this.createOrder(e,"market",...t)}createLimitBuyOrder(e,...t){return this.createOrder(e,"limit","buy",...t)}createLimitSellOrder(e,...t){return this.createOrder(e,"limit","sell",...t)}createMarketBuyOrder(e,t,i={}){return this.createOrder(e,"market","buy",t,void 0,i)}createMarketSellOrder(e,t,i={}){return this.createOrder(e,"market","sell",t,void 0,i)}costToPrecision(e,t){return x(t,D,this.markets[e].precision.price,this.precisionMode)}priceToPrecision(e,t){return x(t,D,this.markets[e].precision.price,this.precisionMode)}amountToPrecision(e,t){return x(t,L,this.markets[e].precision.amount,this.precisionMode)}feeToPrecision(e,t){return x(t,D,this.markets[e].precision.price,this.precisionMode)}currencyToPrecision(e,t){return x(t,D,this.currencies[e].precision,this.precisionMode)}calculateFee(e,t,i,s,r,a="taker",o={}){const n=this.markets[e],d=n[a],c=parseFloat(this.costToPrecision(e,s*r));return{type:a,currency:n.quote,rate:d,cost:parseFloat(this.feeToPrecision(e,d*c))}}static hasWeb3(){return N&&G}checkRequiredDependencies(){if(!e.hasWeb3())throw new C("Required dependencies missing: \nnpm i ethereumjs-util ethereumjs-abi --no-save")}soliditySha3(t){const i=[];for(const r of t)if(Number.isInteger(r)||r.match(/^[0-9]+$/))i.push(this.numberToBE(this.numberToString(r),32));else{const t=e.remove0xPrefix(r);40===t.length&&t.toLowerCase().match(/^[0-9a-f]+$/)?i.push(this.base16ToBinary(t)):i.push(this.stringToBinary(t))}const s=this.binaryConcatArray(i);return"0x"+this.hash(s,"keccak","hex")}getZeroExOrderHash(e){return this.soliditySha3([e.exchangeContractAddress,e.maker,e.taker,e.makerTokenAddress,e.takerTokenAddress,e.feeRecipient,e.makerTokenAmount,e.takerTokenAmount,e.makerFee,e.takerFee,e.expirationUnixTimestampSec,e.salt])}getZeroExOrderHashV2(e){const i="000000000000000000000000",s=G.soliditySHA3(["bytes","bytes","address"],[t.from("91ab3d17e3a50a9d89e63fd30b92be7f5336b03b287bb946787a83a9d62a2766f0f24618f4c4be1e62e026fb039a20ef96f4495294817d1027ffaa6d1f70e61ead7c5bef027816a800da1736444fb58a807ef4c9603b7848673f7e3a68eb14a5","hex"),t.from(i,"hex"),e.exchangeAddress]),r=G.soliditySHA3(["bytes","bytes","address","bytes","address","bytes","address","bytes","address","uint256","uint256","uint256","uint256","uint256","uint256","string","string"],[t.from("770501f88a26ede5c04a20ef877969e961eb11fc13b78aaf414b633da0d4f86f","hex"),t.from(i,"hex"),e.makerAddress,t.from(i,"hex"),e.takerAddress,t.from(i,"hex"),e.feeRecipientAddress,t.from(i,"hex"),e.senderAddress,e.makerAssetAmount,e.takerAssetAmount,e.makerFee,e.takerFee,e.expirationTimeSeconds,e.salt,N.keccak(t.from(e.makerAssetData.slice(2),"hex")),N.keccak(t.from(e.takerAssetData.slice(2),"hex"))]);return"0x"+N.keccak(t.concat([t.from("1901","hex"),s,r])).toString("hex")}signZeroExOrderV2(e,t){const i=this.getZeroExOrderHashV2(e),s=this.signMessage(i,t);return this.extend(e,{orderHash:i,signature:this.convertECSignatureToSignatureHex(s)})}convertECSignatureToSignatureHex(e){let t=e.v;return 27!==t&&28!==t&&(t+=27),"0x"+t.toString(16)+e.r.slice(-64)+e.s.slice(-64)+"03"}static remove0xPrefix(e){return"0x"===e.slice(0,2)?e.slice(2):e}hashMessage(t){const i=this.base16ToBinary(e.remove0xPrefix(t)),s=this.stringToBinary("\x19Ethereum Signed Message:\n"+i.sigBytes);return"0x"+this.hash(this.binaryConcat(s,i),"keccak","hex")}signHash(e,t){const i=this.ecdsa(e.slice(-64),t.slice(-64),"secp256k1",void 0);return{r:"0x"+i.r,s:"0x"+i.s,v:27+i.v}}signMessage(e,t){return this.signHash(this.hashMessage(e),t.slice(-64))}oath(){if("undefined"!==typeof this.twofa)return this.totp(this.twofa);throw new C(this.id+" this.twofa has not been set")}integerDivide(e,t){return new R(e).div(new R(t))}integerModulo(e,t){return new R(e).mod(new R(t))}integerPow(e,t){return new R(e).pow(new R(t))}}}).call(this,i("zkTx").Buffer)},PPJh:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,AuthenticationError:a,DDoSProtection:o,InvalidOrder:n,InsufficientFunds:d}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btcalpha",name:"BTC-Alpha",countries:["US"],version:"v1",has:{fetchTicker:!1,fetchOHLCV:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","4h":"240","1d":"D"},urls:{logo:"https://user-images.githubusercontent.com/1294454/42625213-dabaa5da-85cf-11e8-8f99-aa8f8f7699f0.jpg",api:"https://btc-alpha.com/api",www:"https://btc-alpha.com",doc:"https://btc-alpha.github.io/api-docs",fees:"https://btc-alpha.com/fees/",referral:"https://btc-alpha.com/?r=123788"},api:{public:{get:["currencies/","pairs/","orderbook/{pair_name}/","exchanges/","charts/{pair}/{type}/chart/"]},private:{get:["wallets/","orders/own/","order/{id}/","exchanges/own/","deposits/","withdraws/"],post:["order/","order-cancel/"]}},fees:{trading:{maker:.002,taker:.002},funding:{withdraw:{BTC:.00135,LTC:.0035,XMR:.018,ZEC:.002,ETH:.01,ETC:.01,SIB:1.5,CCRB:4,PZM:.05,ITI:.05,DCY:5,R:5,ATB:.05,BRIA:.05,KZC:.05,HWC:1,SPA:1,SMS:.001,REC:.01,SUP:1,BQ:100,GDS:.1,EVN:300,TRKC:.01,UNI:1,STN:1,BCH:void 0,QBIC:.5}}},commonCurrencies:{CBC:"Cashbery"},exceptions:{exact:{},broad:{"Out of balance":d}}})}async fetchMarkets(e={}){const t=await this.publicGetPairs(e),i=[];for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"name"),a=this.safeString(e,"currency1"),o=this.safeString(e,"currency2"),n=this.safeCurrencyCode(a),d=this.safeCurrencyCode(o),c=n+"/"+d,h={amount:8,price:this.safeInteger(e,"price_precision")};i.push({id:r,symbol:c,base:n,quote:d,active:!0,precision:h,limits:{amount:{min:this.safeFloat(e,"minimum_order_size"),max:this.safeFloat(e,"maximum_order_size")},price:{min:Math.pow(10,-h.price),max:Math.pow(10,h.price)},cost:{min:void 0,max:void 0}},info:e})}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair_name:this.marketId(e)};t&&(s.limit_sell=t,s.limit_buy=t);const r=await this.publicGetOrderbookPairName(this.extend(s,i));return this.parseOrderBook(r,void 0,"buy","sell","price","amount")}parseBidsAsks(e,t=0,i=1){const s=[];for(let r=0;r<e.length;r++){const a=e[r];a&&s.push(this.parseBidAsk(a,t,i))}return s}parseTrade(e,t){let i=void 0;void 0===t&&(t=this.safeValue(this.marketsById,e.pair)),void 0!==t&&(i=t.symbol);const s=this.safeTimestamp(e,"timestamp"),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount");let o=void 0;void 0!==r&&void 0!==a&&(o=parseFloat(this.costToPrecision(i,r*a)));const n=this.safeString2(e,"id","tid"),d=this.safeString2(e,"my_side","side"),c=this.safeString(e,"o_id");return{id:n,info:e,timestamp:s,datetime:this.iso8601(s),symbol:i,order:c,type:"limit",side:d,takerOrMaker:void 0,price:r,amount:a,cost:o,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==e&&(r=this.market(e),a.pair=r.id),void 0!==i&&(a.limit=i);const o=await this.publicGetExchanges(this.extend(a,s));return this.parseTrades(o,r,t,i)}parseOHLCV(e,t,i="5m",s,r){return[this.safeTimestamp(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchOHLCV(e,t="5m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={pair:a.id,type:this.timeframes[t]};void 0!==s&&(o.limit=s),void 0!==i&&(o.since=parseInt(i/1e3));const n=await this.publicGetChartsPairTypeChart(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetWallets(e),i={info:t};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"currency"),a=this.safeCurrencyCode(r),o=this.account();o.used=this.safeFloat(e,"reserve"),o.total=this.safeFloat(e,"balance"),i[a]=o}return this.parseBalance(i)}parseOrderStatus(e){return this.safeString({1:"open",2:"canceled",3:"closed"},e,e)}parseOrder(e,t){let i=void 0;void 0===t&&(t=this.safeValue(this.marketsById,e.pair)),void 0!==t&&(i=t.symbol);const s=this.safeTimestamp(e,"date"),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),o=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeString2(e,"oid","id");let d=this.safeValue(e,"trades",[]);d=this.parseTrades(d,t);const c=this.safeString2(e,"my_side","type");let h=void 0;const l=d.length;if(l>0){h=0;for(let e=0;e<l;e++)h=this.sum(h,d[e].amount)}let u=void 0;return void 0!==a&&a>0&&void 0!==h&&(u=Math.max(0,a-h)),{id:n,clientOrderId:void 0,datetime:this.iso8601(s),timestamp:s,status:o,symbol:i,type:"limit",side:c,price:r,cost:void 0,amount:a,filled:h,remaining:u,trades:d,fee:void 0,info:e}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),d={pair:o.id,type:i,amount:s,price:this.priceToPrecision(e,r)},c=await this.privatePostOrder(this.extend(d,a));if(!c.success)throw new n(this.id+" "+this.json(c));const h=this.parseOrder(c,o);return s=h.amount>0?h.amount:s,this.extend(h,{amount:s})}async cancelOrder(e,t,i={}){const s={order:e};return await this.privatePostOrderCancel(this.extend(s,i))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privateGetOrderId(this.extend(s,i));return this.parseOrder(r)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.market(e),r.pair=a.id),void 0!==i&&(r.limit=i);const o=await this.privateGetOrdersOwn(this.extend(r,s));return this.parseOrders(o,a,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"1"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"3"},s))}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};if(void 0!==e){const t=this.market(e);r.pair=t.id}void 0!==i&&(r.limit=i);const a=await this.privateGetExchangesOwn(this.extend(r,s));return this.parseTrades(a,void 0,t,i)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){const o=this.urlencode(this.keysort(this.omit(s,this.extractParams(e))));let n=this.urls.api+"/";if("charts/{pair}/{type}/chart/"!==e&&(n+="v1/"),n+=this.implodeParams(e,s),r={Accept:"application/json"},"public"===t)o.length&&(n+="?"+o);else{this.checkRequiredCredentials();let e=this.apiKey;"POST"===i?(r["Content-Type"]="application/x-www-form-urlencoded",e+=a=o):o.length&&(n+="?"+o),r["X-KEY"]=this.apiKey,r["X-SIGN"]=this.hmac(this.encode(e),this.encode(this.secret)),r["X-NONCE"]=this.nonce().toString()}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,n,d,c,h,l){if(void 0===c)return;const u=this.safeString(c,"error"),f=this.id+" "+d;if(void 0!==u&&(this.throwExactlyMatchedException(this.exceptions.exact,u,f),this.throwBroadlyMatchedException(this.exceptions.broad,u,f)),401===e||403===e)throw new a(f);if(429===e)throw new o(f);if(!(e<400))throw new r(f)}}},PlM5:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ArgumentsRequired:a,AuthenticationError:o,NotSupported:n,InvalidOrder:d,OrderNotFound:c,ExchangeNotAvailable:h,RateLimitExceeded:l,InsufficientFunds:u}=i("ucJe"),{TRUNCATE:f,DECIMAL_PLACES:p}=i("rwG2");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"livecoin",name:"LiveCoin",countries:["US","UK","RU"],rateLimit:1e3,userAgent:this.userAgents.chrome,has:{fetchDepositAddress:!0,fetchDeposits:!0,CORS:!1,fetchTickers:!0,fetchCurrencies:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchOrders:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchWithdrawals:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27980768-f22fc424-638a-11e7-89c9-6010a54ff9be.jpg",api:"https://api.livecoin.net",www:"https://www.livecoin.net",doc:"https://www.livecoin.net/api?lang=en",referral:"https://livecoin.net/?from=Livecoin-CQ1hfx44"},api:{public:{get:["exchange/all/order_book","exchange/last_trades","exchange/maxbid_minask","exchange/order_book","exchange/restrictions","exchange/ticker","info/coinInfo"]},private:{get:["exchange/client_orders","exchange/order","exchange/trades","exchange/commission","exchange/commissionCommonInfo","payment/balances","payment/balance","payment/get/address","payment/history/size","payment/history/transactions"],post:["exchange/buylimit","exchange/buymarket","exchange/cancellimit","exchange/selllimit","exchange/sellmarket","payment/out/capitalist","payment/out/card","payment/out/coin","payment/out/okpay","payment/out/payeer","payment/out/perfectmoney","payment/voucher/amount","payment/voucher/make","payment/voucher/redeem"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.0018,taker:.0018}},commonCurrencies:{BTCH:"Bithash",CPC:"Capricoin",CPT:"Cryptos",EDR:"E-Dinar Coin",eETT:"EETT",FirstBlood:"1ST",FORTYTWO:"42",LEO:"LeoCoin",ORE:"Orectic",PLN:"Plutaneum",RUR:"RUB",SCT:"SpaceCoin",TPI:"ThaneCoin",WAX:"WAXP",wETT:"WETT",XBT:"Bricktox"},exceptions:{exact:{1:r,10:o,100:r,101:o,102:o,103:d,104:d,105:d,11:o,12:o,2:o,20:o,30:o,31:n,32:r,429:l,503:h},broad:{"insufficient funds":u,"NOT FOUND":c,"Cannot find order":c,"Minimal amount is":d}}})}async fetchMarkets(e={}){const t=await this.publicGetExchangeTicker(e),i=await this.publicGetExchangeRestrictions(),s=this.indexBy(i.restrictions,"currencyPair"),r=[];for(let a=0;a<t.length;a++){const e=t[a],i=this.safeString(e,"symbol"),[o,n]=i.split("/"),d=this.safeCurrencyCode(o),c=this.safeCurrencyCode(n),h=d+"/"+c,l=this.safeValue(s,h),u={price:5,amount:8,cost:8},f={amount:{min:Math.pow(10,-u.amount),max:Math.pow(10,u.amount)}};l&&(u.price=this.safeInteger(l,"priceScale",5),f.amount.min=this.safeFloat(l,"minLimitQuantity",f.amount.min)),f.price={min:Math.pow(10,-u.price),max:Math.pow(10,u.price)},r.push({id:i,symbol:h,base:d,quote:c,baseId:o,quoteId:n,active:!0,precision:u,limits:f,info:e})}return r}async fetchCurrencies(e={}){const t=await this.publicGetInfoCoinInfo(e),i=this.safeValue(t,"info");let s={};for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"symbol"),a=this.safeCurrencyCode(t),o=8,n="normal"===this.safeString(e,"walletStatus"),d=this.safeString(e,"name"),c=this.safeFloat(e,"withdrawFee");s[a]={id:t,code:a,info:e,name:d,active:n,fee:c,precision:o,limits:{amount:{min:this.safeFloat(e,"minOrderAmount"),max:Math.pow(10,o)},price:{min:Math.pow(10,-o),max:Math.pow(10,o)},cost:{min:this.safeFloat(e,"minOrderAmount"),max:void 0},withdraw:{min:this.safeFloat(e,"minWithdrawAmount"),max:Math.pow(10,o)},deposit:{min:this.safeFloat(e,"minDepositAmount"),max:void 0}}}}return s=this.appendFiatCurrencies(s),s}appendFiatCurrencies(e){const t={info:void 0,active:!0,fee:void 0,precision:8,limits:{withdraw:{min:void 0,max:void 0},deposit:{min:void 0,max:void 0},amount:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},price:{min:Math.pow(10,-8),max:Math.pow(10,8)}}},i=[{id:"USD",code:"USD",name:"US Dollar"},{id:"EUR",code:"EUR",name:"Euro"}];i.push({id:"RUR",code:this.safeCurrencyCode("RUR"),name:"Russian ruble"});for(let s=0;s<i.length;s++){const r=i[s];e[r.code]=this.extend(t,r)}return e}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetPaymentBalances(e),i={info:t};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"currency"),a=this.safeCurrencyCode(r);let o=void 0;o=a in i?i[a]:this.account(),"total"===e.type&&(o.total=this.safeFloat(e,"value")),"available"===e.type&&(o.free=this.safeFloat(e,"value")),"trade"===e.type&&(o.used=this.safeFloat(e,"value")),i[a]=o}return this.parseBalance(i)}async fetchTradingFees(e={}){await this.loadMarkets();const t=await this.privateGetExchangeCommissionCommonInfo(e),i=this.safeFloat(t,"commission");return{info:t,maker:i,taker:i}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={currencyPair:this.marketId(e),groupByPrice:"false"};void 0!==t&&(s.depth=t);const r=await this.publicGetExchangeOrderBook(this.extend(s,i)),a=this.safeInteger(r,"timestamp");return this.parseOrderBook(r,a)}parseTicker(e,t){const i=this.milliseconds();let s=void 0;t&&(s=t.symbol);const r=this.safeFloat(e,"vwap"),a=this.safeFloat(e,"volume");let o=void 0;void 0!==a&&void 0!==r&&(o=a*r);const n=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"best_bid"),bidVolume:void 0,ask:this.safeFloat(e,"best_ask"),askVolume:void 0,vwap:this.safeFloat(e,"vwap"),open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:a,quoteVolume:o,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetExchangeTicker(t),s=this.indexBy(i,"symbol"),r=Object.keys(s),a={};for(let o=0;o<r.length;o++){const e=r[o],t=this.markets_by_id[e],i=t.symbol,n=s[e];a[i]=this.parseTicker(n,t)}return a}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={currencyPair:i.id},r=await this.publicGetExchangeTicker(this.extend(s,t));return this.parseTicker(r,i)}parseTrade(e,t){const i=this.safeTimestamp2(e,"time","datetime");let s=void 0;const r=this.safeFloat(e,"commission");if(void 0!==r){s={cost:r,currency:t?t.quote:void 0}}const a=this.safeString(e,"clientorderid"),o=this.safeString(e,"id"),n=this.safeStringLower(e,"type"),d=this.safeFloat(e,"quantity"),c=this.safeFloat(e,"price");let h=void 0;void 0!==d&&void 0!==c&&(h=d*c);let l=void 0;return void 0!==t&&(l=t.symbol),{id:o,info:e,timestamp:i,datetime:this.iso8601(i),symbol:l,order:a,type:void 0,side:n,takerOrMaker:void 0,price:c,amount:d,cost:h,fee:s}}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const r=this.market(e),o={currencyPair:r.id};void 0!==i&&(o.limit=i);const n=await this.privateGetExchangeTrades(this.extend(o,s));return this.parseTrades(n,r,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={currencyPair:r.id},o=await this.publicGetExchangeLastTrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e},r=await this.privateGetExchangeOrder(this.extend(s,i));return this.parseOrder(r)}parseOrderStatus(e){return this.safeString({OPEN:"open",PARTIALLY_FILLED:"open",EXECUTED:"closed",CANCELLED:"canceled",PARTIALLY_FILLED_AND_CANCELLED:"canceled"},e,e)}parseOrder(e,t){let i=void 0;"lastModificationTime"in e&&(i=this.safeString(e,"lastModificationTime"),void 0!==i&&(i=i.indexOf("T")>=0?this.parse8601(i):this.safeInteger(e,"lastModificationTime")));const s=this.parseOrderStatus(this.safeString2(e,"status","orderStatus"));let r=void 0;if(void 0===t){let i=this.safeString(e,"currencyPair");i=this.safeString(e,"symbol",i),i in this.markets_by_id&&(t=this.markets_by_id[i])}let a=this.safeStringLower(e,"type"),o=void 0;if(void 0!==a){const e=a.split("_");a=e[0],o=e[1]}const n=this.safeFloat(e,"price");let d=this.safeFloat(e,"remainingQuantity");d=this.safeFloat(e,"remaining_quantity",d);const c=this.safeFloat(e,"quantity",d);let h=void 0;void 0!==d&&(h=c-d);let l=void 0;void 0!==h&&void 0!==n&&(l=h*n);const u=this.safeFloat(e,"commission_rate");let f=void 0;void 0!==l&&void 0!==u&&(f=l*u);let p=void 0;return void 0!==t&&(r=t.symbol,p=t.quote),{info:e,id:e.id,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:s,symbol:r,type:a,side:o,price:n,amount:c,cost:l,filled:h,remaining:d,trades:void 0,fee:{cost:f,currency:p,rate:u}}}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==e&&(r=this.market(e),a.currencyPair=r.id),void 0!==t&&(a.issuedFrom=parseInt(t)),void 0!==i&&(a.endRow=i-1);const o=await this.privateGetExchangeClientOrders(this.extend(a,s)),n=[];let d=[];o.data&&(d=o.data);for(let c=0;c<d.length;c++){const e=d[c];n.push(this.parseOrder(e,r))}return this.sortBy(n,"timestamp")}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({openClosed:"OPEN"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({openClosed:"CLOSED"},s))}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o="privatePostExchange"+this.capitalize(i)+t,n=this.market(e),d={quantity:this.amountToPrecision(e,s),currencyPair:n.id};"limit"===t&&(d.price=this.priceToPrecision(e,r));const c=await this[o](this.extend(d,a)),h={info:c,id:c.orderId.toString()};return this.safeValue(c,"success")&&(h.status="open"),h}async cancelOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();const s={orderId:e,currencyPair:this.market(t).id},o=await this.privatePostExchangeCancellimit(this.extend(s,i)),n=this.safeString(o,"message",this.json(o));if("success"in o){if(!o.success)throw new d(n);if("cancelled"in o){if(o.cancelled)return{status:"canceled",info:o};throw new c(n)}}throw new r(this.id+" cancelOrder() failed: "+this.json(o))}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a=this.currency(e);let o=i;void 0!==s&&(o+="::"+s);const n={amount:this.decimalToPrecision(t,f,a.precision,p),currency:a.id,wallet:o},d=await this.privatePostPaymentOutCoin(this.extend(n,r)),c=this.safeInteger(d,"id");if(void 0===c)throw new u(this.id+" insufficient funds to cover requested withdrawal amount post fees "+this.json(d));return{info:d,id:c}}parseTransaction(e,t){let i=void 0,s=void 0;const r=this.safeString(e,"documentId"),a=this.safeFloat(e,"amount"),o=this.safeInteger(e,"date"),n=this.safeStringLower(e,"type"),d=this.safeString(e,"fixedCurrency"),c=this.safeFloat(e,"fee"),h=this.safeCurrencyCode(d,t);"withdrawal"===n?(i=this.safeString(e,"externalKey"),s=this.safeString(e,"id")):"deposit"===n&&(s=this.safeString(e,"externalKey"),i=this.safeString(e,"id"));let l=void 0;return"deposit"===n&&(l="ok"),{info:e,id:r,currency:h,amount:a,address:s,tag:void 0,status:l,type:n,updated:void 0,txid:i,timestamp:o,datetime:this.iso8601(o),fee:{currency:h,cost:c}}}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r=this.milliseconds(),a={types:"DEPOSIT",end:r,start:void 0!==t?parseInt(t):r-25056e5};let o=void 0;void 0!==e&&(o=this.currency(e)),void 0!==i&&(a.limit=i);const n=await this.privateGetPaymentHistoryTransactions(this.extend(a,s));return this.parseTransactions(n,o,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r=this.milliseconds(),a={types:"WITHDRAWAL",end:r,start:void 0!==t?parseInt(t):r-25056e5};let o=void 0;void 0!==e&&(o=this.currency(e)),void 0!==i&&(a.limit=i),void 0!==t&&(a.start=t);const n=await this.privateGetPaymentHistoryTransactions(this.extend(a,s));return this.parseTransactions(n,o,t,i)}async fetchDepositAddress(e,t={}){const i={currency:e},s=await this.privateGetPaymentGetAddress(this.extend(i,t));let r=this.safeString(s,"wallet"),a=void 0;if(r.indexOf(":")>=0){const e=r.split(":");r=e[0],a=e[2]}return this.checkAddress(r),{currency:e,address:r,tag:a,info:s}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+e;const n=this.urlencode(this.keysort(s));if("GET"===i&&Object.keys(s).length&&(o+="?"+n),"private"===t){this.checkRequiredCredentials(),"POST"===i&&(a=n);const e=this.hmac(this.encode(n),this.encode(this.secret),"sha256");r={"Api-Key":this.apiKey,Sign:e.toUpperCase(),"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,c){if(void 0===n)return;if(e>=300){const e=this.id+" "+o,t=this.safeString(n,"errorCode");throw this.throwExactlyMatchedException(this.exceptions.exact,t,e),new r(e)}if(!this.safeValue(n,"success",!0)){const e=this.id+" "+o,t=this.safeString2(n,"message","exception");throw void 0!==t&&this.throwBroadlyMatchedException(this.exceptions.broad,t,e),new r(e)}}}},Pvdy:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ArgumentsRequired:a,AuthenticationError:o,InsufficientFunds:n,InvalidOrder:d}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"idex",name:"IDEX",countries:["US"],rateLimit:1500,certified:!0,requiresWeb3:!0,has:{fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchMarkets:!0,fetchBalance:!0,createOrder:!0,cancelOrder:!0,fetchOpenOrders:!0,fetchTransactions:!0,fetchTrades:!0,fetchMyTrades:!0,withdraw:!0,fetchOHLCV:!1},timeframes:{"1m":"M1","3m":"M3","5m":"M5","15m":"M15","30m":"M30","1h":"H1","4h":"H4","1d":"D1","1w":"D7","1M":"1M"},urls:{test:"https://api.idex.market",logo:"https://user-images.githubusercontent.com/1294454/63693236-3415e380-c81c-11e9-8600-ba1634f1407d.jpg",api:"https://api.idex.market",www:"https://idex.market",doc:["https://docs.idex.market/"]},api:{public:{post:["returnTicker","returnCurrenciesWithPairs","returnCurrencies","return24Volume","returnBalances","returnCompleteBalances","returnDepositsWithdrawals","returnOpenOrders","returnOrderBook","returnOrderStatus","returnOrderTrades","returnTradeHistory","returnTradeHistoryMeta","returnContractAddress","returnNextNonce"]},private:{post:["order","cancel","trade","withdraw"]}},options:{contractAddress:void 0,orderNonce:void 0},exceptions:{"Invalid order signature. Please try again.":o,"You have insufficient funds to match this order. If you believe this is a mistake please refresh and try again.":n,"Order no longer available.":d},requiredCredentials:{walletAddress:!0,privateKey:!0,apiKey:!1,secret:!1},commonCurrencies:{FT:"Fabric Token",MT:"Monarch",ONE:"Menlo One",PLA:"PlayChip",WAX:"WAXP"}})}async fetchMarkets(e={}){const t=await this.publicPostReturnCurrenciesWithPairs(this.extend({includeDelisted:!0},e)),i={},s=t.tokens;for(let d=0;d<s.length;d++){const e=s[d];i[e.symbol]=e}const r=[],a={amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},o=t.pairs,n=Object.keys(o);for(let d=0;d<n.length;d++){const e=n[d],t=o[e],s=this.safeCurrencyCode(e),c=i[e];for(let o=0;o<t.length;o++){const n=t[o],d=e+"_"+n,h=this.safeCurrencyCode(n),l=h+"/"+s,u=i[n],f=u.address,p=c.address,m={price:this.safeInteger(c,"decimals"),amount:this.safeInteger(u,"decimals")};r.push({symbol:l,precision:m,base:h,quote:s,baseId:f,quoteId:p,limits:a,id:d,info:u,tierBased:!1})}}return r}parseTicker(e,t){let i=void 0;t&&(i=t.symbol);const s=this.safeFloat(e,"baseVolume"),r=this.safeFloat(e,"quoteVolume"),a=this.safeFloat(e,"last"),o=this.safeFloat(e,"percentChange");return{symbol:i,timestamp:void 0,datetime:void 0,high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"highestBid"),bidVolume:void 0,ask:this.safeFloat(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:o,average:void 0,baseVolume:r,quoteVolume:s,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicPostReturnTicker(t),s=Object.keys(i),r={};for(let a=0;a<s.length;a++){const e=s[a];let t=void 0,o=void 0;if(e in this.markets_by_id)o=this.markets_by_id[e],t=o.symbol;else{const[i,s]=e.split("_");t=this.safeCurrencyCode(s)+"/"+this.safeCurrencyCode(i),o={symbol:t}}const n=i[e];r[t]=this.parseTicker(n,o)}return this.filterByArray(r,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},r=await this.publicPostReturnTicker(this.extend(s,t));return this.parseTicker(r,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={market:s.quote+"_"+s.base,count:100};void 0!==t&&(r.count=t);const a=await this.publicPostReturnOrderBook(this.extend(r,i));return this.parseOrderBook(a,void 0,"bids","asks","price","amount")}parseBidAsk(e,t=0,i=1){return[this.safeFloat(e,t),this.safeFloat(e,i),e]}async fetchBalance(e={}){const t={address:this.walletAddress},i=await this.publicPostReturnCompleteBalances(this.extend(t,e)),s={info:i},r=Object.keys(i);for(let a=0;a<r.length;a++){const e=r[a],t=i[e];s[this.safeCurrencyCode(e)]={free:this.safeFloat(t,"available"),used:this.safeFloat(t,"onOrders")}}return this.parseBalance(s)}async createOrder(e,t,i,s,r,o={}){this.checkRequiredDependencies(),await this.loadMarkets();const n=this.market(e);if("limit"===t){const e=1e5,t=await this.getContractAddress();let a=void 0,o=void 0,d=void 0,c=void 0;const h=parseFloat(r)*parseFloat(s);"buy"===i?(a=n.baseId,o=n.quoteId,d=this.toWei(s,n.precision.amount),c=this.toWei(h,18)):(a=n.quoteId,o=n.baseId,d=this.toWei(h,18),c=this.toWei(s,n.precision.amount));const l=await this.getNonce(),u={contractAddress:t,tokenBuy:a,amountBuy:d,tokenSell:o,amountSell:c,expires:e,nonce:l,address:this.walletAddress},f=this.getIdexCreateOrderHash(u),p=this.signMessage(f,this.privateKey),m={tokenBuy:a,amountBuy:d,tokenSell:o,amountSell:c,address:this.walletAddress,nonce:l,expires:e},y=await this.privatePostOrder(this.extend(m,p));return this.parseOrder(y,n)}if("market"===t){if(!("orderHash"in o))throw new a(this.id+" market order requires an order structure such as that in fetchOrderBook()['bids'][0][2], fetchOrder()['info'], or fetchOpenOrders()[0]['info']");const e={orderHash:o.orderHash,amount:o.params.amountBuy,address:o.params.user,nonce:o.params.nonce},t=this.getIdexMarketOrderHash(e),i=this.signMessage(t,this.privateKey),s=this.extend(e,i);s.address=this.walletAddress,s.nonce=await this.getNonce();const r=await this.privatePostTrade(s);return this.parseOrders(r,n)}}async getNonce(){if(void 0===this.options.orderNonce){const e=await this.publicPostReturnNextNonce({address:this.walletAddress});return this.safeInteger(e,"nonce")}{const e=this.options.orderNonce;return this.options.orderNonce=this.sum(this.options.orderNonce,1),e}}async getContractAddress(){if(void 0!==this.options.contractAddress)return this.options.contractAddress;const e=await this.publicPostReturnContractAddress();return this.options.contractAddress=this.safeString(e,"address"),this.options.contractAddress}async cancelOrder(e,t,i={}){const s=await this.getNonce(),a={orderHash:e,nonce:s},o=this.getIdexCancelOrderHash(a),n=this.signMessage(o,this.privateKey),d={orderHash:e,address:this.walletAddress,nonce:s},c=await this.privatePostCancel(this.extend(d,n));if("success"in c)return{info:c};throw new r(this.id+" cancel order failed "+this.json(c))}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const r=this.currency(e),a={address:this.walletAddress};void 0!==t&&(a.start=parseInt(Math.floor(t/1e3)));const o=await this.publicPostReturnDepositsWithdrawals(this.extend(a,s)),n=this.parseTransactions(o.deposits,r,t,i),d=this.parseTransactions(o.withdrawals,r,t,i);return this.arrayConcat(n,d)}parseTransaction(e,t){const i=this.safeFloat(e,"amount"),s=this.safeTimestamp(e,"timestamp"),r=this.safeString(e,"transactionHash");let a=void 0,o=void 0,n=void 0,d=void 0,c=void 0;"depositNumber"in e?(a=this.safeString(e,"depositNumber"),o="deposit",d=this.walletAddress,c=this.options.contractAddress):"withdrawalNumber"in e&&(a=this.safeString(e,"withdrawalNumber"),o="withdrawal",n=this.parseTransactionStatus(this.safeString(e,"status")),d=this.options.contractAddress,c=this.walletAddress);const h=this.safeCurrencyCode(this.safeString(e,"currency"));return{info:e,id:a,txid:r,timestamp:s,datetime:this.iso8601(s),currency:h,amount:i,status:n,type:o,updated:void 0,comment:void 0,addressFrom:d,tagFrom:void 0,addressTo:c,tagTo:void 0,fee:{currency:h,cost:void 0,rate:void 0}}}parseTransactionStatus(e){return this.safeString({COMPLETE:"ok"},e)}async fetchOpenOrders(e,t,i,s={}){if(void 0===this.walletAddress)throw new a(this.id+" fetchOpenOrders requires a walletAddress");await this.loadMarkets();const r={address:this.walletAddress};let o=void 0;void 0!==e&&(o=this.market(e),r.market=o.id);const n=await this.publicPostReturnOpenOrders(this.extend(r,s));return this.parseOrders(n,o,t,i)}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=void 0;void 0!==t&&(s=this.market(t));const r={orderHash:e},a=await this.publicPostReturnOrderStatus(this.extend(r,i));return this.parseOrder(a,s)}parseOrder(e,t){const i=this.safeTimestamp(e,"timestamp"),s=this.safeString(e,"type");let r=void 0,a=void 0,o=void 0;"initialAmount"in e?(a=this.safeFloat(e,"initialAmount"),o=this.safeFloat(e,"amount")):a=this.safeFloat(e,"amount");const n=this.safeFloat(e,"filled"),d=this.safeFloat(e,"price");let c=this.safeFloat(e,"total");if(void 0===c||void 0===n||c||(c=n*d),"market"in e){const t=e.market;r=this.markets_by_id[t].symbol}else if(void 0!==s&&"params"in e){const t=e.params,i=this.safeCurrencyCode(this.safeString(t,"tokenBuy")),a=this.safeCurrencyCode(this.safeString(t,"tokenSell"));void 0!==i&&void 0!==a&&(r="buy"===s?i+"/"+a:a+"/"+i)}void 0===r&&void 0!==t&&(r=t.symbol);const h=this.safeString(e,"orderHash"),l=this.parseOrderStatus(this.safeString(e,"status"));return{info:e,id:h,clientOrderId:void 0,symbol:r,timestamp:i,datetime:this.iso8601(i),side:s,amount:a,price:d,type:"limit",filled:n,remaining:o,cost:c,status:l}}parseOrderStatus(e){return this.safeString({open:"open"},e,e)}async fetchMyTrades(e,t,i,s={}){if(void 0===this.walletAddress)throw new a(this.id+" fetchOpenOrders requires a walletAddress");await this.loadMarkets();const r={address:this.walletAddress};let o=void 0;void 0!==e&&(o=this.market(e),r.market=o.id),void 0!==i&&(r.start=parseInt(Math.floor(i)));const n=await this.publicPostReturnTradeHistory(this.extend(r,s));if(Array.isArray(n))return this.parseTrades(n,o,t,i);{let e=[];const s=Object.keys(n);for(let r=0;r<s.length;r++){const a=n[s[r]],d=this.parseTrades(a,o,t,i);e=this.arrayConcat(e,d)}return e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market:r.id};void 0!==i&&(a.start=parseInt(Math.floor(i)));const o=await this.publicPostReturnTradeHistory(this.extend(a,s));return this.parseTrades(o,r,t,i)}parseTrade(e,t){const i=this.safeString(e,"type");let s=void 0,r=void 0;const a=this.safeString(e,"maker");let o=void 0;void 0!==a&&void 0!==this.walletAddress&&(o=a.toLowerCase()===this.walletAddress.toLowerCase()?"maker":"taker");const n=this.safeCurrencyCode(this.safeString(e,"tokenBuy")),d=this.safeCurrencyCode(this.safeString(e,"tokenSell"));let c=void 0;void 0!==n&&void 0!==d&&("buy"===i?(c="buyerFee","maker"===o?(r=n+"/"+d,s=n):(r=d+"/"+n,s=d)):(c="sellerFee","maker"===o?(r=d+"/"+n,s=n):(r=n+"/"+d,s=d))),void 0===r&&void 0!==t&&(r=t.symbol);const h=this.safeTimestamp(e,"timestamp"),l=this.safeString(e,"tid"),u=this.safeFloat(e,"amount"),f=this.safeFloat(e,"price"),p=this.safeFloat(e,"total");let m=this.safeFloat(e,c);if(m<0){const t=this.safeFloat(e,"gasFee");m=this.sum(t,m)}const y={currency:s,cost:m};if(void 0!==m&&void 0!==u){const e="ETH"===s?p:u;y.rate=m/e}const b=this.safeString(e,"orderHash");return{info:e,id:l,timestamp:h,datetime:this.iso8601(h),fee:y,price:f,amount:u,cost:p,takerOrMaker:o,side:i,order:b,symbol:r,type:"limit"}}async withdraw(e,t,i,s,r={}){this.checkRequiredDependencies(),this.checkAddress(i),await this.loadMarkets();const a=this.currency(e),o=a.id,n=await this.getNonce();t=this.toWei(t,a.precision);const d={contractAddress:await this.getContractAddress(),token:o,amount:t,address:i,nonce:n},c=this.getIdexWithdrawHash(d),h=this.signMessage(c,this.privateKey),l={address:i,amount:t,token:o,nonce:n};return{info:await this.privatePostWithdraw(this.extend(l,h)),id:void 0}}sign(e,t="public",i="GET",s={},r,a){a=this.json(s);const o=this.urls.api+"/"+e;return r={"Content-Type":"application/json",Accept:"application/json"},"private"===t&&(this.checkRequiredCredentials(),r["API-Key"]=this.apiKey),{url:o,method:i,body:a,headers:r}}getIdexCreateOrderHash(e){return this.soliditySha3([e.contractAddress,e.tokenBuy,e.amountBuy,e.tokenSell,e.amountSell,e.expires,e.nonce,e.address])}getIdexCancelOrderHash(e){return this.soliditySha3([e.orderHash,e.nonce])}getIdexMarketOrderHash(e){return this.soliditySha3([e.orderHash,e.amount,e.address,e.nonce])}getIdexWithdrawHash(e){return this.soliditySha3([e.contractAddress,e.token,e.amount,e.address,e.nonce])}handleErrors(e,t,i,s,a,o,n,d,c){if(void 0!==n&&"error"in n){if(n.error in this.exceptions)throw new this.exceptions[n.error](this.id+" "+n.error);throw new r(this.id+" "+o)}}}},QaXa:function(e,t,i){e.exports=i("zRfg")},QpdZ:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ArgumentsRequired:a,InsufficientFunds:o,InvalidOrder:n,OrderNotFound:d,AuthenticationError:c,BadSymbol:h}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"indodax",name:"INDODAX",countries:["ID"],has:{CORS:!1,createMarketOrder:!1,fetchTickers:!1,fetchOrder:!0,fetchOrders:!1,fetchClosedOrders:!0,fetchOpenOrders:!0,fetchMyTrades:!1,fetchCurrencies:!1,withdraw:!0},version:"1.8",urls:{logo:"https://user-images.githubusercontent.com/1294454/37443283-2fddd0e4-281c-11e8-9741-b4f1419001b5.jpg",api:{public:"https://indodax.com/api",private:"https://indodax.com/tapi"},www:"https://www.indodax.com",doc:"https://indodax.com/downloads/BITCOINCOID-API-DOCUMENTATION.pdf",referral:"https://indodax.com/ref/testbitcoincoid/1"},api:{public:{get:["{pair}/ticker","{pair}/trades","{pair}/depth"]},private:{post:["getInfo","transHistory","trade","tradeHistory","getOrder","openOrders","cancelOrder","orderHistory","withdrawCoin"]}},markets:{"BTC/IDR":{id:"btc_idr",symbol:"BTC/IDR",base:"BTC",quote:"IDR",baseId:"btc",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:1e-4,max:void 0}}},"TEN/IDR":{id:"ten_idr",symbol:"TEN/IDR",base:"TEN",quote:"IDR",baseId:"ten",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:5,max:void 0}}},"ABYSS/IDR":{id:"abyss_idr",symbol:"ABYSS/IDR",base:"ABYSS",quote:"IDR",baseId:"abyss",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"ACT/IDR":{id:"act_idr",symbol:"ACT/IDR",base:"ACT",quote:"IDR",baseId:"act",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"ADA/IDR":{id:"ada_idr",symbol:"ADA/IDR",base:"ADA",quote:"IDR",baseId:"ada",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"AOA/IDR":{id:"aoa_idr",symbol:"AOA/IDR",base:"AOA",quote:"IDR",baseId:"aoa",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"ATOM/IDR":{id:"atom_idr",symbol:"ATOM/IDR",base:"ATOM",quote:"IDR",baseId:"atom",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"BAT/IDR":{id:"bat_idr",symbol:"BAT/IDR",base:"BAT",quote:"IDR",baseId:"bat",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"BCD/IDR":{id:"bcd_idr",symbol:"BCD/IDR",base:"BCD",quote:"IDR",baseId:"bcd",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"BCH/IDR":{id:"bchabc_idr",symbol:"BCH/IDR",base:"BCH",quote:"IDR",baseId:"bchabc",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.001,max:void 0}}},"BSV/IDR":{id:"bchsv_idr",symbol:"BSV/IDR",base:"BSV",quote:"IDR",baseId:"bchsv",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.001,max:void 0}}},"BNB/IDR":{id:"bnb_idr",symbol:"BNB/IDR",base:"BNB",quote:"IDR",baseId:"bnb",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.001,max:void 0}}},"BTG/IDR":{id:"btg_idr",symbol:"BTG/IDR",base:"BTG",quote:"IDR",baseId:"btg",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"BTS/IDR":{id:"bts_idr",symbol:"BTS/IDR",base:"BTS",quote:"IDR",baseId:"bts",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"BTT/IDR":{id:"btt_idr",symbol:"BTT/IDR",base:"BTT",quote:"IDR",baseId:"btt",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:1e3,max:void 0}}},"COAL/IDR":{id:"coal_idr",symbol:"COAL/IDR",base:"COAL",quote:"IDR",baseId:"coal",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:50,max:void 0}}},"CRO/IDR":{id:"cro_idr",symbol:"CRO/IDR",base:"CRO",quote:"IDR",baseId:"cro",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"DASH/IDR":{id:"drk_idr",symbol:"DASH/IDR",base:"DASH",quote:"IDR",baseId:"drk",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"DAX/IDR":{id:"dax_idr",symbol:"DAX/IDR",base:"DAX",quote:"IDR",baseId:"dax",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"DOGE/IDR":{id:"doge_idr",symbol:"DOGE/IDR",base:"DOGE",quote:"IDR",baseId:"doge",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:1e3,max:void 0}}},"ETH/IDR":{id:"eth_idr",symbol:"ETH/IDR",base:"ETH",quote:"IDR",baseId:"eth",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"EOS/IDR":{id:"eos_idr",symbol:"EOS/IDR",base:"EOS",quote:"IDR",baseId:"eos",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"ETC/IDR":{id:"etc_idr",symbol:"ETC/IDR",base:"ETC",quote:"IDR",baseId:"etc",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.1,max:void 0}}},"GARD/IDR":{id:"gard_idr",symbol:"GARD/IDR",base:"GARD",quote:"IDR",baseId:"gard",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.1,max:void 0}}},"GSC/IDR":{id:"gsc_idr",symbol:"GSC/IDR",base:"GSC",quote:"IDR",baseId:"gsc",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.1,max:void 0}}},"GXC/IDR":{id:"gxs_idr",symbol:"GXC/IDR",base:"GXC",quote:"IDR",baseId:"gxs",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.1,max:void 0}}},"HPB/IDR":{id:"hpb_idr",symbol:"HPB/IDR",base:"HPB",quote:"IDR",baseId:"hpb",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:5,max:void 0}}},"IGNIS/IDR":{id:"ignis_idr",symbol:"IGNIS/IDR",base:"IGNIS",quote:"IDR",baseId:"ignis",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:1,max:void 0}}},"INX/IDR":{id:"inx_idr",symbol:"INX/IDR",base:"INX",quote:"IDR",baseId:"inx",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:1,max:void 0}}},"IOTA/IDR":{id:"iota_idr",symbol:"IOTA/IDR",base:"IOTA",quote:"IDR",baseId:"iota",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:5,max:void 0}}},"LINK/IDR":{id:"link_idr",symbol:"LINK/IDR",base:"LINK",quote:"IDR",baseId:"link",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:1,max:void 0}}},"LTC/IDR":{id:"ltc_idr",symbol:"LTC/IDR",base:"LTC",quote:"IDR",baseId:"ltc",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"MBL/IDR":{id:"mbl_idr",symbol:"MBL/IDR",base:"MBL",quote:"IDR",baseId:"mbl",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"NEO/IDR":{id:"neo_idr",symbol:"NEO/IDR",base:"NEO",quote:"IDR",baseId:"neo",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"NPXS/IDR":{id:"npxs_idr",symbol:"NPXS/IDR",base:"NPXS",quote:"IDR",baseId:"npxs",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:1,max:void 0}}},"NXT/IDR":{id:"nxt_idr",symbol:"NXT/IDR",base:"NXT",quote:"IDR",baseId:"nxt",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:5,max:void 0}}},"OKB/IDR":{id:"okb_idr",symbol:"OKB/IDR",base:"OKB",quote:"IDR",baseId:"okb",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.5,max:void 0}}},"ONT/IDR":{id:"ont_idr",symbol:"ONT/IDR",base:"ONT",quote:"IDR",baseId:"ont",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:5,max:void 0}}},"PXG/IDR":{id:"pxg_idr",symbol:"PXG/IDR",base:"PXG",quote:"IDR",baseId:"pxg",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:5,max:void 0}}},"QTUM/IDR":{id:"qtum_idr",symbol:"QTUM/IDR",base:"QTUM",quote:"IDR",baseId:"qtum",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:5,max:void 0}}},"RVN/IDR":{id:"rvn_idr",symbol:"RVN/IDR",base:"RVN",quote:"IDR",baseId:"rvn",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:5,max:void 0}}},"SSP/IDR":{id:"ssp_idr",symbol:"SSP/IDR",base:"SSP",quote:"IDR",baseId:"ssp",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:5,max:void 0}}},"SUMO/IDR":{id:"sumo_idr",symbol:"SUMO/IDR",base:"SUMO",quote:"IDR",baseId:"sumo",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:5,max:void 0}}},"TRX/IDR":{id:"trx_idr",symbol:"TRX/IDR",base:"TRX",quote:"IDR",baseId:"trx",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"USDC/IDR":{id:"usdc_idr",symbol:"USDC/IDR",base:"USDC",quote:"IDR",baseId:"usdc",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"USDT/IDR":{id:"usdt_idr",symbol:"USDT/IDR",base:"USDT",quote:"IDR",baseId:"usdt",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"VEX/IDR":{id:"vex_idr",symbol:"VEX/IDR",base:"VEX",quote:"IDR",baseId:"vex",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"VIDY/IDR":{id:"vidy_idr",symbol:"VIDY/IDR",base:"VIDY",quote:"IDR",baseId:"vidy",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:100,max:void 0}}},"WAVES/IDR":{id:"waves_idr",symbol:"WAVES/IDR",base:"WAVES",quote:"IDR",baseId:"waves",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.1,max:void 0}}},"XEM/IDR":{id:"nem_idr",symbol:"XEM/IDR",base:"XEM",quote:"IDR",baseId:"nem",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:1,max:void 0}}},"XLM/IDR":{id:"str_idr",symbol:"XLM/IDR",base:"XLM",quote:"IDR",baseId:"str",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:20,max:void 0}}},"XDCE/IDR":{id:"xdce_idr",symbol:"XDCE/IDR",base:"XDCE",quote:"IDR",baseId:"xdce",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:10,max:void 0}}},"XMR/IDR":{id:"xmr_idr",symbol:"XMR/IDR",base:"XMR",quote:"IDR",baseId:"xmr",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"XRP/IDR":{id:"xrp_idr",symbol:"XRP/IDR",base:"XRP",quote:"IDR",baseId:"xrp",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:10,max:void 0}}},"XZC/IDR":{id:"xzc_idr",symbol:"XZC/IDR",base:"XZC",quote:"IDR",baseId:"xzc",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.1,max:void 0}}},"VSYS/IDR":{id:"vsys_idr",symbol:"VSYS/IDR",base:"VSYS",quote:"IDR",baseId:"vsys",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.1,max:void 0}}},"ZEC/IDR":{id:"zec_idr",symbol:"ZEC/IDR",base:"ZEC",quote:"IDR",baseId:"zec",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"BTS/BTC":{id:"bts_btc",symbol:"BTS/BTC",base:"BTS",quote:"BTC",baseId:"bts",quoteId:"btc",precision:{amount:8,price:8},limits:{amount:{min:.01,max:void 0}}},"DASH/BTC":{id:"drk_btc",symbol:"DASH/BTC",base:"DASH",quote:"BTC",baseId:"drk",quoteId:"btc",precision:{amount:8,price:6},limits:{amount:{min:.01,max:void 0}}},"DOGE/BTC":{id:"doge_btc",symbol:"DOGE/BTC",base:"DOGE",quote:"BTC",baseId:"doge",quoteId:"btc",precision:{amount:8,price:8},limits:{amount:{min:1,max:void 0}}},"ETH/BTC":{id:"eth_btc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",baseId:"eth",quoteId:"btc",precision:{amount:8,price:5},limits:{amount:{min:.001,max:void 0}}},"LTC/BTC":{id:"ltc_btc",symbol:"LTC/BTC",base:"LTC",quote:"BTC",baseId:"ltc",quoteId:"btc",precision:{amount:8,price:6},limits:{amount:{min:.01,max:void 0}}},"NXT/BTC":{id:"nxt_btc",symbol:"NXT/BTC",base:"NXT",quote:"BTC",baseId:"nxt",quoteId:"btc",precision:{amount:8,price:8},limits:{amount:{min:.01,max:void 0}}},"SUMO/BTC":{id:"sumo_btc",symbol:"SUMO/BTC",base:"SUMO",quote:"BTC",baseId:"sumo",quoteId:"btc",precision:{amount:8,price:8},limits:{amount:{min:.01,max:void 0}}},"TEN/BTC":{id:"ten_btc",symbol:"TEN/BTC",base:"TEN",quote:"BTC",baseId:"ten",quoteId:"btc",precision:{amount:8,price:8},limits:{amount:{min:.01,max:void 0}}},"XEM/BTC":{id:"nem_btc",symbol:"XEM/BTC",base:"XEM",quote:"BTC",baseId:"nem",quoteId:"btc",precision:{amount:8,price:8},limits:{amount:{min:1,max:void 0}}},"XLM/BTC":{id:"str_btc",symbol:"XLM/BTC",base:"XLM",quote:"BTC",baseId:"str",quoteId:"btc",precision:{amount:8,price:8},limits:{amount:{min:.01,max:void 0}}},"XRP/BTC":{id:"xrp_btc",symbol:"XRP/BTC",base:"XRP",quote:"BTC",baseId:"xrp",quoteId:"btc",precision:{amount:8,price:8},limits:{amount:{min:.01,max:void 0}}}},fees:{trading:{tierBased:!1,percentage:!0,maker:0,taker:.003}},exceptions:{exact:{invalid_pair:h,"Insufficient balance.":o,"invalid order.":d,"Invalid credentials. API not found or session has expired.":c,"Invalid credentials. Bad sign.":c},broad:{"Minimum price":n,"Minimum order":n}}})}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGetInfo(e),i=this.safeValue(t,"return",{}),s=this.safeValue(i,"balance",{}),r=this.safeValue(i,"balance_hold",{}),a={info:t},o=Object.keys(s);for(let n=0;n<o.length;n++){const e=o[n],t=this.safeCurrencyCode(e),i=this.account();i.free=this.safeFloat(s,e),i.used=this.safeFloat(r,e),a[t]=i}return this.parseBalance(a)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair:this.marketId(e)},r=await this.publicGetPairDepth(this.extend(s,i));return this.parseOrderBook(r,void 0,"buy","sell")}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={pair:i.id},r=(await this.publicGetPairTicker(this.extend(s,t))).ticker,a=this.safeTimestamp(r,"server_time"),o="vol_"+i.baseId.toLowerCase(),n="vol_"+i.quoteId.toLowerCase(),d=this.safeFloat(r,"last");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(r,"high"),low:this.safeFloat(r,"low"),bid:this.safeFloat(r,"buy"),bidVolume:void 0,ask:this.safeFloat(r,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(r,o),quoteVolume:this.safeFloat(r,n),info:r}}parseTrade(e,t){const i=this.safeTimestamp(e,"date"),s=this.safeString(e,"tid");let r=void 0;void 0!==t&&(r=t.symbol);const a=this.safeString(e,"type"),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount");let d=void 0;return void 0!==o&&void 0!==n&&(d=o*n),{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:r,type:void 0,side:a,order:void 0,takerOrMaker:void 0,price:o,amount:n,cost:d,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pair:r.id},o=await this.publicGetPairTrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}parseOrder(e,t){let i=void 0;"type"in e&&(i=e.type);let s=this.safeString(e,"status","open");"filled"===s?s="closed":"cancelled"===s&&(s="canceled");let r=void 0,a=void 0;const o=this.safeFloat(e,"price");let n=void 0,d=void 0,c=void 0;if(void 0!==t){r=t.symbol;let i=t.quoteId,s=t.baseId;if("idr"===t.quoteId&&"order_rp"in e&&(i="rp"),"idr"===t.baseId&&"remain_rp"in e&&(s="rp"),a=this.safeFloat(e,"order_"+i),a){n=a/o;const t=this.safeFloat(e,"remain_"+i);void 0!==t&&(d=t/o,c=n-d)}else n=this.safeFloat(e,"order_"+s),a=o*n,d=this.safeFloat(e,"remain_"+s),c=n-d}let h=void 0;c&&(h=a/c);const l=this.safeInteger(e,"submit_time");return{info:e,id:this.safeString(e,"order_id"),clientOrderId:void 0,timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,symbol:r,type:"limit",side:i,price:o,cost:a,average:h,amount:n,filled:c,remaining:d,status:s,fee:void 0}}async fetchOrder(e,t,i={}){if(void 0===t)throw new r(this.id+" fetchOrder requires a symbol");await this.loadMarkets();const s=this.market(t),a={pair:s.id,order_id:e},o=await this.privatePostGetOrder(this.extend(a,i)),n=o.return,d=this.parseOrder(this.extend({id:e},n.order),s);return this.extend({info:o},d)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==e&&(r=this.market(e),a.pair=r.id);const o=(await this.privatePostOpenOrders(this.extend(a,s))).return.orders;if(!o)return[];if(void 0!==e)return this.parseOrders(o,r,t,i);const n=Object.keys(o);let d=[];for(let c=0;c<n.length;c++){const e=n[c],s=o[e];r=this.markets_by_id[e];const a=this.parseOrders(s,r,t,i);d=this.arrayConcat(d,a)}return d}async fetchClosedOrders(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchOrders requires a symbol");await this.loadMarkets();const a={};let o=void 0;void 0!==e&&(o=this.market(e),a.pair=o.id);const n=await this.privatePostOrderHistory(this.extend(a,s));let d=this.parseOrders(n.return.orders,o,t,i);return d=this.filterBy(d,"status","closed"),void 0!==e?this.filterBySymbol(d,e):d}async createOrder(e,t,i,s,a,o={}){if("limit"!==t)throw new r(this.id+" allows limit orders only");await this.loadMarkets();const n=this.market(e),d={pair:n.id,type:i,price:a},c=n.baseId;"buy"===i?d[n.quoteId]=s*a:d[n.baseId]=s,d[c]=s;const h=await this.privatePostTrade(this.extend(d,o));return{info:h,id:h.return.order_id.toString()}}async cancelOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" cancelOrder requires a symbol argument");const s=this.safeValue(i,"side");if(void 0===s)throw new r(this.id+' cancelOrder requires an extra "side" param');await this.loadMarkets();const o={order_id:e,pair:this.market(t).id,type:s};return await this.privatePostCancelOrder(this.extend(o,i))}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a=this.currency(e),o=this.milliseconds(),n={currency:a.id,withdraw_amount:t,withdraw_address:i,request_id:o.toString()};s&&(n.withdraw_memo=s);const d=await this.privatePostWithdrawCoin(this.extend(n,r));let c=void 0;return"txid"in d&&d.txid.length>0&&(c=d.txid),{info:d,id:c}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t];return"public"===t?o+="/"+this.implodeParams(e,s):(this.checkRequiredCredentials(),a=this.urlencode(this.extend({method:e,nonce:this.nonce()},s)),r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}),{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,c){if(void 0===n)return;if(Array.isArray(n))return;const h=this.safeValue(n,"error","");if(!("success"in n)&&""===h)return;if(1===this.safeInteger(n,"success",0)){if("return"in n)return;throw new r(this.id+": malformed response: "+this.json(n))}const l=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,h,l),this.throwBroadlyMatchedException(this.exceptions.broad,h,l),new r(l)}}},Rcnz:function(e,t,i){"use strict";const s=i("uS8B");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"vbtc",name:"VBTC",countries:["VN"],has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27991481-1f53d1d8-6481-11e7-884e-21d17e7939db.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://vbtc.exchange",doc:"https://blinktrade.com/docs"},options:{brokerId:"3"}})}}},S63X:function(e,t,i){"use strict";var s=i("xQh+"),r=Object.prototype.hasOwnProperty,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:s.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},o=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},n=function(e,t,i){if(e){var s=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,o=/(\[[^[\]]*])/.exec(s),n=o?s.slice(0,o.index):s,d=[];if(n){if(!i.plainObjects&&r.call(Object.prototype,n)&&!i.allowPrototypes)return;d.push(n)}for(var c=0;null!==(o=a.exec(s))&&c<i.depth;){if(c+=1,!i.plainObjects&&r.call(Object.prototype,o[1].slice(1,-1))&&!i.allowPrototypes)return;d.push(o[1])}return o&&d.push("["+s.slice(o.index)+"]"),function(e,t,i){for(var s=t,r=e.length-1;r>=0;--r){var a,o=e[r];if("[]"===o&&i.parseArrays)a=[].concat(s);else{a=i.plainObjects?Object.create(null):{};var n="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,d=parseInt(n,10);i.parseArrays||""!==n?!isNaN(d)&&o!==n&&String(d)===n&&d>=0&&i.parseArrays&&d<=i.arrayLimit?(a=[])[d]=s:a[n]=s:a={0:s}}s=a}return s}(d,t,i)}};e.exports=function(e,t){var i=function(e){if(!e)return a;if(null!==e.decoder&&void 0!==e.decoder&&"function"!==typeof e.decoder)throw new TypeError("Decoder has to be a function.");if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t="undefined"===typeof e.charset?a.charset:e.charset;return{allowDots:"undefined"===typeof e.allowDots?a.allowDots:!!e.allowDots,allowPrototypes:"boolean"===typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,arrayLimit:"number"===typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"===typeof e.comma?e.comma:a.comma,decoder:"function"===typeof e.decoder?e.decoder:a.decoder,delimiter:"string"===typeof e.delimiter||s.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"===typeof e.depth?e.depth:a.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"===typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"===typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"===typeof e.plainObjects?e.plainObjects:a.plainObjects,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling}}(t);if(""===e||null===e||"undefined"===typeof e)return i.plainObjects?Object.create(null):{};for(var d="string"===typeof e?function(e,t){var i,n={},d=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,c=t.parameterLimit===1/0?void 0:t.parameterLimit,h=d.split(t.delimiter,c),l=-1,u=t.charset;if(t.charsetSentinel)for(i=0;i<h.length;++i)0===h[i].indexOf("utf8=")&&("utf8=%E2%9C%93"===h[i]?u="utf-8":"utf8=%26%2310003%3B"===h[i]&&(u="iso-8859-1"),l=i,i=h.length);for(i=0;i<h.length;++i)if(i!==l){var f,p,m=h[i],y=m.indexOf("]="),b=-1===y?m.indexOf("="):y+1;-1===b?(f=t.decoder(m,a.decoder,u),p=t.strictNullHandling?null:""):(f=t.decoder(m.slice(0,b),a.decoder,u),p=t.decoder(m.slice(b+1),a.decoder,u)),p&&t.interpretNumericEntities&&"iso-8859-1"===u&&(p=o(p)),p&&t.comma&&p.indexOf(",")>-1&&(p=p.split(",")),r.call(n,f)?n[f]=s.combine(n[f],p):n[f]=p}return n}(e,i):e,c=i.plainObjects?Object.create(null):{},h=Object.keys(d),l=0;l<h.length;++l){var u=h[l],f=n(u,d[u],i);c=s.merge(c,f,i)}return s.compact(c)}},SY6p:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ArgumentsRequired:a,AuthenticationError:o,RateLimitExceeded:n}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinbase",name:"Coinbase",countries:["US"],rateLimit:400,version:"v2",userAgent:this.userAgents.chrome,headers:{"CB-VERSION":"2018-05-30"},has:{CORS:!0,cancelOrder:!1,createDepositAddress:!0,createOrder:!1,deposit:!1,fetchBalance:!0,fetchClosedOrders:!1,fetchCurrencies:!0,fetchDepositAddress:!1,fetchMarkets:!0,fetchMyTrades:!1,fetchOHLCV:!1,fetchOpenOrders:!1,fetchOrder:!1,fetchOrderBook:!1,fetchL2OrderBook:!1,fetchLedger:!0,fetchOrders:!1,fetchTicker:!0,fetchTickers:!1,fetchTime:!0,fetchBidsAsks:!1,fetchTrades:!1,withdraw:!1,fetchTransactions:!1,fetchDeposits:!0,fetchWithdrawals:!0,fetchMySells:!0,fetchMyBuys:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/40811661-b6eceae2-653a-11e8-829e-10bfadb078cf.jpg",api:"https://api.coinbase.com",www:"https://www.coinbase.com",doc:"https://developers.coinbase.com/api/v2",fees:"https://support.coinbase.com/customer/portal/articles/2109597-buy-sell-bank-transfer-fees",referral:"https://www.coinbase.com/join/58cbe25a355148797479dbd2"},requiredCredentials:{apiKey:!0,secret:!0},api:{public:{get:["currencies","time","exchange-rates","users/{user_id}","prices/{symbol}/buy","prices/{symbol}/sell","prices/{symbol}/spot"]},private:{get:["accounts","accounts/{account_id}","accounts/{account_id}/addresses","accounts/{account_id}/addresses/{address_id}","accounts/{account_id}/addresses/{address_id}/transactions","accounts/{account_id}/transactions","accounts/{account_id}/transactions/{transaction_id}","accounts/{account_id}/buys","accounts/{account_id}/buys/{buy_id}","accounts/{account_id}/sells","accounts/{account_id}/sells/{sell_id}","accounts/{account_id}/deposits","accounts/{account_id}/deposits/{deposit_id}","accounts/{account_id}/withdrawals","accounts/{account_id}/withdrawals/{withdrawal_id}","payment-methods","payment-methods/{payment_method_id}","user","user/auth"],post:["accounts","accounts/{account_id}/primary","accounts/{account_id}/addresses","accounts/{account_id}/transactions","accounts/{account_id}/transactions/{transaction_id}/complete","accounts/{account_id}/transactions/{transaction_id}/resend","accounts/{account_id}/buys","accounts/{account_id}/buys/{buy_id}/commit","accounts/{account_id}/sells","accounts/{account_id}/sells/{sell_id}/commit","accounts/{account_id}/deposists","accounts/{account_id}/deposists/{deposit_id}/commit","accounts/{account_id}/withdrawals","accounts/{account_id}/withdrawals/{withdrawal_id}/commit"],put:["accounts/{account_id}","user"],delete:["accounts/{id}","accounts/{account_id}/transactions/{transaction_id}"]}},exceptions:{two_factor_required:o,param_required:r,validation_error:r,invalid_request:r,personal_details_required:o,identity_verification_required:o,jumio_verification_required:o,jumio_face_match_verification_required:o,unverified_email:o,authentication_error:o,invalid_token:o,revoked_token:o,expired_token:o,invalid_scope:o,not_found:r,rate_limit_exceeded:n,internal_server_error:r},options:{fetchCurrencies:{expires:5e3},accounts:["wallet","fiat"]}})}async fetchTime(e={}){const t=await this.publicGetTime(e),i=this.safeValue(t,"data",{});return this.parse8601(this.safeString(i,"iso"))}async fetchAccounts(e={}){const t=await this.privateGetAccounts(e),i=this.safeValue(t,"data",[]),s=[];for(let r=0;r<i.length;r++){const e=i[r],t=this.safeValue(e,"currency",{}),a=this.safeString(t,"code"),o=this.safeCurrencyCode(a);s.push({id:this.safeString(e,"id"),type:this.safeString(e,"type"),code:o,info:e})}return s}async createDepositAddress(e,t={}){let i=this.safeString(t,"account_id");if(t=this.omit(t,"account_id"),void 0===i){await this.loadAccounts();for(let t=0;t<this.accounts.length;t++){const s=this.accounts[t];if(s.code===e&&"wallet"===s.type){i=s.id;break}}}if(void 0===i)throw new r(this.id+" createDepositAddress could not find the account with matching currency code, specify an `account_id` extra param");const s={account_id:i},a=await this.privatePostAccountsAccountIdAddresses(this.extend(s,t)),o=this.safeValue(a,"data",{});return{currency:e,tag:this.safeString(o,"destination_tag"),address:this.safeString(o,"address"),info:a}}async fetchMySells(e,t,i,s={}){const r=await this.prepareAccountRequest(i,s);await this.loadMarkets();const a=this.omit(s,["account_id","accountId"]),o=await this.privateGetAccountsAccountIdSells(this.extend(r,a));return this.parseTrades(o.data,void 0,t,i)}async fetchMyBuys(e,t,i,s={}){const r=await this.prepareAccountRequest(i,s);await this.loadMarkets();const a=this.omit(s,["account_id","accountId"]),o=await this.privateGetAccountsAccountIdBuys(this.extend(r,a));return this.parseTrades(o.data,void 0,t,i)}async fetchTransactionsWithMethod(e,t,i,s,r={}){const a=await this.prepareAccountRequestWithCurrencyCode(t,s,r);await this.loadMarkets();const o=this.omit(r,["account_id","accountId"]),n=await this[e](this.extend(a,o));return this.parseTransactions(n.data,void 0,i,s)}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactionsWithMethod("privateGetAccountsAccountIdWithdrawals",e,t,i,s)}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactionsWithMethod("privateGetAccountsAccountIdDeposits",e,t,i,s)}parseTransactionStatus(e){return this.safeString({created:"pending",completed:"ok",canceled:"canceled"},e,e)}parseTransaction(e,t){const i=this.safeValue(e,"subtotal",{}),s=this.safeValue(e,"fee",{}),r=this.safeString(e,"id"),a=this.parse8601(this.safeValue(e,"created_at")),o=this.parse8601(this.safeValue(e,"updated_at")),n=this.safeString(e,"resource"),d=this.safeFloat(i,"amount"),c=this.safeString(i,"currency"),h=this.safeCurrencyCode(c),l=this.safeFloat(s,"amount"),u=this.safeString(s,"currency"),f={cost:l,currency:this.safeCurrencyCode(u)};let p=this.parseTransactionStatus(this.safeString(e,"status"));if(void 0===p){p=this.safeValue(e,"committed")?"ok":"pending"}return{info:e,id:r,txid:r,timestamp:a,datetime:this.iso8601(a),address:void 0,tag:void 0,type:n,amount:d,currency:h,status:p,updated:o,fee:f}}parseTrade(e,t){let i=void 0;const s=this.safeValue(e,"total",{}),r=this.safeValue(e,"amount",{}),a=this.safeValue(e,"subtotal",{}),o=this.safeValue(e,"fee",{}),n=this.safeString(e,"id"),d=this.parse8601(this.safeValue(e,"created_at"));if(void 0===t){const e=this.safeString(s,"currency"),t=this.safeString(r,"currency");if(void 0!==e&&void 0!==t){i=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}}const c=this.safeString(e,"resource"),h=this.safeFloat(a,"amount"),l=this.safeFloat(r,"amount");let u=void 0;void 0!==h&&void 0!==l&&(u=h/l);const f=this.safeFloat(o,"amount"),p=this.safeString(o,"currency"),m={cost:f,currency:this.safeCurrencyCode(p)};return{info:e,id:n,order:void 0,timestamp:d,datetime:this.iso8601(d),symbol:i,type:void 0,side:c,takerOrMaker:void 0,price:u,amount:l,cost:h,fee:m}}async fetchMarkets(e={}){const t=await this.fetchCurrenciesFromCache(e),i=this.safeValue(t,"currencies",{}),s=this.safeValue(t,"exchangeRates",{}),r=this.safeValue(i,"data",[]),a=this.indexBy(r,"id"),o=this.safeValue(this.safeValue(s,"data",{}),"rates",{}),n=Object.keys(o),d=[];for(let c=0;c<n.length;c++){const e=n[c],t=this.safeCurrencyCode(e);if("crypto"===(e in a?"fiat":"crypto"))for(let i=0;i<r.length;i++){const s=r[i],a=this.safeString(s,"id"),o=this.safeCurrencyCode(a),n=t+"/"+o,c=e+"-"+a;d.push({id:c,symbol:n,base:t,quote:o,baseId:e,quoteId:a,active:void 0,info:s,precision:{amount:void 0,price:void 0},limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(s,"min_size"),max:void 0}}})}}return d}async fetchCurrenciesFromCache(e={}){const t=this.safeValue(this.options,"fetchCurrencies",{}),i=this.safeInteger(t,"timestamp"),s=this.safeInteger(t,"expires",1e3),r=this.milliseconds();if(void 0===i||r-i>s){const i=await this.publicGetCurrencies(e),s=await this.publicGetExchangeRates(e);this.options.fetchCurrencies=this.extend(t,{currencies:i,exchangeRates:s,timestamp:r})}return this.safeValue(this.options,"fetchCurrencies",{})}async fetchCurrencies(e={}){const t=await this.fetchCurrenciesFromCache(e),i=this.safeValue(t,"currencies",{}),s=this.safeValue(t,"exchangeRates",{}),r=this.safeValue(i,"data",[]),a=this.indexBy(r,"id"),o=this.safeValue(this.safeValue(s,"data",{}),"rates",{}),n=Object.keys(o),d={};for(let c=0;c<n.length;c++){const e=n[c],t=e in a?"fiat":"crypto",i=this.safeValue(a,e,{}),s=this.safeString(i,"id",e),r=this.safeString(i,"name"),o=this.safeCurrencyCode(s);d[o]={id:s,code:o,info:i,type:t,name:r,active:!0,fee:void 0,precision:void 0,limits:{amount:{min:this.safeFloat(i,"min_size"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}}}return d}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.seconds(),s=this.market(e),r=this.extend({symbol:s.id},t),a=await this.publicGetPricesSymbolBuy(r),o=await this.publicGetPricesSymbolSell(r),n=await this.publicGetPricesSymbolSpot(r),d=this.safeFloat(a.data,"amount"),c=this.safeFloat(o.data,"amount"),h=this.safeFloat(n.data,"amount");return{symbol:e,timestamp:i,datetime:this.iso8601(i),bid:c,ask:d,last:h,high:void 0,low:void 0,bidVolume:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:h,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:void 0,info:{buy:a,sell:o,spot:n}}}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccounts(e),i=this.safeValue(t,"data"),s=this.safeValue(e,"type",this.options.accounts),r={info:t};for(let a=0;a<i.length;a++){const e=i[a];if(this.inArray(e.type,s)){const t=this.safeString(e.balance,"currency"),i=this.safeCurrencyCode(t),s=this.safeFloat(e.balance,"amount"),a=s,o=void 0;if(i in r)r[i].free=this.sum(r[i].free,s),r[i].total=this.sum(r[i].total,s);else{const e={free:a,used:o,total:s};r[i]=e}}}return this.parseBalance(r)}async fetchLedger(e,t,i,s={}){await this.loadMarkets();const r=await this.prepareAccountRequestWithCurrencyCode(e,i,s),a=this.omit(s,["account_id","accountId"]),o=await this.privateGetAccountsAccountIdTransactions(this.extend(r,a));return this.parseLedger(o.data,void 0,t,i)}parseLedgerEntryStatus(e){return this.safeString({completed:"ok"},e,e)}parseLedgerEntryType(e){return this.safeString({buy:"trade",sell:"trade",fiat_deposit:"transaction",fiat_withdrawal:"transaction",exchange_deposit:"transaction",exchange_withdrawal:"transaction",send:"transaction",pro_deposit:"transaction",pro_withdrawal:"transaction"},e,e)}parseLedgerEntry(e,t){const i=this.safeValue(e,"amount",{});let s=this.safeFloat(i,"amount"),r=void 0;s<0?(r="out",s=-s):r="in";const a=this.safeString(i,"currency"),o=this.safeCurrencyCode(a,t);let n=void 0;const d=this.safeValue(e,"network",{}),c=this.safeValue(d,"transaction_fee");if(void 0!==c){const e=this.safeString(c,"currency"),i=this.safeCurrencyCode(e,t);n={cost:this.safeFloat(c,"amount"),currency:i}}const h=this.parse8601(this.safeValue(e,"created_at")),l=this.safeString(e,"id"),u=this.parseLedgerEntryType(this.safeString(e,"type")),f=this.parseLedgerEntryStatus(this.safeString(e,"status")),p=this.safeString(e,"resource_path");let m=void 0;if(void 0!==p){const e=p.split("/");e.length>3&&(m=e[3])}return{info:e,id:l,timestamp:h,datetime:this.iso8601(h),direction:r,account:m,referenceId:void 0,referenceAccount:void 0,type:u,currency:o,amount:s,before:void 0,after:void 0,status:f,fee:n}}async findAccountId(e){await this.loadMarkets(),await this.loadAccounts();for(let t=0;t<this.accounts.length;t++){const i=this.accounts[t];if(i.code===e)return i.id}}prepareAccountRequest(e,t={}){const i=this.safeString2(t,"account_id","accountId");if(void 0===i)throw new a(this.id+" method requires an account_id (or accountId) parameter");const s={account_id:i};return void 0!==e&&(s.limit=e),s}async prepareAccountRequestWithCurrencyCode(e,t,i={}){let s=this.safeString2(i,"account_id","accountId");if(void 0===s){if(void 0===e)throw new a(this.id+" method requires an account_id (or accountId) parameter OR a currency code argument");if(s=await this.findAccountId(e),void 0===s)throw new r(this.id+" could not find account id for "+e)}const o={account_id:s};return void 0!==t&&(o.limit=t),o}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));"GET"===i&&Object.keys(n).length&&(o+="?"+this.urlencode(n));const d=this.urls.api+o;if("private"===t){this.checkRequiredCredentials();const e=this.nonce().toString();let t="";"GET"!==i&&Object.keys(n).length&&(t=a=this.json(n));const s=e+i+o+t,d=this.hmac(this.encode(s),this.encode(this.secret));r={"CB-ACCESS-KEY":this.apiKey,"CB-ACCESS-SIGN":d,"CB-ACCESS-TIMESTAMP":e,"Content-Type":"application/json"}}return{url:d,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,c){if(void 0===n)return;const h=this.id+" "+o;let l=this.safeString(n,"error");if(void 0!==l)throw this.throwExactlyMatchedException(this.exceptions,l,h),new r(h);const u=this.safeValue(n,"errors");if(void 0!==u&&Array.isArray(u)){if(u.length>0&&(l=this.safeString(u[0],"id"),void 0!==l))throw this.throwExactlyMatchedException(this.exceptions,l,h),new r(h)}if(void 0===this.safeValue(n,"data"))throw new r(this.id+" failed due to a malformed response "+this.json(n))}}},T24p:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,AuthenticationError:a,NotSupported:o}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinspot",name:"CoinSpot",countries:["AU"],rateLimit:1e3,has:{CORS:!1,createMarketOrder:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/28208429-3cacdf9a-6896-11e7-854e-4c79a772a30f.jpg",api:{public:"https://www.coinspot.com.au/pubapi",private:"https://www.coinspot.com.au/api"},www:"https://www.coinspot.com.au",doc:"https://www.coinspot.com.au/api",referral:"https://www.coinspot.com.au/register?code=PJURCU"},api:{public:{get:["latest"]},private:{post:["orders","orders/history","my/coin/deposit","my/coin/send","quote/buy","quote/sell","my/balances","my/orders","my/buy","my/sell","my/buy/cancel","my/sell/cancel"]}},markets:{"BTC/AUD":{id:"btc",symbol:"BTC/AUD",base:"BTC",quote:"AUD",baseId:"btc",quoteId:"aud"},"LTC/AUD":{id:"ltc",symbol:"LTC/AUD",base:"LTC",quote:"AUD",baseId:"ltc",quoteId:"aud"},"DOGE/AUD":{id:"doge",symbol:"DOGE/AUD",base:"DOGE",quote:"AUD",baseId:"doge",quoteId:"aud"}},commonCurrencies:{DRK:"DASH"}})}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostMyBalances(e),i={info:t},s=this.safeValue(t,"balance",{}),r=Object.keys(s);for(let a=0;a<r.length;a++){const e=r[a],t=this.safeCurrencyCode(e),o=this.account();o.total=this.safeFloat(s,e),i[t]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={cointype:this.market(e).id},r=await this.privatePostOrders(this.extend(s,i));return this.parseOrderBook(r,void 0,"buyorders","sellorders","rate","amount")}async fetchTicker(e,t={}){await this.loadMarkets();const i=await this.publicGetLatest(t);let s=this.marketId(e);s=s.toLowerCase();const r=i.prices[s],a=this.milliseconds(),o=this.safeFloat(r,"last");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:void 0,low:void 0,bid:this.safeFloat(r,"bid"),bidVolume:void 0,ask:this.safeFloat(r,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:void 0,info:r}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={cointype:r.id},o=await this.privatePostOrdersHistory(this.extend(a,s)),n=this.safeValue(o,"orders",[]);return this.parseTrades(n,r,t,i)}async createOrder(e,t,i,s,a,o={}){await this.loadMarkets();const n="privatePostMy"+this.capitalize(i);if("market"===t)throw new r(this.id+" allows limit orders only");const d={cointype:this.marketId(e),amount:s,rate:a};return await this[n](this.extend(d,o))}async cancelOrder(e,t,i={}){throw new o(this.id+" cancelOrder () is not fully implemented yet")}sign(e,t="public",i="GET",s={},r,o){if(!this.apiKey)throw new a(this.id+" requires apiKey for all requests");const n=this.urls.api[t]+"/"+e;if("private"===t){this.checkRequiredCredentials();const e=this.nonce();o=this.json(this.extend({nonce:e},s)),r={"Content-Type":"application/json",key:this.apiKey,sign:this.hmac(this.encode(o),this.encode(this.secret),"sha512")}}return{url:n,method:i,body:o,headers:r}}}},TGNe:function(e,t,i){"use strict";const s=i("OjXq"),{InsufficientFunds:r,ArgumentsRequired:a,ExchangeError:o,InvalidOrder:n,InvalidAddress:d,AuthenticationError:c,NotSupported:h,OrderNotFound:l,OnMaintenance:u,RateLimitExceeded:f}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinbasepro",name:"Coinbase Pro",countries:["US"],rateLimit:1e3,userAgent:this.userAgents.chrome,pro:!0,has:{cancelAllOrders:!0,CORS:!0,deposit:!0,fetchAccounts:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,createDepositAddress:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderTrades:!0,fetchOrders:!0,fetchTime:!0,fetchTransactions:!0,withdraw:!0},timeframes:{"1m":60,"5m":300,"15m":900,"1h":3600,"6h":21600,"1d":86400},urls:{test:{public:"https://api-public.sandbox.pro.coinbase.com",private:"https://api-public.sandbox.pro.coinbase.com"},logo:"https://user-images.githubusercontent.com/1294454/41764625-63b7ffde-760a-11e8-996d-a6328fa9347a.jpg",api:{public:"https://api.pro.coinbase.com",private:"https://api.pro.coinbase.com"},www:"https://pro.coinbase.com/",doc:"https://docs.pro.coinbase.com",fees:["https://docs.pro.coinbase.com/#fees","https://support.pro.coinbase.com/customer/en/portal/articles/2945310-fees"]},requiredCredentials:{apiKey:!0,secret:!0,password:!0},api:{public:{get:["currencies","products","products/{id}/book","products/{id}/candles","products/{id}/stats","products/{id}/ticker","products/{id}/trades","time"]},private:{get:["accounts","accounts/{id}","accounts/{id}/holds","accounts/{id}/ledger","accounts/{id}/transfers","coinbase-accounts","coinbase-accounts/{id}/addresses","fills","funding","fees","orders","orders/{id}","otc/orders","payment-methods","position","reports/{id}","users/self/trailing-volume"],post:["conversions","deposits/coinbase-account","deposits/payment-method","coinbase-accounts/{id}/addresses","funding/repay","orders","position/close","profiles/margin-transfer","reports","withdrawals/coinbase","withdrawals/crypto","withdrawals/payment-method"],delete:["orders","orders/{id}"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:.005,taker:.005},funding:{tierBased:!1,percentage:!1,withdraw:{BCH:0,BTC:0,LTC:0,ETH:0,EUR:.15,USD:25},deposit:{BCH:0,BTC:0,LTC:0,ETH:0,EUR:.15,USD:10}}},exceptions:{exact:{"Insufficient funds":r,NotFound:l,"Invalid API Key":c,"invalid signature":c,"Invalid Passphrase":c,"Invalid order id":n,"Private rate limit exceeded":f},broad:{"Order already done":l,"order not found":l,"price too small":n,"price too precise":n,"under maintenance":u}}})}async fetchMarkets(e={}){const t=await this.publicGetProducts(e),i=[];for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"id"),a=this.safeString(e,"base_currency"),o=this.safeString(e,"quote_currency"),n=this.safeCurrencyCode(a),d=this.safeCurrencyCode(o),c=n+"/"+d,h={min:this.safeFloat(e,"quote_increment"),max:void 0},l={amount:this.precisionFromString(this.safeString(e,"base_increment")),price:this.precisionFromString(this.safeString(e,"quote_increment"))},u="online"===e.status;i.push(this.extend(this.fees.trading,{id:r,symbol:c,baseId:a,quoteId:o,base:n,quote:d,precision:l,limits:{amount:{min:this.safeFloat(e,"base_min_size"),max:this.safeFloat(e,"base_max_size")},price:h,cost:{min:this.safeFloat(e,"min_market_funds"),max:this.safeFloat(e,"max_market_funds")}},active:u,info:e}))}return i}async fetchAccounts(e={}){const t=await this.privateGetAccounts(e),i=[];for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"id"),a=this.safeString(e,"currency"),o=this.safeCurrencyCode(a);i.push({id:r,type:void 0,currency:o,info:e})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccounts(e),i={info:t};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"currency"),a=this.safeCurrencyCode(r),o={free:this.safeFloat(e,"available"),used:this.safeFloat(e,"hold"),total:this.safeFloat(e,"balance")};i[a]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={id:this.marketId(e),level:2},r=await this.publicGetProductsIdBook(this.extend(s,i)),a=this.parseOrderBook(r);return a.nonce=this.safeInteger(r,"sequence"),a}parseTicker(e,t){const i=this.parse8601(this.safeValue(e,"time")),s=this.safeFloat(e,"bid"),r=this.safeFloat(e,"ask"),a=this.safeFloat(e,"price");return{symbol:void 0===t?void 0:t.symbol,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:s,bidVolume:void 0,ask:r,askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={id:i.id},r=this.safeString(this.options,"fetchTickerMethod","publicGetProductsIdTicker"),a=await this[r](this.extend(s,t));return this.parseTicker(a,i)}parseTrade(e,t){const i=this.parse8601(this.safeString2(e,"time","created_at"));let s=void 0;const r=this.safeString(e,"product_id");if(void 0!==r)if(r in this.markets_by_id)t=this.markets_by_id[r];else{const[e,t]=r.split("-");s=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}void 0===s&&void 0!==t&&(s=t.symbol);let a=void 0,o=void 0,n=void 0;void 0!==t&&(o=t.quote,"liquidity"in e&&(n="T"===e.liquidity?"taker":"maker",a=t[n]));const d={cost:this.safeFloat2(e,"fill_fees","fee"),currency:o,rate:a},c=this.safeString(e,"trade_id");let h="buy"===e.side?"sell":"buy";const l=this.safeString(e,"order_id");void 0!==l&&(h="buy"===e.side?"buy":"sell");const u=this.safeFloat(e,"price"),f=this.safeFloat(e,"size");return{id:c,order:l,info:e,timestamp:i,datetime:this.iso8601(i),symbol:s,type:void 0,takerOrMaker:n,side:h,price:u,amount:f,fee:d,cost:u*f}}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const r=this.market(e),o={product_id:r.id};void 0!==i&&(o.limit=i);const n=await this.privateGetFills(this.extend(o,s));return this.parseTrades(n,r,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={id:r.id},o=await this.publicGetProductsIdTrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}parseOHLCV(e,t,i="1m",s,r){return[1e3*e[0],e[3],e[2],e[1],e[4],e[5]]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o=this.timeframes[t],n={id:a.id,granularity:o};void 0!==i&&(n.start=this.iso8601(i),void 0===s&&(s=300),n.end=this.iso8601(this.sum((s-1)*o*1e3,i)));const d=await this.publicGetProductsIdCandles(this.extend(n,r));return this.parseOHLCVs(d,a,t,i,s)}async fetchTime(e={}){const t=await this.publicGetTime(e);return this.parse8601(this.safeString(t,"iso"))}parseOrderStatus(e){return this.safeString({pending:"open",active:"open",open:"open",done:"closed",canceled:"canceled",canceling:"open"},e,e)}parseOrder(e,t){const i=this.parse8601(this.safeString(e,"created_at"));let s=void 0;const r=this.safeString(e,"product_id");let a=void 0;if(void 0!==r)if(r in this.markets_by_id)t=this.markets_by_id[r];else{const[e,t]=r.split("-"),i=this.safeCurrencyCode(e);a=this.safeCurrencyCode(t),s=i+"/"+a}const o=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeFloat(e,"price"),d=this.safeFloat(e,"filled_size"),c=this.safeFloat(e,"size",d);let h=void 0;void 0!==c&&void 0!==d&&(h=c-d);const l=this.safeFloat(e,"executed_value"),u=this.safeFloat(e,"fill_fees");let f=void 0;if(void 0!==u){let e=void 0;void 0!==t?e=t.quote:void 0!==a&&(e=a),f={cost:u,currency:e,rate:void 0}}void 0===s&&void 0!==t&&(s=t.symbol);const p=this.safeString(e,"id"),m=this.safeString(e,"type"),y=this.safeString(e,"side");return{id:p,clientOrderId:void 0,info:e,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:o,symbol:s,type:m,side:y,price:n,cost:l,amount:c,filled:d,remaining:h,fee:f}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privateGetOrdersId(this.extend(s,i));return this.parseOrder(r)}async fetchOrderTrades(e,t,i,s,r={}){await this.loadMarkets();let a=void 0;void 0!==t&&(a=this.market(t));const o={order_id:e},n=await this.privateGetFills(this.extend(o,r));return this.parseTrades(n,a,i,s)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r={status:"all"};let a=void 0;void 0!==e&&(a=this.market(e),r.product_id=a.id);const o=await this.privateGetOrders(this.extend(r,s));return this.parseOrders(o,a,t,i)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.market(e),r.product_id=a.id);const o=await this.privateGetOrders(this.extend(r,s));return this.parseOrders(o,a,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const r={status:"done"};let a=void 0;void 0!==e&&(a=this.market(e),r.product_id=a.id);const o=await this.privateGetOrders(this.extend(r,s));return this.parseOrders(o,a,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o={product_id:this.marketId(e),side:i,size:this.amountToPrecision(e,s),type:t};"limit"===t&&(o.price=this.priceToPrecision(e,r));const n=await this.privatePostOrders(this.extend(o,a));return this.parseOrder(n)}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privateDeleteOrdersId({id:e})}async cancelAllOrders(e,t={}){return await this.privateDeleteOrders(t)}calculateFee(e,t,i,s,r,a="taker",o={}){const n=this.markets[e],d=n[a],c=s*r,h=n.quote;return{type:a,currency:h,rate:d,cost:parseFloat(this.currencyToPrecision(h,d*c))}}async fetchPaymentMethods(e={}){return await this.privateGetPaymentMethods(e)}async deposit(e,t,i,s={}){await this.loadMarkets();const r={currency:this.currency(e).id,amount:t};let a="privatePostDeposits";if("payment_method_id"in s)a+="PaymentMethod";else{if(!("coinbase_account_id"in s))throw new h(this.id+" deposit() requires one of `coinbase_account_id` or `payment_method_id` extra params");a+="CoinbaseAccount"}const n=await this[a](this.extend(r,s));if(!n)throw new o(this.id+" deposit() error: "+this.json(n));return{info:n,id:n.id}}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a={currency:this.currency(e).id,amount:t};let n="privatePostWithdrawals";"payment_method_id"in r?n+="PaymentMethod":"coinbase_account_id"in r?n+="CoinbaseAccount":(n+="Crypto",a.crypto_address=i);const d=await this[n](this.extend(a,r));if(!d)throw new o(this.id+" withdraw() error: "+this.json(d));return{info:d,id:d.id}}async fetchTransactions(e,t,i,s={}){await this.loadMarkets(),await this.loadAccounts();let r=void 0,n=this.safeString(s,"id");if(void 0===n){if(void 0===e)throw new a(this.id+" fetchTransactions() requires a currency code argument if no account id specified in params");r=this.currency(e);const t=this.indexBy(this.accounts,"currency"),i=this.safeValue(t,e);if(void 0===i)throw new o(this.id+" fetchTransactions() could not find account id for "+e);n=i.id}const d={id:n};void 0!==i&&(d.limit=i);const c=await this.privateGetAccountsIdTransfers(this.extend(d,s));for(let a=0;a<c.length;a++)c[a].currency=e;return this.parseTransactions(c,r,t,i)}parseTransactionStatus(e){if(this.safeValue(e,"canceled_at"))return"canceled";const t=this.safeValue(e,"processed_at"),i=this.safeValue(e,"completed_at");return i?"ok":t&&!i?"failed":"pending"}parseTransaction(e,t){const i=this.safeValue(e,"details",{}),s=this.safeString(e,"id"),r=this.safeString(i,"crypto_transaction_hash"),a=this.parse8601(this.safeString(e,"created_at")),o=this.parse8601(this.safeString(e,"processed_at")),n=this.safeString(e,"currency"),d=this.safeCurrencyCode(n,t),c=this.parseTransactionStatus(e),h=this.safeFloat(e,"amount");let l=this.safeString(e,"type"),u=this.safeString(i,"crypto_address");const f=this.safeString(i,"destination_tag");return u=this.safeString(e,"crypto_address",u),"withdraw"===l&&(l="withdrawal",u=this.safeString(i,"sent_to_address",u)),{info:e,id:s,txid:r,timestamp:a,datetime:this.iso8601(a),address:u,tag:f,type:l,amount:h,currency:d,status:c,updated:o,fee:void 0}}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));"GET"===i&&Object.keys(n).length&&(o+="?"+this.urlencode(n));const d=this.urls.api[t]+o;if("private"===t){this.checkRequiredCredentials();const e=this.nonce().toString();let t="";"GET"!==i&&Object.keys(n).length&&(t=a=this.json(n));const s=e+i+o+t,d=this.base64ToBinary(this.secret),c=this.hmac(this.encode(s),d,"sha256","base64");r={"CB-ACCESS-KEY":this.apiKey,"CB-ACCESS-SIGN":this.decode(c),"CB-ACCESS-TIMESTAMP":e,"CB-ACCESS-PASSPHRASE":this.password,"Content-Type":"application/json"}}return{url:d,method:i,body:a,headers:r}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e);let s=this.safeValue(this.options,"coinbaseAccounts");void 0===s&&(s=await this.privateGetCoinbaseAccounts(),this.options.coinbaseAccounts=s,this.options.coinbaseAccountsByCurrencyId=this.indexBy(s,"currency"));const r=i.id,a=this.safeValue(this.options.coinbaseAccountsByCurrencyId,r);if(void 0===a)throw new d(this.id+" fetchDepositAddress() could not find currency code "+e+" with id = "+r+" in this.options['coinbaseAccountsByCurrencyId']");const o={id:a.id},n=await this.privateGetCoinbaseAccountsIdAddresses(this.extend(o,t)),c=this.safeString(n,"address"),h=this.safeString(n,"destination_tag");return{currency:e,address:this.checkAddress(c),tag:h,info:n}}async createDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e);let s=this.safeValue(this.options,"coinbaseAccounts");void 0===s&&(s=await this.privateGetCoinbaseAccounts(),this.options.coinbaseAccounts=s,this.options.coinbaseAccountsByCurrencyId=this.indexBy(s,"currency"));const r=i.id,a=this.safeValue(this.options.coinbaseAccountsByCurrencyId,r);if(void 0===a)throw new d(this.id+" fetchDepositAddress() could not find currency code "+e+" with id = "+r+" in this.options['coinbaseAccountsByCurrencyId']");const o={id:a.id},n=await this.privatePostCoinbaseAccountsIdAddresses(this.extend(o,t)),c=this.safeString(n,"address"),h=this.safeString(n,"destination_tag");return{currency:e,address:this.checkAddress(c),tag:h,info:n}}handleErrors(e,t,i,s,r,a,n,d,c){if(400===e||404===e){if("{"===a[0]){const e=this.safeString(n,"message"),t=this.id+" "+e;throw this.throwExactlyMatchedException(this.exceptions.exact,e,t),this.throwBroadlyMatchedException(this.exceptions.broad,e,t),new o(t)}throw new o(this.id+" "+a)}}async request(e,t="public",i="GET",s={},r,a){const n=await this.fetch2(e,t,i,s,r,a);if("string"!==typeof n&&"message"in n)throw new o(this.id+" "+this.json(n));return n}}},TJ1y:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var s=i("Gi7R"),r=i("+oaW"),a=i("e0KM"),o=i("vb3U"),n=i("BbEw");t.keccak=function(t,i){return void 0===i&&(i=256),t="string"!==typeof t||a.isHexString(t)?n.toBuffer(t):e.from(t,"utf8"),i||(i=256),s("keccak"+i).update(t).digest()},t.keccak256=function(e){return t.keccak(e)},t.sha256=function(e){return e=n.toBuffer(e),r("sha256").update(e).digest()},t.ripemd160=function(e,t){e=n.toBuffer(e);var i=r("rmd160").update(e).digest();return!0===t?n.setLength(i,32):i},t.rlphash=function(e){return t.keccak(o.encode(e))}}).call(this,i("zkTx").Buffer)},"TPo/":function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"fybse",name:"FYB-SE",countries:["SE"],has:{CORS:!1},rateLimit:1500,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766512-31019772-5edb-11e7-8241-2e675e6797f1.jpg",api:"https://www.fybse.se/api/SEK",www:"https://www.fybse.se",doc:"https://fyb.docs.apiary.io"},api:{public:{get:["ticker","tickerdetailed","orderbook","trades"]},private:{post:["test","getaccinfo","getpendingorders","getorderhistory","cancelpendingorder","placeorder","withdraw"]}},markets:{"BTC/SEK":{id:"SEK",symbol:"BTC/SEK",base:"BTC",quote:"SEK"}}})}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGetaccinfo(e),i=this.safeFloat(t,"btcBal"),s=this.symbols[0],r=this.markets[s].quote,a=r.toLowerCase()+"Bal",o=this.safeFloat(t,a),n=this.account();n.total=i;const d={BTC:n};return d[r]=this.account(),d[r].total=o,d.info=t,this.parseBalance(d)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=await this.publicGetOrderbook(i);return this.parseOrderBook(s)}async fetchTicker(e,t={}){await this.loadMarkets();const i=await this.publicGetTickerdetailed(t),s=this.milliseconds(),r=this.safeFloat(i,"last"),a=this.safeFloat(i,"vol");return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:void 0,low:void 0,bid:this.safeFloat(i,"bid"),bidVolume:void 0,ask:this.safeFloat(i,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:a,quoteVolume:void 0,info:i}}parseTrade(e,t){const i=this.safeTimestamp(e,"date"),s=this.safeString(e,"tid");let r=void 0;void 0!==t&&(r=t.symbol);const a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount");let n=void 0;return void 0!==a&&void 0!==o&&(n=a*o),{id:s,info:e,order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:r,type:void 0,side:void 0,takerOrMaker:void 0,price:a,amount:o,cost:n,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a=await this.publicGetTrades(s);return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o={qty:s,price:r,type:i[0].toUpperCase()},n=await this.privatePostPlaceorder(this.extend(o,a));return{info:n,id:n.pending_oid}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={orderNo:e};return await this.privatePostCancelpendingorder(this.extend(s,i))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+e;if("public"===t)o+=".json";else{this.checkRequiredCredentials();const e=this.nonce();a=this.urlencode(this.extend({timestamp:e},s)),r={"Content-Type":"application/x-www-form-urlencoded",key:this.apiKey,sig:this.hmac(this.encode(a),this.encode(this.secret),"sha1")}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){const n=await this.fetch2(e,t,i,s,a,o);if("private"===t&&"error"in n&&n.error)throw new r(this.id+" "+this.json(n));return n}}},"Te/i":function(e,t,i){(function(t){var s=i("JxtV")._;function r(e,i){null!=e&&("number"==typeof e?this.fromNumber(e,i):t.isBuffer(e)?this.fromBuffer(e):null==i&&"string"!=typeof e?this.fromByteArray(e):this.fromString(e,i))}function a(){return new r(null)}r.prototype.am=function(e,t,i,s,r,a){for(var o=16383&t,n=t>>14;--a>=0;){var d=16383&this[e],c=this[e++]>>14,h=n*d+c*o;r=((d=o*d+((16383&h)<<14)+i[s]+r)>>28)+(h>>14)+n*c,i[s++]=268435455&d}return r},r.prototype.DB=28,r.prototype.DM=268435455,r.prototype.DV=1<<28;r.prototype.FV=Math.pow(2,52),r.prototype.F1=24,r.prototype.F2=4;var o,n,d="0123456789abcdefghijklmnopqrstuvwxyz",c=new Array;for(o="0".charCodeAt(0),n=0;n<=9;++n)c[o++]=n;for(o="a".charCodeAt(0),n=10;n<36;++n)c[o++]=n;for(o="A".charCodeAt(0),n=10;n<36;++n)c[o++]=n;function h(e){return d.charAt(e)}function l(e,t){var i=c[e.charCodeAt(t)];return null==i?-1:i}function u(e){var t=a();return t.fromInt(e),t}function f(e){var t,i=1;return 0!=(t=e>>>16)&&(e=t,i+=16),0!=(t=e>>8)&&(e=t,i+=8),0!=(t=e>>4)&&(e=t,i+=4),0!=(t=e>>2)&&(e=t,i+=2),0!=(t=e>>1)&&(e=t,i+=1),i}function p(e){this.m=e}function m(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function y(e,t){return e&t}function b(e,t){return e|t}function v(e,t){return e^t}function g(e){if(0===e)return-1;var t=0;return 0===(65535&e)&&(e>>=16,t+=16),0===(255&e)&&(e>>=8,t+=8),0===(15&e)&&(e>>=4,t+=4),0===(3&e)&&(e>>=2,t+=2),0===(1&e)&&++t,t}function w(){}function k(e){return e}function _(e){this.r2=a(),this.q3=a(),r.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}p.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},p.prototype.revert=function(e){return e},p.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},p.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i),this.reduce(i)},p.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},m.prototype.convert=function(e){var t=a();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(r.ZERO)>0&&this.m.subTo(t,t),t},m.prototype.revert=function(e){var t=a();return e.copyTo(t),this.reduce(t),t},m.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var i=32767&e[t],s=i*this.mpl+((i*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[i=t+this.m.t]+=this.m.am(0,s,e,t,0,this.m.t);e[i]>=e.DV;)e[i]-=e.DV,e[++i]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},m.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i),this.reduce(i)},m.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},w.prototype.convert=k,w.prototype.revert=k,w.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i)},w.prototype.sqrTo=function(e,t){e.squareTo(t)},_.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=a();return e.copyTo(t),this.reduce(t),t},_.prototype.revert=function(e){return e},_.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},_.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i),this.reduce(i)},_.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},r.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},r.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+DV:this.t=0},r.prototype.fromString=function(e,t,i){var s;switch(t){case 2:s=1;break;case 4:s=2;break;case 8:s=3;break;case 16:s=4;break;case 32:s=5;break;case 256:s=8;break;default:return void this.fromRadix(e,t)}this.t=0,this.s=0;for(var a=e.length,o=!1,n=0;--a>=0;){var d=8==s?255&e[a]:l(e,a);d<0?"-"==e.charAt(a)&&(o=!0):(o=!1,0===n?this[this.t++]=d:n+s>this.DB?(this[this.t-1]|=(d&(1<<this.DB-n)-1)<<n,this[this.t++]=d>>this.DB-n):this[this.t-1]|=d<<n,(n+=s)>=this.DB&&(n-=this.DB))}i||8!=s||0==(128&e[0])||(this.s=-1,n>0&&(this[this.t-1]|=(1<<this.DB-n)-1<<n)),this.clamp(),o&&r.ZERO.subTo(this,this)},r.prototype.fromByteArray=function(e,t){this.fromString(e,256,t)},r.prototype.fromBuffer=function(e){this.fromString(e,256,!0)},r.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},r.prototype.dlShiftTo=function(e,t){var i;for(i=this.t-1;i>=0;--i)t[i+e]=this[i];for(i=e-1;i>=0;--i)t[i]=0;t.t=this.t+e,t.s=this.s},r.prototype.drShiftTo=function(e,t){for(var i=e;i<this.t;++i)t[i-e]=this[i];t.t=Math.max(this.t-e,0),t.s=this.s},r.prototype.lShiftTo=function(e,t){var i,s=e%this.DB,r=this.DB-s,a=(1<<r)-1,o=Math.floor(e/this.DB),n=this.s<<s&this.DM;for(i=this.t-1;i>=0;--i)t[i+o+1]=this[i]>>r|n,n=(this[i]&a)<<s;for(i=o-1;i>=0;--i)t[i]=0;t[o]=n,t.t=this.t+o+1,t.s=this.s,t.clamp()},r.prototype.rShiftTo=function(e,t){t.s=this.s;var i=Math.floor(e/this.DB);if(i>=this.t)t.t=0;else{var s=e%this.DB,r=this.DB-s,a=(1<<s)-1;t[0]=this[i]>>s;for(var o=i+1;o<this.t;++o)t[o-i-1]|=(this[o]&a)<<r,t[o-i]=this[o]>>s;s>0&&(t[this.t-i-1]|=(this.s&a)<<r),t.t=this.t-i,t.clamp()}},r.prototype.subTo=function(e,t){for(var i=0,s=0,r=Math.min(e.t,this.t);i<r;)s+=this[i]-e[i],t[i++]=s&this.DM,s>>=this.DB;if(e.t<this.t){for(s-=e.s;i<this.t;)s+=this[i],t[i++]=s&this.DM,s>>=this.DB;s+=this.s}else{for(s+=this.s;i<e.t;)s-=e[i],t[i++]=s&this.DM,s>>=this.DB;s-=e.s}t.s=s<0?-1:0,s<-1?t[i++]=this.DV+s:s>0&&(t[i++]=s),t.t=i,t.clamp()},r.prototype.multiplyTo=function(e,t){var i=this.abs(),s=e.abs(),a=i.t;for(t.t=a+s.t;--a>=0;)t[a]=0;for(a=0;a<s.t;++a)t[a+i.t]=i.am(0,s[a],t,a,0,i.t);t.s=0,t.clamp(),this.s!=e.s&&r.ZERO.subTo(t,t)},r.prototype.squareTo=function(e){for(var t=this.abs(),i=e.t=2*t.t;--i>=0;)e[i]=0;for(i=0;i<t.t-1;++i){var s=t.am(i,t[i],e,2*i,0,1);(e[i+t.t]+=t.am(i+1,2*t[i],e,2*i+1,s,t.t-i-1))>=t.DV&&(e[i+t.t]-=t.DV,e[i+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(i,t[i],e,2*i,0,1)),e.s=0,e.clamp()},r.prototype.divRemTo=function(e,t,i){var s=e.abs();if(!(s.t<=0)){var o=this.abs();if(o.t<s.t)return null!=t&&t.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=a());var n=a(),d=this.s,c=e.s,h=this.DB-f(s[s.t-1]);h>0?(s.lShiftTo(h,n),o.lShiftTo(h,i)):(s.copyTo(n),o.copyTo(i));var l=n.t,u=n[l-1];if(0!==u){var p=u*(1<<this.F1)+(l>1?n[l-2]>>this.F2:0),m=this.FV/p,y=(1<<this.F1)/p,b=1<<this.F2,v=i.t,g=v-l,w=null==t?a():t;for(n.dlShiftTo(g,w),i.compareTo(w)>=0&&(i[i.t++]=1,i.subTo(w,i)),r.ONE.dlShiftTo(l,w),w.subTo(n,n);n.t<l;)n[n.t++]=0;for(;--g>=0;){var k=i[--v]==u?this.DM:Math.floor(i[v]*m+(i[v-1]+b)*y);if((i[v]+=n.am(0,k,i,g,0,l))<k)for(n.dlShiftTo(g,w),i.subTo(w,i);i[v]<--k;)i.subTo(w,i)}null!=t&&(i.drShiftTo(l,t),d!=c&&r.ZERO.subTo(t,t)),i.t=l,i.clamp(),h>0&&i.rShiftTo(h,i),d<0&&r.ZERO.subTo(i,i)}}},r.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0===(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},r.prototype.isEven=function(){return 0===(this.t>0?1&this[0]:this.s)},r.prototype.exp=function(e,t){if(e>4294967295||e<1)return r.ONE;var i=a(),s=a(),o=t.convert(this),n=f(e)-1;for(o.copyTo(i);--n>=0;)if(t.sqrTo(i,s),(e&1<<n)>0)t.mulTo(s,o,i);else{var d=i;i=s,s=d}return t.revert(i)},r.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},r.prototype.toRadix=function(e){if(null==e&&(e=10),0===this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),i=Math.pow(e,t),s=u(i),r=a(),o=a(),n="";for(this.divRemTo(s,r,o);r.signum()>0;)n=(i+o.intValue()).toString(e).substr(1)+n,r.divRemTo(s,r,o);return o.intValue().toString(e)+n},r.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var i=this.chunkSize(t),s=Math.pow(t,i),a=!1,o=0,n=0,d=0;d<e.length;++d){var c=l(e,d);c<0?"-"==e.charAt(d)&&0===this.signum()&&(a=!0):(n=t*n+c,++o>=i&&(this.dMultiply(s),this.dAddOffset(n,0),o=0,n=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(n,0)),a&&r.ZERO.subTo(this,this)},r.prototype.bitwiseTo=function(e,t,i){var s,r,a=Math.min(e.t,this.t);for(s=0;s<a;++s)i[s]=t(this[s],e[s]);if(e.t<this.t){for(r=e.s&this.DM,s=a;s<this.t;++s)i[s]=t(this[s],r);i.t=this.t}else{for(r=this.s&this.DM,s=a;s<e.t;++s)i[s]=t(r,e[s]);i.t=e.t}i.s=t(this.s,e.s),i.clamp()},r.prototype.addTo=function(e,t){for(var i=0,s=0,r=Math.min(e.t,this.t);i<r;)s+=this[i]+e[i],t[i++]=s&this.DM,s>>=this.DB;if(e.t<this.t){for(s+=e.s;i<this.t;)s+=this[i],t[i++]=s&this.DM,s>>=this.DB;s+=this.s}else{for(s+=this.s;i<e.t;)s+=e[i],t[i++]=s&this.DM,s>>=this.DB;s+=e.s}t.s=s<0?-1:0,s>0?t[i++]=s:s<-1&&(t[i++]=this.DV+s),t.t=i,t.clamp()},r.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},r.prototype.dAddOffset=function(e,t){if(0!==e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},r.prototype.multiplyLowerTo=function(e,t,i){var s,r=Math.min(this.t+e.t,t);for(i.s=0,i.t=r;r>0;)i[--r]=0;for(s=i.t-this.t;r<s;++r)i[r+this.t]=this.am(0,e[r],i,r,0,this.t);for(s=Math.min(e.t,t);r<s;++r)this.am(0,e[r],i,r,0,t-r);i.clamp()},r.prototype.multiplyUpperTo=function(e,t,i){--t;var s=i.t=this.t+e.t-t;for(i.s=0;--s>=0;)i[s]=0;for(s=Math.max(t-this.t,0);s<e.t;++s)i[this.t+s-t]=this.am(t-s,e[s],i,0,0,this.t+s-t);i.clamp(),i.drShiftTo(1,i)},r.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var i,s=(1<<t)-1,r=!1,a="",o=this.t,n=this.DB-o*this.DB%t;if(o-- >0)for(n<this.DB&&(i=this[o]>>n)>0&&(r=!0,a=h(i));o>=0;)n<t?(i=(this[o]&(1<<n)-1)<<t-n,i|=this[--o]>>(n+=this.DB-t)):(i=this[o]>>(n-=t)&s,n<=0&&(n+=this.DB,--o)),i>0&&(r=!0),r&&(a+=h(i));return r?a:"0"},r.prototype.negate=function(){var e=a();return r.ZERO.subTo(this,e),e},r.prototype.abs=function(){return this.s<0?this.negate():this},r.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var i=this.t;if(0!=(t=i-e.t))return this.s<0?-t:t;for(;--i>=0;)if(0!=(t=this[i]-e[i]))return t;return 0},r.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+f(this[this.t-1]^this.s&this.DM)},r.prototype.mod=function(e){var t=a();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(r.ZERO)>0&&e.subTo(t,t),t},r.prototype.clone=function(){var e=a();return this.copyTo(e),e},r.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0===this.t)return-1}else{if(1==this.t)return this[0];if(0===this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},r.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},r.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var i,s=this.DB-e*this.DB%8,r=0;if(e-- >0)for(s<this.DB&&(i=this[e]>>s)!=(this.s&this.DM)>>s&&(t[r++]=i|this.s<<this.DB-s);e>=0;)s<8?(i=(this[e]&(1<<s)-1)<<8-s,i|=this[--e]>>(s+=this.DB-8)):(i=this[e]>>(s-=8)&255,s<=0&&(s+=this.DB,--e)),0!=(128&i)&&(i|=-256),0===r&&(128&this.s)!=(128&i)&&++r,(r>0||i!=this.s)&&(t[r++]=i);return t},r.prototype.toBuffer=function(e){var i=t.from(this.toByteArray());if(!0===e&&0===i[0])i=i.slice(1);else if(s.isNumber(e)){if(i.length>e){for(var r=0;r<i.length-e;r++)if(0!==i[r])return null;return i.slice(i.length-e)}if(i.length<e){var a=t.alloc(e);return a.fill(0,0,e-i.length),i.copy(a,e-i.length),a}}return i},r.prototype.equals=function(e){return 0==this.compareTo(e)},r.prototype.min=function(e){return this.compareTo(e)<0?this:e},r.prototype.max=function(e){return this.compareTo(e)>0?this:e},r.prototype.and=function(e){var t=a();return this.bitwiseTo(e,y,t),t},r.prototype.or=function(e){var t=a();return this.bitwiseTo(e,b,t),t},r.prototype.xor=function(e){var t=a();return this.bitwiseTo(e,v,t),t},r.prototype.not=function(){for(var e=a(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},r.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+g(this[e]);return this.s<0?this.t*this.DB:-1},r.prototype.add=function(e){var t=a();return this.addTo(e,t),t},r.prototype.subtract=function(e){var t=a();return this.subTo(e,t),t},r.prototype.multiply=function(e){var t=a();return this.multiplyTo(e,t),t},r.prototype.divide=function(e){var t=a();return this.divRemTo(e,t,null),t},r.prototype.remainder=function(e){var t=a();return this.divRemTo(e,null,t),t},r.prototype.modPow=function(e,t){var i,s,r=e.bitLength(),o=u(1);if(r<=0)return o;i=r<18?1:r<48?3:r<144?4:r<768?5:6,s=r<8?new p(t):t.isEven()?new _(t):new m(t);var n=new Array,d=3,c=i-1,h=(1<<i)-1;if(n[1]=s.convert(this),i>1){var l=a();for(s.sqrTo(n[1],l);d<=h;)n[d]=a(),s.mulTo(l,n[d-2],n[d]),d+=2}var y,b,v=e.t-1,g=!0,w=a();for(r=f(e[v])-1;v>=0;){for(r>=c?y=e[v]>>r-c&h:(y=(e[v]&(1<<r+1)-1)<<c-r,v>0&&(y|=e[v-1]>>this.DB+r-c)),d=i;0===(1&y);)y>>=1,--d;if((r-=d)<0&&(r+=this.DB,--v),g)n[y].copyTo(o),g=!1;else{for(;d>1;)s.sqrTo(o,w),s.sqrTo(w,o),d-=2;d>0?s.sqrTo(o,w):(b=o,o=w,w=b),s.mulTo(w,n[y],o)}for(;v>=0&&0===(e[v]&1<<r);)s.sqrTo(o,w),b=o,o=w,w=b,--r<0&&(r=this.DB-1,--v)}return s.revert(o)},r.prototype.pow=function(e){return this.exp(e,new w)},r.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),i=e.s<0?e.negate():e.clone();if(t.compareTo(i)<0){var s=t;t=i,i=s}var r=t.getLowestSetBit(),a=i.getLowestSetBit();if(a<0)return t;for(r<a&&(a=r),a>0&&(t.rShiftTo(a,t),i.rShiftTo(a,i));t.signum()>0;)(r=t.getLowestSetBit())>0&&t.rShiftTo(r,t),(r=i.getLowestSetBit())>0&&i.rShiftTo(r,i),t.compareTo(i)>=0?(t.subTo(i,t),t.rShiftTo(1,t)):(i.subTo(t,i),i.rShiftTo(1,i));return a>0&&i.lShiftTo(a,i),i},r.int2char=h,r.ZERO=u(0),r.ONE=u(1),r.prototype.square=function(){var e=a();return this.squareTo(e),e},e.exports=r}).call(this,i("zkTx").Buffer)},U63y:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,AccountSuspended:a,ArgumentsRequired:o,AuthenticationError:n,DDoSProtection:d,ExchangeNotAvailable:c,InvalidOrder:h,OrderNotFound:l,PermissionDenied:u,InsufficientFunds:f}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bibox",name:"Bibox",countries:["CN","US","KR"],version:"v1",has:{CORS:!1,publicAPI:!1,fetchBalance:!0,fetchDeposits:!0,fetchWithdrawals:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchFundingFees:!0,fetchTickers:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchOHLCV:!0,createMarketOrder:!1,withdraw:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","12h":"12hour","1d":"day","1w":"week"},urls:{logo:"https://user-images.githubusercontent.com/51840849/77257418-3262b000-6c85-11ea-8fb8-20bdf20b3592.jpg",api:"https://api.bibox.com",www:"https://www.bibox.com",doc:["https://biboxcom.github.io/en/"],fees:"https://bibox.zendesk.com/hc/en-us/articles/360002336133",referral:"https://w2.bibox.com/login/register?invite_code=05Kj3I"},api:{public:{post:["mdata"],get:["cquery","mdata"]},private:{post:["cquery","ctrade","user","orderpending","transfer"]},v2private:{post:["assets/transfer/spot"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:8e-4},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},exceptions:{2011:a,2015:n,2021:f,2027:f,2033:l,2067:h,2068:h,2085:h,3012:n,3024:u,3025:n,4e3:c,4003:d},commonCurrencies:{KEY:"Bihu",MTC:"MTC Mesh Network",PAI:"PCHAIN"}})}async fetchMarkets(e={}){const t=await this.publicGetMdata(this.extend({cmd:"marketAll"},e)),i=this.safeValue(t,"result"),s=[];for(let r=0;r<i.length;r++){const e=i[r],t=this.safeInteger(e,"id"),a=this.safeString(e,"coin_symbol"),o=this.safeString(e,"currency_symbol"),n=this.safeCurrencyCode(a),d=this.safeCurrencyCode(o),c=n+"/"+d,h=a+"_"+o,l={amount:4,price:8};s.push({id:h,numericId:t,symbol:c,base:n,quote:d,baseId:a,quoteId:o,active:!0,info:e,precision:l,limits:{amount:{min:Math.pow(10,-l.amount),max:void 0},price:{min:Math.pow(10,-l.price),max:void 0}}})}return s}parseTicker(e,t){const i=this.safeInteger(e,"timestamp");let s=void 0;if(void 0!==t)s=t.symbol;else{const t=this.safeString(e,"coin_symbol"),i=this.safeString(e,"currency_symbol");s=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(i)}const r=this.safeFloat(e,"last"),a=this.safeFloat(e,"change"),o=this.safeFloat2(e,"vol","vol24H");let n=void 0;void 0!==r&&void 0!==a&&(n=r-a);let d=this.safeString(e,"percent");return void 0!==d&&(d=d.replace("%",""),d=parseFloat(d)),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:n,close:r,last:r,previousClose:void 0,change:a,percentage:d,average:void 0,baseVolume:o,quoteVolume:this.safeFloat(e,"amount"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={cmd:"ticker",pair:i.id},r=await this.publicGetMdata(this.extend(s,t));return this.parseTicker(r.result,i)}parseTickers(e,t){const i=[];for(let s=0;s<e.length;s++){const r=this.parseTicker(e[s]);(void 0===t||this.inArray(r.symbol,t))&&i.push(r)}return i}async fetchTickers(e,t={}){const i=await this.publicGetMdata(this.extend({cmd:"marketAll"},t)),s=this.parseTickers(i.result,e);return this.indexBy(s,"symbol")}parseTrade(e,t){const i=this.safeInteger2(e,"time","createdAt");let s=this.safeInteger2(e,"side","order_side");s=1===s?"buy":"sell";let r=void 0;if(void 0===t){let i=this.safeString(e,"pair");if(void 0===i){const t=this.safeString(e,"coin_symbol"),s=this.safeString(e,"currency_symbol");void 0!==t&&void 0!==s&&(i=t+"_"+s)}i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(r=t.symbol);let a=void 0;const o=this.safeFloat(e,"fee");let n=this.safeString(e,"fee_symbol");void 0!==n&&(n=n in this.currencies_by_id?this.currencies_by_id[n].code:this.safeCurrencyCode(n));const d=this.safeFloat(e,"price"),c=this.safeFloat(e,"amount");let h=void 0;return void 0!==d&&void 0!==c&&(h=d*c),void 0!==o&&(a={cost:o,currency:n,rate:void 0}),{info:e,id:this.safeString(e,"id"),order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:r,type:"limit",takerOrMaker:void 0,side:s,price:d,amount:c,cost:h,fee:a}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={cmd:"deals",pair:r.id};void 0!==i&&(a.size=i);const o=await this.publicGetMdata(this.extend(a,s));return this.parseTrades(o.result,r,t,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={cmd:"depth",pair:this.market(e).id};void 0!==t&&(s.size=t);const r=await this.publicGetMdata(this.extend(s,i));return this.parseOrderBook(r.result,this.safeFloat(r.result,"update_time"),"bids","asks","price","volume")}parseOHLCV(e,t,i="1m",s,r){return[e.time,this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"vol")]}async fetchOHLCV(e,t="1m",i,s=1e3,r={}){await this.loadMarkets();const a=this.market(e),o={cmd:"kline",pair:a.id,period:this.timeframes[t],size:s},n=await this.publicGetMdata(this.extend(o,r));return this.parseOHLCVs(n.result,a,t,i,s)}async fetchCurrencies(e={}){if(!this.apiKey||!this.secret)throw new n(this.id+" fetchCurrencies is an authenticated endpoint, therefore it requires 'apiKey' and 'secret' credentials. If you don't need currency details, set exchange.has['fetchCurrencies'] = false before calling its methods.");const t=await this.privatePostTransfer(this.extend({cmd:"transfer/coinList",body:{}},e)),i=this.safeValue(t,"result"),s={};for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"symbol"),a=e.name,o=this.safeCurrencyCode(t),n=8,d=this.safeValue(e,"enable_deposit"),c=this.safeValue(e,"enable_withdraw"),h=d&&c;s[o]={id:t,code:o,info:e,name:a,active:h,fee:void 0,precision:n,limits:{amount:{min:Math.pow(10,-n),max:Math.pow(10,n)},price:{min:Math.pow(10,-n),max:Math.pow(10,n)},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:Math.pow(10,n)}}}}return s}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeString(e,"type","assets");e=this.omit(e,"type");const i={cmd:"transfer/"+t,body:this.extend({select:1},e)},s=await this.privatePostTransfer(i),r=this.safeValue(s,"result"),a={info:r};let o=void 0;o="assets_list"in r?this.indexBy(r.assets_list,"coin_symbol"):r;const n=Object.keys(o);for(let d=0;d<n.length;d++){const e=n[d];let t=e.toUpperCase();t.indexOf("TOTAL_")>=0&&(t=t.slice(6)),t in this.currencies_by_id&&(t=this.currencies_by_id[t].code);const i=this.account();let s=o[e];"string"===typeof s?(s=parseFloat(s),i.free=s,i.used=0,i.total=s):(i.free=this.safeFloat(s,"balance"),i.used=this.safeFloat(s,"freeze")),a[t]=i}return this.parseBalance(a)}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={page:1};void 0!==e&&(r=this.currency(e),a.symbol=r.id),a.size=void 0!==i?i:100;const o=await this.privatePostTransfer({cmd:"transfer/transferInList",body:this.extend(a,s)}),n=this.safeValue(o.result,"items",[]);for(let d=0;d<n.length;d++)n[d].type="deposit";return this.parseTransactions(n,r,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={page:1};void 0!==e&&(r=this.currency(e),a.symbol=r.id),a.size=void 0!==i?i:100;const o=await this.privatePostTransfer({cmd:"transfer/transferOutList",body:this.extend(a,s)}),n=this.safeValue(o.result,"items",[]);for(let d=0;d<n.length;d++)n[d].type="withdrawal";return this.parseTransactions(n,r,t,i)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"to_address"),r=this.safeString(e,"coin_symbol"),a=this.safeCurrencyCode(r,t),o=this.safeString(e,"createdAt");let n=this.safeString(e,"addr_remark");const d=this.safeString(e,"type"),c=this.parseTransactionStatusByType(this.safeString(e,"status"),d),h=this.safeFloat(e,"amount");let l=this.safeFloat(e,"fee");"deposit"===d&&(l=0,n=void 0);const u={cost:l,currency:a};return{info:e,id:i,txid:void 0,timestamp:o,datetime:this.iso8601(o),address:s,tag:n,type:d,amount:h,currency:a,status:c,updated:void 0,fee:u}}parseTransactionStatusByType(e,t){return this.safeString(this.safeValue({deposit:{1:"pending",2:"ok"},withdrawal:{0:"pending",3:"ok"}},t,{}),e,e)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),n="limit"===t?2:1,d="buy"===i?1:2,c={cmd:"orderpending/trade",body:this.extend({pair:o.id,account_type:0,order_type:n,order_side:d,pay_bix:0,amount:s,price:r},a)},h=await this.privatePostOrderpending(c);return{info:h,id:this.safeString(h,"result")}}async cancelOrder(e,t,i={}){const s={cmd:"orderpending/cancelTrade",body:this.extend({orders_id:e},i)};return await this.privatePostOrderpending(s)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={cmd:"orderpending/order",body:this.extend({id:e.toString(),account_type:0},i)},r=await this.privatePostOrderpending(s),a=this.safeValue(r,"result");if(this.isEmpty(a))throw new l(this.id+" order "+e+" not found");return this.parseOrder(a)}parseOrder(e,t){let i=void 0;if(void 0===t){let i=void 0;const s=this.safeString(e,"coin_symbol"),r=this.safeString(e,"currency_symbol");void 0!==s&&void 0!==r&&(i=s+"_"+r),i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(i=t.symbol);const s=1===e.order_type?"market":"limit",r=e.createdAt,a=this.safeFloat(e,"price"),o=this.safeFloat(e,"deal_price"),n=this.safeFloat(e,"deal_amount"),d=this.safeFloat(e,"amount");let c=this.safeFloat2(e,"deal_money","money"),h=void 0;void 0!==n&&(void 0!==d&&(h=d-n),void 0===c&&(c=a*n));const l=1===e.order_side?"buy":"sell",u=this.parseOrderStatus(this.safeString(e,"status")),f=this.safeString(e,"id"),p=this.safeFloat(e,"fee");let m=void 0;return void 0!==p&&(m={cost:p,currency:void 0}),c=c||parseFloat(a)*n,{info:e,id:f,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,symbol:i,type:s,side:l,price:a,amount:d,cost:c,average:o,filled:n,remaining:h,status:u,fee:m}}parseOrderStatus(e){return this.safeString({1:"open",2:"open",3:"closed",4:"canceled",5:"canceled",6:"canceled"},e,e)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0,a=void 0;void 0!==e&&(r=this.market(e),a=r.id);const o=i||200,n={cmd:"orderpending/orderPendingList",body:this.extend({pair:a,account_type:0,page:1,size:o},s)},d=await this.privatePostOrderpending(n),c=this.safeValue(d.result,"items",[]);return this.parseOrders(c,r,t,i)}async fetchClosedOrders(e,t,i=200,s={}){if(void 0===e)throw new o(this.id+" fetchClosedOrders requires a `symbol` argument");await this.loadMarkets();const r=this.market(e),a={cmd:"orderpending/pendingHistoryList",body:this.extend({pair:r.id,account_type:0,page:1,size:i},s)},n=await this.privatePostOrderpending(a),d=this.safeValue(n.result,"items",[]);return this.parseOrders(d,r,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchMyTrades requires a `symbol` argument");await this.loadMarkets();const r=this.market(e),a=i||200,n={cmd:"orderpending/orderHistoryList",body:this.extend({pair:r.id,account_type:0,page:1,size:a,coin_symbol:r.baseId,currency_symbol:r.quoteId},s)},d=await this.privatePostOrderpending(n),c=this.safeValue(d.result,"items",[]);return this.parseTrades(c,r,t,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={cmd:"transfer/transferIn",body:this.extend({coin_symbol:i.id},t)},r=await this.privatePostTransfer(s),a=this.safeString(r,"result");let o=a,n=void 0;if(this.isJsonEncodedObject(a)){const e=JSON.parse(a);o=this.safeString(e,"account"),n=this.safeString(e,"memo")}return{currency:e,address:o,tag:n,info:r}}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const o=this.currency(e);if(void 0===this.password&&!("trade_pwd"in a))throw new r(this.id+" withdraw() requires this.password set on the exchange instance or a trade_pwd parameter");if(!("totp_code"in a))throw new r(this.id+" withdraw() requires a totp_code parameter for 2FA authentication");const n={trade_pwd:this.password,coin_symbol:o.id,amount:t,addr:i};return void 0!==s&&(n.address_remark=s),{info:await this.privatePostTransfer({cmd:"transfer/transferOut",body:this.extend(n,a)}),id:void 0}}async fetchFundingFees(e,t={}){await this.loadMarkets();const i={},s={};void 0===e&&(e=Object.keys(this.currencies));for(let r=0;r<e.length;r++){const a=e[r],o=this.currency(a),n={cmd:"transfer/coinConfig",body:this.extend({coin_symbol:o.id},t)},d=await this.privatePostTransfer(n);s[a]=d,i[a]=this.safeFloat(d.result,"withdraw_fee")}return{info:s,withdraw:i,deposit:{}}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+e;const n=this.json([s]);if("public"===t)"GET"!==i?a={cmds:n}:Object.keys(s).length&&(o+="?"+this.urlencode(s));else if("v2private"===t){this.checkRequiredCredentials(),o=this.urls.api+"/v2/"+e;const t=this.json(s);a={body:t,apikey:this.apiKey,sign:this.hmac(this.encode(t),this.encode(this.secret),"md5")}}else this.checkRequiredCredentials(),a={cmds:n,apikey:this.apiKey,sign:this.hmac(this.encode(n),this.encode(this.secret),"md5")};return void 0!==a&&(a=this.json(a,{convertArraysToObjects:!0})),{url:o,method:i,body:a,headers:{"Content-Type":"application/json"}}}handleErrors(e,t,i,s,a,o,n,d,c){if(void 0!==n){if("error"in n){if("code"in n.error){const e=this.safeString(n.error,"code"),t=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions,e,t),new r(t)}throw new r(this.id+" "+o)}if(!("result"in n))throw new r(this.id+" "+o)}}async request(e,t="public",i="GET",s={},r,a){const o=await this.fetch2(e,t,i,s,r,a);return"GET"===i?o:o.result[0]}}},VBY1:function(e,t,i){i("JxtV")._;e.exports={pkcs1:i("HFei"),pkcs8:i("Dgeu"),components:i("vY55"),detectAndImport:function(t,i,s){if(void 0===s){for(var r in e.exports)if("function"===typeof e.exports[r].autoImport&&e.exports[r].autoImport(t,i))return!0}else if(s){var a=formatParse(s);if(!e.exports[a.scheme])throw Error("Unsupported key format");"private"===a.keyType?e.exports[a.scheme].privateImport(t,i,a.keyOpt):e.exports[a.scheme].publicImport(t,i,a.keyOpt)}return!1}}},VGMt:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ArgumentsRequired:a,BadRequest:o,AuthenticationError:n,DDoSProtection:d,BadResponse:c}=i("ucJe"),{TRUNCATE:h,NO_PADDING:l,DECIMAL_PLACES:u}=i("rwG2");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bytetrade",name:"ByteTrade",countries:["HK"],rateLimit:500,requiresWeb3:!0,certified:!0,has:{fetchCurrencies:!0,fetchDepositAddress:!0,CORS:!1,fetchBidsAsks:!0,fetchTickers:!0,fetchOHLCV:!0,fetchMyTrades:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,withdraw:!0,fetchDeposits:!0,fetchWithdrawals:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","1d":"1d","5d":"5d","1w":"1w","1M":"1M"},urls:{test:"https://api-v2-test.bytetrade.com",logo:"https://user-images.githubusercontent.com/1294454/67288762-2f04a600-f4e6-11e9-9fd6-c60641919491.jpg",api:"https://api-v2.bytetrade.com",www:"https://www.bytetrade.com",doc:"https://github.com/Bytetrade/bytetrade-official-api-docs/wiki"},api:{market:{get:["klines","depth","trades","tickers"]},public:{get:["symbols","currencies","balance","orders/open","orders/closed","orders/all","orders","orders/trades","depositaddress","withdrawals","deposits","transfers"],post:["transaction/createorder","transaction/cancelorder","transaction/withdraw","transaction/transfer"]}},fees:{trading:{taker:8e-4,maker:8e-4}},commonCurrencies:{44:"ByteHub",48:"Blocktonic"},exceptions:{"vertify error":n,"verify error":n,"transaction already in network":o,"invalid argument":o}})}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i={};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"code");let a=void 0;a=r in this.commonCurrencies?this.commonCurrencies[r]:this.safeString(e,"name");const o=this.safeString(e,"fullname"),n=this.safeValue(e,"active"),d=this.safeValue(e,"limits"),c=this.safeValue(d,"deposit"),h=this.safeInteger(e,"basePrecision");let l=this.safeFloat(c,"max");-1===l&&(l=void 0);const u=this.safeValue(d,"withdraw");let f=this.safeFloat(u,"max");-1===f&&(f=void 0),i[a]={id:r,code:a,name:o,active:n,precision:{amount:h,price:void 0},fee:void 0,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},deposit:{min:this.safeFloat(c,"min"),max:l},withdraw:{min:this.safeFloat(u,"min"),max:f}},info:e}}return i}async fetchMarkets(e={}){const t=await this.publicGetSymbols(e),i=[];for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"symbol");let a=this.safeString(e,"baseName"),o=this.safeString(e,"quoteName");const n=a.split("@")[0]+"/"+o.split("@")[0],d=this.safeString(e,"base"),c=this.safeString(e,"quote");d in this.commonCurrencies&&(a=this.commonCurrencies[d]),c in this.commonCurrencies&&(o=this.commonCurrencies[c]);const h=a+"/"+o,l=this.safeValue(e,"limits",{}),u=this.safeValue(l,"amount",{}),f=this.safeValue(l,"price",{}),p=this.safeValue(e,"precision",{}),m={id:r,symbol:h,base:a,quote:o,baseId:d,quoteId:c,info:e,active:this.safeString(e,"active"),precision:{amount:this.safeInteger(p,"amount"),price:this.safeInteger(p,"price")},normalSymbol:n,limits:{amount:{min:this.safeFloat(u,"min"),max:this.safeFloat(u,"max")},price:{min:this.safeFloat(f,"min"),max:this.safeFloat(f,"max")},cost:{min:void 0,max:void 0}}};i.push(m)}return i}async fetchBalance(e={}){if(!("userid"in e)&&void 0===this.apiKey)throw new a(this.id+" fetchDeposits requires this.apiKey or userid argument");await this.loadMarkets();const t={userid:this.apiKey},i=await this.publicGetBalance(this.extend(t,e)),s={info:i};for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"code"),a=this.safeCurrencyCode(t,void 0),o=this.account();o.free=this.safeFloat(e,"free"),o.used=this.safeFloat(e,"used"),s[a]=o}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id};void 0!==t&&(s.limit=t);const r=await this.marketGetDepth(this.extend(s,i)),a=this.safeValue(r,"timestamp");return this.parseOrderBook(r,a)}parseTicker(e,t){const i=this.safeInteger(e,"timestamp");let s=void 0;const r=this.safeString(e,"symbol");if(r in this.markets_by_id)t=this.markets_by_id[r];else{const t=this.safeString(e,"base"),i=this.safeString(e,"quote");if(void 0!==t&&void 0!==i){s=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(i)}}return void 0===s&&void 0!==t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:this.safeFloat(e,"weightedAvgPrice"),open:this.safeFloat(e,"open"),close:this.safeFloat(e,"close"),last:this.safeFloat(e,"last"),previousClose:void 0,change:this.safeFloat(e,"change"),percentage:this.safeFloat(e,"percentage"),average:void 0,baseVolume:this.safeFloat(e,"baseVolume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.marketGetTickers(this.extend(s,t));if(Array.isArray(r)){const e=this.safeValue(r,0);if(void 0===e)throw new c(this.id+" fetchTicker() returned an empty response");return this.parseTicker(e,i)}return this.parseTicker(r,i)}parseTickers(e,t){const i=[];for(let s=0;s<e.length;s++)i.push(this.parseTicker(e[s]));return this.filterByArray(i,"symbol",t)}async fetchBidsAsks(e,t={}){await this.loadMarkets();const i=await this.marketGetDepth(t);return this.parseTickers(i,e)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.marketGetTickers(t);return this.parseTickers(i,e)}parseOHLCV(e,t,i="1m",s,r){return[e[0],parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[5])]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={symbol:a.id,timeframe:this.timeframes[t]};void 0!==i&&(o.since=i),void 0!==s&&(o.limit=s);const n=await this.marketGetKlines(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}parseTrade(e,t){const i=this.safeInteger(e,"timestamp"),s=this.safeFloat(e,"price"),r=this.safeFloat(e,"amount"),a=this.safeFloat(e,"cost"),o=this.safeString(e,"id"),n=this.safeString(e,"type"),d=this.safeString(e,"takerOrMaker"),c=this.safeString(e,"side"),h=this.safeString(e,"datetime"),l=this.safeString(e,"order"),u=this.safeValue(e,"fee");let f=void 0;if(void 0===t){const i=this.safeString(e,"symbol");t=this.safeValue(this.markets_by_id,i)}return void 0!==t&&(f=t.symbol),{info:e,timestamp:i,datetime:h,symbol:f,id:o,order:l,type:n,takerOrMaker:d,side:c,price:s,amount:r,cost:a,fee:u}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==t&&(a.since=t),void 0!==i&&(a.limit=i);const o=await this.marketGetTrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}parseOrder(e,t){const i=this.safeString(e,"status");let s=void 0;const r=this.safeString(e,"symbol");if(r in this.markets_by_id)t=this.markets_by_id[r];else{const t=this.safeString(e,"base"),i=this.safeString(e,"quote");if(void 0!==t&&void 0!==i){s=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(i)}}void 0===s&&void 0!==t&&(s=t.symbol);const a=this.safeInteger(e,"timestamp"),o=this.safeString(e,"datetime"),n=this.safeInteger(e,"lastTradeTimestamp"),d=this.safeFloat(e,"price"),c=this.safeFloat(e,"amount"),h=this.safeFloat(e,"filled"),l=this.safeFloat(e,"remaining"),u=this.safeFloat(e,"cost"),f=this.safeFloat(e,"average");return{info:e,id:this.safeString(e,"id"),clientOrderId:void 0,timestamp:a,datetime:o,lastTradeTimestamp:n,symbol:s,type:this.safeString(e,"type"),side:this.safeString(e,"side"),price:d,amount:c,cost:u,average:f,filled:h,remaining:l,status:i,fee:this.safeValue(e,"fee")}}async createOrder(e,t,i,s,r,o={}){if(this.checkRequiredDependencies(),void 0===this.apiKey)throw new a("createOrder requires this.apiKey or userid in params");await this.loadMarkets();const n=this.market(e);let d=void 0,c=void 0;d="sell"===i?1:2,"limit"===t?c=1:(c=2,r=0);const h=n.normalSymbol,l=n.baseId,u=this.currency(n.base),f=this.amountToPrecision(e,s),p=this.toWei(f,u.precision.amount),m=n.quoteId,y=this.currency(n.quote),b=this.priceToPrecision(e,r),v=this.toWei(b,y.precision.amount),g=this.milliseconds(),w=this.milliseconds();let k=this.iso8601(g);k=k.split(".")[0];let _=this.iso8601(w);_=_.split(".")[0];const T=this.safeString(o,"dappId","Sagittarius"),O=this.safeString(this.options,"fee","300000000000000"),x=this.safeString(o,"fee",O),S=this.integerPow("2","64"),C=[this.numberToBE(1,32),this.numberToLE(Math.floor(g/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(w/1e3),4),this.numberToLE(1,1),this.numberToLE(32,1),this.numberToLE(0,8),this.numberToLE(x,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(d,1),this.numberToLE(c,1),this.numberToLE(h.length,1),this.stringToBinary(this.encode(h)),this.numberToLE(this.integerDivide(p,S),8),this.numberToLE(this.integerModulo(p,S),8),this.numberToLE(this.integerDivide(v,S),8),this.numberToLE(this.integerModulo(v,S),8),this.numberToLE(0,2),this.numberToLE(Math.floor(g/1e3),4),this.numberToLE(Math.floor(w/1e3),4),this.numberToLE(0,2),this.numberToLE(parseInt(m),4),this.numberToLE(parseInt(l),4),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(T.length,1),this.stringToBinary(this.encode(T)),this.numberToLE(0,1)],I=[this.numberToLE(Math.floor(g/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(w/1e3),4),this.numberToLE(1,1),this.numberToLE(32,1),this.numberToLE(0,8),this.numberToLE(x,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(d,1),this.numberToLE(c,1),this.numberToLE(h.length,1),this.stringToBinary(this.encode(h)),this.numberToLE(this.integerDivide(p,S),8),this.numberToLE(this.integerModulo(p,S),8),this.numberToLE(this.integerDivide(v,S),8),this.numberToLE(this.integerModulo(v,S),8),this.numberToLE(0,2),this.numberToLE(Math.floor(g/1e3),4),this.numberToLE(Math.floor(w/1e3),4),this.numberToLE(0,2),this.numberToLE(parseInt(m),4),this.numberToLE(parseInt(l),4),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(T.length,1),this.stringToBinary(this.encode(T)),this.numberToLE(0,1)],E=this.binaryConcatArray(I),M=this.hash(E,"sha256","hex").slice(0,40),A=[this.numberToLE(M.length,1),this.stringToBinary(this.encode(M)),this.numberToBE(0,4)],F=this.binaryConcatArray(A),B=this.hash(F,"sha256","hex").slice(0,40),P=this.binaryConcatArray(C),q=this.hash(P,"sha256","hex"),L=this.ecdsa(q,this.secret,"secp256k1",void 0,!0),D=this.decode(this.binaryToBase16(this.numberToLE(this.sum(L.v,31),1)))+L.r+L.s,V={timestamp:k,expiration:_,operations:[[32,{now:k,expiration:_,fee:x,creator:this.apiKey,side:d,order_type:c,market_name:h,amount:p,price:v,use_btt_as_fee:!1,money_id:parseInt(m),stock_id:parseInt(l)}]],validate_type:0,dapp:T,signatures:[D]},R={trObj:this.json(V)},G=await this.publicPostTransactionCreateorder(R),N=this.milliseconds(),H="0"===this.safe_string(G,"code")?"open":"failed";return{info:G,id:B,timestamp:N,datetime:this.iso8601(N),lastTradeTimestamp:void 0,status:H,symbol:void 0,type:void 0,side:void 0,price:void 0,amount:void 0,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0}}async fetchOrder(e,t,i={}){if(!("userid"in i)&&void 0===this.apiKey)throw new a("fetchOrder requires this.apiKey or userid argument");await this.loadMarkets();const s={userid:this.apiKey};let r=void 0;void 0!==t&&(r=this.markets[t],s.symbol=r.id),s.id=e;const o=await this.publicGetOrders(this.extend(s,i));return this.parseOrder(o,r)}async fetchOpenOrders(e,t,i,s={}){if(!("userid"in s)&&void 0===this.apiKey)throw new a("fetchOpenOrders requires this.apiKey or userid argument");await this.loadMarkets();const r={userid:this.apiKey};let o=void 0;void 0!==e&&(o=this.market(e),r.symbol=o.id),void 0!==i&&(r.limit=i);const n=await this.publicGetOrdersOpen(this.extend(r,s));return this.parseOrders(n,o,t,i)}async fetchClosedOrders(e,t,i,s={}){if(!("userid"in s)&&void 0===this.apiKey)throw new a("fetchClosedOrders requires this.apiKey or userid argument");await this.loadMarkets();let r=void 0;const o={userid:this.apiKey};void 0!==e&&(r=this.market(e),o.symbol=r.id),void 0!==i&&(o.limit=i);const n=await this.publicGetOrdersClosed(this.extend(o,s));return this.parseOrders(n,r,t,i)}async fetchOrders(e,t,i,s={}){if(!("userid"in s)&&void 0===this.apiKey)throw new a("fetchOrders requires this.apiKey or userid argument");await this.loadMarkets();let r=void 0;const o={userid:this.apiKey};void 0!==e&&(r=this.market(e),o.symbol=r.id),void 0!==i&&(o.limit=i);const n=await this.publicGetOrdersAll(this.extend(o,s));return this.parseOrders(n,r,t,i)}async cancelOrder(e,t,i={}){if(void 0===this.apiKey)throw new a("cancelOrder requires hasAlreadyAuthenticatedSuccessfully");if(void 0===t)throw new a(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),r=s.baseId,o=s.quoteId,n=s.normalSymbol,d=this.milliseconds();let c=this.iso8601(d);c=c.split(".")[0];let h=this.iso8601(0);h=h.split(".")[0];const l=this.safeString(i,"dappId","Sagittarius"),u=[this.numberToBE(1,32),this.numberToLE(Math.floor(d/1e3),4),this.numberToLE(1,1),this.numberToLE(0,4),this.numberToLE(1,1),this.numberToLE(33,1),this.numberToLE(0,8),this.numberToLE("300000000000000",8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(n.length,1),this.stringToBinary(this.encode(n)),this.base16ToBinary(e),this.numberToLE(parseInt(o),4),this.numberToLE(parseInt(r),4),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(l.length,1),this.stringToBinary(this.encode(l)),this.numberToLE(0,1)],f=this.binaryConcatArray(u),p=this.hash(f,"sha256","hex"),m=this.ecdsa(p,this.secret,"secp256k1",void 0,!0),y=this.decode(this.binaryToBase16(this.numberToLE(this.sum(m.v,31),1)))+m.r+m.s,b={timestamp:c,expiration:h,operations:[[33,{fee:"300000000000000",creator:this.apiKey,order_id:e,market_name:n,money_id:parseInt(o),stock_id:parseInt(r)}]],validate_type:0,dapp:l,signatures:[y]},v={trObj:this.json(b)},g=await this.publicPostTransactionCancelorder(v),w=this.milliseconds(),k="0"===this.safe_string(g,"code")?"canceled":"failed";return{info:g,id:void 0,timestamp:w,datetime:this.iso8601(w),lastTradeTimestamp:void 0,status:k,symbol:void 0,type:void 0,side:void 0,price:void 0,amount:void 0,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0}}async transfer(e,t,i,s="",r={}){if(this.checkRequiredDependencies(),void 0===this.apiKey)throw new a("transfer requires this.apiKey");await this.loadMarkets();const o=this.currency(e),n=this.decimalToPrecision(t,h,o.info.transferPrecision,u,l),d=this.toWei(n,o.precision.amount),c=parseInt(o.id),f=this.milliseconds(),p=f;let m=this.iso8601(f);m=m.split(".")[0];let y=this.iso8601(p);y=y.split(".")[0];const b=this.safeString(r,"dappId","Sagittarius"),v=this.integerPow("2","64"),g=[this.numberToBE(1,32),this.numberToLE(Math.floor(f/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(p/1e3),4),this.numberToLE(1,1),this.numberToLE(28,1),this.numberToLE(0,8),this.numberToLE("300000000000000",8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(i.length,1),this.stringToBinary(this.encode(i)),this.numberToLE(c,4),this.numberToLE(this.integerDivide(d,v),8),this.numberToLE(this.integerModulo(d,v),8),this.numberToLE(1,1),this.numberToLE(s.length,1),this.stringToBinary(this.encode(s)),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(b.length,1),this.stringToBinary(this.encode(b)),this.numberToLE(0,1)],w=this.binaryConcatArray(g),k=this.hash(w,"sha256","hex"),_=this.ecdsa(k,this.secret,"secp256k1",void 0,!0),T=this.decode(this.binaryToBase16(this.numberToLE(this.sum(_.v,31),1)))+_.r+_.s,O={timestamp:m,expiration:y,operations:[[28,{fee:"300000000000000",from:this.apiKey,to:i,asset_type:parseInt(o.id),amount:d.toString(),message:s}]],validate_type:0,dapp:b,signatures:[T]},x={trObj:this.json(O)},S=await this.publicPostTransactionTransfer(x),C=this.milliseconds();let I="";return I="0"===this.safe_string(S,"code")?"submit success":"submit fail",{info:S,id:"",timestamp:C,datetime:this.iso8601(C),lastTradeTimestamp:void 0,status:I,symbol:void 0,type:void 0,side:void 0,price:void 0,amount:void 0,filled:void 0,remaining:void 0,cost:void 0,fee:void 0}}async fetchMyTrades(e,t,i,s={}){if(!("userid"in s)&&void 0===this.apiKey)throw new a("fetchMyTrades requires this.apiKey or userid argument");await this.loadMarkets();const r=this.market(e),o={userid:this.apiKey};void 0!==e&&(o.symbol=r.id),void 0!==i&&(o.limit=i);const n=await this.publicGetOrdersTrades(this.extend(o,s));return this.parseTrades(n,r,t,i)}async fetchDeposits(e,t,i,s={}){if(await this.loadMarkets(),!("userid"in s)&&void 0===this.apiKey)throw new a("fetchDeposits requires this.apiKey or userid argument");let r=void 0;const o={userid:this.apiKey};void 0!==e&&(r=this.currency(e),o.currency=r.id),void 0!==t&&(o.since=t),void 0!==i&&(o.limit=i);const n=await this.publicGetDeposits(this.extend(o,s));return this.parseTransactions(n,r,t,i)}async fetchWithdrawals(e,t,i,s={}){if(await this.loadMarkets(),!("userid"in s)&&void 0===this.apiKey)throw new a("fetchWithdrawals requires this.apiKey or userid argument");let r=void 0;const o={userid:this.apiKey};void 0!==e&&(r=this.currency(e),o.currency=r.id),void 0!==t&&(o.since=t),void 0!==i&&(o.limit=i);const n=await this.publicGetWithdrawals(this.extend(o,s));return this.parseTransactions(n,r,t,i)}parseTransactionStatus(e){return this.safeString({DEPOSIT_FAILED:"failed",FEE_SEND_FAILED:"failed",FEE_FAILED:"failed",PAY_SEND_FAILED:"failed",PAY_FAILED:"failed",BTT_FAILED:"failed",WITHDDRAW_FAILED:"failed",USER_FAILED:"failed",FEE_EXECUED:"pending",PAY_EXECUED:"pending",WITHDDRAW_EXECUTED:"pending",USER_EXECUED:"pending",BTT_SUCCED:"ok"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"address");let r=this.safeString(e,"tag");void 0!==r&&r.length<1&&(r=void 0);const a=this.safeValue(e,"txid"),o=this.safeString(e,"code"),n=this.safeCurrencyCode(o,t),d=this.safeInteger(e,"timestamp"),c=this.safeString(e,"datetime"),h=this.safeString(e,"type"),l=this.parseTransactionStatus(this.safeString(e,"status")),u=this.safeFloat(e,"amount"),f=this.safeValue(e,"fee"),p=this.safeFloat(f,"cost"),m=this.safeString(f,"code");return{info:e,id:i,txid:a,timestamp:d,datetime:c,address:s,tag:r,type:h,amount:u,currency:n,status:l,updated:void 0,fee:{cost:p,currency:this.safeCurrencyCode(m,t)}}}async fetchDepositAddress(e,t={}){if(await this.loadMarkets(),!("userid"in t)&&void 0===this.apiKey)throw new a("fetchDepositAddress requires this.apiKey or userid argument");const i=this.currency(e),s={userid:this.apiKey,code:i.id},r=await this.publicGetDepositaddress(s),o=this.safeString(r[0],"address"),n=this.safeString(r[0],"tag"),d=this.safeString(r[0],"chainType");return this.checkAddress(o),{currency:e,address:o,tag:n,chainType:d,info:r}}async withdraw(e,t,i,s,r={}){if(this.checkRequiredDependencies(),this.checkAddress(i),await this.loadMarkets(),void 0===this.apiKey)throw new a("withdraw requires this.apiKey");const o=await this.fetchDepositAddress(e),n=this.safeString(o,"chainType"),d=this.safeString(o.info[0],"chainId");let c="";c="eos"===n?i:this.safeString(o,"address");let f=18;"ethereum"!==n&&"etc"!==n&&"eos"!==n&&"cmt"!==n&&"naka"!==n&&(f=26);const p=this.milliseconds();let m=this.iso8601(p);m=m.split(".")[0];let y=this.iso8601(0);y=y.split(".")[0];const b=this.safeString(r,"dappId","Sagittarius"),v="300000000000000",g=this.currency(e),w=g.id,k=this.decimalToPrecision(t,h,g.info.transferPrecision,u,l),_=this.toWei(k,g.info.externalPrecision),T=this.integerPow("2","64");let O=0,x=[];26===f?(O=g.info.fee,x=[this.numberToBE(1,32),this.numberToLE(Math.floor(p/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(0),4),this.numberToLE(1,1),this.numberToLE(f,1),this.numberToLE(0,8),this.numberToLE(v,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(i.length,1),this.stringToBinary(this.encode(i)),this.numberToLE(parseInt(w),4),this.numberToLE(Math.floor(parseInt(parseFloat(this.integerDivide(_,T)))),8),this.numberToLE(this.integerModulo(_,T),8),this.numberToLE(1,1),this.numberToLE(this.integerDivide(O,T),8),this.numberToLE(this.integerModulo(O,T),8),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(b.length,1),this.stringToBinary(this.encode(b)),this.numberToLE(0,1)]):x=[this.numberToBE(1,32),this.numberToLE(Math.floor(p/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(0),4),this.numberToLE(1,1),this.numberToLE(f,1),this.numberToLE(0,8),this.numberToLE(v,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(Math.floor(p/1e3),4),this.numberToLE(1,1),this.numberToLE(4,1),this.numberToLE(0,8),this.numberToLE(v,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(c.length,1),this.stringToBinary(this.encode(c)),this.numberToLE(parseInt(w),4),this.numberToLE(Math.floor(parseInt(parseFloat(this.integerDivide(_,T)))),8),this.numberToLE(this.integerModulo(_,T),8),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(b.length,1),this.stringToBinary(this.encode(b)),this.numberToLE(0,1)];const S=this.binaryConcatArray(x),C=this.hash(S,"sha256","hex"),I=this.ecdsa(C,this.secret,"secp256k1",void 0,!0),E=this.decode(this.binaryToBase16(this.numberToLE(this.sum(I.v,31),1)))+I.r+I.s;let M=void 0,A=void 0,F=void 0;const B=this.safeString(g.info,"chainContractAddress");if(26===f)F={fee:v,from:this.apiKey,to_external_address:i,asset_type:parseInt(w),amount:_,asset_fee:O},M={timestamp:m,expiration:y,operations:[[f,F]],validate_type:0,dapp:b,signatures:[E]},A={chainType:d,trObj:this.json(M),chainContractAddress:B};else{F={fee:v,from:this.apiKey,to_external_address:c,asset_type:parseInt(w),amount:_,asset_fee:O},M={timestamp:m,expiration:y,operations:[[f,{fee:v,proposaler:this.apiKey,expiration_time:m,proposed_ops:[{op:[4,F]}]}]],validate_type:0,dapp:b,signatures:[E]},A="eos"===n?{chainType:d,toExternalAddress:"noneed",trObj:this.json(M),chainContractAddress:B}:{chainType:d,toExternalAddress:i,trObj:this.json(M),chainContractAddress:B}}const P=await this.publicPostTransactionWithdraw(A);return{info:P,id:this.safeString(P,"id")}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api;return o+="/"+e,Object.keys(s).length&&(o+="?"+this.urlencode(s)),{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,c,h){if(503===e)throw new d(this.id+" "+e.toString()+" "+t+" "+o);if(void 0!==n&&"code"in n){if("1"===this.safeString(n,"code")){const e=this.safeString(n,"msg"),t=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions,e,t),new r(t)}}}}},Vf3q:function(e,t,i){"use strict";const s=i("GiW5");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"binanceus",name:"Binance US",countries:["US"],certified:!1,pro:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/65177307-217b7c80-da5f-11e9-876e-0b748ba0a358.jpg",api:{web:"https://www.binance.us",wapi:"https://api.binance.us/wapi/v3",public:"https://api.binance.us/api/v1",private:"https://api.binance.us/api/v3",v3:"https://api.binance.us/api/v3",v1:"https://api.binance.us/api/v1"},www:"https://www.binance.us",referral:"https://www.binance.us/?ref=35005074",doc:"https://github.com/binance-us/binance-official-api-docs",fees:"https://www.binance.us/en/fee/schedule"},fees:{trading:{tierBased:!1,percentage:!0,taker:0,maker:0}}})}}},"WZ+2":function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,PermissionDenied:a,ExchangeNotAvailable:o,InsufficientFunds:n,OrderNotFound:d,InvalidOrder:c,RateLimitExceeded:h,NotSupported:l,BadRequest:u,AuthenticationError:f}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"timex",name:"TimeX",countries:["AU"],version:"v1",rateLimit:1500,has:{CORS:!1,cancelOrders:!0,editOrder:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchTickers:!0,fetchTradingFee:!0},timeframes:{"1m":"I1","5m":"I5","15m":"I15","30m":"I30","1h":"H1","2h":"H2","4h":"H4","6h":"H6","12h":"H12","1d":"D1","1w":"W1"},urls:{logo:"https://user-images.githubusercontent.com/1294454/70423869-6839ab00-1a7f-11ea-8f94-13ae72c31115.jpg",api:"https://plasma-relay-backend.timex.io",www:"https://timex.io",doc:"https://docs.timex.io"},api:{custody:{get:["credentials","credentials/h/{hash}","credentials/k/{key}","credentials/me/address","deposit-addresses","deposit-addresses/h/{hash}"]},history:{get:["orders","orders/details","orders/export/csv","trades","trades/export/csv"]},currencies:{get:["a/{address}","i/{id}","s/{symbol}"],post:["perform","prepare","remove/perform","s/{symbol}/remove/prepare","s/{symbol}/update/perform","s/{symbol}/update/prepare"]},markets:{get:["i/{id}","s/{symbol}"],post:["perform","prepare","remove/perform","s/{symbol}/remove/prepare","s/{symbol}/update/perform","s/{symbol}/update/prepare"]},public:{get:["candles","currencies","markets","orderbook","orderbook/raw","orderbook/v2","tickers","trades"]},statistics:{get:["address"]},trading:{get:["balances","fees","orders"],post:["orders","orders/json"],put:["orders","orders/json"],delete:["orders","orders/json"]},tradingview:{get:["config","history","symbol_info","time"]}},exceptions:{exact:{0:r,1:l,4e3:u,4001:u,4002:n,4003:f,4004:f,4005:u,4006:u,4007:u,4300:a,4100:f,4400:d,5001:c,5002:r,400:u,401:f,403:a,404:d,429:h,500:r,503:o},broad:{Insufficient:n}},options:{fetchTickers:{period:"1d"},fetchTrades:{sort:"timestamp,asc"},fetchMyTrades:{sort:"timestamp,asc"},fetchOpenOrders:{sort:"createdAt,asc"},fetchClosedOrders:{sort:"createdAt,asc"},defaultSort:"timestamp,asc",defaultSortOrders:"createdAt,asc"}})}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=[];for(let s=0;s<t.length;s++)i.push(this.parseMarket(t[s]));return i}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i=[];for(let s=0;s<t.length;s++){const e=t[s];i.push(this.parseCurrency(e))}return this.indexBy(i,"code")}async fetchTickers(e,t={}){await this.loadMarkets();const i=this.safeString(this.options.fetchTickers,"period","1d"),s={period:this.timeframes[i]},r=await this.publicGetTickers(this.extend(s,t));return this.parseTickers(r,e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s=this.safeString(this.options.fetchTickers,"period","1d"),r={market:i.id,period:this.timeframes[s]},a=await this.publicGetTickers(this.extend(r,t)),o=this.safeValue(a,0);return this.parseTicker(o,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.market(e).id};void 0!==t&&(s.limit=t);const r=await this.publicGetOrderbookV2(this.extend(s,i)),a=this.parse8601(this.safeString(r,"timestamp"));return this.parseOrderBook(r,a,"bid","ask","price","baseTokenAmount")}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a=this.safeValue(this.options,"fetchTrades",{}),o=this.safeValue(a,"sort","timestamp,asc"),n=this.safeString(s,"sort",o),d=this.omit(s,"sort"),c={market:r.id,sort:n};void 0!==t&&(c.from=this.iso8601(t)),void 0!==i&&(c.size=i);const h=await this.publicGetTrades(this.extend(c,d));return this.parseTrades(h,r,t,i)}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={market:a.id,period:this.timeframes[t]},n=this.parseTimeframe(t);if(void 0!==i)o.from=this.iso8601(i),void 0!==s&&(o.till=this.iso8601(this.sum(i,this.sum(s,1)*n*1e3)));else if(void 0!==s){const e=this.milliseconds();o.till=this.iso8601(e),o.from=this.iso8601(e-s*n*1e3-1)}else o.till=this.iso8601(this.milliseconds());const d=await this.publicGetCandles(this.extend(o,r));return this.parseOHLCVs(d,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.tradingGetBalances(e),i={info:t};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"currency"),a=this.safeCurrencyCode(r),o=this.account();o.total=this.safeFloat(e,"totalBalance"),o.used=this.safeFloat(e,"lockedBalance"),i[a]=o}return this.parseBalance(i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),n={symbol:o.id,quantity:this.amountToPrecision(e,s),side:i.toUpperCase()};let d=a;if("limit"===t){n.price=this.priceToPrecision(e,r);const i=this.safeInteger(this.options,"expireIn"),s=this.safeValue(a,"expireTime"),o=this.safeValue(a,"expireIn",i);if(void 0!==s)n.expireTime=s;else{if(void 0===o)throw new c(this.id+" createOrder method requires a expireTime or expireIn param for a "+t+" order, you can also set the expireIn exchange-wide option");n.expireIn=o}d=this.omit(a,["expireTime","expireIn"])}else n.price=0;const h=await this.tradingPostOrders(this.extend(n,d)),l=this.safeValue(h,"orders",[]),u=this.safeValue(l,0,{});return this.parseOrder(u,o)}async editOrder(e,t,i,s,r,a,o={}){await this.loadMarkets();const n=this.market(t),d={id:e};void 0!==r&&(d.quantity=this.amountToPrecision(t,r)),void 0!==a&&(d.price=this.priceToPrecision(t,a));const c=await this.tradingPutOrders(this.extend(d,o));if("unchangedOrders"in c){const e=this.safeValue(c,"unchangedOrders",[]);return{id:this.safeString(e,0),info:c}}const h=this.safeValue(c,"changedOrders",[]),l=this.safeValue(h,0,{}),u=this.safeValue(l,"newOrder",{});return this.parseOrder(u,n)}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.cancelOrders([e],t,i)}async cancelOrders(e,t,i={}){await this.loadMarkets();const s={id:e};return await this.tradingDeleteOrders(this.extend(s,i))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={orderHash:e},r=await this.historyGetOrdersDetails(s),a=this.safeValue(r,"order",{}),o=this.safeValue(r,"trades",[]);return this.parseOrder(this.extend(a,{trades:o}))}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r=this.safeValue(this.options,"fetchOpenOrders",{}),a=this.safeValue(r,"sort","createdAt,asc"),o=this.safeString(s,"sort",a),n=this.omit(s,"sort"),d={sort:o};let c=void 0;void 0!==e&&(c=this.market(e),d.symbol=c.id),void 0!==i&&(d.size=i);const h=await this.tradingGetOrders(this.extend(d,n)),l=this.safeValue(h,"orders",[]);return this.parseOrders(l,c,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const r=this.safeValue(this.options,"fetchClosedOrders",{}),a=this.safeValue(r,"sort","createdAt,asc"),o=this.safeString(s,"sort",a),n=this.omit(s,"sort"),d={sort:o,side:"BUY"};let c=void 0;void 0!==e&&(c=this.market(e),d.symbol=c.id),void 0!==t&&(d.from=this.iso8601(t)),void 0!==i&&(d.size=i);const h=await this.historyGetOrders(this.extend(d,n)),l=this.safeValue(h,"orders",[]);return this.parseOrders(l,c,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r=this.safeValue(this.options,"fetchMyTrades",{}),a=this.safeValue(r,"sort","timestamp,asc"),o=this.safeString(s,"sort",a),n=this.omit(s,"sort"),d={sort:o};let c=void 0;void 0!==e&&(c=this.market(e),d.symbol=c.id),void 0!==t&&(d.from=this.iso8601(t)),void 0!==i&&(d.size=i);const h=await this.historyGetTrades(this.extend(d,n)),l=this.safeValue(h,"trades",[]);return this.parseTrades(l,c,t,i)}async fetchTradingFee(e,t={}){await this.loadMarkets();const i={markets:this.market(e).id},s=await this.tradingGetFees(this.extend(i,t)),r=this.safeValue(s,0,{});return{info:s,maker:this.safeFloat(r,"fee"),taker:void 0}}parseMarket(e){const t=!this.safeValue(e,"locked"),i=this.safeString(e,"symbol"),s=this.safeString(e,"baseCurrency"),r=this.safeString(e,"quoteCurrency"),a=this.safeCurrencyCode(s),o=this.safeCurrencyCode(r),n=a+"/"+o,d={amount:this.precisionFromString(this.safeString(e,"quantityIncrement")),price:this.precisionFromString(this.safeString(e,"tickSize"))},c=this.safeFloat(e,"quantityIncrement"),h=this.safeFloat(e,"baseMinSize"),l=Math.max(c,h),u=this.safeFloat(e,"tickSize"),f=this.safeFloat(e,"quoteMinSize");return{id:i,symbol:n,base:a,quote:o,baseId:s,quoteId:r,type:"spot",active:t,precision:d,limits:{amount:{min:l,max:void 0},price:{min:u,max:void 0},cost:{min:Math.max(f,l*u),max:void 0}},taker:this.safeFloat(e,"takerFee"),maker:this.safeFloat(e,"makerFee"),info:e}}parseCurrency(e){const t=this.safeString(e,"symbol"),i=this.safeCurrencyCode(t),s=this.safeString(e,"name"),r=this.safeInteger(e,"decimals"),a=this.safeValue(e,"active"),o=this.safeString(e,"withdrawalFee");let n=void 0;const d=o.length-this.safeInteger(e,"tradeDecimals");if(d>0){const e=o.slice(0,d),t=o.slice(-d);n=parseFloat(e+"."+t)}else{let e=".";for(let t=0;t<-d;t++)e+="0";n=parseFloat(e+o)}return{id:i,code:i,info:e,type:void 0,name:s,active:a,fee:n,precision:r,limits:{withdraw:{min:n,max:void 0},amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}}}parseTickers(e,t){const i=[];for(let s=0;s<e.length;s++)i.push(this.parseTicker(e[s]));return this.filterByArray(i,"symbol",t)}parseTicker(e,t){let i=void 0;const s=this.safeString(e,"market");if(void 0!==s)if(s in this.markets_by_id)i=(t=this.markets_by_id[s]).symbol;else{const[e,t]=s.split("/");i=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}void 0===i&&void 0!==t&&(i=t.symbol);const r=this.parse8601(this.safeString(e,"timestamp")),a=this.safeFloat(e,"last"),o=this.safeFloat(e,"open");let n=void 0,d=void 0;void 0!==a&&void 0!==o&&(n=a-o,d=this.sum(a,o)/2);let c=void 0;return void 0!==n&&o&&(c=n/o*100),{symbol:i,info:e,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:o,close:a,last:a,previousClose:void 0,change:n,percentage:c,average:d,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"volumeQuote")}}parseTrade(e,t){let i=void 0;const s=this.safeString(e,"symbol");s in this.markets_by_id&&(i=(t=this.markets_by_id[s]).symbol),void 0===i&&void 0!==t&&(i=t.symbol);const r=this.parse8601(this.safeString(e,"timestamp")),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"quantity"),n=this.safeString(e,"id"),d=this.safeStringLower2(e,"direction","side"),c=this.safeStringLower(e,"makerOrTaker");let h=void 0;void 0!==c&&(h=this.safeString(e,c+"OrderId"));let l=void 0;const u=this.safeFloat(e,"fee");if(void 0!==u){l={cost:u,currency:void 0===t?void 0:t.quote}}let f=void 0;return void 0!==a&&void 0!==o&&(f=this.costToPrecision(i,o*a)),{info:e,id:n,timestamp:r,datetime:this.iso8601(r),symbol:i,order:h,type:void 0,side:d,price:a,amount:o,cost:f,takerOrMaker:c,fee:l}}parseOHLCV(e,t,i="1m",s,r){return[this.parse8601(this.safeString(e,"timestamp")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volumeQuote")]}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeStringLower(e,"type"),r=this.safeStringLower(e,"side");let a=void 0;const o=this.safeString(e,"symbol");o in this.markets_by_id&&(a=(t=this.markets_by_id[o]).symbol),void 0===a&&void 0!==t&&(a=t.symbol);const n=this.parse8601(this.safeString(e,"createdAt")),d=this.safeFloat(e,"price"),c=this.safeFloat(e,"quantity"),h=this.safeFloat(e,"filledQuantity"),l=this.safeFloat(e,"cancelledQuantity");let u=void 0,f=void 0;void 0!==c&&void 0!==h&&(u=Math.max(c-h,0),f=h>=c?"closed":void 0!==l&&l>0?"canceled":"open");const p=parseFloat(this.costToPrecision(a,d*h));let m=void 0,y=void 0;const b=this.safeValue(e,"trades");if(void 0!==b&&(y=this.parseTrades(b,t,void 0,void 0,{order:i})),void 0!==y){const e=y.length;e>0&&(m=y[e-1].timestamp)}return{info:e,id:i,clientOrderId:this.safeString(e,"clientOrderId"),timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:m,symbol:a,type:s,side:r,price:d,amount:c,cost:p,average:void 0,filled:h,remaining:u,status:f,fee:void 0,trades:y}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+t+"/"+e;if(Object.keys(s).length&&(o+="?"+this.urlencodeWithArrayRepeat(s)),"public"!==t){this.checkRequiredCredentials();const e=this.stringToBase64(this.encode(this.apiKey+":"+this.secret));r={authorization:"Basic "+this.decode(e)}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,c){if(void 0!==n&&e>=400){const e=this.id+" "+o;let t=this.safeValue(n,"error");void 0===t&&(t=n);const i=this.safeString2(t,"code","status"),s=this.safeString2(t,"message","debugMessage");throw this.throwBroadlyMatchedException(this.exceptions.broad,s,e),this.throwExactlyMatchedException(this.exceptions.exact,i,e),this.throwExactlyMatchedException(this.exceptions.exact,s,e),new r(e)}}}},WfKs:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,AuthenticationError:a}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"ice3x",name:"ICE3X",countries:["ZA"],rateLimit:1e3,version:"v1",has:{fetchCurrencies:!0,fetchTickers:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchMyTrades:!0,fetchDepositAddress:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/38012176-11616c32-3269-11e8-9f05-e65cf885bb15.jpg",api:"https://ice3x.com/api",www:["https://ice3x.com","https://ice3x.co.za"],doc:"https://ice3x.co.za/ice-cubed-bitcoin-exchange-api-documentation-1-june-2017",fees:["https://help.ice3.com/support/solutions/articles/11000033293-trading-fees","https://help.ice3.com/support/solutions/articles/11000033288-fees-explained","https://help.ice3.com/support/solutions/articles/11000008131-what-are-your-fiat-deposit-and-withdrawal-fees-","https://help.ice3.com/support/solutions/articles/11000033289-deposit-fees"],referral:"https://ice3x.com?ref=14341802"},api:{public:{get:["currency/list","currency/info","pair/list","pair/info","stats/marketdepthfull","stats/marketdepthbtcav","stats/marketdepth","orderbook/info","trade/list","trade/info"]},private:{post:["balance/list","balance/info","order/new","order/cancel","order/list","order/info","trade/list","trade/info","transaction/list","transaction/info","invoice/list","invoice/info","invoice/pdf"]}},fees:{trading:{maker:.005,taker:.005}},precision:{amount:8,price:8}})}async fetchCurrencies(e={}){const t=(await this.publicGetCurrencyList(e)).response.entities,i=this.precision.amount,s={};for(let r=0;r<t.length;r++){const e=t[r],a=this.safeString(e,"currency_id"),o=this.safeString(e,"iso"),n=this.safeCurrencyCode(o);s[n]={id:a,code:n,name:e.name,active:!0,precision:i,limits:{amount:{min:void 0,max:Math.pow(10,i)},price:{min:Math.pow(10,-i),max:Math.pow(10,i)},cost:{min:void 0,max:void 0}},info:e}}return s}async fetchMarkets(e={}){void 0===this.currencies_by_id&&(this.currencies=await this.fetchCurrencies(),this.currencies_by_id=this.indexBy(this.currencies,"id"));const t=await this.publicGetPairList(e),i=this.safeValue(t.response,"entities"),s=[];for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"pair_id"),a=this.safeString(e,"currency_id_from"),o=this.safeString(e,"currency_id_to"),n=this.currencies_by_id[a],d=this.currencies_by_id[o],c=n.code,h=d.code,l=c+"/"+h;s.push({id:t,symbol:l,base:c,quote:h,baseId:a,quoteId:o,active:void 0,info:e})}return s}parseTicker(e,t){const i=this.milliseconds(),s=t.symbol,r=this.safeFloat(e,"last_price");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"max"),low:this.safeFloat(e,"min"),bid:this.safeFloat(e,"max_bid"),bidVolume:void 0,ask:this.safeFloat(e,"min_ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"avg"),baseVolume:void 0,quoteVolume:this.safeFloat(e,"vol"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={pair_id:i.id},r=await this.publicGetStatsMarketdepthfull(this.extend(s,t)),a=this.safeValue(r.response,"entity");return this.parseTicker(a,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetStatsMarketdepthfull(t),s=this.safeValue(i.response,"entities"),r={};for(let a=0;a<s.length;a++){const e=s[a],t=this.safeString(e,"pair_id"),i=this.safeValue(this.marketsById,t);if(void 0!==i){r[i.symbol]=this.parseTicker(e,i)}}return r}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair_id:this.marketId(e)};if(void 0!==t){const e=this.safeString(i,"type");if("ask"!==e&&"bid"!==e)throw new r(this.id+" fetchOrderBook requires an exchange-specific extra 'type' param ('bid' or 'ask') when used with a limit");s.items_per_page=t}const a=await this.publicGetOrderbookInfo(this.extend(s,i)),o=this.safeValue(a.response,"entities");return this.parseOrderBook(o,void 0,"bids","asks","price","amount")}parseTrade(e,t){const i=this.safeTimestamp(e,"created"),s=this.safeFloat(e,"price"),r=this.safeFloat(e,"volume");let a=void 0;void 0!==s&&void 0!==r&&(a=s*r);let o=void 0;const n=this.safeFloat(e,"fee");void 0!==n&&(o={cost:n,currency:t.quote});const d=this.safeString(e,"type"),c=this.safeString(e,"trade_id");let h=void 0;return void 0!==t&&(h=t.symbol),{id:c,info:e,timestamp:i,datetime:this.iso8601(i),symbol:h,order:void 0,type:"limit",side:d,takerOrMaker:void 0,price:s,amount:r,cost:a,fee:o}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pair_id:r.id},o=await this.publicGetTradeList(this.extend(a,s)),n=this.safeValue(o.response,"entities");return this.parseTrades(n,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostBalanceList(e),i={info:t},s=this.safeValue(t.response,"entities",[]);for(let r=0;r<s.length;r++){const e=s[r],t=this.safeString(e,"currency_id"),a=this.safeCurrencyCode(t),o=this.account();o.total=this.safeFloat(e,"balance"),i[a]=o}return this.parseBalance(i)}parseOrder(e,t){const i=this.safeInteger(e,"pair_id");let s=void 0;i&&!t&&i in this.marketsById&&(s=(t=this.marketsById[i]).symbol);const r=this.safeTimestamp(e,"created"),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"volume");let n=this.safeInteger(e,"active"),d=this.safeFloat(e,"remaining"),c=void 0;1===n?n="open":(n="closed",d=0,c=o);let h=void 0;const l=this.safeFloat(e,"fee");return void 0!==l&&(h={cost:l},void 0!==t&&(h.currency=t.quote)),{id:this.safeString(e,"order_id"),clientOrderId:void 0,datetime:this.iso8601(r),timestamp:r,lastTradeTimestamp:void 0,status:n,symbol:s,type:"limit",side:this.safeStrin(e,"type"),price:a,cost:void 0,amount:o,filled:c,remaining:d,trades:void 0,fee:h,info:e}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),n={pair_id:o.id,type:i,amount:s,price:r},d=await this.privatePostOrderNew(this.extend(n,a)),c=this.parseOrder({order_id:d.response.entity.order_id,created:this.seconds(),active:1,type:i,price:r,volume:s,remaining:s,info:d},o),h=c.id;return this.orders[h]=c,c}async cancelOrder(e,t,i={}){const s={order_id:e};return await this.privatePostOrderCancel(this.extend(s,i))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={"order _id":e},r=await this.privatePostOrderInfo(this.extend(s,i)),a=this.safeValue(r.response,"entity");return this.parseOrder(a)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r=await this.privatePostOrderList(s),a=this.safeValue(r.response,"entities");return this.parseOrders(a,void 0,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pair_id:r.id};void 0!==i&&(a.items_per_page=i),void 0!==t&&(a.date_from=parseInt(t/1e3));const o=await this.privatePostTradeList(this.extend(a,s)),n=this.safeValue(o.response,"entities");return this.parseTrades(n,r,t,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency_id:this.currency(e).id},s=await this.privatePostBalanceInfo(this.extend(i,t)),r=this.safeValue(s.response,"entity"),a=this.safeString(r,"address");return{currency:e,address:a,tag:void 0,status:a?"ok":"none",info:s}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+e;return"public"===t?Object.keys(s).length&&(o+="?"+this.urlencode(s)):(this.checkRequiredCredentials(),a=this.urlencode(this.extend({nonce:this.nonce()},s)),r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}),{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},o,n){const d=await this.fetch2(e,t,i,s,o,n),c=this.safeValue(d,"errors"),h=this.safeValue(d,"response");if(c||!h){const e=["Key","user_id","Sign"];for(let t=0;t<e.length;t++){const i=e[t],s=this.safeString(c,i);if(s&&!("user_id"===i&&s.indexOf("authorization")<0))throw new a(s)}throw new r(this.json(c))}return d}}},WmoY:function(e,t,i){"use strict";const s=i("OjXq"),{ROUND:r}=i("rwG2"),{ExchangeError:a,ArgumentsRequired:o,AuthenticationError:n,InsufficientFunds:d,InvalidOrder:c,OrderNotFound:h}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"rightbtc",name:"RightBTC",countries:["AE"],has:{privateAPI:!1,fetchTickers:!0,fetchOHLCV:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!1,fetchOrder:"emulated",fetchMyTrades:!0},timeframes:{"1m":"min1","5m":"min5","15m":"min15","30m":"min30","1h":"hr1","1d":"day1","1w":"week"},urls:{logo:"https://user-images.githubusercontent.com/1294454/42633917-7d20757e-85ea-11e8-9f53-fffe9fbb7695.jpg",api:"https://www.rightbtc.com/api",www:"https://www.rightbtc.com",doc:["https://docs.rightbtc.com/api/"]},api:{public:{get:["trading_pairs","ticker/{trading_pair}","tickers","depth/{trading_pair}","depth/{trading_pair}/{count}","trades/{trading_pair}","trades/{trading_pair}/{count}","candlestick/latest/{trading_pair}","candlestick/{timeSymbol}/{trading_pair}","candlestick/{timeSymbol}/{trading_pair}/{count}"]},trader:{get:["balance/{symbol}","balances","deposits/{asset}/{page}","withdrawals/{asset}/{page}","orderpage/{trading_pair}/{cursor}","orders/{trading_pair}/{ids}","history/{trading_pair}/{ids}","historys/{trading_pair}/{page}","trading_pairs"],post:["order"],delete:["order/{trading_pair}/{ids}"]}},fees:{trading:{maker:.001,taker:.002},funding:{withdraw:{ETP:.01,BTC:5e-4,ETH:.005,ETC:.01,STORJ:3,LTC:.01,ZEC:.001,BCC:.001,XRB:0,NXS:.1}}},commonCurrencies:{XRB:"NANO"},exceptions:{ERR_USERTOKEN_NOT_FOUND:n,ERR_ASSET_NOT_EXISTS:a,ERR_ASSET_NOT_AVAILABLE:a,ERR_BALANCE_NOT_ENOUGH:d,ERR_CREATE_ORDER:c,ERR_CANDLESTICK_DATA:a}})}async fetchMarkets(e={}){const t=await this.publicGetTradingPairs(e),i=Object.keys(t),s=[];for(let r=0;r<i.length;r++){const e=i[r],a=t[e],o=this.safeString(a,"bid_asset_symbol"),n=this.safeString(a,"ask_asset_symbol"),d=this.safeCurrencyCode(o),c=this.safeCurrencyCode(n),h=d+"/"+c,l={amount:this.safeInteger(a,"bid_asset_decimals"),price:this.safeInteger(a,"ask_asset_decimals")};s.push({id:e,symbol:h,base:d,quote:c,baseId:o,quoteId:n,active:!0,precision:l,limits:{amount:{min:Math.pow(10,-l.amount),max:Math.pow(10,l.price)},price:{min:Math.pow(10,-l.price),max:Math.pow(10,l.price)},cost:{min:void 0,max:void 0}},info:a})}return s}divideSafeFloat(e,t,i){const s=this.safeFloat(e,t);return void 0!==s?s/i:s}parseTicker(e,t){const i=t.symbol,s=this.safeInteger(e,"date"),r=this.divideSafeFloat(e,"last",1e8),a=this.divideSafeFloat(e,"high",1e8),o=this.divideSafeFloat(e,"low",1e8),n=this.divideSafeFloat(e,"buy",1e8),d=this.divideSafeFloat(e,"sell",1e8),c=this.divideSafeFloat(e,"vol24h",1e8);return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:a,low:o,bid:n,bidVolume:void 0,ask:d,askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:c,quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={trading_pair:i.id},r=await this.publicGetTickerTradingPair(this.extend(s,t)),o=this.safeValue(r,"result");if(void 0===o)throw new a(this.id+" fetchTicker returned an empty response for symbol "+e);return this.parseTicker(o,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=(await this.publicGetTickers(t)).result,s={};for(let r=0;r<i.length;r++){const e=i[r],t=e.market;if(!(t in this.marketsById))continue;const a=this.marketsById[t];s[a.symbol]=this.parseTicker(e,a)}return s}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={trading_pair:this.marketId(e)};let r="publicGetDepthTradingPair";void 0!==t&&(r+="Count",s.count=t);const a=await this[r](this.extend(s,i)),o={},n=["bid","ask"];for(let d=0;d<n.length;d++){const e=n[d];o[e]=[];for(let t=0;t<a.result[e].length;t++){const[i,s,r]=a.result[e][t];o[e].push([i/1e8,s/1e8,r/1e8])}}return this.parseOrderBook(o,void 0,"bid","ask")}parseTrade(e,t){let i=this.safeInteger(e,"date");void 0===i&&(i=this.parse8601(this.safeString(e,"created_at")));let s=this.safeString(e,"tid");s=this.safeString(e,"trade_id",s);const r=this.safeString(e,"order_id"),a=this.divideSafeFloat(e,"price",1e8);let o=this.safeFloat(e,"amount");o=this.safeFloat(e,"quantity",o),void 0!==o&&(o/=1e8);let n=void 0;if(void 0===t){const i=this.safeString(e,"trading_pair");i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(n=t.symbol);let d=this.costToPrecision(n,a*o);d=parseFloat(d);let c=this.safeStringLower(e,"side");return"b"===c?c="buy":"s"===c&&(c="sell"),{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:n,order:r,type:"limit",side:c,takerOrMaker:void 0,price:a,amount:o,cost:d,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={trading_pair:r.id},o=await this.publicGetTradesTradingPair(this.extend(a,s));return this.parseTrades(o.result,r,t,i)}parseOHLCV(e,t,i="5m",s,r){return[parseInt(e[0]),parseFloat(e[2])/1e8,parseFloat(e[3])/1e8,parseFloat(e[4])/1e8,parseFloat(e[5])/1e8,parseFloat(e[1])/1e8]}async fetchOHLCV(e,t="5m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={trading_pair:a.id,timeSymbol:this.timeframes[t]},n=await this.publicGetCandlestickTimeSymbolTradingPair(this.extend(o,r));return this.parseOHLCVs(n.result,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.traderGetBalances(e),i={info:t},s=this.safeValue(t,"result",[]);for(let r=0;r<s.length;r++){const e=s[r],t=this.safeString(e,"asset"),a=this.safeCurrencyCode(t),o=this.account();o.free=this.divideSafeFloat(e,"balance",1e8),o.used=this.divideSafeFloat(e,"frozen",1e8),i[a]=o}return this.parseBalance(i)}async createOrder(e,t,i,s,a,o={}){await this.loadMarkets();const n={trading_pair:this.market(e).id,quantity:parseInt(this.decimalToPrecision(1e8*s,r,0,this.precisionMode)),limit:parseInt(this.decimalToPrecision(1e8*a,r,0,this.precisionMode)),type:t.toUpperCase(),side:i.toUpperCase()},d=await this.traderPostOrder(this.extend(n,o));return this.parseOrder(d)}async cancelOrder(e,t,i={}){if(void 0===t)throw new o(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();const s={trading_pair:this.market(t).id,ids:e};return await this.traderDeleteOrderTradingPairIds(this.extend(s,i))}parseOrderStatus(e){return this.safeString({NEW:"open",TRADE:"closed",CANCEL:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.parseOrderStatus(this.safeString(e,"status")),r=this.safeString(e,"trading_pair");void 0===t&&r in this.markets_by_id&&(t=this.markets_by_id[r]);let a=r;void 0!==t&&(a=t.symbol);let o=this.safeInteger(e,"created");void 0===o&&(o=this.parse8601(this.safeString(e,"created_at"))),"time"in e?o=e.time:"transactTime"in e&&(o=e.transactTime);let n=this.safeFloat2(e,"limit","price");void 0!==n&&(n/=1e8);const d=this.divideSafeFloat(e,"quantity",1e8);let c=this.divideSafeFloat(e,"filled_quantity",1e8),h=this.divideSafeFloat(e,"rest",1e8);const l=this.divideSafeFloat(e,"cost",1e8);void 0!==d&&(void 0===h&&void 0!==c&&(h=Math.max(0,d-c)),void 0===c&&void 0!==h&&(c=Math.max(0,d-h)));const u=this.safeStringLower(e,"side"),f=this.divideSafeFloat(e,"min_fee",1e8);let p=void 0;if(void 0!==f){let i=void 0;void 0!==t&&(i=t.quote),p={rate:this.safeFloat(e,"fee"),cost:f,currency:i}}return{info:e,id:i,clientOrderId:void 0,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:void 0,symbol:a,type:"limit",side:u,price:n,amount:d,cost:l,filled:c,remaining:h,status:s,fee:p,trades:void 0}}async fetchOrder(e,t,i={}){if(void 0===t)throw new o(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={trading_pair:s.id,ids:e},a=await this.traderGetOrdersTradingPairIds(this.extend(r,i)),n=this.parseOrders(a.result,s),d=this.indexBy(n,"id");if(!(e in d))throw new h(this.id+" fetchOrder could not find order "+e.toString()+" in open orders.");return d[e]}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchOpenOrders requires a symbol argument");await this.loadMarkets();const r=this.market(e),a={trading_pair:r.id,cursor:0},n=await this.traderGetOrderpageTradingPairCursor(this.extend(a,s));return this.parseOrders(n.result.orders,r,t,i)}async fetchOrders(e,t,i,s={}){let r=this.safeString(s,"ids");if(void 0===e||void 0===r)throw new o(this.id+" fetchOrders requires a 'symbol' argument and an extra 'ids' parameter. The 'ids' should be an array or a string of one or more order ids separated with slashes.");Array.isArray(r)&&(r=r.join("/")),await this.loadMarkets();const a={trading_pair:this.market(e).id,ids:r},n=await this.traderGetHistoryTradingPairIds(this.extend(a,s));return this.parseOrders(n.result,void 0,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const r={trading_pair:this.market(e).id,page:0},a=await this.traderGetHistorysTradingPairPage(this.extend(r,s));return this.parseTrades(a.result,void 0,t,i)}sign(e,t="public",i="GET",s={},r,a){const o=this.omit(s,this.extractParams(e));let n=this.urls.api+"/"+t+"/"+this.implodeParams(e,s);return"public"===t?Object.keys(o).length&&(n+="?"+this.urlencode(o)):(this.checkRequiredCredentials(),r={apikey:this.apiKey,signature:this.secret},"GET"===i?Object.keys(o).length&&(n+="?"+this.urlencode(o)):(a=this.json(o),r["Content-Type"]="application/json")),{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,o,n,d,c){if(void 0===n)return;const h=this.safeValue(n,"status");if(void 0!==h){if("1"!==this.safeString(h,"success")){const e=this.safeString(h,"message"),t=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions,e,t),new a(t)}}}}},Wrnp:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ArgumentsRequired:a,BadRequest:o,OrderNotFound:n,InvalidAddress:d}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"therock",name:"TheRockTrading",countries:["MT"],rateLimit:1e3,version:"v1",has:{CORS:!1,fetchTickers:!0,fetchMyTrades:!0,fetchLedger:!0,fetchDeposits:!0,fetchWithdrawals:!0,fetchTransactions:"emulated",fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766869-75057fa2-5ee9-11e7-9a6f-13e641fa4707.jpg",api:"https://api.therocktrading.com",www:"https://therocktrading.com",doc:["https://api.therocktrading.com/doc/v1/index.html","https://api.therocktrading.com/doc/"]},api:{public:{get:["funds","funds/{id}/orderbook","funds/{id}/ticker","funds/{id}/trades","funds/tickers"]},private:{get:["balances","balances/{id}","discounts","discounts/{id}","funds","funds/{id}","funds/{id}/trades","funds/{fund_id}/orders","funds/{fund_id}/orders/{id}","funds/{fund_id}/position_balances","funds/{fund_id}/positions","funds/{fund_id}/positions/{id}","transactions","transactions/{id}","withdraw_limits/{id}","withdraw_limits"],post:["atms/withdraw","funds/{fund_id}/orders"],delete:["funds/{fund_id}/orders/{id}","funds/{fund_id}/orders/remove_all"]}},fees:{trading:{maker:.002,taker:.002},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:5e-4,BCH:5e-4,PPC:.02,ETH:.001,ZEC:.001,LTC:.002,EUR:2.5},deposit:{BTC:0,BCH:0,PPC:0,ETH:0,ZEC:0,LTC:0,EUR:0}}},exceptions:{exact:{"Request already running":o,"cannot specify multiple address types":o,"Currency is not included in the list":o,"Record not found":n},broad:{"before must be greater than after param":o,"must be shorter than 60 days":o,"must be a multiple of (period param) in minutes":o,"Address allocation limit reached for currency":d,"is not a valid value for param currency":o," is invalid":d}}})}async fetchMarkets(e={}){const t=await this.publicGetFunds(e),i=this.safeValue(t,"funds"),s=[];if(void 0===i)throw new r(this.id+" fetchMarkets got an unexpected response");for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"id"),a=this.safeString(e,"trade_currency"),o=this.safeString(e,"base_currency"),n=this.safeCurrencyCode(a),d=this.safeCurrencyCode(o),c=n+"/"+d,h=this.safeFloat(e,"buy_fee"),l=this.safeFloat(e,"sell_fee");let u=Math.max(h,l);u/=100;const f=u;s.push({id:t,symbol:c,base:n,quote:d,baseId:a,quoteId:o,info:e,active:!0,maker:f,taker:u,precision:{amount:this.safeInteger(e,"trade_currency_decimals"),price:this.safeInteger(e,"base_currency_decimals")},limits:{amount:{min:this.safeFloat(e,"minimum_quantity_offer"),max:void 0},price:{min:this.safeFloat(e,"minimum_price_offer"),max:void 0},cost:{min:void 0,max:void 0}}})}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalances(e),i=this.safeValue(t,"balances",[]),s={info:t};for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"currency"),a=this.safeCurrencyCode(t),o=this.account();o.free=this.safeFloat(e,"trading_balance"),o.total=this.safeFloat(e,"balance"),s[a]=o}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={id:this.marketId(e)},r=await this.publicGetFundsIdOrderbook(this.extend(s,i)),a=this.parse8601(this.safeString(r,"date"));return this.parseOrderBook(r,a,"bids","asks","price","amount")}parseTicker(e,t){const i=this.parse8601(e.date);let s=void 0;void 0!==t&&(s=t.symbol);const r=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:r,last:r,previousClose:this.safeFloat(e,"close"),change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume_traded"),quoteVolume:this.safeFloat(e,"volume"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetFundsTickers(t),s=this.indexBy(i.tickers,"fund_id"),r=Object.keys(s),a={};for(let o=0;o<r.length;o++){const e=r[o],t=this.markets_by_id[e],i=t.symbol,n=s[e];a[i]=this.parseTicker(n,t)}return a}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s=await this.publicGetFundsIdTicker(this.extend({id:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){t||(t=this.markets_by_id[e.fund_id]);const i=this.parse8601(this.safeString(e,"date")),s=this.safeString(e,"id"),r=this.safeString(e,"order_id"),a=this.safeString(e,"side"),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount");let d=void 0;void 0!==o&&void 0!==n&&(d=o*n);let c=void 0,h=void 0;const l=this.safeValue(e,"transactions",[]),u=this.groupBy(l,"type"),f=this.safeValue(u,"paid_commission",[]);for(let m=0;m<f.length;m++)void 0===h&&(h=0),h=this.sum(h,this.safeFloat(f[m],"price"));void 0!==h&&(c={cost:h,currency:t.quote});let p=void 0;return void 0!==t&&(p=t.symbol),{info:e,id:s,order:r,timestamp:i,datetime:this.iso8601(i),symbol:p,type:void 0,side:a,takerOrMaker:void 0,price:o,amount:n,cost:d,fee:c}}parseLedgerEntryDirection(e){return this.safeString({affiliate_earnings:"in",atm_payment:"in",bought_currency_from_fund:"out",bought_shares:"out",paid_commission:"out",paypal_payment:"in",pos_payment:"in",released_currency_to_fund:"out",rollover_commission:"out",sold_currency_to_fund:"in",sold_shares:"in",transfer_received:"in",transfer_sent:"out",withdraw:"out"},e,e)}parseLedgerEntryType(e){return this.safeString({affiliate_earnings:"referral",atm_payment:"transaction",bought_currency_from_fund:"trade",bought_shares:"trade",paid_commission:"fee",paypal_payment:"transaction",pos_payment:"transaction",released_currency_to_fund:"trade",rollover_commission:"fee",sold_currency_to_fund:"trade",sold_shares:"trade",transfer_received:"transfer",transfer_sent:"transfer",withdraw:"transaction"},e,e)}parseLedgerEntry(e,t){const i=this.safeString(e,"id");let s=void 0,r=this.safeString(e,"type");const a=this.parseLedgerEntryDirection(r);r=this.parseLedgerEntryType(r),"trade"!==r&&"fee"!==r||(s=this.safeString(e,"trade_id"));const o=this.safeString(e,"currency"),n=this.safeCurrencyCode(o),d=this.safeFloat(e,"price"),c=this.parse8601(this.safeString(e,"date"));return{info:e,id:i,direction:a,account:void 0,referenceId:s,referenceAccount:void 0,type:r,currency:n,amount:d,before:void 0,after:void 0,status:"ok",timestamp:c,datetime:this.iso8601(c),fee:void 0}}async fetchLedger(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==t&&(r.after=this.iso8601(t));const o=await this.privateGetTransactions(this.extend(r,s)),n=this.safeValue(o,"transactions",[]);return this.parseLedger(n,a,t,i)}parseTransactionType(e){return this.safeString({withdraw:"withdrawal",atm_payment:"deposit"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.parseTransactionType(this.safeString(e,"type")),r=this.safeValue(e,"transfer_detail",{}),a=this.safeString(r,"method");let o=void 0,n=void 0;void 0!==a&&"wire_transfer"!==a&&(o=this.safeString(r,"id"),n=this.safeString(r,"recipient"));const d=this.safeString(e,"currency"),c=this.safeCurrencyCode(d),h=this.safeFloat(e,"price"),l=this.parse8601(this.safeString(e,"date"));return{info:e,id:i,currency:c,amount:h,addressFrom:void 0,addressTo:n,address:n,tagFrom:void 0,tagTo:void 0,tag:void 0,status:"ok",type:s,updated:void 0,txid:o,timestamp:l,datetime:this.iso8601(l),fee:void 0}}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactions(e,t,i,this.extend({type:"withdraw"},s))}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactions(e,t,i,this.extend({type:"atm_payment"},s))}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==t&&(r.after=this.iso8601(t)),s=this.extend(r,s);const o=await this.privateGetTransactions(s),n=this.safeValue(o,"transactions",[]),d=this.filterByArray(n,"type",["withdraw","atm_payment"],!1);return this.parseTransactions(d,a,t,i)}parseOrderStatus(e){return this.safeString({active:"open",executed:"closed",deleted:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id");let s=void 0;const r=this.safeString(e,"fund_id");r in this.markets_by_id&&(s=(t=this.markets_by_id[r]).symbol);const a=this.parseOrderStatus(this.safeString(e,"status")),o=this.parse8601(this.safeString(e,"date")),n=this.safeString(e,"type"),d=this.safeString(e,"side"),c=this.safeFloat(e,"amount"),h=this.safeFloat(e,"amount_unfilled");let l=void 0;void 0!==c&&void 0!==h&&(l=c-h);const u=this.safeFloat(e,"price");let f=this.safeValue(e,"trades"),p=void 0,m=void 0,y=void 0;if(void 0!==f){const e=f.length;if(e>0){f=this.parseTrades(f,t,void 0,void 0,{orderId:i}),p=0,l=0;for(let t=0;t<e;t++){const e=f[t];p=this.sum(p,e.cost),l=this.sum(l,e.amount)}l>0&&(m=p/l),y=f[e-1].timestamp}else p=0}return{id:i,clientOrderId:void 0,info:e,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:y,status:a,symbol:s,type:n,side:d,price:u,cost:p,amount:c,filled:l,average:m,remaining:h,fee:void 0,trades:f}}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"active"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"executed"},s))}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchOrders requires a symbol argument");await this.loadMarkets();const r=this.market(e),o={fund_id:r.id};void 0!==t&&(o.after=this.iso8601(t));const n=await this.privateGetFundsFundIdOrders(this.extend(o,s)),d=this.safeValue(n,"orders",[]);return this.parseOrders(d,r,t,i)}async fetchOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();const s={id:e,fund_id:this.market(t).id},r=await this.privatePostFundsFundIdOrdersId(this.extend(s,i));return this.parseOrder(r)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets(),"market"===t&&(r=0);const o={fund_id:this.marketId(e),side:i,amount:s,price:r},n=await this.privatePostFundsFundIdOrders(this.extend(o,a));return this.parseOrder(n)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e,fund_id:this.marketId(t)},r=await this.privateDeleteFundsFundIdOrdersId(this.extend(s,i));return this.parseOrder(r)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const r=this.market(e),o={id:r.id};void 0!==i&&(o.per_page=i),void 0!==t&&(o.after=this.iso8601(t));const n=await this.privateGetFundsIdTrades(this.extend(o,s));return this.parseTrades(n.trades,r,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={id:r.id};void 0!==i&&(a.per_page=i),void 0!==t&&(a.after=this.iso8601(t));const o=await this.publicGetFundsIdTrades(this.extend(a,s));return this.parseTrades(o.trades,r,t,i)}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if(r=void 0===r?{}:r,"private"===t){if(this.checkRequiredCredentials(),Object.keys(n).length)if("POST"===i)a=this.json(n),r["Content-Type"]="application/json";else{const e=this.rawencode(n);e.length&&(o+="?"+e)}const e=this.nonce().toString(),t=e+o;r["X-TRT-KEY"]=this.apiKey,r["X-TRT-NONCE"]=e,r["X-TRT-SIGN"]=this.hmac(this.encode(t),this.encode(this.secret),"sha512")}else"public"===t&&Object.keys(n).length&&(o+="?"+this.rawencode(n));return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,c){if(void 0===n)return;const h=this.safeValue(n,"errors",[]),l=h.length;if(l>0){const e=this.id+" "+o;for(let t=0;t<l;t++){const i=h[t],s=this.safeString(i,"message");this.throwExactlyMatchedException(this.exceptions.exact,s,e),this.throwBroadlyMatchedException(this.exceptions.broad,s,e)}throw new r(e)}}}},X3hn:function(e,t,i){"use strict";const s=i("OjXq"),{BadSymbol:r,BadRequest:a,ExchangeError:o,ArgumentsRequired:n,InvalidOrder:d,OrderNotFound:c,OnMaintenance:h}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinone",name:"CoinOne",countries:["KR"],rateLimit:667,version:"v2",has:{CORS:!1,createMarketOrder:!1,fetchTickers:!0,fetchOrder:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/38003300-adc12fba-323f-11e8-8525-725f53c4a659.jpg",api:"https://api.coinone.co.kr",www:"https://coinone.co.kr",doc:"https://doc.coinone.co.kr"},requiredCredentials:{apiKey:!0,secret:!0},api:{public:{get:["orderbook/","trades/","ticker/"]},private:{post:["account/btc_deposit_address/","account/balance/","account/daily_balance/","account/user_info/","account/virtual_account/","order/cancel_all/","order/cancel/","order/limit_buy/","order/limit_sell/","order/complete_orders/","order/limit_orders/","order/order_info/","transaction/auth_number/","transaction/history/","transaction/krw/history/","transaction/btc/","transaction/coin/"]}},markets:{"BCH/KRW":{id:"bch",symbol:"BCH/KRW",base:"BCH",quote:"KRW",baseId:"bch",quoteId:"krw"},"BTC/KRW":{id:"btc",symbol:"BTC/KRW",base:"BTC",quote:"KRW",baseId:"btc",quoteId:"krw"},"BTG/KRW":{id:"btg",symbol:"BTG/KRW",base:"BTG",quote:"KRW",baseId:"btg",quoteId:"krw"},"ETC/KRW":{id:"etc",symbol:"ETC/KRW",base:"ETC",quote:"KRW",baseId:"etc",quoteId:"krw"},"ETH/KRW":{id:"eth",symbol:"ETH/KRW",base:"ETH",quote:"KRW",baseId:"eth",quoteId:"krw"},"IOTA/KRW":{id:"iota",symbol:"IOTA/KRW",base:"IOTA",quote:"KRW",baseId:"iota",quoteId:"krw"},"LTC/KRW":{id:"ltc",symbol:"LTC/KRW",base:"LTC",quote:"KRW",baseId:"ltc",quoteId:"krw"},"OMG/KRW":{id:"omg",symbol:"OMG/KRW",base:"OMG",quote:"KRW",baseId:"omg",quoteId:"krw"},"QTUM/KRW":{id:"qtum",symbol:"QTUM/KRW",base:"QTUM",quote:"KRW",baseId:"qtum",quoteId:"krw"},"XRP/KRW":{id:"xrp",symbol:"XRP/KRW",base:"XRP",quote:"KRW",baseId:"xrp",quoteId:"krw"},"EOS/KRW":{id:"eos",symbol:"EOS/KRW",base:"EOS",quote:"KRW",baseId:"eos",quoteId:"krw"},"DATA/KRW":{id:"data",symbol:"DATA/KRW",base:"DATA",quote:"KRW",baseId:"data",quoteId:"krw"},"ZIL/KRW":{id:"zil",symbol:"ZIL/KRW",base:"ZIL",quote:"KRW",baseId:"zil",quoteId:"krw"},"KNC/KRW":{id:"knc",symbol:"KNC/KRW",base:"KNC",quote:"KRW",baseId:"knc",quoteId:"krw"},"ZRX/KRW":{id:"zrx",symbol:"ZRX/KRW",base:"ZRX",quote:"KRW",baseId:"zrx",quoteId:"krw"},"LUNA/KRW":{id:"luna",symbol:"LUNA/KRW",base:"LUNA",quote:"KRW",baseId:"luna",quoteId:"krw"},"ATOM/KRW":{id:"atom",symbol:"ATOM/KRW",base:"ATOM",quote:"KRW",baseId:"atom",quoteId:"krw"},"VNT/KRW":{id:"vnt",symbol:"VNT/KRW",base:"VNT",quote:"KRW",baseId:"vnt",quoteId:"krw"}},fees:{trading:{tierBased:!0,percentage:!0,taker:.001,maker:.001,tiers:{taker:[[0,.001],[1e8,9e-4],[1e9,8e-4],[5e9,7e-4],[1e10,6e-4],[2e10,5e-4],[3e10,4e-4],[4e10,3e-4],[5e10,2e-4]],maker:[[0,.001],[1e8,8e-4],[1e9,6e-4],[5e9,4e-4],[1e10,2e-4],[2e10,0],[3e10,0],[4e10,0],[5e10,0]]}}},exceptions:{405:h,104:c,108:r,107:a}})}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostAccountBalance(e),i={info:t},s=this.omit(t,["errorCode","result","normalWallets"]),r=Object.keys(s);for(let a=0;a<r.length;a++){const e=r[a],t=s[e],o=this.safeCurrencyCode(e),n=this.account();n.free=this.safeFloat(t,"avail"),n.total=this.safeFloat(t,"balance"),i[o]=n}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={currency:this.market(e).id,format:"json"},r=await this.publicGetOrderbook(this.extend(s,i));return this.parseOrderBook(r,void 0,"bid","ask","price","qty")}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(this.extend({currency:"all",format:"json"},t)),s={},r=Object.keys(i);for(let a=0;a<r.length;a++){const e=r[a];let t=e,o=void 0;if(e in this.markets_by_id){o=this.markets_by_id[e],t=o.symbol;const r=i[e];s[t]=this.parseTicker(r,o)}}return s}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={currency:i.id,format:"json"},r=await this.publicGetTicker(this.extend(s,t));return this.parseTicker(r,i)}parseTicker(e,t){const i=this.milliseconds(),s=this.safeFloat(e,"last"),r=this.safeFloat(e,"yesterday_last");let a=void 0;return void 0!==s&&void 0!==r&&(a=r-s),{symbol:void 0!==t?t.symbol:void 0,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"first"),close:s,last:s,previousClose:r,change:a,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}parseTrade(e,t){const i=this.safeTimestamp(e,"timestamp"),s=void 0!==t?t.symbol:void 0,r=this.safeString(e,"is_ask");let a=void 0;"1"===r?a="sell":"0"===r&&(a="buy");const o=this.safeFloat(e,"price"),n=this.safeFloat(e,"qty");let d=void 0;return void 0!==o&&void 0!==n&&(d=o*n),{id:void 0,info:e,timestamp:i,datetime:this.iso8601(i),order:void 0,symbol:s,type:void 0,side:a,takerOrMaker:void 0,price:o,amount:n,cost:d,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={currency:r.id,period:"hour",format:"json"},o=await this.publicGetTrades(this.extend(a,s));return this.parseTrades(o.completeOrders,r,t,i)}async createOrder(e,t,i,s,r,a={}){if(await this.loadMarkets(),"limit"!==t)throw new o(this.id+" allows limit orders only");await this.loadMarkets();const n={price:r,currency:this.marketId(e),qty:s},d="privatePostOrder"+this.capitalize(t)+this.capitalize(i),c=await this[d](this.extend(n,a));let h=this.safeString(c,"orderId");void 0!==h&&(h=h.toUpperCase());const l=this.milliseconds(),u=r*s,f={info:c,id:h,timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,symbol:e,type:t,side:i,price:r,cost:u,average:void 0,amount:s,filled:void 0,remaining:s,status:"open",fee:void 0};return this.orders[h]=f,f}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=void 0,r=void 0;if(void 0===t){if(!(e in this.orders))throw new n(this.id+" fetchOrder() requires a symbol argument for order ids missing in the .orders cache (the order was created with a different instance of this class or within a different run of this code).");r=this.market(this.orders[e].symbol)}else r=this.market(t);try{const t={order_id:e,currency:r.id},a=await this.privatePostOrderOrderInfo(this.extend(t,i));s=this.parseOrder(a),this.orders[e]=s}catch(a){if(!(a instanceof c))throw a;if(!(e in this.orders))throw a;this.orders[e].status="canceled",s=this.orders[e]}return s}parseOrderStatus(e){return this.safeString({live:"open",partially_filled:"open",filled:"closed"},e,e)}parseOrder(e,t){const i=this.safeValue(e,"info"),s=this.safeStringUpper(i,"orderId"),r=this.safeTimestamp(i,"timestamp"),a=this.parseOrderStatus(this.safeString(e,"status"));let o=void 0,n=this.safeString(i,"type");n=n.indexOf("ask")>=0?"sell":"buy";const d=this.safeFloat(i,"price"),c=this.safeFloat(i,"qty"),h=this.safeFloat(i,"remainQty");let l=void 0;void 0!==c&&(void 0!==h&&(l=c-h),void 0!==d&&(o=d*c));const u=this.safeString(i,"currency"),f={currency:u,cost:this.safeFloat(i,"fee"),rate:this.safeFloat(i,"feeRate")};let p=void 0;if(void 0===t){const e=u.toLowerCase();e in this.markets_by_id&&(t=this.markets_by_id[e])}return void 0!==t&&(p=t.symbol),{info:e,id:s,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,symbol:p,type:"limit",side:n,price:d,cost:o,amount:c,filled:l,remaining:h,status:a,fee:f}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s=this.safeValue(this.orders,e);let r=void 0,a=void 0,o=void 0;if(void 0===s){if(void 0===t)throw new d(this.id+" cancelOrder could not find the order id "+e+" in orders cache. The order was probably created with a different instance of this class earlier. The `symbol` argument is missing. To cancel the order, pass a symbol argument and {'price': 12345, 'qty': 1.2345, 'is_ask': 0} in the params argument of cancelOrder.");if(a=this.safeFloat(i,"price"),void 0===a)throw new d(this.id+" cancelOrder could not find the order id "+e+" in orders cache. The order was probably created with a different instance of this class earlier. The `price` parameter is missing. To cancel the order, pass a symbol argument and {'price': 12345, 'qty': 1.2345, 'is_ask': 0} in the params argument of cancelOrder.");if(r=this.safeFloat(i,"qty"),void 0===r)throw new d(this.id+" cancelOrder could not find the order id "+e+" in orders cache. The order was probably created with a different instance of this class earlier. The `qty` (amount) parameter is missing. To cancel the order, pass a symbol argument and {'price': 12345, 'qty': 1.2345, 'is_ask': 0} in the params argument of cancelOrder.");if(o=this.safeFloat(i,"is_ask"),void 0===o)throw new d(this.id+" cancelOrder could not find the order id "+e+" in orders cache. The order was probably created with a different instance of this class earlier. The `is_ask` (side) parameter is missing. To cancel the order, pass a symbol argument and {'price': 12345, 'qty': 1.2345, 'is_ask': 0} in the params argument of cancelOrder.")}else a=s.price,r=s.amount,o="buy"===s.side?0:1,t=s.symbol;const n={order_id:e,price:a,qty:r,is_ask:o,currency:this.marketId(t)};return this.orders[e].status="canceled",await this.privatePostOrderCancel(this.extend(n,i))}sign(e,t="public",i="GET",s={},r,a){const o=this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));let d=this.urls.api+"/";if("public"===t)d+=o,Object.keys(n).length&&(d+="?"+this.urlencode(n));else{this.checkRequiredCredentials(),d+=this.version+"/"+o;const e=this.nonce().toString(),t=this.json(this.extend({access_token:this.apiKey,nonce:e},s)),i=this.stringToBase64(this.encode(t));a=this.decode(i);const n=this.secret.toUpperCase();r={"content-type":"application/json","X-COINONE-PAYLOAD":i,"X-COINONE-SIGNATURE":this.hmac(i,this.encode(n),"sha512")}}return{url:d,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,n,d,c){if(void 0!==n){if(!("result"in n))throw new o(this.id+" "+a);if("success"!==n.result){const e=this.safeString(n,"errorCode"),t=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,e,t),new o(t)}}}}},XrIg:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ExchangeNotAvailable:a,RequestTimeout:o,AuthenticationError:n,PermissionDenied:d,DDoSProtection:c,InsufficientFunds:h,OrderNotFound:l,OrderNotCached:u,InvalidOrder:f,AccountSuspended:p,CancelPending:m,InvalidNonce:y}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"poloniex",name:"Poloniex",countries:["US"],rateLimit:1e3,certified:!0,pro:!0,has:{CORS:!1,createDepositAddress:!0,createMarketOrder:!1,editOrder:!0,fetchClosedOrders:"emulated",fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrder:!0,fetchOpenOrders:!0,fetchOrder:"emulated",fetchOrderBooks:!0,fetchOrders:"emulated",fetchOrderStatus:"emulated",fetchOrderTrades:!0,fetchTickers:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchTransactions:!0,fetchWithdrawals:!0,cancelAllOrders:!0,withdraw:!0},timeframes:{"5m":300,"15m":900,"30m":1800,"2h":7200,"4h":14400,"1d":86400},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766817-e9456312-5ee6-11e7-9b3c-b628ca5626a5.jpg",api:{public:"https://poloniex.com/public",private:"https://poloniex.com/tradingApi"},www:"https://www.poloniex.com",doc:"https://docs.poloniex.com",fees:"https://poloniex.com/fees",referral:"https://www.poloniex.com/?utm_source=ccxt&utm_medium=web"},api:{public:{get:["return24hVolume","returnChartData","returnCurrencies","returnLoanOrders","returnOrderBook","returnTicker","returnTradeHistory"]},private:{post:["buy","cancelLoanOffer","cancelOrder","cancelAllOrders","closeMarginPosition","createLoanOffer","generateNewAddress","getMarginPosition","marginBuy","marginSell","moveOrder","returnActiveLoans","returnAvailableAccountBalances","returnBalances","returnCompleteBalances","returnDepositAddresses","returnDepositsWithdrawals","returnFeeInfo","returnLendingHistory","returnMarginAccountSummary","returnOpenLoanOffers","returnOpenOrders","returnOrderTrades","returnOrderStatus","returnTradableBalances","returnTradeHistory","sell","toggleAutoRenew","transferBalance","withdraw"]}},fees:{trading:{maker:9e-4,taker:9e-4},funding:{}},limits:{amount:{min:1e-6,max:1e9},price:{min:1e-8,max:1e9},cost:{min:0,max:1e9}},precision:{amount:8,price:8},commonCurrencies:{AIR:"AirCoin",APH:"AphroditeCoin",BCC:"BTCtalkcoin",BDG:"Badgercoin",BTM:"Bitmark",CON:"Coino",GOLD:"GoldEagles",GPUC:"GPU",HOT:"Hotcoin",ITC:"Information Coin",PLX:"ParallaxCoin",KEY:"KEYCoin",STR:"XLM",SOC:"SOCC",XAP:"API Coin"},options:{limits:{cost:{min:{BTC:1e-4,ETH:1e-4,XMR:1e-4,USDT:1}}}},exceptions:{exact:{"You may only place orders that reduce your position.":f,"Invalid order number, or you are not the person who placed the order.":l,"Permission denied":d,"Connection timed out. Please try again.":o,"Internal error. Please try again.":a,"Order not found, or you are not the person who placed it.":l,"Invalid API key/secret pair.":n,"Please do not make more than 8 API calls per second.":c,"Rate must be greater than zero.":f},broad:{"Total must be at least":f,"This account is frozen.":p,"Not enough":h,"Nonce must be greater":y,"You have already called cancelOrder or moveOrder on this order.":m,"Amount must be at least":f,"is either completed or does not exist":f}}})}calculateFee(e,t,i,s,r,a="taker",o={}){const n=this.markets[e];let d="quote";const c=n[a];let h=parseFloat(this.costToPrecision(e,s*c));return"sell"===i?h*=r:d="base",{type:a,currency:n[d],rate:c,cost:parseFloat(this.feeToPrecision(e,h))}}parseOHLCV(e,t,i="5m",s,r){return[this.safeTimestamp(e,"date"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"quoteVolume")]}async fetchOHLCV(e,t="5m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={currencyPair:a.id,period:this.timeframes[t]};if(void 0===i)o.end=this.seconds(),o.start=void 0===s?o.end-this.parseTimeframe("1w"):o.end-s*this.parseTimeframe(t);else if(o.start=parseInt(i/1e3),void 0!==s){const e=this.sum(o.start,s*this.parseTimeframe(t));o.end=e}const n=await this.publicGetReturnChartData(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}async fetchMarkets(e={}){const t=await this.publicGetReturnTicker(e),i=Object.keys(t),s=[];for(let r=0;r<i.length;r++){const e=i[r],a=t[e],[o,n]=e.split("_"),d=this.safeCurrencyCode(n),c=this.safeCurrencyCode(o),h=d+"/"+c,l=this.extend(this.limits,{cost:{min:this.safeValue(this.options.limits.cost.min,c)}}),u="1"!==this.safeString(a,"isFrozen"),f=this.safeInteger(a,"id");s.push({id:e,numericId:f,symbol:h,baseId:n,quoteId:o,base:d,quote:c,active:u,limits:l,info:a})}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostReturnCompleteBalances(this.extend({account:"all"},e)),i={info:t},s=Object.keys(t);for(let r=0;r<s.length;r++){const e=s[r],a=this.safeValue(t,e,{}),o=this.safeCurrencyCode(e),n=this.account();n.free=this.safeFloat(a,"available"),n.used=this.safeFloat(a,"onOrders"),i[o]=n}return this.parseBalance(i)}async fetchTradingFees(e={}){await this.loadMarkets();const t=await this.privatePostReturnFeeInfo(e);return{info:t,maker:this.safeFloat(t,"makerFee"),taker:this.safeFloat(t,"takerFee"),withdraw:{},deposit:{}}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={currencyPair:this.marketId(e)};void 0!==t&&(s.depth=t);const r=await this.publicGetReturnOrderBook(this.extend(s,i)),a=this.parseOrderBook(r);return a.nonce=this.safeInteger(r,"seq"),a}async fetchOrderBooks(e,t,i={}){await this.loadMarkets();const s={currencyPair:"all"};void 0!==t&&(s.depth=t);const r=await this.publicGetReturnOrderBook(this.extend(s,i)),a=Object.keys(r),o={};for(let n=0;n<a.length;n++){const e=a[n];let t=void 0;if(e in this.markets_by_id)t=this.markets_by_id[e].symbol;else{const[i,s]=e.split("_");t=this.safeCurrencyCode(s)+"/"+this.safeCurrencyCode(i)}const i=this.parseOrderBook(r[e]);i.nonce=this.safeInteger(r[e],"seq"),o[t]=i}return o}parseTicker(e,t){const i=this.milliseconds();let s=void 0;t&&(s=t.symbol);let r=void 0,a=void 0,o=void 0;const n=this.safeFloat(e,"last"),d=this.safeFloat(e,"percentChange");return-1!==d&&(r=n/this.sum(1,d),a=n-r,o=this.sum(n,r)/2),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high24hr"),low:this.safeFloat(e,"low24hr"),bid:this.safeFloat(e,"highestBid"),bidVolume:void 0,ask:this.safeFloat(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:r,close:n,last:n,previousClose:void 0,change:a,percentage:100*d,average:o,baseVolume:this.safeFloat(e,"quoteVolume"),quoteVolume:this.safeFloat(e,"baseVolume"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetReturnTicker(t),s=Object.keys(i),r={};for(let a=0;a<s.length;a++){const e=s[a];let t=void 0,o=void 0;if(e in this.markets_by_id)o=this.markets_by_id[e],t=o.symbol;else{const[i,s]=e.split("_");t=this.safeCurrencyCode(s)+"/"+this.safeCurrencyCode(i),o={symbol:t}}const n=i[e];r[t]=this.parseTicker(n,o)}return r}async fetchCurrencies(e={}){const t=await this.publicGetReturnCurrencies(e),i=Object.keys(t),s={};for(let r=0;r<i.length;r++){const e=i[r],a=t[e],o=8,n=this.safeCurrencyCode(e),d=0===a.delisted&&!a.disabled,c=this.safeInteger(a,"id");s[n]={id:e,numericId:c,code:n,info:a,name:a.name,active:d,fee:this.safeFloat(a,"txFee"),precision:o,limits:{amount:{min:Math.pow(10,-o),max:Math.pow(10,o)},price:{min:Math.pow(10,-o),max:Math.pow(10,o)},cost:{min:void 0,max:void 0},withdraw:{min:a.txFee,max:Math.pow(10,o)}}}}return s}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s=(await this.publicGetReturnTicker(t))[i.id];return this.parseTicker(s,i)}parseTrade(e,t){const i=this.safeString2(e,"globalTradeID","tradeID"),s=this.safeString(e,"orderNumber"),r=this.parse8601(this.safeString(e,"date"));let a=void 0,o=void 0,n=void 0;if(!t&&"currencyPair"in e){const i=e.currencyPair;if(i in this.markets_by_id)t=this.markets_by_id[i];else{const e=i.split("_");n=e[0],o=e[1],a=o+"/"+n}}void 0!==t&&(a=t.symbol,o=t.base,n=t.quote);const d=this.safeString(e,"type");let c=void 0;const h=this.safeFloat(e,"rate"),l=this.safeFloat(e,"total"),u=this.safeFloat(e,"amount");if("fee"in e){const t=this.safeFloat(e,"fee");let i=void 0,s=void 0;"buy"===d?(s=o,i=u*t):(s=n,void 0!==l&&(i=l*t)),c={type:void 0,rate:t,cost:i,currency:s}}let f=void 0;return void 0!==this.safeFloat(e,"takerAdjustment")&&(f="taker"),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:a,order:s,type:"limit",side:d,takerOrMaker:f,price:h,amount:u,cost:l,fee:c}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={currencyPair:r.id};void 0!==t&&(a.start=parseInt(t/1e3),a.end=this.seconds());const o=await this.publicGetReturnTradeHistory(this.extend(a,s));return this.parseTrades(o,r,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=void 0;void 0!==e&&(r=this.market(e));const a={currencyPair:r?r.id:"all"};void 0!==t&&(a.start=parseInt(t/1e3),a.end=this.sum(this.seconds(),1)),void 0!==i&&(a.limit=parseInt(i));const o=await this.privatePostReturnTradeHistory(this.extend(a,s));let n=[];if(void 0!==r)n=this.parseTrades(o,r);else if(o){const e=Object.keys(o);for(let t=0;t<e.length;t++){const i=e[t];let s=void 0;if(i in this.markets_by_id){s=this.markets_by_id[i];const e=this.parseTrades(o[i],s);for(let t=0;t<e.length;t++)n.push(e[t])}else{const[e,t]=i.split("_"),s=this.safeCurrencyCode(t),r=this.safeCurrencyCode(e),a=s+"/"+r,d=o[i];for(let i=0;i<d.length;i++){const e={symbol:a,base:s,quote:r};n.push(this.parseTrade(d[i],e))}}}}return this.filterBySinceLimit(n,t,i)}parseOrderStatus(e){return this.safeString({Open:"open","Partially filled":"open"},e,e)}parseOrder(e,t){let i=this.safeInteger(e,"timestamp");i||(i=this.parse8601(e.date));let s=void 0;"resultingTrades"in e&&(s=this.parseTrades(e.resultingTrades,t));let r=void 0;const a=this.safeString(e,"currencyPair");void 0!==(t=this.safeValue(this.markets_by_id,a,t))&&(r=t.symbol);const o=this.safeFloat2(e,"price","rate");let n=this.safeFloat(e,"amount"),d=this.safeFloat(e,"startingAmount"),c=void 0,h=0;void 0!==d?void 0!==n&&(c=d-n,void 0!==o&&(h=c*o)):d=n;let l=this.parseOrderStatus(this.safeString(e,"status")),u=void 0,f=void 0;if(void 0===c&&void 0!==s){c=0,h=0;const e=s.length;if(e>0){f=s[0].timestamp;for(let t=0;t<e;t++){const e=s[t],i=e.amount,r=e.price;c=this.sum(c,i),h=this.sum(h,r*i),f=Math.max(f,e.timestamp)}}n=Math.max(d-c,0),c>=d&&(l="closed")}void 0!==c&&void 0!==h&&c>0&&(u=h/c);let p=this.safeString(e,"type");const m=this.safeString(e,"side",p);p===m&&(p=void 0);const y=this.safeString(e,"orderNumber");let b=void 0;const v=this.safeFloat(e,"fee");if(void 0!==v){let e=void 0;void 0!==t&&(e="buy"===m?t.base:t.quote),b={cost:v,currency:e}}return{info:e,id:y,clientOrderId:this.safeString(e,"clientOrderId"),timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:f,status:l,symbol:r,type:p,side:m,price:o,cost:h,average:u,amount:d,filled:c,remaining:n,trades:s,fee:b}}parseOpenOrders(e,t,i){for(let s=0;s<e.length;s++){const r=e[s],a=this.extend(r,{status:"open",type:"limit",side:r.type,price:r.rate});i.push(this.parseOrder(a,t))}return i}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;void 0!==e&&(r=this.market(e));const a={currencyPair:r?r.id:"all"},o=await this.privatePostReturnOpenOrders(this.extend(a,s));let n=[];if(void 0!==r)n=this.parseOpenOrders(o,r,n);else{const e=Object.keys(o);for(let t=0;t<e.length;t++){const i=e[t],s=o[i],r=this.markets_by_id[i];n=this.parseOpenOrders(s,r,n)}}for(let l=0;l<n.length;l++)this.orders[n[l].id]=n[l];const d=this.indexBy(n,"id"),c=Object.keys(this.orders),h=[];for(let l=0;l<c.length;l++){const t=c[l];if(t in d)this.orders[t]=this.extend(this.orders[t],d[t]);else{let e=this.orders[t];"open"===e.status&&(e=this.extend(e,{status:"closed",cost:void 0,filled:e.amount,remaining:0}),void 0===e.cost&&void 0!==e.filled&&(e.cost=e.filled*e.price),this.orders[t]=e)}const i=this.orders[t];void 0!==r?i.symbol===e&&h.push(i):h.push(i)}return this.filterBySinceLimit(h,t,i)}async fetchOrder(e,t,i={}){const s=this.safeValue(i,"since"),r=this.safeValue(i,"limit"),a=this.omit(i,["since","limit"]),o=await this.fetchOrders(t,s,r,a);for(let n=0;n<o.length;n++)if(o[n].id===e)return o[n];throw new u(this.id+" order id "+e.toString()+' is not in "open" state and not found in cache')}filterOrdersByStatus(e,t){const i=[];for(let s=0;s<e.length;s++)e[s].status===t&&i.push(e[s]);return i}async fetchOpenOrders(e,t,i,s={}){const r=await this.fetchOrders(e,t,i,s);return this.filterOrdersByStatus(r,"open")}async fetchClosedOrders(e,t,i,s={}){const r=await this.fetchOrders(e,t,i,s);return this.filterOrdersByStatus(r,"closed")}async createOrder(e,t,i,s,a,o={}){if("limit"!==t)throw new r(this.id+" allows limit orders only");await this.loadMarkets();const n="privatePost"+this.capitalize(i),d=this.market(e);s=this.amountToPrecision(e,s);const c={currencyPair:d.id,rate:this.priceToPrecision(e,a),amount:s},h=this.milliseconds(),l=await this[n](this.extend(c,o)),u=this.parseOrder(this.extend({timestamp:h,status:"open",type:t,side:i,price:a,amount:s},l),d),f=u.id;return this.orders[f]=u,this.extend({info:l},u)}async editOrder(e,t,i,s,r,a,o={}){await this.loadMarkets(),a=parseFloat(a);const n={orderNumber:e,rate:this.priceToPrecision(t,a)};void 0!==r&&(n.amount=this.amountToPrecision(t,r));const d=await this.privatePostMoveOrder(this.extend(n,o));let c=void 0;if(e in this.orders){this.orders[e].status="canceled";const t=d.orderNumber;this.orders[t]=this.extend(this.orders[e],{id:t,price:a,status:"open"}),void 0!==r&&(this.orders[t].amount=r),c=this.extend(this.orders[t],{info:d})}else{let e=void 0;void 0!==t&&(e=this.market(t)),c=this.parseOrder(d,e),this.orders[c.id]=c}return c}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=void 0;try{s=await this.privatePostCancelOrder(this.extend({orderNumber:e},i))}catch(r){throw r instanceof m&&e in this.orders&&(this.orders[e].status="canceled"),r}return e in this.orders&&(this.orders[e].status="canceled"),s}async cancelAllOrders(e,t={}){const i={};let s=void 0;void 0!==e&&(s=this.market(e),i.currencyPair=s.id);const r=await this.privatePostCancelAllOrders(this.extend(i,t)),a=this.safeValue(r,"orderNumbers",[]);for(let o=0;o<a.length;o++){const e=a[o].toString();e in this.orders&&(this.orders[e].status="canceled")}return r}async fetchOpenOrder(e,t,i={}){await this.loadMarkets(),e=e.toString();const s=await this.privatePostReturnOrderStatus(this.extend({orderNumber:e},i)),r=this.safeValue(s.result,e);if(void 0===r)throw new l(this.id+" order id "+e+" not found");const a=this.parseOrder(r);return a.id=e,this.orders[e]=a,a}async fetchOrderStatus(e,t,i={}){await this.loadMarkets();const s=await this.fetchOpenOrders(t,void 0,void 0,i);return e in this.indexBy(s,"id")?"open":"closed"}async fetchOrderTrades(e,t,i,s,r={}){await this.loadMarkets();const a={orderNumber:e},o=await this.privatePostReturnOrderTrades(this.extend(a,r));return this.parseTrades(o)}async createDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currency:i.id},r=await this.privatePostGenerateNewAddress(this.extend(s,t));let a=void 0,o=void 0;1===r.success&&(a=this.safeString(r,"response")),this.checkAddress(a);const n=this.safeString(i.info,"depositAddress");return void 0!==n&&(o=a,a=n),{currency:e,address:a,tag:o,info:r}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s=await this.privatePostReturnDepositAddresses(t),r=i.id;let a=this.safeString(s,r),o=void 0;this.checkAddress(a);const n=this.safeString(i.info,"depositAddress");return void 0!==n&&(o=a,a=n),{currency:e,address:a,tag:o,info:s}}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a={currency:this.currency(e).id,amount:t,address:i};s&&(a.paymentId=s);const o=await this.privatePostWithdraw(this.extend(a,r));return{info:o,id:this.safeString(o,"withdrawalNumber")}}async fetchTransactionsHelper(e,t,i,s={}){await this.loadMarkets();const r=this.seconds(),a={start:void 0!==t?parseInt(t/1e3):r-31104e4,end:r};return void 0!==i&&(a.limit=i),await this.privatePostReturnDepositsWithdrawals(this.extend(a,s))}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const r=await this.fetchTransactionsHelper(e,t,i,s);for(let c=0;c<r.deposits.length;c++)r.deposits[c].type="deposit";for(let c=0;c<r.withdrawals.length;c++)r.withdrawals[c].type="withdrawal";let a=void 0;void 0!==e&&(a=this.currency(e));const o=this.parseTransactions(r.withdrawals,a,t,i),n=this.parseTransactions(r.deposits,a,t,i),d=this.arrayConcat(n,o);return this.filterByCurrencySinceLimit(this.sortBy(d,"timestamp"),e,t,i)}async fetchWithdrawals(e,t,i,s={}){const r=await this.fetchTransactionsHelper(e,t,i,s);for(let n=0;n<r.withdrawals.length;n++)r.withdrawals[n].type="withdrawal";let a=void 0;void 0!==e&&(a=this.currency(e));const o=this.parseTransactions(r.withdrawals,a,t,i);return this.filterByCurrencySinceLimit(o,e,t,i)}async fetchDeposits(e,t,i,s={}){const r=await this.fetchTransactionsHelper(e,t,i,s);for(let n=0;n<r.deposits.length;n++)r.deposits[n].type="deposit";let a=void 0;void 0!==e&&(a=this.currency(e));const o=this.parseTransactions(r.deposits,a,t,i);return this.filterByCurrencySinceLimit(o,e,t,i)}parseTransactionStatus(e){return this.safeString({COMPLETE:"ok"},e,e)}parseTransaction(e,t){const i=this.safeTimestamp(e,"timestamp"),s=this.safeString(e,"currency"),r=this.safeCurrencyCode(s);let a=this.safeString(e,"status","pending"),o=this.safeString(e,"txid");if(void 0!==a){const e=a.split(": "),t=e.length;a=e[0],t>1&&void 0===o&&(o=e[1]),a=this.parseTransactionStatus(a)}const n=this.safeString(e,"type"),d=this.safeString2(e,"withdrawalNumber","depositNumber");let c=this.safeFloat(e,"amount");const h=this.safeString(e,"address");let l=this.safeFloat(e,"fee");return void 0===l&&(l=0),"withdrawal"===n&&(c-=l),{info:e,id:d,currency:r,amount:c,address:h,tag:void 0,status:a,type:n,updated:void 0,txid:o,timestamp:i,datetime:this.iso8601(i),fee:{currency:r,cost:l}}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t];const n=this.extend({command:e},s);return"public"===t?o+="?"+this.urlencode(n):(this.checkRequiredCredentials(),n.nonce=this.nonce(),a=this.urlencode(n),r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}),{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,c){if(void 0!==n&&"error"in n){const e=n.error,t=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,e,t),this.throwBroadlyMatchedException(this.exceptions.broad,e,t),new r(t)}}}},"Y/HJ":function(e,t,i){"use strict";var s=t,r=i("tk5I");function a(e,t){var i=[];return t>0&&i.push(e>>>24),t>1&&i.push(e>>>16&255),t>2&&i.push(e>>>8&255),t>3&&i.push(255&e),i}s.assert=function(e,t){if(!e)throw new Error(t)},s.getNAF=function(e,t){for(var i=[],s=1<<t+1,r=e.clone();r.cmpn(1)>=0;){var a;if(r.isOdd()){var o=r.andln(s-1);a=o>(s>>1)-1?(s>>1)-o:o,r.isubn(a)}else a=0;i.push(a);for(var n=0!==r.cmpn(0)&&0===r.andln(s-1)?t+1:1,d=1;d<n;d++)i.push(0);r.iushrn(n)}return i},s.getJSF=function(e,t){var i=[[],[]];e=e.clone(),t=t.clone();for(var s=0,r=0;e.cmpn(-s)>0||t.cmpn(-r)>0;){var a,o,n,d=e.andln(3)+s&3,c=t.andln(3)+r&3;if(3===d&&(d=-1),3===c&&(c=-1),0===(1&d))a=0;else a=3!==(n=e.andln(7)+s&7)&&5!==n||2!==c?d:-d;if(i[0].push(a),0===(1&c))o=0;else o=3!==(n=t.andln(7)+r&7)&&5!==n||2!==d?c:-c;i[1].push(o),2*s===a+1&&(s=1-s),2*r===o+1&&(r=1-r),e.iushrn(1),t.iushrn(1)}return i},s.cachedProperty=function(e,t,i){var s="_"+t;e.prototype[t]=function(){return void 0!==this[s]?this[s]:this[s]=i.call(this)}},s.parseBytes=function(e){return"string"===typeof e?s.toArray(e,"hex"):e},s.intFromLE=function(e){return new r(e,"hex","le")},s.wordArrayToBuffer=function(e){let t=void 0;if(!e.hasOwnProperty("sigBytes")||!e.hasOwnProperty("words"))throw Error("Argument not a wordArray");t=e.sigBytes,e=e.words;const i=[];let s=[],r=0;for(;t>0;)s=a(e[r],Math.min(4,t)),t-=s.length,i.push(s),r++;return[].concat.apply([],i)}},YB7M:function(e,t,i){"use strict";const s=i("pRMk").Buffer,r=i("ZG6w").Transform,a=i("wfEq");e.exports=function(e){function t(t,i,s,a){r.call(this,a),this._rate=t,this._capacity=i,this._delimitedSuffix=s,this._options=a,this._state=new e,this._state.initialize(t,i),this._finalized=!1}return a(t,r),t.prototype._transform=function(e,t,i){let s=null;try{this.update(e,t)}catch(r){s=r}i(s)},t.prototype._flush=function(){},t.prototype._read=function(e){this.push(this.squeeze(e))},t.prototype.update=function(e,t){if(!s.isBuffer(e)&&"string"!==typeof e)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return s.isBuffer(e)||(e=s.from(e,t)),this._state.absorb(e),this},t.prototype.squeeze=function(e,t){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let i=this._state.squeeze(e);return void 0!==t&&(i=i.toString(t)),i},t.prototype._resetState=function(){return this._state.initialize(this._rate,this._capacity),this},t.prototype._clone=function(){const e=new t(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(e._state),e._finalized=this._finalized,e},t}},YBGL:function(e,t,i){"use strict";const s=i("OjXq"),{BadRequest:r,ExchangeError:a,ArgumentsRequired:o,AuthenticationError:n,InsufficientFunds:d,OrderNotFound:c,ExchangeNotAvailable:h,DDoSProtection:l,InvalidOrder:u}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"zb",name:"ZB",countries:["CN"],rateLimit:1e3,version:"v1",has:{CORS:!1,createMarketOrder:!1,fetchDepositAddress:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchOHLCV:!0,fetchTickers:!0,withdraw:!0},timeframes:{"1m":"1min","3m":"3min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","12h":"12hour","1d":"1day","3d":"3day","1w":"1week"},exceptions:{1001:a,1002:a,1003:n,1004:n,1005:n,1006:n,1009:h,2001:d,2002:d,2003:d,2005:d,2006:d,2007:d,2009:d,3001:c,3002:u,3003:u,3004:n,3005:r,3006:n,3007:n,3008:c,4001:h,4002:l},urls:{logo:"https://user-images.githubusercontent.com/1294454/32859187-cd5214f0-ca5e-11e7-967d-96568e2e2bd1.jpg",api:{public:"http://api.zb.cn/data",private:"https://trade.zb.cn/api"},www:"https://www.zb.com",doc:"https://www.zb.com/i/developer",fees:"https://www.zb.com/i/rate"},api:{public:{get:["markets","ticker","allTicker","depth","trades","kline"]},private:{get:["order","cancelOrder","getOrder","getOrders","getOrdersNew","getOrdersIgnoreTradeType","getUnfinishedOrdersIgnoreTradeType","getAccountInfo","getUserAddress","getWithdrawAddress","getWithdrawRecord","getChargeRecord","getCnyWithdrawRecord","getCnyChargeRecord","withdraw","getLeverAssetsInfo","getLeverBills","transferInLever","transferOutLever","loan","cancelLoan","getLoans","getLoanRecords","borrow","repay","getRepayments"]}},fees:{funding:{withdraw:{BTC:1e-4,BCH:6e-4,LTC:.005,ETH:.01,ETC:.01,BTS:3,EOS:1,QTUM:.01,HSR:.001,XRP:.1,USDT:"0.1%",QCASH:5,DASH:.002,BCD:0,UBTC:0,SBTC:0,INK:20,TV:.1,BTH:0,BCX:0,LBTC:0,CHAT:20,bitCNY:20,HLC:20,BTP:0,BCW:0}},trading:{maker:.002,taker:.002}},commonCurrencies:{ENT:"ENTCash"}})}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=Object.keys(t),s=[];for(let r=0;r<i.length;r++){const e=i[r],a=t[e],[o,n]=e.split("_"),d=this.safeCurrencyCode(o),c=this.safeCurrencyCode(n),h=d+"/"+c,l={amount:this.safeInteger(a,"amountScale"),price:this.safeInteger(a,"priceScale")};s.push({id:e,symbol:h,baseId:o,quoteId:n,base:d,quote:c,active:!0,precision:l,limits:{amount:{min:Math.pow(10,-l.amount),max:void 0},price:{min:Math.pow(10,-l.price),max:void 0},cost:{min:0,max:void 0}},info:a})}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetGetAccountInfo(e),i=this.safeValue(t.result,"coins"),s={info:t};for(let r=0;r<i.length;r++){const e=i[r],t=this.account(),a=this.safeString(e,"key"),o=this.safeCurrencyCode(a);t.free=this.safeFloat(e,"available"),t.used=this.safeFloat(e,"freez"),s[o]=t}return this.parseBalance(s)}getMarketFieldName(){return"market"}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privateGetGetUserAddress(this.extend(i,t));let r=s.message.datas.key,a=void 0;if(r.indexOf("_")>=0){const e=r.split("_");r=e[0],a=e[1]}return{currency:e,address:r,tag:a,info:s}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={};r[this.getMarketFieldName()]=s.id,void 0!==t&&(r.size=t);const a=await this.publicGetDepth(this.extend(r,i));return this.parseOrderBook(a)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetAllTicker(t),s={},r={},a=Object.keys(this.marketsById);for(let n=0;n<a.length;n++){r[a[n].replace("_","")]=this.marketsById[a[n]]}const o=Object.keys(i);for(let n=0;n<o.length;n++){const e=r[o[n]];s[e.symbol]=this.parseTicker(i[o[n]],e)}return s}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={};s[this.getMarketFieldName()]=i.id;const r=(await this.publicGetTicker(this.extend(s,t))).ticker;return this.parseTicker(r,i)}parseTicker(e,t){const i=this.milliseconds();let s=void 0;void 0!==t&&(s=t.symbol);const r=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e);void 0===s&&(s=1e3);const o={market:a.id,type:this.timeframes[t],limit:s};void 0!==i&&(o.since=i);const n=await this.publicGetKline(this.extend(o,r)),d=this.safeValue(n,"data",[]);return this.parseOHLCVs(d,a,t,i,s)}parseTrade(e,t){const i=this.safeTimestamp(e,"date");let s=this.safeString(e,"trade_type");s="bid"===s?"buy":"sell";const r=this.safeString(e,"tid"),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount");let n=void 0;void 0!==a&&void 0!==o&&(n=a*o);let d=void 0;return void 0!==t&&(d=t.symbol),{info:e,id:r,timestamp:i,datetime:this.iso8601(i),symbol:d,type:void 0,side:s,order:void 0,takerOrMaker:void 0,price:a,amount:o,cost:n,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={};a[this.getMarketFieldName()]=r.id;const o=await this.publicGetTrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,r,a={}){if("limit"!==t)throw new u(this.id+" allows limit orders only");await this.loadMarkets();const o={price:this.priceToPrecision(e,r),amount:this.amountToPrecision(e,s),tradeType:"buy"===i?"1":"0",currency:this.marketId(e)},n=await this.privateGetOrder(this.extend(o,a));return{info:n,id:n.id}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e.toString(),currency:this.marketId(t)};return await this.privateGetCancelOrder(this.extend(s,i))}async fetchOrder(e,t,i={}){if(void 0===t)throw new o(this.id+" fetchOrder() requires a symbol argument");await this.loadMarkets();const s={id:e.toString(),currency:this.marketId(t)},r=await this.privateGetGetOrder(this.extend(s,i));return this.parseOrder(r,void 0)}async fetchOrders(e,t,i=50,s={}){if(void 0===e)throw new a(this.id+"fetchOrders requires a symbol parameter");await this.loadMarkets();const r=this.market(e),o={currency:r.id,pageIndex:1,pageSize:i};let n="privateGetGetOrdersIgnoreTradeType";"tradeType"in s&&(n="privateGetGetOrdersNew");let d=void 0;try{d=await this[n](this.extend(o,s))}catch(h){if(h instanceof c)return[];throw h}return this.parseOrders(d,r,t,i)}async fetchOpenOrders(e,t,i=10,s={}){if(void 0===e)throw new a(this.id+"fetchOpenOrders requires a symbol parameter");await this.loadMarkets();const r=this.market(e),o={currency:r.id,pageIndex:1,pageSize:i};let n="privateGetGetUnfinishedOrdersIgnoreTradeType";"tradeType"in s&&(n="privateGetGetOrdersNew");let d=void 0;try{d=await this[n](this.extend(o,s))}catch(h){if(h instanceof c)return[];throw h}return this.parseOrders(d,r,t,i)}parseOrder(e,t){let i=this.safeInteger(e,"type");i=1===i?"buy":"sell";let s=void 0;const r=this.getCreateDateField();r in e&&(s=e[r]);let a=void 0;const o=this.safeString(e,"currency");o in this.markets_by_id&&(t=this.marketsById[o]),void 0!==t&&(a=t.symbol);const n=this.safeFloat(e,"price"),d=this.safeFloat(e,"trade_amount"),c=this.safeFloat(e,"total_amount");let h=void 0;void 0!==c&&void 0!==d&&(h=c-d);const l=this.safeFloat(e,"trade_money");let u=void 0;const f=this.parseOrderStatus(this.safeString(e,"status"));return void 0!==l&&void 0!==d&&d>0&&(u=l/d),{info:e,id:this.safeString(e,"id"),clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:a,type:"limit",side:i,price:n,average:u,cost:l,amount:c,filled:d,remaining:h,status:f,fee:void 0}}parseOrderStatus(e){return this.safeString({0:"open",1:"canceled",2:"closed",3:"open"},e,e)}getCreateDateField(){return"trade_date"}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t];if("public"===t)o+="/"+this.version+"/"+e,Object.keys(s).length&&(o+="?"+this.urlencode(s));else{let t=this.keysort(this.extend({method:e,accesskey:this.apiKey},s));const i=this.nonce();t=this.keysort(t);const r=this.rawencode(t),a=this.hash(this.encode(this.secret),"sha1");o+="/"+e+"?"+r+"&"+("sign="+this.hmac(this.encode(r),this.encode(a),"md5")+"&reqTime="+i.toString())}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,o,n,d,c){if(void 0!==n&&"{"===o[0]){const e=this.id+" "+o;if("code"in n){const t=this.safeString(n,"code");if(this.throwExactlyMatchedException(this.exceptions,t,e),"1000"!==t)throw new a(e)}const t=this.safeValue(n,"result");if(void 0!==t&&!t){throw"\u670d\u52a1\u7aef\u5fd9\u788c"===this.safeString(n,"message")?new h(e):new a(e)}}}}},YEj7:function(e,t,i){"use strict";const s=i("OjXq"),{TICK_SIZE:r}=i("rwG2"),{AuthenticationError:a,BadRequest:o,DDoSProtection:n,ExchangeError:d,ExchangeNotAvailable:c,InsufficientFunds:h,InvalidOrder:l,OrderNotFound:u,PermissionDenied:f}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitmex",name:"BitMEX",countries:["SC"],version:"v1",userAgent:void 0,rateLimit:2e3,pro:!0,has:{CORS:!1,fetchOHLCV:!0,withdraw:!0,editOrder:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchLedger:!0,fetchTransactions:"emulated"},timeframes:{"1m":"1m","5m":"5m","1h":"1h","1d":"1d"},urls:{test:{public:"https://testnet.bitmex.com",private:"https://testnet.bitmex.com"},logo:"https://user-images.githubusercontent.com/1294454/27766319-f653c6e6-5ed4-11e7-933d-f0bc3699ae8f.jpg",api:{public:"https://www.bitmex.com",private:"https://www.bitmex.com"},www:"https://www.bitmex.com",doc:["https://www.bitmex.com/app/apiOverview","https://github.com/BitMEX/api-connectors/tree/master/official-http"],fees:"https://www.bitmex.com/app/fees",referral:"https://www.bitmex.com/register/upZpOX"},api:{public:{get:["announcement","announcement/urgent","funding","instrument","instrument/active","instrument/activeAndIndices","instrument/activeIntervals","instrument/compositeIndex","instrument/indices","insurance","leaderboard","liquidation","orderBook","orderBook/L2","quote","quote/bucketed","schema","schema/websocketHelp","settlement","stats","stats/history","trade","trade/bucketed"]},private:{get:["apiKey","chat","chat/channels","chat/connected","execution","execution/tradeHistory","notification","order","position","user","user/affiliateStatus","user/checkReferralCode","user/commission","user/depositAddress","user/margin","user/minWithdrawalFee","user/wallet","user/walletHistory","user/walletSummary"],post:["apiKey","apiKey/disable","apiKey/enable","chat","order","order/bulk","order/cancelAllAfter","order/closePosition","position/isolate","position/leverage","position/riskLimit","position/transferMargin","user/cancelWithdrawal","user/confirmEmail","user/confirmEnableTFA","user/confirmWithdrawal","user/disableTFA","user/logout","user/logoutAll","user/preferences","user/requestEnableTFA","user/requestWithdrawal"],put:["order","order/bulk","user"],delete:["apiKey","order","order/all"]}},exceptions:{exact:{"Invalid API Key.":a,"This key is disabled.":f,"Access Denied":f,"Duplicate clOrdID":l,"orderQty is invalid":l,"Invalid price":l,"Invalid stopPx for ordType":l},broad:{"Signature not valid":a,overloaded:c,"Account has insufficient Available Balance":h,"Service unavailable":c}},precisionMode:r,options:{"api-expires":5,fetchOHLCVOpenTimestamp:!0}})}async fetchMarkets(e={}){const t=await this.publicGetInstrumentActiveAndIndices(e),i=[];for(let s=0;s<t.length;s++){const e=t[s],r="Unlisted"!==e.state,a=e.symbol,o=e.underlying,n=e.quoteCurrency,d=o+n,c=this.safeCurrencyCode(o),h=this.safeCurrencyCode(n),l=a===d,u=this.safeString2(e,"positionCurrency","quoteCurrency");let f=void 0,p=!1,m=!1;const y=this.safeCurrencyCode(u);let b=a;l?(f="swap",b=c+"/"+h):a.indexOf("B_")>=0?(m=!0,f="prediction"):(p=!0,f="future");const v={amount:void 0,price:void 0},g=this.safeFloat(e,"lotSize"),w=this.safeFloat(e,"tickSize");void 0!==g&&(v.amount=g),void 0!==w&&(v.price=w);const k={amount:{min:void 0,max:void 0},price:{min:w,max:this.safeFloat(e,"maxPrice")},cost:{min:void 0,max:void 0}};k[y===h?"cost":"amount"]={min:g,max:this.safeFloat(e,"maxOrderQty")},i.push({id:a,symbol:b,base:c,quote:h,baseId:o,quoteId:n,active:r,precision:v,limits:k,taker:this.safeFloat(e,"takerFee"),maker:this.safeFloat(e,"makerFee"),type:f,spot:!1,swap:l,future:p,prediction:m,info:e})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetUserMargin(this.extend({currency:"all"},e)),i={info:t};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"currency"),a=this.safeCurrencyCode(r),o=this.account();o.free=this.safeFloat(e,"availableMargin"),o.total=this.safeFloat(e,"marginBalance"),"BTC"===a&&(o.free=1e-8*o.free,o.total=1e-8*o.total),i[a]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id};void 0!==t&&(s.depth=t);const r=await this.publicGetOrderBookL2(this.extend(s,i)),a={bids:[],asks:[],timestamp:void 0,datetime:void 0,nonce:void 0};for(let o=0;o<r.length;o++){const e=r[o],t="Sell"===e.side?"asks":"bids",i=this.safeFloat(e,"size"),s=this.safeFloat(e,"price");void 0!==s&&a[t].push([s,i])}return a.bids=this.sortBy(a.bids,0,!0),a.asks=this.sortBy(a.asks,0),a}async fetchOrder(e,t,i={}){const s={filter:{orderID:e}},r=await this.fetchOrders(t,void 0,void 0,this.deepExtend(s,i));if(1===r.length)return r[0];throw new u(this.id+": The order "+e+" not found.")}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={};void 0!==e&&(r=this.market(e),a.symbol=r.id),void 0!==t&&(a.startTime=this.iso8601(t)),void 0!==i&&(a.count=i),a=this.deepExtend(a,s),"filter"in a&&(a.filter=this.json(a.filter));const o=await this.privateGetOrder(a);return this.parseOrders(o,r,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.deepExtend({filter:{open:!0}},s))}async fetchClosedOrders(e,t,i,s={}){const r=await this.fetchOrders(e,t,i,s);return this.filterBy(r,"status","closed")}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={};void 0!==e&&(r=this.market(e),a.symbol=r.id),void 0!==t&&(a.startTime=this.iso8601(t)),void 0!==i&&(a.count=i),a=this.deepExtend(a,s),"filter"in a&&(a.filter=this.json(a.filter));const o=await this.privateGetExecutionTradeHistory(a);return this.parseTrades(o,r,t,i)}parseLedgerEntryType(e){return this.safeString({Withdrawal:"transaction",RealisedPNL:"margin",UnrealisedPNL:"margin",Deposit:"transaction",Transfer:"transfer",AffiliatePayout:"referral"},e,e)}parseLedgerEntry(e,t){const i=this.safeString(e,"transactID"),s=this.safeString(e,"account"),r=this.safeString(e,"tx"),a=this.parseLedgerEntryType(this.safeString(e,"transactType")),o=this.safeString(e,"currency"),n=this.safeCurrencyCode(o,t);let d=this.safeFloat(e,"amount");void 0!==d&&(d*=1e-8);let c=this.parse8601(this.safeString(e,"transactTime"));void 0===c&&(c=0);let h=this.safeFloat(e,"fee",0);void 0!==h&&(h*=1e-8);const l={cost:h,currency:n};let u=this.safeFloat(e,"walletBalance");void 0!==u&&(u*=1e-8);const f=this.sum(u,-d);let p=void 0;d<0?(p="out",d=Math.abs(d)):p="in";const m=this.parseTransactionStatus(this.safeString(e,"transactStatus"));return{id:i,info:e,timestamp:c,datetime:this.iso8601(c),direction:p,account:s,referenceId:r,referenceAccount:void 0,type:a,currency:n,amount:d,before:f,after:u,status:m,fee:l}}async fetchLedger(e,t,i,s={}){await this.loadMarkets();let r=void 0;void 0!==e&&(r=this.currency(e));const a={};void 0!==i&&(a.count=i);const o=await this.privateGetUserWalletHistory(this.extend(a,s));return this.parseLedger(o,r,t,i)}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const r={};void 0!==i&&(r.count=i);const a=await this.privateGetUserWalletHistory(this.extend(r,s)),o=this.filterByArray(a,"transactType",["Withdrawal","Deposit"],!1);let n=void 0;return void 0!==e&&(n=this.currency(e)),this.parseTransactions(o,n,t,i)}parseTransactionStatus(e){return this.safeString({Canceled:"canceled",Completed:"ok",Pending:"pending"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"transactID"),s=this.parse8601(this.safeString(e,"transactTime")),r=this.parse8601(this.safeString(e,"timestamp")),a=this.safeStringLower(e,"transactType");let o=void 0,n=void 0,d=void 0;"withdrawal"===a&&(o=this.safeString(e,"address"),n=this.safeString(e,"tx"),d=o);let c=this.safeInteger(e,"amount");void 0!==c&&(c=1e-8*Math.abs(c));let h=this.safeInteger(e,"fee");void 0!==h&&(h*=1e-8);const l={cost:h,currency:"BTC"};let u=this.safeString(e,"transactStatus");return void 0!==u&&(u=this.parseTransactionStatus(u)),{info:e,id:i,txid:void 0,timestamp:s,datetime:this.iso8601(s),addressFrom:n,address:o,addressTo:d,tagFrom:void 0,tag:void 0,tagTo:void 0,type:a,amount:c,currency:"BTC",status:u,updated:r,comment:void 0,fee:l}}async fetchTicker(e,t={}){if(await this.loadMarkets(),!this.market(e).active)throw new d(this.id+": symbol "+e+" is delisted");const i=await this.fetchTickers([e],t),s=this.safeValue(i,e);if(void 0===s)throw new d(this.id+" ticker symbol "+e+" not found");return s}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetInstrumentActiveAndIndices(t),s={};for(let r=0;r<i.length;r++){const e=this.parseTicker(i[r]),t=this.safeString(e,"symbol");void 0!==t&&(s[t]=e)}return s}parseTicker(e,t){let i=void 0;const s=this.safeString(e,"symbol");void 0!==(t=this.safeValue(this.markets_by_id,s,t))&&(i=t.symbol);const r=this.parse8601(this.safeString(e,"timestamp")),a=this.safeFloat(e,"prevPrice24h"),o=this.safeFloat(e,"lastPrice");let n=void 0,d=void 0;return void 0!==o&&void 0!==a&&(n=o-a,a>0&&(d=n/a*100)),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"highPrice"),low:this.safeFloat(e,"lowPrice"),bid:this.safeFloat(e,"bidPrice"),bidVolume:void 0,ask:this.safeFloat(e,"askPrice"),askVolume:void 0,vwap:this.safeFloat(e,"vwap"),open:a,close:o,last:o,previousClose:void 0,change:n,percentage:d,average:this.sum(a,o)/2,baseVolume:this.safeFloat(e,"homeNotional24h"),quoteVolume:this.safeFloat(e,"foreignNotional24h"),info:e}}parseOHLCV(e,t,i="1m",s,r){return[this.parse8601(this.safeString(e,"timestamp")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={symbol:a.id,binSize:this.timeframes[t],partial:!0};void 0!==s&&(o.count=s);const n=1e3*this.parseTimeframe(t),d=this.safeValue(this.options,"fetchOHLCVOpenTimestamp",!0);if(void 0!==i){let e=i;d&&(e=this.sum(e,n));const t=this.ymdhms(e);o.startTime=t}const c=await this.publicGetTradeBucketed(this.extend(o,r)),h=this.parseOHLCVs(c,a,t,i,s);if(d)for(let l=0;l<h.length;l++)h[l][0]=h[l][0]-n;return h}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"timestamp")),s=this.safeFloat(e,"price"),r=this.safeFloat2(e,"size","lastQty"),a=this.safeString(e,"trdMatchID"),o=this.safeString(e,"orderID"),n=this.safeStringLower(e,"side");let d=this.safeFloat(e,"execCost");void 0!==d&&(d=Math.abs(d)/1e8);let c=void 0;if("execComm"in e){let t=this.safeFloat(e,"execComm");t/=1e8;const i=this.safeString(e,"settlCurrency");c={cost:t,currency:this.safeCurrencyCode(i),rate:this.safeFloat(e,"commission")}}let h=void 0;void 0!==c&&(h=c.cost<0?"maker":"taker");let l=void 0;const u=this.safeString(e,"symbol");void 0!==u&&(l=u in this.markets_by_id?this.markets_by_id[u].symbol:u);const f=this.safeStringLower(e,"ordType");return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:l,id:a,order:o,type:f,takerOrMaker:h,side:n,price:s,cost:d,amount:r,fee:c}}parseOrderStatus(e){return this.safeString({New:"open",PartiallyFilled:"open",Filled:"closed",DoneForDay:"open",Canceled:"canceled",PendingCancel:"open",PendingNew:"open",Rejected:"rejected",Expired:"expired",Stopped:"open",Untriggered:"open",Triggered:"open"},e,e)}parseOrder(e,t){const i=this.parseOrderStatus(this.safeString(e,"ordStatus"));let s=void 0;if(void 0!==t)s=t.symbol;else{const i=this.safeString(e,"symbol");i in this.markets_by_id&&(s=(t=this.markets_by_id[i]).symbol)}const r=this.parse8601(this.safeString(e,"timestamp")),a=this.parse8601(this.safeString(e,"transactTime")),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"orderQty"),d=this.safeFloat(e,"cumQty",0);let c=void 0;void 0!==n&&void 0!==d&&(c=Math.max(n-d,0));const h=this.safeFloat(e,"avgPx");let l=void 0;void 0!==d&&(void 0!==h?l=h*d:void 0!==o&&(l=o*d));const u=this.safeString(e,"orderID"),f=this.safeStringLower(e,"ordType"),p=this.safeStringLower(e,"side");return{info:e,id:u,clientOrderId:this.safeString(e,"clOrdID"),timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:a,symbol:s,type:f,side:p,price:o,amount:n,cost:l,average:h,filled:d,remaining:c,status:i,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==t&&(a.startTime=this.iso8601(t)),void 0!==i&&(a.count=i);const o=await this.publicGetTrade(this.extend(a,s));return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o={symbol:this.marketId(e),side:this.capitalize(i),orderQty:s,ordType:this.capitalize(t)};void 0!==r&&(o.price=r);const n=await this.privatePostOrder(this.extend(o,a)),d=this.parseOrder(n),c=this.safeString(d,"id");return this.orders[c]=d,this.extend({info:n},d)}async editOrder(e,t,i,s,r,a,o={}){await this.loadMarkets();const n={orderID:e};void 0!==r&&(n.orderQty=r),void 0!==a&&(n.price=a);const d=await this.privatePutOrder(this.extend(n,o)),c=this.parseOrder(d);return this.orders[c.id]=c,this.extend({info:d},c)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s=this.safeValue(i,"clOrdID"),r={};void 0===s?r.orderID=e:r.clOrdID=s;const a=await this.privateDeleteOrder(this.extend(r,i));let o=a[0];const n=this.safeString(o,"error");if(void 0!==n&&n.indexOf("Unable to cancel order due to existing state")>=0)throw new u(this.id+" cancelOrder() failed: "+n);return o=this.parseOrder(o),this.orders[o.id]=o,this.extend({info:a},o)}isFiat(e){return"EUR"===e||"PLN"===e}async withdraw(e,t,i,s,r={}){if(this.checkAddress(i),await this.loadMarkets(),"BTC"!==e)throw new d(this.id+" supoprts BTC withdrawals only, other currencies coming soon...");const a={currency:"XBt",amount:t,address:i},o=await this.privatePostUserRequestWithdrawal(this.extend(a,r));return{info:o,id:o.transactID}}handleErrors(e,t,i,s,r,a,c,h,l){if(void 0!==c){if(429===e)throw new n(this.id+" "+a);if(e>=400){const t=this.safeValue(c,"error",{}),i=this.safeString(t,"message"),s=this.id+" "+a;if(this.throwExactlyMatchedException(this.exceptions.exact,i,s),this.throwBroadlyMatchedException(this.exceptions.broad,i,s),400===e)throw new o(s);throw new d(s)}}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="/api/"+this.version+"/"+e;if("GET"===i)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{const e=this.safeString(s,"_format");void 0!==e&&(o+="?"+this.urlencode({_format:e}),s=this.omit(s,"_format"))}const n=this.urls.api[t]+o;if(this.apiKey&&this.secret){let e=i+o,t=this.safeInteger(this.options,"api-expires");r={"Content-Type":"application/json","api-key":this.apiKey},t=this.sum(this.seconds(),t),t=t.toString(),e+=t,r["api-expires"]=t,"POST"!==i&&"PUT"!==i&&"DELETE"!==i||Object.keys(s).length&&(e+=a=this.json(s)),r["api-signature"]=this.hmac(this.encode(e),this.encode(this.secret))}return{url:n,method:i,body:a,headers:r}}}},YkuB:function(e){e.exports=JSON.parse('{"O_RDONLY":0,"O_WRONLY":1,"O_RDWR":2,"S_IFMT":61440,"S_IFREG":32768,"S_IFDIR":16384,"S_IFCHR":8192,"S_IFBLK":24576,"S_IFIFO":4096,"S_IFLNK":40960,"S_IFSOCK":49152,"O_CREAT":512,"O_EXCL":2048,"O_NOCTTY":131072,"O_TRUNC":1024,"O_APPEND":8,"O_DIRECTORY":1048576,"O_NOFOLLOW":256,"O_SYNC":128,"O_SYMLINK":2097152,"O_NONBLOCK":4,"S_IRWXU":448,"S_IRUSR":256,"S_IWUSR":128,"S_IXUSR":64,"S_IRWXG":56,"S_IRGRP":32,"S_IWGRP":16,"S_IXGRP":8,"S_IRWXO":7,"S_IROTH":4,"S_IWOTH":2,"S_IXOTH":1,"E2BIG":7,"EACCES":13,"EADDRINUSE":48,"EADDRNOTAVAIL":49,"EAFNOSUPPORT":47,"EAGAIN":35,"EALREADY":37,"EBADF":9,"EBADMSG":94,"EBUSY":16,"ECANCELED":89,"ECHILD":10,"ECONNABORTED":53,"ECONNREFUSED":61,"ECONNRESET":54,"EDEADLK":11,"EDESTADDRREQ":39,"EDOM":33,"EDQUOT":69,"EEXIST":17,"EFAULT":14,"EFBIG":27,"EHOSTUNREACH":65,"EIDRM":90,"EILSEQ":92,"EINPROGRESS":36,"EINTR":4,"EINVAL":22,"EIO":5,"EISCONN":56,"EISDIR":21,"ELOOP":62,"EMFILE":24,"EMLINK":31,"EMSGSIZE":40,"EMULTIHOP":95,"ENAMETOOLONG":63,"ENETDOWN":50,"ENETRESET":52,"ENETUNREACH":51,"ENFILE":23,"ENOBUFS":55,"ENODATA":96,"ENODEV":19,"ENOENT":2,"ENOEXEC":8,"ENOLCK":77,"ENOLINK":97,"ENOMEM":12,"ENOMSG":91,"ENOPROTOOPT":42,"ENOSPC":28,"ENOSR":98,"ENOSTR":99,"ENOSYS":78,"ENOTCONN":57,"ENOTDIR":20,"ENOTEMPTY":66,"ENOTSOCK":38,"ENOTSUP":45,"ENOTTY":25,"ENXIO":6,"EOPNOTSUPP":102,"EOVERFLOW":84,"EPERM":1,"EPIPE":32,"EPROTO":100,"EPROTONOSUPPORT":43,"EPROTOTYPE":41,"ERANGE":34,"EROFS":30,"ESPIPE":29,"ESRCH":3,"ESTALE":70,"ETIME":101,"ETIMEDOUT":60,"ETXTBSY":26,"EWOULDBLOCK":35,"EXDEV":18,"SIGHUP":1,"SIGINT":2,"SIGQUIT":3,"SIGILL":4,"SIGTRAP":5,"SIGABRT":6,"SIGIOT":6,"SIGBUS":10,"SIGFPE":8,"SIGKILL":9,"SIGUSR1":30,"SIGSEGV":11,"SIGUSR2":31,"SIGPIPE":13,"SIGALRM":14,"SIGTERM":15,"SIGCHLD":20,"SIGCONT":19,"SIGSTOP":17,"SIGTSTP":18,"SIGTTIN":21,"SIGTTOU":22,"SIGURG":16,"SIGXCPU":24,"SIGXFSZ":25,"SIGVTALRM":26,"SIGPROF":27,"SIGWINCH":28,"SIGIO":23,"SIGSYS":12,"SSL_OP_ALL":2147486719,"SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION":262144,"SSL_OP_CIPHER_SERVER_PREFERENCE":4194304,"SSL_OP_CISCO_ANYCONNECT":32768,"SSL_OP_COOKIE_EXCHANGE":8192,"SSL_OP_CRYPTOPRO_TLSEXT_BUG":2147483648,"SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS":2048,"SSL_OP_EPHEMERAL_RSA":0,"SSL_OP_LEGACY_SERVER_CONNECT":4,"SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER":32,"SSL_OP_MICROSOFT_SESS_ID_BUG":1,"SSL_OP_MSIE_SSLV2_RSA_PADDING":0,"SSL_OP_NETSCAPE_CA_DN_BUG":536870912,"SSL_OP_NETSCAPE_CHALLENGE_BUG":2,"SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG":1073741824,"SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG":8,"SSL_OP_NO_COMPRESSION":131072,"SSL_OP_NO_QUERY_MTU":4096,"SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION":65536,"SSL_OP_NO_SSLv2":16777216,"SSL_OP_NO_SSLv3":33554432,"SSL_OP_NO_TICKET":16384,"SSL_OP_NO_TLSv1":67108864,"SSL_OP_NO_TLSv1_1":268435456,"SSL_OP_NO_TLSv1_2":134217728,"SSL_OP_PKCS1_CHECK_1":0,"SSL_OP_PKCS1_CHECK_2":0,"SSL_OP_SINGLE_DH_USE":1048576,"SSL_OP_SINGLE_ECDH_USE":524288,"SSL_OP_SSLEAY_080_CLIENT_DH_BUG":128,"SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG":0,"SSL_OP_TLS_BLOCK_PADDING_BUG":512,"SSL_OP_TLS_D5_BUG":256,"SSL_OP_TLS_ROLLBACK_BUG":8388608,"ENGINE_METHOD_DSA":2,"ENGINE_METHOD_DH":4,"ENGINE_METHOD_RAND":8,"ENGINE_METHOD_ECDH":16,"ENGINE_METHOD_ECDSA":32,"ENGINE_METHOD_CIPHERS":64,"ENGINE_METHOD_DIGESTS":128,"ENGINE_METHOD_STORE":256,"ENGINE_METHOD_PKEY_METHS":512,"ENGINE_METHOD_PKEY_ASN1_METHS":1024,"ENGINE_METHOD_ALL":65535,"ENGINE_METHOD_NONE":0,"DH_CHECK_P_NOT_SAFE_PRIME":2,"DH_CHECK_P_NOT_PRIME":1,"DH_UNABLE_TO_CHECK_GENERATOR":4,"DH_NOT_SUITABLE_GENERATOR":8,"NPN_ENABLED":1,"RSA_PKCS1_PADDING":1,"RSA_SSLV23_PADDING":2,"RSA_NO_PADDING":3,"RSA_PKCS1_OAEP_PADDING":4,"RSA_X931_PADDING":5,"RSA_PKCS1_PSS_PADDING":6,"POINT_CONVERSION_COMPRESSED":2,"POINT_CONVERSION_UNCOMPRESSED":4,"POINT_CONVERSION_HYBRID":6,"F_OK":0,"R_OK":4,"W_OK":2,"X_OK":1,"UV_UDP_REUSEADDR":4}')},YrLq:function(e,t){e.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128}},Yrgj:function(e,t,i){"use strict";var s=i("pRMk").Buffer,r=i("+oaW"),a=i("8kJ5"),o=i("6MVH").ec,n=i("5EA2"),d=new o("secp256k1"),c=d.curve;function h(e){var t=e[0];switch(t){case 2:case 3:return 33!==e.length?null:function(e,t){var i=new a(t);if(i.cmp(c.p)>=0)return null;var s=(i=i.toRed(c.red)).redSqr().redIMul(i).redIAdd(c.b).redSqrt();return 3===e!==s.isOdd()&&(s=s.redNeg()),d.keyPair({pub:{x:i,y:s}})}(t,e.slice(1,33));case 4:case 6:case 7:return 65!==e.length?null:function(e,t,i){var s=new a(t),r=new a(i);if(s.cmp(c.p)>=0||r.cmp(c.p)>=0)return null;if(s=s.toRed(c.red),r=r.toRed(c.red),(6===e||7===e)&&r.isOdd()!==(7===e))return null;var o=s.redSqr().redIMul(s);return r.redSqr().redISub(o.redIAdd(c.b)).isZero()?d.keyPair({pub:{x:s,y:r}}):null}(t,e.slice(1,33),e.slice(33,65));default:return null}}t.privateKeyVerify=function(e){var t=new a(e);return t.cmp(c.n)<0&&!t.isZero()},t.privateKeyExport=function(e,t){var i=new a(e);if(i.cmp(c.n)>=0||i.isZero())throw new Error(n.EC_PRIVATE_KEY_EXPORT_DER_FAIL);return s.from(d.keyFromPrivate(e).getPublic(t,!0))},t.privateKeyNegate=function(e){var t=new a(e);return t.isZero()?s.alloc(32):c.n.sub(t).umod(c.n).toArrayLike(s,"be",32)},t.privateKeyModInverse=function(e){var t=new a(e);if(t.cmp(c.n)>=0||t.isZero())throw new Error(n.EC_PRIVATE_KEY_RANGE_INVALID);return t.invm(c.n).toArrayLike(s,"be",32)},t.privateKeyTweakAdd=function(e,t){var i=new a(t);if(i.cmp(c.n)>=0)throw new Error(n.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);if(i.iadd(new a(e)),i.cmp(c.n)>=0&&i.isub(c.n),i.isZero())throw new Error(n.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);return i.toArrayLike(s,"be",32)},t.privateKeyTweakMul=function(e,t){var i=new a(t);if(i.cmp(c.n)>=0||i.isZero())throw new Error(n.EC_PRIVATE_KEY_TWEAK_MUL_FAIL);return i.imul(new a(e)),i.cmp(c.n)&&(i=i.umod(c.n)),i.toArrayLike(s,"be",32)},t.publicKeyCreate=function(e,t){var i=new a(e);if(i.cmp(c.n)>=0||i.isZero())throw new Error(n.EC_PUBLIC_KEY_CREATE_FAIL);return s.from(d.keyFromPrivate(e).getPublic(t,!0))},t.publicKeyConvert=function(e,t){var i=h(e);if(null===i)throw new Error(n.EC_PUBLIC_KEY_PARSE_FAIL);return s.from(i.getPublic(t,!0))},t.publicKeyVerify=function(e){return null!==h(e)},t.publicKeyTweakAdd=function(e,t,i){var r=h(e);if(null===r)throw new Error(n.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new a(t)).cmp(c.n)>=0)throw new Error(n.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);var o=c.g.mul(t).add(r.pub);if(o.isInfinity())throw new Error(n.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);return s.from(o.encode(!0,i))},t.publicKeyTweakMul=function(e,t,i){var r=h(e);if(null===r)throw new Error(n.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new a(t)).cmp(c.n)>=0||t.isZero())throw new Error(n.EC_PUBLIC_KEY_TWEAK_MUL_FAIL);return s.from(r.pub.mul(t).encode(!0,i))},t.publicKeyCombine=function(e,t){for(var i=new Array(e.length),r=0;r<e.length;++r)if(i[r]=h(e[r]),null===i[r])throw new Error(n.EC_PUBLIC_KEY_PARSE_FAIL);for(var a=i[0].pub,o=1;o<i.length;++o)a=a.add(i[o].pub);if(a.isInfinity())throw new Error(n.EC_PUBLIC_KEY_COMBINE_FAIL);return s.from(a.encode(!0,t))},t.signatureNormalize=function(e){var t=new a(e.slice(0,32)),i=new a(e.slice(32,64));if(t.cmp(c.n)>=0||i.cmp(c.n)>=0)throw new Error(n.ECDSA_SIGNATURE_PARSE_FAIL);var r=s.from(e);return 1===i.cmp(d.nh)&&c.n.sub(i).toArrayLike(s,"be",32).copy(r,32),r},t.signatureExport=function(e){var t=e.slice(0,32),i=e.slice(32,64);if(new a(t).cmp(c.n)>=0||new a(i).cmp(c.n)>=0)throw new Error(n.ECDSA_SIGNATURE_PARSE_FAIL);return{r:t,s:i}},t.signatureImport=function(e){var t=new a(e.r);t.cmp(c.n)>=0&&(t=new a(0));var i=new a(e.s);return i.cmp(c.n)>=0&&(i=new a(0)),s.concat([t.toArrayLike(s,"be",32),i.toArrayLike(s,"be",32)])},t.sign=function(e,t,i,r){if("function"===typeof i){var o=i;i=function(i){var d=o(e,t,null,r,i);if(!s.isBuffer(d)||32!==d.length)throw new Error(n.ECDSA_SIGN_FAIL);return new a(d)}}var h=new a(t);if(h.cmp(c.n)>=0||h.isZero())throw new Error(n.ECDSA_SIGN_FAIL);var l=d.sign(e,t,{canonical:!0,k:i,pers:r});return{signature:s.concat([l.r.toArrayLike(s,"be",32),l.s.toArrayLike(s,"be",32)]),recovery:l.recoveryParam}},t.verify=function(e,t,i){var s={r:t.slice(0,32),s:t.slice(32,64)},r=new a(s.r),o=new a(s.s);if(r.cmp(c.n)>=0||o.cmp(c.n)>=0)throw new Error(n.ECDSA_SIGNATURE_PARSE_FAIL);if(1===o.cmp(d.nh)||r.isZero()||o.isZero())return!1;var l=h(i);if(null===l)throw new Error(n.EC_PUBLIC_KEY_PARSE_FAIL);return d.verify(e,s,{x:l.pub.x,y:l.pub.y})},t.recover=function(e,t,i,r){var o={r:t.slice(0,32),s:t.slice(32,64)},h=new a(o.r),l=new a(o.s);if(h.cmp(c.n)>=0||l.cmp(c.n)>=0)throw new Error(n.ECDSA_SIGNATURE_PARSE_FAIL);try{if(h.isZero()||l.isZero())throw new Error;var u=d.recoverPubKey(e,o,i);return s.from(u.encode(!0,r))}catch(f){throw new Error(n.ECDSA_RECOVER_FAIL)}},t.ecdh=function(e,i){var s=t.ecdhUnsafe(e,i,!0);return r("sha256").update(s).digest()},t.ecdhUnsafe=function(e,t,i){var r=h(e);if(null===r)throw new Error(n.EC_PUBLIC_KEY_PARSE_FAIL);var o=new a(t);if(o.cmp(c.n)>=0||o.isZero())throw new Error(n.ECDH_FAIL);return s.from(r.pub.mul(o).encode(!0,i))}},YuN0:function(e,t,i){"use strict";const s=Number.isFinite,r=Number.isInteger,a=Array.isArray,o=e=>void 0!==e&&null!==e,n=e=>"string"===typeof e,d=e=>null!==e&&"object"===typeof e,c=e=>o(e)&&e.toString||s(e),h=(e,t)=>d(e)?e[t]:void 0,l=(e,t,i)=>d(e)?t in e&&null!==e[t]?e[t]:e[i]:void 0,u=e=>s(e)||n(e)?parseFloat(e):NaN,f=e=>s(e)||n(e)?parseInt(e,10):NaN;e.exports={isNumber:s,isInteger:r,isArray:a,isObject:d,isString:n,isStringCoercible:c,isDictionary:e=>d(e)&&!a(e),hasProps:o,prop:h,asFloat:u,asInteger:f,safeFloat:(e,t,i,r=u(h(e,t)))=>s(r)?r:i,safeInteger:(e,t,i,r=f(h(e,t)))=>s(r)?r:i,safeIntegerProduct:(e,t,i,r,a=f(h(e,t)))=>s(a)?parseInt(a*i):r,safeTimestamp:(e,t,i,r=u(h(e,t)))=>s(r)?parseInt(1e3*r):i,safeValue:(e,t,i,s=h(e,t))=>o(s)?s:i,safeString:(e,t,i,s=h(e,t))=>c(s)?String(s):i,safeStringLower:(e,t,i,s=h(e,t))=>c(s)?String(s).toLowerCase():i,safeStringUpper:(e,t,i,s=h(e,t))=>c(s)?String(s).toUpperCase():i,safeFloat2:(e,t,i,r,a=u(l(e,t,i)))=>s(a)?a:r,safeInteger2:(e,t,i,r,a=f(l(e,t,i)))=>s(a)?a:r,safeIntegerProduct2:(e,t,i,r,a,o=f(l(e,t,i)))=>s(o)?parseInt(o*r):a,safeTimestamp2:(e,t,i,r,a=u(l(e,t,i)))=>s(a)?parseInt(1e3*a):r,safeValue2:(e,t,i,s,r=l(e,t,i))=>o(r)?r:s,safeString2:(e,t,i,s,r=l(e,t,i))=>c(r)?String(r):s,safeStringLower2:(e,t,i,s,r=l(e,t,i))=>c(r)?String(r).toLowerCase():s,safeStringUpper2:(e,t,i,s,r=l(e,t,i))=>c(r)?String(r).toUpperCase():s}},ZDdG:function(e,t,i){"use strict";const{isObject:s,isNumber:r,isDictionary:a,isArray:o}=i("YuN0"),n=Object.keys,d=e=>o(e)?e:Object.values(e),c=e=>new Set(d(e)),h=(...e)=>Object.assign({},...e),l=e=>o(e)?Array.from(e):h(e);e.exports={keys:n,values:d,extend:h,clone:l,index:c,ordered:e=>e,unique:e=>Array.from(c(e)),arrayConcat:(e,t)=>e.concat(t),inArray:(e,t)=>t.includes(e),toArray:e=>Object.values(e),isEmpty:e=>!e||(Array.isArray(e)?e:Object.keys(e)).length<1,keysort(e,t={}){for(const i of n(e).sort())t[i]=e[i];return t},indexBy(e,t,i={}){for(const s of d(e))t in s&&(i[s[t]]=s);return i},groupBy(e,t,i={}){for(const s of d(e))if(t in s){const e=s[t];i[e]=i[e]||[],i[e].push(s)}return i},filterBy(e,t,i,s=[]){for(const r of d(e))r[t]===i&&s.push(r);return s},sortBy:(e,t,i=!1,s=(i?-1:1))=>e.sort((e,i)=>e[t]<i[t]?-s:e[t]>i[t]?s:0),flatten:function e(t,i=[]){for(const s of t)o(s)?e(s,i):i.push(s);return i},pluck:(e,t)=>d(e).filter(e=>t in e).map(e=>e[t]),omit(e,...t){if(!Array.isArray(e)){const i=l(e);for(const e of t)if(o(e))for(const t of e)delete i[t];else delete i[e];return i}return e},sum(...e){const t=e.filter(r);return t.length>0?t.reduce((e,t)=>e+t,0):void 0},deepExtend:function e(...t){let i=void 0;for(const r of t)if(a(r)){s(i)||(i={});for(const t in r)i[t]=e(i[t],r[t])}else i=r;return i}}},ZERR:function(e,t,i){"use strict";(function(t){var s=i("x9yg");function r(e,t){if(e===t)return 0;for(var i=e.length,s=t.length,r=0,a=Math.min(i,s);r<a;++r)if(e[r]!==t[r]){i=e[r],s=t[r];break}return i<s?-1:s<i?1:0}function a(e){return t.Buffer&&"function"===typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var o=i("4+3C"),n=Object.prototype.hasOwnProperty,d=Array.prototype.slice,c="foo"===function(){}.name;function h(e){return Object.prototype.toString.call(e)}function l(e){return!a(e)&&("function"===typeof t.ArrayBuffer&&("function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var u=e.exports=v,f=/\s*function\s+([^\(\s]*)\s*/;function p(e){if(o.isFunction(e)){if(c)return e.name;var t=e.toString().match(f);return t&&t[1]}}function m(e,t){return"string"===typeof e?e.length<t?e:e.slice(0,t):e}function y(e){if(c||!o.isFunction(e))return o.inspect(e);var t=p(e);return"[Function"+(t?": "+t:"")+"]"}function b(e,t,i,s,r){throw new u.AssertionError({message:i,actual:e,expected:t,operator:s,stackStartFunction:r})}function v(e,t){e||b(e,!0,t,"==",u.ok)}function g(e,t,i,s){if(e===t)return!0;if(a(e)&&a(t))return 0===r(e,t);if(o.isDate(e)&&o.isDate(t))return e.getTime()===t.getTime();if(o.isRegExp(e)&&o.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"===typeof e||null!==t&&"object"===typeof t){if(l(e)&&l(t)&&h(e)===h(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(a(e)!==a(t))return!1;var n=(s=s||{actual:[],expected:[]}).actual.indexOf(e);return-1!==n&&n===s.expected.indexOf(t)||(s.actual.push(e),s.expected.push(t),function(e,t,i,s){if(null===e||void 0===e||null===t||void 0===t)return!1;if(o.isPrimitive(e)||o.isPrimitive(t))return e===t;if(i&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var r=w(e),a=w(t);if(r&&!a||!r&&a)return!1;if(r)return e=d.call(e),t=d.call(t),g(e,t,i);var n,c,h=T(e),l=T(t);if(h.length!==l.length)return!1;for(h.sort(),l.sort(),c=h.length-1;c>=0;c--)if(h[c]!==l[c])return!1;for(c=h.length-1;c>=0;c--)if(n=h[c],!g(e[n],t[n],i,s))return!1;return!0}(e,t,i,s))}return i?e===t:e==t}function w(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function k(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(i){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function _(e,t,i,s){var r;if("function"!==typeof t)throw new TypeError('"block" argument must be a function');"string"===typeof i&&(s=i,i=null),r=function(e){var t;try{e()}catch(i){t=i}return t}(t),s=(i&&i.name?" ("+i.name+").":".")+(s?" "+s:"."),e&&!r&&b(r,i,"Missing expected exception"+s);var a="string"===typeof s,n=!e&&r&&!i;if((!e&&o.isError(r)&&a&&k(r,i)||n)&&b(r,i,"Got unwanted exception"+s),e&&r&&i&&!k(r,i)||!e&&r)throw r}u.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return m(y(e.actual),128)+" "+e.operator+" "+m(y(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||b;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var i=new Error;if(i.stack){var s=i.stack,r=p(t),a=s.indexOf("\n"+r);if(a>=0){var o=s.indexOf("\n",a+1);s=s.substring(o+1)}this.stack=s}}},o.inherits(u.AssertionError,Error),u.fail=b,u.ok=v,u.equal=function(e,t,i){e!=t&&b(e,t,i,"==",u.equal)},u.notEqual=function(e,t,i){e==t&&b(e,t,i,"!=",u.notEqual)},u.deepEqual=function(e,t,i){g(e,t,!1)||b(e,t,i,"deepEqual",u.deepEqual)},u.deepStrictEqual=function(e,t,i){g(e,t,!0)||b(e,t,i,"deepStrictEqual",u.deepStrictEqual)},u.notDeepEqual=function(e,t,i){g(e,t,!1)&&b(e,t,i,"notDeepEqual",u.notDeepEqual)},u.notDeepStrictEqual=function e(t,i,s){g(t,i,!0)&&b(t,i,s,"notDeepStrictEqual",e)},u.strictEqual=function(e,t,i){e!==t&&b(e,t,i,"===",u.strictEqual)},u.notStrictEqual=function(e,t,i){e===t&&b(e,t,i,"!==",u.notStrictEqual)},u.throws=function(e,t,i){_(!0,e,t,i)},u.doesNotThrow=function(e,t,i){_(!1,e,t,i)},u.ifError=function(e){if(e)throw e},u.strict=s((function e(t,i){t||b(t,!0,i,"==",e)}),u,{equal:u.strictEqual,deepEqual:u.deepStrictEqual,notEqual:u.notStrictEqual,notDeepEqual:u.notDeepStrictEqual}),u.strict.strict=u.strict;var T=Object.keys||function(e){var t=[];for(var i in e)n.call(e,i)&&t.push(i);return t}}).call(this,i("pCvA"))},"a2z/":function(e,t,i){"use strict";const s=i("pRMk").Buffer,r=i("ruwT");function a(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}a.prototype.initialize=function(e,t){for(let i=0;i<50;++i)this.state[i]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1},a.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<this.count%4*8,this.count+=1,this.count===this.blockSize&&(r.p1600(this.state),this.count=0)},a.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<this.count%4*8,0!==(128&e)&&this.count===this.blockSize-1&&r.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<(this.blockSize-1)%4*8,r.p1600(this.state),this.count=0,this.squeezing=!0},a.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);const t=s.alloc(e);for(var i=0;i<e;++i)t[i]=this.state[~~(this.count/4)]>>>this.count%4*8&255,this.count+=1,this.count===this.blockSize&&(r.p1600(this.state),this.count=0);return t},a.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing},e.exports=a},a4pT:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ArgumentsRequired:a,AuthenticationError:o,InsufficientFunds:n,InvalidOrder:d,OrderNotFound:c}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bcex",name:"BCEX",countries:["CN","CA"],version:"1",has:{fetchBalance:!0,fetchMarkets:!0,createOrder:!0,cancelOrder:!0,fetchTicker:!0,fetchTickers:!1,fetchTrades:!0,fetchOrder:!0,fetchOrders:!0,fetchClosedOrders:"emulated",fetchOpenOrders:!0,fetchTradingLimits:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/77231516-851c6900-6bac-11ea-8fd6-ee5c23eddbd4.jpg",api:"https://www.bcex.top",www:"https://www.bcex.top",doc:"https://github.com/BCEX-TECHNOLOGY-LIMITED/API_Docs/wiki/Interface",fees:"https://bcex.udesk.cn/hc/articles/57085",referral:"https://www.bcex.top/register?invite_code=758978&lang=en"},status:{status:"error",updated:void 0,eta:void 0,url:void 0},api:{public:{get:["Api_Market/getPriceList","Api_Order/ticker","Api_Order/depth","Api_Market/getCoinTrade","Api_Order/marketOrder"],post:["Api_Market/getPriceList","Api_Order/ticker","Api_Order/depth","Api_Market/getCoinTrade","Api_Order/marketOrder"]},private:{post:["Api_Order/cancel","Api_Order/coinTrust","Api_Order/orderList","Api_Order/orderInfo","Api_Order/tradeList","Api_Order/trustList","Api_User/userBalance"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.002},funding:{tierBased:!1,percentage:!1,withdraw:{ckusd:0,other:5e-4},deposit:{}}},exceptions:{"\u8be5\u5e01\u4e0d\u5b58\u5728,\u975e\u6cd5\u64cd\u4f5c":r,"\u516c\u94a5\u4e0d\u5408\u6cd5":o,"\u60a8\u7684\u53ef\u7528\u4f59\u989d\u4e0d\u8db3":n,"\u60a8\u7684btc\u4e0d\u8db3":n,"\u53c2\u6570\u975e\u6cd5":d,"\u8ba2\u5355\u4fe1\u606f\u4e0d\u5b58\u5728":c},options:{limits:{"AFC/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:6,max:12e4}}},"AFC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:6,max:12e4}}},"AFT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:15,max:3e5}}},"AICC/CNET":{precision:{amount:2,price:2},limits:{amount:{min:5,max:5e4}}},"AIDOC/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:5,max:1e5}}},"AISI/ETH":{precision:{amount:4,price:2},limits:{amount:{min:.001,max:500}}},"AIT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:20,max:4e5}}},"ANS/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.1,max:500}}},"ANS/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.1,max:1e3}}},"ARC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:60,max:6e5}}},"AXF/CNET":{precision:{amount:2,price:4},limits:{amount:{min:100,max:1e6}}},"BASH/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:250,max:3e6}}},"BATT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:60,max:15e5}}},"BCD/BTC":{precision:{amount:2,price:8},limits:{amount:{min:.3,max:7e3}}},"BHPC/BTC":{precision:{amount:2,price:8},limits:{amount:{min:2,max:7e4}}},"BHPC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:2,max:6e4}}},"BOPO/BTC":{precision:{amount:2,price:8},limits:{amount:{min:100,max:2e6}}},"BOPO/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:100,max:1e7}}},"BTC/CKUSD":{precision:{amount:4,price:2},limits:{amount:{min:.001,max:10}}},"BTC/CNET":{precision:{amount:4,price:2},limits:{amount:{min:5e-4,max:5}}},"BTC/USDT":{precision:{amount:4,price:2},limits:{amount:{min:2e-4,max:4}}},"BTE/CNET":{precision:{amount:2,price:4},limits:{amount:{min:25,max:25e4}}},"BU/ETH":{precision:{amount:2,price:8},limits:{amount:{min:20,max:4e5}}},"CIC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:3e3,max:3e7}}},"CIT/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:4,max:4e4}}},"CIT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:4,max:4e4}}},"CMT/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:5,max:25e5}}},"CNET/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:12,max:12e4}}},"CNMC/BTC":{precision:{amount:2,price:8},limits:{amount:{min:4,max:5e4}}},"CTC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:5,max:55e4}}},"CZR/ETH":{precision:{amount:2,price:8},limits:{amount:{min:12,max:5e5}}},"DCON/ETH":{precision:{amount:2,price:8},limits:{amount:{min:8,max:3e5}}},"DCT/BTC":{precision:{amount:4,price:8},limits:{amount:{min:2,max:4e4}}},"DCT/CKUSD":{precision:{amount:2,price:3},limits:{amount:{min:2,max:2e3}}},"DOGE/BTC":{precision:{amount:4,price:8},limits:{amount:{min:3e3,max:14e6}}},"DOGE/CKUSD":{precision:{amount:2,price:6},limits:{amount:{min:500,max:2e6}}},"DRCT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:16,max:19e4}}},"ELA/BTC":{precision:{amount:2,price:8},limits:{amount:{min:.02,max:500}}},"ELF/BTC":{precision:{amount:2,price:8},limits:{amount:{min:.1,max:1e5}}},"ELF/CKUSD":{precision:{amount:2,price:3},limits:{amount:{min:.01,max:1e5}}},"EOS/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.5,max:5e3}}},"EOS/CNET":{precision:{amount:2,price:2},limits:{amount:{min:2.5,max:3e4}}},"EOS/ETH":{precision:{amount:2,price:8},limits:{amount:{min:.18,max:1800}}},"ETC/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.2,max:2500}}},"ETC/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.2,max:2500}}},"ETF/ETH":{precision:{amount:2,price:8},limits:{amount:{min:7,max:15e4}}},"ETH/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.015,max:100}}},"ETH/CKUSD":{precision:{amount:4,price:4},limits:{amount:{min:.005,max:100}}},"ETH/USDT":{precision:{amount:4,price:2},limits:{amount:{min:.005,max:100}}},"FCT/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.24,max:1e3}}},"FCT/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.24,max:1e3}}},"GAME/CNET":{precision:{amount:2,price:2},limits:{amount:{min:1,max:1e4}}},"GOOC/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:200,max:2e6}}},"GP/CNET":{precision:{amount:2,price:4},limits:{amount:{min:600,max:6e6}}},"HSC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:1e3,max:2e7}}},"IFISH/ETH":{precision:{amount:2,price:8},limits:{amount:{min:300,max:8e6}}},"IIC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:50,max:4e6}}},"IMOS/ETH":{precision:{amount:2,price:8},limits:{amount:{min:15,max:3e5}}},"JC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:300,max:3e6}}},"LBTC/BTC":{precision:{amount:2,price:8},limits:{amount:{min:.1,max:3e3}}},"LEC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:500,max:5e6}}},"LKY/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:10,max:7e4}}},"LKY/ETH":{precision:{amount:2,price:8},limits:{amount:{min:10,max:1e5}}},"LMC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:25,max:25e4}}},"LSK/CNET":{precision:{amount:2,price:2},limits:{amount:{min:.3,max:3e3}}},"LTC/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.01,max:500}}},"LTC/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.01,max:500}}},"LTC/USDT":{precision:{amount:4,price:2},limits:{amount:{min:.02,max:450}}},"MC/CNET":{precision:{amount:2,price:6},limits:{amount:{min:1e4,max:1e8}}},"MCC/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:30,max:35e4}}},"MOC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:25,max:6e5}}},"MRYC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:300,max:3e6}}},"MT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:200,max:6e6}}},"MXI/CNET":{precision:{amount:2,price:6},limits:{amount:{min:5e3,max:6e7}}},"NAI/ETH":{precision:{amount:2,price:8},limits:{amount:{min:10,max:1e5}}},"NAS/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.2,max:15e3}}},"NAS/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.5,max:5e3}}},"NEWOS/ETH":{precision:{amount:2,price:8},limits:{amount:{min:65,max:7e5}}},"NKN/ETH":{precision:{amount:2,price:8},limits:{amount:{min:3,max:35e4}}},"NTK/ETH":{precision:{amount:2,price:8},limits:{amount:{min:2,max:3e4}}},"ONT/CKUSD":{precision:{amount:2,price:3},limits:{amount:{min:.2,max:2e3}}},"ONT/ETH":{precision:{amount:3,price:8},limits:{amount:{min:.01,max:1e3}}},"PNT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:80,max:8e5}}},"PST/ETH":{precision:{amount:2,price:8},limits:{amount:{min:5,max:1e5}}},"PTT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:450,max:1e7}}},"QTUM/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.4,max:2800}}},"QTUM/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.1,max:1e3}}},"RATING/ETH":{precision:{amount:2,price:8},limits:{amount:{min:500,max:1e7}}},"RHC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:1e3,max:1e7}}},"SDA/ETH":{precision:{amount:2,price:8},limits:{amount:{min:20,max:5e5}}},"SDD/CKUSD":{precision:{amount:2,price:3},limits:{amount:{min:10,max:1e5}}},"SHC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:250,max:25e5}}},"SHE/ETH":{precision:{amount:2,price:8},limits:{amount:{min:100,max:5e6}}},"SMC/CNET":{precision:{amount:2,price:6},limits:{amount:{min:1e3,max:1e7}}},"SOP/ETH":{precision:{amount:2,price:8},limits:{amount:{min:50,max:1e6}}},"TAC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:35,max:8e5}}},"TIP/ETH":{precision:{amount:2,price:8},limits:{amount:{min:7,max:2e5}}},"TKT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:40,max:4e5}}},"TLC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:500,max:1e7}}},"TNC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:10,max:11e4}}},"TUB/ETH":{precision:{amount:2,price:8},limits:{amount:{min:200,max:8e6}}},"UC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:100,max:3e6}}},"UDB/CNET":{precision:{amount:2,price:6},limits:{amount:{min:2e3,max:4e7}}},"UIC/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:5,max:15e4}}},"VAAC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:10,max:25e4}}},"VPN/CNET":{precision:{amount:2,price:4},limits:{amount:{min:200,max:2e6}}},"VSC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:30,max:65e4}}},"WAVES/CKUSD":{precision:{amount:2,price:3},limits:{amount:{min:.15,max:1500}}},"WDNA/ETH":{precision:{amount:2,price:8},limits:{amount:{min:100,max:25e4}}},"WIC/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:3,max:3e4}}},"XAS/CNET":{precision:{amount:2,price:2},limits:{amount:{min:2.5,max:25e3}}},"XLM/BTC":{precision:{amount:4,price:8},limits:{amount:{min:10,max:3e5}}},"XLM/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:1,max:3e5}}},"XLM/USDT":{precision:{amount:2,price:4},limits:{amount:{min:5,max:15e4}}},"XRP/BTC":{precision:{amount:4,price:8},limits:{amount:{min:24,max:1e5}}},"XRP/CKUSD":{precision:{amount:2,price:3},limits:{amount:{min:5,max:5e4}}},"YBCT/BTC":{precision:{amount:4,price:8},limits:{amount:{min:15,max:2e5}}},"YBCT/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:10,max:2e5}}},"YBY/CNET":{precision:{amount:2,price:6},limits:{amount:{min:25e3,max:25e7}}},"ZEC/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.02,max:100}}},"ZEC/CKUSD":{precision:{amount:4,price:2},limits:{amount:{min:.02,max:100}}}}}})}async fetchTradingLimits(e,t={}){await this.loadMarkets(),void 0===e&&(e=this.symbols);const i={};for(let s=0;s<e.length;s++){const r=e[s];i[r]=await this.fetchTradingLimitsById(this.marketId(r),t)}return i}async fetchTradingLimitsById(e,t={}){const i={symbol:e},s=await this.publicPostApiOrderTicker(this.extend(i,t));return this.parseTradingLimits(this.safeValue(s,"data",{}))}parseTradingLimits(e,t,i={}){return{info:e,precision:{amount:this.safeInteger(e,"number_float"),price:this.safeInteger(e,"price_float")},limits:{amount:{min:this.safeFloat(e,"min_trade"),max:this.safeFloat(e,"max_trade")}}}}async fetchMarkets(e={}){const t=await this.publicGetApiMarketGetPriceList(e),i=[],s=Object.keys(t);for(let r=0;r<s.length;r++){const e=t[s[r]];for(let t=0;t<e.length;t++){const s=e[t],r=this.safeString(s,"coin_from"),a=this.safeString(s,"coin_to");let o=r.toUpperCase(),n=a.toUpperCase();o=this.safeCurrencyCode(o),n=this.safeCurrencyCode(n);const d=r+"2"+a,c=o+"/"+n,h=!0,l=this.safeValue(this.options.limits,c,{});i.push(this.extend({id:d,symbol:c,base:o,quote:n,baseId:r,quoteId:a,active:h,precision:{amount:void 0,price:void 0},limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},info:s},l))}}return i}parseTrade(e,t){let i=void 0;void 0!==t&&(i=t.symbol);const s=this.safeTimestamp2(e,"date","created"),r=this.safeString(e,"tid"),a=this.safeString(e,"order_id"),o=this.safeFloat2(e,"number","amount"),n=this.safeFloat(e,"price");let d=void 0;void 0!==n&&void 0!==o&&(d=o*n);let c=this.safeString(e,"side");return"sale"===c&&(c="sell"),{info:e,id:r,timestamp:s,datetime:this.iso8601(s),symbol:i,type:void 0,side:c,price:n,amount:o,cost:d,order:a,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r={symbol:this.marketId(e)};void 0!==i&&(r.limit=i);const a=this.market(e),o=await this.publicPostApiOrderMarketOrder(this.extend(r,s));return this.parseTrades(o.data,a,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostApiUserUserBalance(e),i=this.safeValue(t,"data");let s=Object.keys(i);const r={};for(let a=0;a<s.length;a++){const e=s[a],t=this.safeFloat(i,e),o=e.split("_"),n=o[0],d=o[1],c=this.safeCurrencyCode(n);c in r||(r[c]=this.account()),"lock"===d?r[c].used=parseFloat(t):r[c].free=parseFloat(t)}s=Object.keys(r);for(let a=0;a<s.length;a++){const e=s[a],t=this.sum(r[e].used,r[e].free);r[e].total=t}return r.info=i,this.parseBalance(r)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.markets[e],s={part:i.quoteId,coin:i.baseId},r=await this.publicPostApiMarketGetCoinTrade(this.extend(s,t)),a=this.milliseconds();return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(r,"max"),low:this.safeFloat(r,"min"),bid:this.safeFloat(r,"buy"),bidVolume:void 0,ask:this.safeFloat(r,"sale"),askVolume:void 0,vwap:void 0,open:void 0,close:this.safeFloat(r,"price"),last:this.safeFloat(r,"price"),previousClose:void 0,change:void 0,percentage:this.safeFloat(r,"change_24h"),average:void 0,baseVolume:this.safeFloat(r,"volume_24h"),quoteVolume:void 0,info:r}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)},r=await this.publicPostApiOrderDepth(this.extend(s,i)),a=this.safeValue(r,"data"),o=this.safeTimestamp(a,"date");return this.parseOrderBook(a,o)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id},o=await this.privatePostApiOrderOrderList(this.extend(a,s));return this.parseTrades(o.data,r,t,i)}parseOrderStatus(e){return this.safeString({0:"open",1:"open",2:"closed",3:"canceled"},e,e)}async fetchOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" fetchOrder requires a `symbol` argument");await this.loadMarkets();const s={symbol:this.marketId(t),trust_id:e},r=await this.privatePostApiOrderOrderInfo(this.extend(s,i)),o=this.safeValue(r,"data"),n=this.safeTimestamp(o,"created"),d=this.parseOrderStatus(this.safeString(o,"status"));let c=this.safeString(o,"flag");return"sale"===c&&(c="sell"),{info:o,id:e,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,symbol:t,type:void 0,side:c,price:this.safeFloat(o,"price"),cost:void 0,average:this.safeFloat(o,"avg_price"),amount:this.safeFloat(o,"number"),filled:this.safeFloat(o,"numberdeal"),remaining:this.safeFloat(o,"numberover"),status:d,fee:void 0}}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeTimestamp(e,"datetime");let r=void 0;void 0!==t&&(r=t.symbol);let a=this.safeString(e,"type");"sale"===a&&(a="sell");const o=this.safeFloat(e,"price"),n=this.safeFloat(e,"avg_price"),d=this.safeFloat(e,"amount"),c=this.safeFloat(e,"amount_outstanding"),h=d-c,l=this.parseOrderStatus(this.safeString(e,"status")),u=h*o;return{info:e,id:i,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:r,type:void 0,side:a,price:o,cost:u,average:n,amount:d,filled:h,remaining:c,status:l,fee:void 0}}async fetchOrdersByType(e,t,i,s,r={}){await this.loadMarkets();const a={type:e};let o=void 0;void 0!==t&&(o=this.market(t),a.symbol=o.id);const n=await this.privatePostApiOrderTradeList(this.extend(a,r));return"data"in n?this.parseOrders(n.data,o,i,s):[]}async fetchOpenOrders(e,t,i,s={}){return this.fetchOrdersByType("open",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){const r=await this.fetchOrders(e,t,i,s);return this.filterBy(r,"status","closed")}async fetchOrders(e,t,i,s={}){return this.fetchOrdersByType("all",e,t,i,s)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o={symbol:this.marketId(e),type:i,price:this.priceToPrecision(e,r),number:this.amountToPrecision(e,s)},n=await this.privatePostApiOrderCoinTrust(this.extend(o,a)),d=this.safeValue(n,"data",{});return{info:n,id:this.safeString(d,"order_id")}}async cancelOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" cancelOrder requires a `symbol` argument");await this.loadMarkets();const s={};return void 0!==t&&(s.symbol=this.marketId(t)),void 0!==e&&(s.order_id=e),await this.privatePostApiOrderCancel(this.extend(s,i))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.urlencode({api_key:this.apiKey});Object.keys(n).length&&(e+="&"+this.urlencode(this.keysort(n)));const t=e+"&secret_key="+this.secret;a=e+"&sign="+this.hash(this.encode(t)),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,c,h){if(void 0===n)return;const l=this.safeValue(n,"code");if(void 0!==l&&0!==l){const e=this.safeString(n,"msg"),t=this.id+" "+e;throw this.throwExactlyMatchedException(this.exceptions,e,t),e.indexOf("\u8bf7\u60a8\u91cd\u65b0\u6302\u5355")>=0?new d(t):new r(t)}}}},a9C4:function(e,t,i){"use strict";const s=i("TGNe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinbaseprime",name:"Coinbase Prime",pro:!0,urls:{test:{public:"https://api-public.sandbox.prime.coinbase.com",private:"https://api-public.sandbox.prime.coinbase.com"},logo:"https://user-images.githubusercontent.com/1294454/44539184-29f26e00-a70c-11e8-868f-e907fc236a7c.jpg",api:{public:"https://api.prime.coinbase.com",private:"https://api.prime.coinbase.com"},www:"https://prime.coinbase.com",doc:"https://docs.prime.coinbase.com",fees:"https://support.prime.coinbase.com/customer/en/portal/articles/2945629-fees?b_id=17475"}})}}},a9qU:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,AuthenticationError:a,InvalidNonce:o,InsufficientFunds:n,InvalidOrder:d,OrderNotFound:c,PermissionDenied:h}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitbank",name:"bitbank",countries:["JP"],version:"v1",has:{fetchOHLCV:!0,fetchOpenOrders:!0,fetchMyTrades:!0,fetchDepositAddress:!0,withdraw:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","4h":"4hour","8h":"8hour","12h":"12hour","1d":"1day","1w":"1week"},urls:{logo:"https://user-images.githubusercontent.com/1294454/37808081-b87f2d9c-2e59-11e8-894d-c1900b7584fe.jpg",api:{public:"https://public.bitbank.cc",private:"https://api.bitbank.cc"},www:"https://bitbank.cc/",doc:"https://docs.bitbank.cc/",fees:"https://bitbank.cc/docs/fees/"},api:{public:{get:["{pair}/ticker","{pair}/depth","{pair}/transactions","{pair}/transactions/{yyyymmdd}","{pair}/candlestick/{candletype}/{yyyymmdd}"]},private:{get:["user/assets","user/spot/order","user/spot/active_orders","user/spot/trade_history","user/withdrawal_account"],post:["user/spot/order","user/spot/cancel_order","user/spot/cancel_orders","user/spot/orders_info","user/request_withdrawal"]}},markets:{"BCH/BTC":{id:"bcc_btc",symbol:"BCH/BTC",base:"BCH",quote:"BTC",baseId:"bcc",quoteId:"btc"},"BCH/JPY":{id:"bcc_jpy",symbol:"BCH/JPY",base:"BCH",quote:"JPY",baseId:"bcc",quoteId:"jpy"},"MONA/BTC":{id:"mona_btc",symbol:"MONA/BTC",base:"MONA",quote:"BTC",baseId:"mona",quoteId:"btc"},"MONA/JPY":{id:"mona_jpy",symbol:"MONA/JPY",base:"MONA",quote:"JPY",baseId:"mona",quoteId:"jpy"},"ETH/BTC":{id:"eth_btc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",baseId:"eth",quoteId:"btc"},"LTC/BTC":{id:"ltc_btc",symbol:"LTC/BTC",base:"LTC",quote:"BTC",baseId:"ltc",quoteId:"btc"},"XRP/JPY":{id:"xrp_jpy",symbol:"XRP/JPY",base:"XRP",quote:"JPY",baseId:"xrp",quoteId:"jpy"},"BTC/JPY":{id:"btc_jpy",symbol:"BTC/JPY",base:"BTC",quote:"JPY",baseId:"btc",quoteId:"jpy"}},fees:{trading:{maker:-2e-4,taker:.0012},funding:{withdraw:{BTC:.001,LTC:.001,XRP:.15,ETH:5e-4,MONA:.001,BCC:.001}}},precision:{price:8,amount:8},exceptions:{20001:a,20002:a,20003:a,20005:a,20004:o,40020:d,40021:d,40025:r,40013:c,40014:c,50008:h,50009:c,50010:c,60001:n,60005:d}})}parseTicker(e,t){let i=void 0;void 0!==t&&(i=t.symbol);const s=this.safeInteger(e,"timestamp"),r=this.safeFloat(e,"last");return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={pair:i.id},r=await this.publicGetPairTicker(this.extend(s,t));return this.parseTicker(r.data,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair:this.marketId(e)},r=await this.publicGetPairDepth(this.extend(s,i)),a=this.safeValue(r,"data",{}),o=this.safeInteger(a,"timestamp");return this.parseOrderBook(a,o)}parseTrade(e,t){const i=this.safeInteger(e,"executed_at");let s=void 0,r=void 0;void 0!==t&&(s=t.symbol,r=t.quote);const a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount");let n=void 0;void 0!==a&&void 0!==o&&(n=parseFloat(this.costToPrecision(s,a*o)));const d=this.safeString2(e,"transaction_id","trade_id"),c=this.safeString(e,"maker_taker");let h=void 0;void 0!==this.safeFloat(e,"fee_amount_quote")&&(h={currency:t.quote,cost:r});const l=this.safeString(e,"order_id"),u=this.safeString(e,"type"),f=this.safeString(e,"side");return{timestamp:i,datetime:this.iso8601(i),symbol:s,id:d,order:l,type:u,side:f,takerOrMaker:c,price:a,amount:o,cost:n,fee:h,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pair:r.id},o=await this.publicGetPairTransactions(this.extend(a,s));return this.parseTrades(o.data.transactions,r,t,i)}parseOHLCV(e,t,i="5m",s,r){return[e[5],parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])]}async fetchOHLCV(e,t="5m",i,s,r={}){await this.loadMarkets();const a=this.market(e);let o=this.milliseconds();o=this.ymd(o),o=o.split("-");const n={pair:a.id,candletype:this.timeframes[t],yyyymmdd:o.join("")},d=await this.publicGetPairCandlestickCandletypeYyyymmdd(this.extend(n,r)),c=this.safeValue(d.data.candlestick[0],"ohlcv");return this.parseOHLCVs(c,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetUserAssets(e),i={info:t},s=t.data.assets;for(let r=0;r<s.length;r++){const e=s[r],t=this.safeString(e,"asset"),a=this.safeCurrencyCode(t),o={free:this.safeFloat(e,"free_amount"),used:this.safeFloat(e,"locked_amount"),total:this.safeFloat(e,"onhand_amount")};i[a]=o}return this.parseBalance(i)}parseOrderStatus(e){return this.safeString({UNFILLED:"open",PARTIALLY_FILLED:"open",FULLY_FILLED:"closed",CANCELED_UNFILLED:"canceled",CANCELED_PARTIALLY_FILLED:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"order_id"),s=this.safeString(e,"pair");let r=void 0;s&&!t&&s in this.marketsById&&(t=this.marketsById[s]),void 0!==t&&(r=t.symbol);const a=this.safeInteger(e,"ordered_at"),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"start_amount"),d=this.safeFloat(e,"executed_amount"),c=this.safeFloat(e,"remaining_amount"),h=this.safeFloat(e,"average_price");let l=void 0;void 0!==d&&void 0!==h&&(l=d*h);const u=this.parseOrderStatus(this.safeString(e,"status")),f=this.safeStringLower(e,"type"),p=this.safeStringLower(e,"side");return{id:i,clientOrderId:void 0,datetime:this.iso8601(a),timestamp:a,lastTradeTimestamp:void 0,status:u,symbol:r,type:f,side:p,price:o,cost:l,average:h,amount:n,filled:d,remaining:c,trades:void 0,fee:void 0,info:e}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e);if(void 0===r)throw new d(this.id+" createOrder requires a price argument for both market and limit orders");const n={pair:o.id,amount:this.amountToPrecision(e,s),price:this.priceToPrecision(e,r),side:i,type:t},c=await this.privatePostUserSpotOrder(this.extend(n,a)),h=this.parseOrder(c.data,o),l=h.id;return this.orders[l]=h,h}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e,pair:this.market(t).id};return(await this.privatePostUserSpotCancelOrder(this.extend(s,i))).data}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e,pair:this.market(t).id},r=await this.privateGetUserSpotOrder(this.extend(s,i));return this.parseOrder(r.data)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pair:r.id};void 0!==i&&(a.count=i),void 0!==t&&(a.since=parseInt(t/1e3));const o=await this.privateGetUserSpotActiveOrders(this.extend(a,s));return this.parseOrders(o.data.orders,r,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=void 0;void 0!==e&&(r=this.market(e));const a={};void 0!==r&&(a.pair=r.id),void 0!==i&&(a.count=i),void 0!==t&&(a.since=parseInt(t/1e3));const o=await this.privateGetUserSpotTradeHistory(this.extend(a,s));return this.parseTrades(o.data.trades,r,t,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={asset:i.id},r=await this.privateGetUserWithdrawalAccount(this.extend(s,t)),a=r.data.accounts;return{currency:i,address:this.safeString(a[0],"address"),tag:void 0,info:r}}async withdraw(e,t,i,s,a={}){if(!("uuid"in a))throw new r(this.id+" uuid is required for withdrawal");await this.loadMarkets();const o={asset:this.currency(e).id,amount:t},n=await this.privatePostUserRequestWithdrawal(this.extend(o,a));return{info:n,id:this.safeString(n.data,"txid")}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.omit(s,this.extractParams(e)),n=this.urls.api[t]+"/";if("public"===t)n+=this.implodeParams(e,s),Object.keys(o).length&&(n+="?"+this.urlencode(o));else{this.checkRequiredCredentials();const t=this.nonce().toString();let d=t;n+=this.version+"/"+this.implodeParams(e,s),"POST"===i?d+=a=this.json(o):(d+="/"+this.version+"/"+e,Object.keys(o).length&&(o=this.urlencode(o),n+="?"+o,d+="?"+o)),r={"Content-Type":"application/json","ACCESS-KEY":this.apiKey,"ACCESS-NONCE":t,"ACCESS-SIGNATURE":this.hmac(this.encode(d),this.encode(this.secret))}}return{url:n,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){const n=await this.fetch2(e,t,i,s,a,o),d=this.safeInteger(n,"success"),c=this.safeValue(n,"data");if(!d||!c){const e={1e4:"URL does not exist",10001:"A system error occurred. Please contact support",10002:"Invalid JSON format. Please check the contents of transmission",10003:"A system error occurred. Please contact support",10005:"A timeout error occurred. Please wait for a while and try again",20001:"API authentication failed",20002:"Illegal API key",20003:"API key does not exist",20004:"API Nonce does not exist",20005:"API signature does not exist",20011:"Two-step verification failed",20014:"SMS authentication failed",30001:"Please specify the order quantity",30006:"Please specify the order ID",30007:"Please specify the order ID array",30009:"Please specify the stock",30012:"Please specify the order price",30013:"Trade Please specify either",30015:"Please specify the order type",30016:"Please specify asset name",30019:"Please specify uuid",30039:"Please specify the amount to be withdrawn",40001:"The order quantity is invalid",40006:"Count value is invalid",40007:"End time is invalid",40008:"end_id Value is invalid",40009:"The from_id value is invalid",40013:"The order ID is invalid",40014:"The order ID array is invalid",40015:"Too many specified orders",40017:"Incorrect issue name",40020:"The order price is invalid",40021:"The trading classification is invalid",40022:"Start date is invalid",40024:"The order type is invalid",40025:"Incorrect asset name",40028:"uuid is invalid",40048:"The amount of withdrawal is illegal",50003:"Currently, this account is in a state where you can not perform the operation you specified. Please contact support",50004:"Currently, this account is temporarily registered. Please try again after registering your account",50005:"Currently, this account is locked. Please contact support",50006:"Currently, this account is locked. Please contact support",50008:"User identification has not been completed",50009:"Your order does not exist",50010:"Can not cancel specified order",50011:"API not found",60001:"The number of possessions is insufficient",60002:"It exceeds the quantity upper limit of the tender buying order",60003:"The specified quantity exceeds the limit",60004:"The specified quantity is below the threshold",60005:"The specified price is above the limit",60006:"The specified price is below the lower limit",70001:"A system error occurred. Please contact support",70002:"A system error occurred. Please contact support",70003:"A system error occurred. Please contact support",70004:"We are unable to accept orders as the transaction is currently suspended",70005:"Order can not be accepted because purchase order is currently suspended",70006:"We can not accept orders because we are currently unsubscribed ",70009:"We are currently temporarily restricting orders to be carried out. Please use the limit order.",70010:"We are temporarily raising the minimum order quantity as the system load is now rising."},t=this.exceptions,i=this.safeString(c,"code"),s=this.safeString(e,i,"Error"),a=this.safeValue(t,i);throw void 0!==a?new a(s):new r(this.id+" "+this.json(n))}return n}}},aE5k:function(e,t,i){"use strict";const s=i("pRMk").Buffer,r=i("ZG6w").Transform,a=i("wfEq");e.exports=function(e){function t(t,i,s,a,o){r.call(this,o),this._rate=t,this._capacity=i,this._delimitedSuffix=s,this._hashBitLength=a,this._options=o,this._state=new e,this._state.initialize(t,i),this._finalized=!1}return a(t,r),t.prototype._transform=function(e,t,i){let s=null;try{this.update(e,t)}catch(r){s=r}i(s)},t.prototype._flush=function(e){let t=null;try{this.push(this.digest())}catch(i){t=i}e(t)},t.prototype.update=function(e,t){if(!s.isBuffer(e)&&"string"!==typeof e)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return s.isBuffer(e)||(e=s.from(e,t)),this._state.absorb(e),this},t.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let t=this._state.squeeze(this._hashBitLength/8);return void 0!==e&&(t=t.toString(e)),this._resetState(),t},t.prototype._resetState=function(){return this._state.initialize(this._rate,this._capacity),this},t.prototype._clone=function(){const e=new t(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(e._state),e._finalized=this._finalized,e},t}},aFfd:function(e,t,i){"use strict";const s=i("OjXq"),{NotSupported:r}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitlish",name:"Bitlish",countries:["GB","EU","RU"],rateLimit:1500,version:"v1",has:{CORS:!1,fetchTickers:!0,fetchOHLCV:!0,withdraw:!0},timeframes:{"1h":3600},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766275-dcfc6c30-5ed3-11e7-839d-00a846385d0b.jpg",api:"https://bitlish.com/api",www:"https://bitlish.com",doc:"https://bitlish.com/api",fees:"https://bitlish.com/fees"},requiredCredentials:{apiKey:!0,secret:!1},fees:{trading:{tierBased:!1,percentage:!0,taker:.003,maker:.002},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001,LTC:.001,DOGE:.001,ETH:.001,XMR:0,ZEC:.001,DASH:1e-4,EUR:50},deposit:{BTC:0,LTC:0,DOGE:0,ETH:0,XMR:0,ZEC:0,DASH:0,EUR:0}}},api:{public:{get:["instruments","ohlcv","pairs","tickers","trades_depth","trades_history"],post:["instruments","ohlcv","pairs","tickers","trades_depth","trades_history"]},private:{post:["accounts_operations","balance","cancel_trade","cancel_trades_by_ids","cancel_all_trades","create_bcode","create_template_wallet","create_trade","deposit","list_accounts_operations_from_ts","list_active_trades","list_bcodes","list_my_matches_from_ts","list_my_trades","list_my_trads_from_ts","list_payment_methods","list_payments","redeem_code","resign","signin","signout","trade_details","trade_options","withdraw","withdraw_by_id"]}},commonCurrencies:{DSH:"DASH",XDG:"DOGE"}})}async fetchMarkets(e={}){const t=await this.publicGetPairs(e),i=[],s=Object.keys(t);for(let r=0;r<s.length;r++){const e=t[s[r]],a=this.safeString(e,"id"),o=this.safeString(e,"name"),[n,d]=o.split("/"),c=this.safeCurrencyCode(n),h=this.safeCurrencyCode(d),l=c+"/"+h;i.push({id:a,symbol:l,base:c,quote:h,baseId:n,quoteId:d,info:e})}return i}parseTicker(e,t){const i=this.milliseconds();let s=void 0;void 0!==t&&(s=t.symbol);const r=this.safeFloat(e,"last");return{timestamp:i,datetime:this.iso8601(i),symbol:s,high:this.safeFloat(e,"max"),low:this.safeFloat(e,"min"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"first"),close:r,last:r,previousClose:void 0,change:void 0,percentage:100*this.safeFloat(e,"prc"),average:void 0,baseVolume:this.safeFloat(e,"sum"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(t),s=Object.keys(i),r={};for(let a=0;a<s.length;a++){const e=s[a],t=this.safeValue(this.markets_by_id,e);let o=void 0;if(void 0!==t)o=t.symbol;else{const t=e.slice(0,3),i=e.slice(3,6);o=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(i)}const n=i[e];r[o]=this.parseTicker(n,t)}return r}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s=await this.publicGetTickers(t),r=i.id;return this.parseTicker(s[r],i)}async fetchOHLCV(e,t="1h",i,s,r={}){await this.loadMarkets();let a=this.seconds()-2592e3;void 0!==i&&(a=parseInt(i/1e3));const o={time_range:[a.toString(),void 0]};return await this.publicPostOhlcv(this.extend(o,r))}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair_id:this.marketId(e)},r=await this.publicGetTradesDepth(this.extend(s,i));let a=void 0;const o=this.safeInteger(r,"last");return void 0!==o&&(a=parseInt(o/1e3)),this.parseOrderBook(r,a,"bid","ask","price","volume")}parseTrade(e,t){const i="bid"===e.dir?"buy":"sell";let s=void 0;void 0!==t&&(s=t.symbol);let r=this.safeInteger(e,"created");void 0!==r&&(r=parseInt(r/1e3));const a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount");let n=void 0;return void 0!==o&&void 0!==a&&(n=a*o),{id:void 0,info:e,timestamp:r,datetime:this.iso8601(r),symbol:s,order:void 0,type:void 0,side:i,takerOrMaker:void 0,price:a,amount:o,cost:n,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a=await this.publicGetTradesHistory(this.extend({pair_id:r.id},s));return this.parseTrades(a.list,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostBalance(e),i={info:t},s=Object.keys(t);for(let r=0;r<s.length;r++){const e=s[r],a=this.safeCurrencyCode(e),o=this.account(),n=this.safeValue(t,e,{});o.free=this.safeFloat(n,"funds"),o.used=this.safeFloat(n,"holded"),i[a]=o}return this.parseBalance(i)}async signIn(e={}){const t={login:this.login,passwd:this.password};return await this.privatePostSignin(this.extend(t,e))}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o={pair_id:this.marketId(e),dir:"buy"===i?"bid":"ask",amount:s};"limit"===t&&(o.price=r);const n=await this.privatePostCreateTrade(this.extend(o,a));return{info:n,id:this.safeString(n,"id")}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e};return await this.privatePostCancelTrade(this.extend(s,i))}async withdraw(e,t,i,s,a={}){if("BTC"!==e)throw new r(this.id+" currently supports BTC withdrawals only, until they document other currencies...");this.checkAddress(i),await this.loadMarkets();const o={currency:this.currency(e).id,amount:parseFloat(t),account:i,payment_method:"bitcoin"},n=await this.privatePostWithdraw(this.extend(o,a));return{info:n,id:n.message_id}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+e;return"public"===t?"GET"===i?Object.keys(s).length&&(o+="?"+this.urlencode(s)):(a=this.json(s),r={"Content-Type":"application/json"}):(this.checkRequiredCredentials(),a=this.json(this.extend({token:this.apiKey},s)),r={"Content-Type":"application/json"}),{url:o,method:i,body:a,headers:r}}}},aIci:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ExchangeNotAvailable:a,ArgumentsRequired:o,BadRequest:n,AuthenticationError:d,InvalidOrder:c,OrderNotFound:h,NotSupported:l,OrderNotFillable:u,InvalidAddress:f,InsufficientFunds:p}=i("ucJe");e.exports=class extends s{describe(){return this.checkRequiredDependencies(),this.deepExtend(super.describe(),{id:"theocean",name:"The Ocean",countries:["US"],rateLimit:3e3,version:"v1",requiresWeb3:!0,timeframes:{"5m":"300","15m":"900","1h":"3600","6h":"21600","1d":"86400"},has:{cancelAllOrders:!0,CORS:!1,fetchClosedOrders:!0,fetchOHLCV:!1,fetchOpenOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchTickers:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/43103756-d56613ce-8ed7-11e8-924e-68f9d4bcacab.jpg",api:"https://api.theocean.trade",www:"https://theocean.trade",doc:"https://docs.theocean.trade",fees:"https://theocean.trade/fees"},api:{public:{get:["fee_components","token_pairs","ticker","tickers","candlesticks","candlesticks/intervals","trade_history","order_book","order/{orderHash}","version"]},private:{get:["balance","available_balance","order_history","order/unsigned","order/unsigned/market"],post:["order"],delete:["order/{orderHash}","order"]}},exceptions:{exact:{"Order not found":h},broad:{"Price can't exceed 8 digits in precision.":c,"Order cannot be canceled":c,"Greater than available wallet balance.":p,"Fillable amount under minimum":c,"Fillable amount over maximum":c,"Schema validation failed for 'params'":n,"Service Temporarily Unavailable":a}},options:{decimals:{},fetchOrderMethod:"fetch_order_from_history"}})}async fetchMarkets(e={}){const t=await this.publicGetTokenPairs(e),i=[];for(let s=0;s<t.length;s++){const e=t[s],r=this.safeValue(e,"baseToken",{}),a=this.safeValue(e,"quoteToken",{}),o=this.safeString(r,"address"),n=this.safeString(a,"address"),d=this.safeCurrencyCode(this.safeString(r,"symbol")),c=this.safeCurrencyCode(this.safeString(a,"symbol")),h=d+"/"+c,l=o+"/"+n,u=this.safeInteger(r,"decimals"),f=this.safeInteger(a,"decimals");this.options.decimals[d]=u,this.options.decimals[c]=f;const p={amount:-parseInt(r.precision),price:-parseInt(a.precision)},m={amount:{min:this.fromWei(this.safeString(r,"minAmount"),u),max:this.fromWei(this.safeString(r,"maxAmount"),u)},price:{min:void 0,max:void 0},cost:{min:this.fromWei(this.safeString(a,"minAmount"),f),max:this.fromWei(this.safeString(a,"maxAmount"),f)}},y=!0;i.push({id:l,symbol:h,base:d,quote:c,baseId:o,quoteId:n,active:y,precision:p,limits:m,info:e})}return i}parseOHLCV(e,t,i="5m",s,r){const a=this.safeInteger(this.options.decimals,t.base,18);return[this.safeTimestamp(e,"startTime"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.fromWei(this.safeString(e,"baseVolume"),a)]}async fetchOHLCV(e,t="5m",i,s,a={}){await this.loadMarkets();const o=this.market(e),n={baseTokenAddress:o.baseId,quoteTokenAddress:o.quoteId,interval:this.timeframes[t]};if(void 0===i)throw new r(this.id+" fetchOHLCV requires a since argument");i=parseInt(i),n.startTime=i;const d=await this.publicGetCandlesticks(this.extend(n,a));return this.parseOHLCVs(d,o,t,i,s)}async fetchBalanceByCode(e,t={}){if(!this.walletAddress||0!==this.walletAddress.indexOf("0x"))throw new f(this.id+' fetchBalanceByCode() requires the .walletAddress to be a "0x"-prefixed hexstring like "0xbF2d65B3b2907214EEA3562f21B80f6Ed7220377"');await this.loadMarkets();const i=this.currency(e),s={walletAddress:this.walletAddress.toLowerCase(),tokenAddress:i.id},r=await this.privateGetBalance(this.extend(s,t)),a=this.safeInteger(this.options.decimals,e,18);return{free:this.fromWei(this.safeString(r,"available"),a),used:this.fromWei(this.safeString(r,"committed"),a),total:this.fromWei(this.safeString(r,"total"),a)}}async fetchBalance(e={}){if(!this.walletAddress||0!==this.walletAddress.indexOf("0x"))throw new f(this.id+' fetchBalance() requires the .walletAddress to be a "0x"-prefixed hexstring like "0xbF2d65B3b2907214EEA3562f21B80f6Ed7220377"');let t=this.safeValue(this.options,"fetchBalanceCurrencies");if(void 0===t&&(t=this.safeValue(e,"codes")),void 0===t||!Array.isArray(t))throw new r(this.id+" fetchBalance() requires a `codes` parameter (an array of currency codes)");await this.loadMarkets();const i={};for(let s=0;s<t.length;s++){const e=t[s];i[e]=await this.fetchBalanceByCode(e)}return this.parseBalance(i)}parseBidAsk(e,t=0,i=1,s){if(void 0===s)throw new o(this.id+" parseBidAsk requires a market argument");const r=parseFloat(e[t]),a=this.safeInteger(this.options.decimals,s.base,18);return[r,this.fromWei(e[i],"ether",a)]}parseOrderBook(e,t,i="bids",s="asks",r=0,a=1,o){const n={timestamp:t,datetime:this.iso8601(t),nonce:void 0},d=[i,s];for(let c=0;c<d.length;c++){const t=d[c],i=[],s=this.safeValue(e,t);for(let e=0;e<s.length;e++)i.push(this.parseBidAsk(s[e],r,a,o));n[t]=i}return n[i]=this.sortBy(n[i],0,!0),n[s]=this.sortBy(n[s],0),n}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={baseTokenAddress:s.baseId,quoteTokenAddress:s.quoteId};void 0!==t&&(r.depth=t);const a=await this.publicGetOrderBook(this.extend(r,i));return this.parseOrderBook(a,void 0,"bids","asks","price","availableAmount",s)}parseTicker(e,t){const i=parseInt(this.safeInteger(e,"timestamp")/1e3);let s=void 0,r=void 0;void 0!==t&&(s=t.symbol,r=t.base);const a=this.safeInteger(this.options.decimals,r,18),o=this.fromWei(this.safeString(e,"volume"),a),n=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:this.safeFloat(e,"priceChange"),average:void 0,baseVolume:o,quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(t),s={};for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"baseTokenAddress")+"/"+this.safeString(e,"quoteTokenAddress");let a=void 0,o=t;t in this.markets_by_id&&(a=this.markets_by_id[t],o=a.symbol),s[o]=this.parseTicker(e.ticker,a)}return s}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={baseTokenAddress:i.baseId,quoteTokenAddress:i.quoteId},r=await this.publicGetTicker(this.extend(s,t));return this.parseTicker(r,i)}parseTrade(e,t){let i=this.safeInteger(e,"lastUpdated");void 0!==i&&(i/=1e3);const s=this.safeFloat(e,"price"),r=this.safeString(e,"id"),a=this.safeString(e,"side");let o=void 0,n=void 0;void 0!==t&&(o=t.symbol,n=t.base);const d=this.safeInteger(this.options.decimals,n,18),c=this.fromWei(this.safeString(e,"amount"),d);let h=void 0;void 0!==c&&void 0!==s&&(h=c*s);return{id:r,order:r,timestamp:i,datetime:this.iso8601(i),symbol:o,type:void 0,side:a,takerOrMaker:"taker",price:s,amount:c,cost:h,fee:void 0,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={baseTokenAddress:r.baseId,quoteTokenAddress:r.quoteId},o=await this.publicGetTradeHistory(this.extend(a,s));return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,r,a={}){const o=this.id+' createOrder() requires `exchange.walletAddress` and `exchange.privateKey`. The .walletAddress should be a "0x"-prefixed hexstring like "0xbF2d65B3b2907214EEA3562f21B80f6Ed7220377". The .privateKey for that wallet should be a "0x"-prefixed hexstring like "0xe4f40d465efa94c98aec1a51f574329344c772c1bce33be07fa20a56795fdd09".';if(!this.walletAddress||0!==this.walletAddress.indexOf("0x"))throw new f(o);if(!this.privateKey||0!==this.privateKey.indexOf("0x"))throw new f(o);const n=await this.fetchOrderParamsToSign(e,t,i,s,r,a),d=n.unsignedZeroExOrder;if(void 0===d)throw new u(this.id+" "+t+" order to "+i+" "+e+" is not fillable at the moment");const c=await this.signZeroExOrderV2(d,this.privateKey),h=this.safeString(c,"orderHash");await this.postSignedOrder(c,n,a);const l=await this.fetchOrder(h);return l.type=t,l}async fetchOrderParamsToSign(e,t,i,s,a,o={}){if("buy"!==i&&"sell"!==i)throw new r(i+" is not valid side param. Use 'buy' or 'sell'");if("market"!==t&&"limit"!==t)throw new r(t+" is not valid type param. Use 'market' or 'limit'");if("limit"===t&&void 0===a)throw new r("Price is not provided for limit order");await this.loadMarkets();const n=this.market(e),d=this.safeInteger(this.options.decimals,n.base,18),c={walletAddress:this.walletAddress.toLowerCase(),baseTokenAddress:n.baseId,quoteTokenAddress:n.quoteId,side:i,amount:this.toWei(this.amountToPrecision(e,s),d)};let h=void 0;if("limit"===t)h="privateGetOrderUnsigned",c.price=this.priceToPrecision(e,a);else{if("market"!==t)throw new r("Unsupported order type: "+t);h="privateGetOrderUnsignedMarket"}return await this[h](this.extend(c,o))}async postSignedOrder(e,t,i={}){let s=t;return s.signedZeroExOrder=e,s=this.omit(s,"unsignedZeroExOrder"),await this.privatePostOrder(this.extend(s,i))}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={orderHash:e},r=await this.privateDeleteOrderOrderHash(this.extend(s,i));let a=void 0;return void 0!==t&&(a=this.market(t)),this.extend(this.parseOrder(r.canceledOrder,a),{status:"canceled"})}async cancelAllOrders(e,t={}){return await this.privateDeleteOrder(t)}parseOrder(e,t){const i=this.safeValue(e,"zeroExOrder");let s=this.safeString(e,"orderHash");void 0===s&&void 0!==i&&(s=this.safeString(i,"orderHash"));const r=this.safeString(e,"side"),a=this.safeString(e,"type");let o=this.safeInteger(e,"creationTimestamp");"undefined"!==o&&(o=parseInt(o/1e3));let n=void 0;const d=this.safeString(e,"baseTokenAddress"),c=this.safeString(e,"quoteTokenAddress");let h=void 0;void 0!==d&&void 0!==c&&(h=d+"/"+c);let u=void 0;void 0!==(t=this.safeValue(this.markets_by_id,h,t))&&(n=t.symbol,u=t.base);const f=this.safeInteger(this.options.decimals,u,18),p=this.safeFloat(e,"price"),m=this.fromWei(this.safeString(e,"filledAmount"),f),y=this.fromWei(this.safeString(e,"settledAmount"),f),b=this.fromWei(this.safeString(e,"confirmedAmount"),f),v=this.fromWei(this.safeString(e,"failedAmount"),f),g=this.fromWei(this.safeString(e,"deadAmount"),f),w=this.fromWei(this.safeString(e,"prunedAmount"),f),k=this.fromWei(this.safeString(e,"initialAmount"),f),_=this.sum(m,y,b);let T=void 0,O=void 0;const x=this.safeValue(e,"timeline");let S=void 0,C=void 0;if(void 0!==x){if(x.length>0){const e=this.groupBy(x,"action");if("error"in e&&(C="failed"),"filled"in e){const i=this.safeValue(e,"filled"),o=i.length;O=this.safeInteger(i[o-1],"timestamp"),O=O,S=[];for(let e=0;e<o;e++){const o=this.parseTrade(this.extend(i[e],{price:p}),t);S.push(this.extend(o,{order:s,type:a,side:r}))}}}}let I=void 0;void 0!==_&&(void 0===T&&void 0!==k&&(T=k-_),void 0!==p&&(I=_*p));let E=void 0;const M=this.safeString(e,"feeAmount");if(void 0!==M){const i=this.safeString(e,"feeOption");let s=void 0;if("feeInNative"===i)void 0!==t&&(s=t.base);else{if("feeInZRX"!==i)throw new l(this.id+" encountered an unsupported order fee option: "+i);s="ZRX"}const r=this.safeInteger(this.options.decimals,s,18);E={cost:this.fromWei(M,r),currency:s}}const A=t?t.precision.amount:8;if(void 0!==T&&void 0===C){C="open",T-v-g-w<Math.pow(10,-A)&&(C=_<k?"canceled":"closed")}return{info:e,id:s,clientOrderId:void 0,symbol:n,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:O,type:a,side:r,price:p,cost:I,amount:k,remaining:T,filled:_,status:C,fee:E,trades:S}}async fetchOpenOrder(e,t,i={}){const s=this.options.fetchOrderMethod;return await this[s](e,t,this.extend({openAmount:1},i))}async fetchClosedOrder(e,t,i={}){const s=this.options.fetchOrderMethod;return await this[s](e,t,this.extend(i))}async fetchOrderFromHistory(e,t,i={}){const s={orderHash:e},r=await this.fetchOrders(t,void 0,void 0,this.extend(s,i)),a=this.indexBy(r,"id");if(e in a)return a[e];throw new h(this.id+" could not find order "+e+" in order history")}async fetchOrderById(e,t,i={}){await this.loadMarkets();const s={orderHash:e},r=await this.publicGetOrderOrderHash(this.extend(s,i));return this.parseOrder(r)}async fetchOrder(e,t,i={}){const s={orderHash:e},r=await this.fetchOrders(t,void 0,void 0,this.extend(s,i));if(1!==r.length)throw new h(this.id+" order "+e+" not found");return r[0]}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.market(e),r.baseTokenAddress=a.baseId,r.quoteTokenAddress=a.quoteId),void 0!==i&&(r.limit=i);const o=await this.privateGetOrderHistory(this.extend(r,s));return this.parseOrders(o,void 0,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({openAmount:1},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({openAmount:0},s))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();const e=this.seconds().toString();let t=this.apiKey+e+i;"POST"===i?t+=a=this.json(n):(Object.keys(n).length&&(o+="?"+this.urlencode(n)),t+=this.json({}));const s=this.hmac(this.encode(t),this.encode(this.secret),"sha256","base64");r={"TOX-ACCESS-KEY":this.apiKey,"TOX-ACCESS-SIGN":s,"TOX-ACCESS-TIMESTAMP":e,"Content-Type":"application/json"}}else"public"===t&&Object.keys(n).length&&(o+="?"+this.urlencode(n));return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,c,h){if(void 0===n)return;if("'Authentication failed'"===o)throw new d(this.id+" "+o);const l=this.safeString(n,"message");if(void 0!==l){const e=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,l,e),this.throwBroadlyMatchedException(this.exceptions.broad,o,e),new r(e)}}}},"b+ih":function(e,t,i){"use strict";var s=i("xQh+"),r=i("Hy3L"),a=Object.prototype.hasOwnProperty,o={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},n=Array.isArray,d=Array.prototype.push,c=function(e,t){d.apply(e,n(t)?t:[t])},h=Date.prototype.toISOString,l={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:s.encode,encodeValuesOnly:!1,formatter:r.formatters[r.default],indices:!1,serializeDate:function(e){return h.call(e)},skipNulls:!1,strictNullHandling:!1},u=function e(t,i,r,a,o,d,h,u,f,p,m,y,b){var v=t;if("function"===typeof h?v=h(i,v):v instanceof Date?v=p(v):"comma"===r&&n(v)&&(v=v.join(",")),null===v){if(a)return d&&!y?d(i,l.encoder,b):i;v=""}if("string"===typeof v||"number"===typeof v||"boolean"===typeof v||s.isBuffer(v))return d?[m(y?i:d(i,l.encoder,b))+"="+m(d(v,l.encoder,b))]:[m(i)+"="+m(String(v))];var g,w=[];if("undefined"===typeof v)return w;if(n(h))g=h;else{var k=Object.keys(v);g=u?k.sort(u):k}for(var _=0;_<g.length;++_){var T=g[_];o&&null===v[T]||(n(v)?c(w,e(v[T],"function"===typeof r?r(i,T):i,r,a,o,d,h,u,f,p,m,y,b)):c(w,e(v[T],i+(f?"."+T:"["+T+"]"),r,a,o,d,h,u,f,p,m,y,b)))}return w};e.exports=function(e,t){var i,s=e,d=function(e){if(!e)return l;if(null!==e.encoder&&void 0!==e.encoder&&"function"!==typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||l.charset;if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=r.default;if("undefined"!==typeof e.format){if(!a.call(r.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var s=r.formatters[i],o=l.filter;return("function"===typeof e.filter||n(e.filter))&&(o=e.filter),{addQueryPrefix:"boolean"===typeof e.addQueryPrefix?e.addQueryPrefix:l.addQueryPrefix,allowDots:"undefined"===typeof e.allowDots?l.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:l.charsetSentinel,delimiter:"undefined"===typeof e.delimiter?l.delimiter:e.delimiter,encode:"boolean"===typeof e.encode?e.encode:l.encode,encoder:"function"===typeof e.encoder?e.encoder:l.encoder,encodeValuesOnly:"boolean"===typeof e.encodeValuesOnly?e.encodeValuesOnly:l.encodeValuesOnly,filter:o,formatter:s,serializeDate:"function"===typeof e.serializeDate?e.serializeDate:l.serializeDate,skipNulls:"boolean"===typeof e.skipNulls?e.skipNulls:l.skipNulls,sort:"function"===typeof e.sort?e.sort:null,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:l.strictNullHandling}}(t);"function"===typeof d.filter?s=(0,d.filter)("",s):n(d.filter)&&(i=d.filter);var h,f=[];if("object"!==typeof s||null===s)return"";h=t&&t.arrayFormat in o?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var p=o[h];i||(i=Object.keys(s)),d.sort&&i.sort(d.sort);for(var m=0;m<i.length;++m){var y=i[m];d.skipNulls&&null===s[y]||c(f,u(s[y],y,p,d.strictNullHandling,d.skipNulls,d.encode?d.encoder:null,d.filter,d.sort,d.allowDots,d.serializeDate,d.formatter,d.encodeValuesOnly,d.charset))}var b=f.join(d.delimiter),v=!0===d.addQueryPrefix?"?":"";return d.charsetSentinel&&("iso-8859-1"===d.charset?v+="utf8=%26%2310003%3B&":v+="utf8=%E2%9C%93&"),b.length>0?v+b:""}},bAGH:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,AuthenticationError:a,RateLimitExceeded:o,ArgumentsRequired:n}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinfalcon",name:"CoinFalcon",countries:["GB"],rateLimit:1e3,version:"v1",has:{fetchTickers:!0,fetchOpenOrders:!0,fetchMyTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/41822275-ed982188-77f5-11e8-92bb-496bcd14ca52.jpg",api:"https://coinfalcon.com",www:"https://coinfalcon.com",doc:"https://docs.coinfalcon.com",fees:"https://coinfalcon.com/fees",referral:"https://coinfalcon.com/?ref=CFJSVGTUPASB"},api:{public:{get:["markets","markets/{market}/orders","markets/{market}/trades"]},private:{get:["user/accounts","user/orders","user/orders/{id}","user/trades"],post:["user/orders"],delete:["user/orders/{id}"]}},fees:{trading:{tierBased:!0,maker:0,taker:.002}},precision:{amount:8,price:8}})}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=this.safeValue(t,"data"),s=[];for(let r=0;r<i.length;r++){const e=i[r],[t,a]=e.name.split("-"),o=this.safeCurrencyCode(t),n=this.safeCurrencyCode(a),d=o+"/"+n,c={amount:this.safeInteger(e,"size_precision"),price:this.safeInteger(e,"price_precision")};s.push({id:e.name,symbol:d,base:o,quote:n,baseId:t,quoteId:a,active:!0,precision:c,limits:{amount:{min:Math.pow(10,-c.amount),max:void 0},price:{min:Math.pow(10,-c.price),max:void 0},cost:{min:void 0,max:void 0}},info:e})}return s}parseTicker(e,t){if(void 0===t){const i=this.safeString(e,"name");t=this.safeValue(this.markets_by_id,i,t)}let i=void 0;void 0!==t&&(i=t.symbol);const s=this.milliseconds(),r=parseFloat(e.last_price);return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:void 0,low:void 0,bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:this.safeFloat(e,"change_in_24h"),percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(e,"volume"),info:e}}async fetchTicker(e,t={}){return await this.loadMarkets(),(await this.fetchTickers(t))[e]}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetMarkets(t),s=this.safeValue(i,"data"),r={};for(let a=0;a<s.length;a++){const e=this.parseTicker(s[a]);r[e.symbol]=e}return r}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.marketId(e),level:"3"},r=await this.publicGetMarketsMarketOrders(this.extend(s,i));return this.parseOrderBook(r.data,void 0,"bids","asks","price","size")}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"created_at")),s=this.safeFloat(e,"price"),r=this.safeFloat(e,"size"),a=t.symbol;let o=void 0;void 0!==s&&void 0!==r&&(o=parseFloat(this.costToPrecision(a,s*r)));const n=this.safeString(e,"id"),d=this.safeString(e,"side"),c=this.safeString(e,"order_id");let h=void 0;const l=this.safeFloat(e,"fee");if(void 0!==l){const t=this.safeString(e,"fee_currency_code");h={cost:l,currency:this.safeCurrencyCode(t)}}return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:a,id:n,order:c,type:void 0,side:d,takerOrMaker:void 0,price:s,amount:r,cost:o,fee:h}}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new n(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const r=this.market(e),a={market:r.id};void 0!==t&&(a.start_time=this.iso8601(t)),void 0!==i&&(a.limit=i);const o=await this.privateGetUserTrades(this.extend(a,s));return this.parseTrades(o.data,r,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market:r.id};void 0!==t&&(a.since=this.iso8601(t));const o=await this.publicGetMarketsMarketTrades(this.extend(a,s));return this.parseTrades(o.data,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetUserAccounts(e),i={info:t},s=this.safeValue(t,"data");for(let r=0;r<s.length;r++){const e=s[r],t=this.safeString(e,"currency_code"),a=this.safeCurrencyCode(t),o={free:this.safeFloat(e,"available_balance"),used:this.safeFloat(e,"hold_balance"),total:this.safeFloat(e,"balance")};i[a]=o}return this.parseBalance(i)}parseOrderStatus(e){return this.safeString({fulfilled:"closed",canceled:"canceled",pending:"open",open:"open",partially_filled:"open"},e,e)}parseOrder(e,t){if(void 0===t){const i=this.safeString(e,"market");i in this.markets_by_id&&(t=this.markets_by_id[i])}let i=void 0;void 0!==t&&(i=t.symbol);const s=this.parse8601(this.safeString(e,"created_at")),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"size"),o=this.safeFloat(e,"size_filled");let n=void 0,d=void 0;void 0!==a&&(void 0!==o&&(n=parseFloat(this.amountToPrecision(i,a-o))),void 0!==r&&(d=parseFloat(this.priceToPrecision(i,o*r))));const c=this.parseOrderStatus(this.safeString(e,"status"));let h=this.safeString(e,"operation_type");void 0!==h&&(h=h.split("_"),h=h[0]);const l=this.safeString(e,"order_type");return{id:this.safeString(e,"id"),clientOrderId:void 0,datetime:this.iso8601(s),timestamp:s,status:c,symbol:i,type:h,side:l,price:r,cost:d,amount:a,filled:o,remaining:n,trades:void 0,fee:void 0,info:e}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),n={market:o.id,size:this.amountToPrecision(e,s),order_type:i};"limit"===t&&(r=this.priceToPrecision(e,r),n.price=r.toString()),n.operation_type=t+"_order";const d=await this.privatePostUserOrders(this.extend(n,a)),c=this.parseOrder(d.data,o),h=c.id;return this.orders[h]=c,c}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privateDeleteUserOrdersId(this.extend(s,i)),a=this.market(t);return this.parseOrder(r.data,a)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privateGetUserOrdersId(this.extend(s,i));return this.parseOrder(r.data)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r={};void 0!==e&&(r.market=this.marketId(e)),void 0!==t&&(r.since_time=this.iso8601(this.milliseconds()));const a=await this.privateGetUserOrders(this.extend(r,s));return this.parseOrders(a.data)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="/api/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials(),"GET"===i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):a=this.json(n);const e=this.seconds().toString();let t=[e,i,o].join("|");a&&(t+="|"+a);const s=this.hmac(this.encode(t),this.encode(this.secret));r={"CF-API-KEY":this.apiKey,"CF-API-TIMESTAMP":e,"CF-API-SIGNATURE":s,"Content-Type":"application/json"}}return{url:this.urls.api+o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,n,d,c,h,l){if(e<400)return;throw new(this.safeValue({401:a,429:o},e,r))(d)}}},bf7n:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ArgumentsRequired:a}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btctradeua",name:"BTC Trade UA",countries:["UA"],rateLimit:3e3,has:{CORS:!1,createMarketOrder:!1,fetchOpenOrders:!0},urls:{referral:"https://btc-trade.com.ua/registration/22689",logo:"https://user-images.githubusercontent.com/1294454/27941483-79fc7350-62d9-11e7-9f61-ac47f28fcd96.jpg",api:"https://btc-trade.com.ua/api",www:"https://btc-trade.com.ua",doc:"https://docs.google.com/document/d/1ocYA0yMy_RXd561sfG3qEPZ80kyll36HUxvCRe5GbhE/edit"},api:{public:{get:["deals/{symbol}","trades/sell/{symbol}","trades/buy/{symbol}","japan_stat/high/{symbol}"]},private:{post:["auth","ask/{symbol}","balance","bid/{symbol}","buy/{symbol}","my_orders/{symbol}","order/status/{id}","remove/order/{id}","sell/{symbol}"]}},markets:{"BCH/UAH":{id:"bch_uah",symbol:"BCH/UAH",base:"BCH",quote:"UAH",baseId:"bch",quoteId:"uah"},"BTC/UAH":{id:"btc_uah",symbol:"BTC/UAH",base:"BTC",quote:"UAH",baseId:"btc",quoteId:"uah",precision:{price:1},limits:{amount:{min:1e-10}}},"DASH/BTC":{id:"dash_btc",symbol:"DASH/BTC",base:"DASH",quote:"BTC",baseId:"dash",quoteId:"btc"},"DASH/UAH":{id:"dash_uah",symbol:"DASH/UAH",base:"DASH",quote:"UAH",baseId:"dash",quoteId:"uah"},"DOGE/BTC":{id:"doge_btc",symbol:"DOGE/BTC",base:"DOGE",quote:"BTC",baseId:"doge",quoteId:"btc"},"DOGE/UAH":{id:"doge_uah",symbol:"DOGE/UAH",base:"DOGE",quote:"UAH",baseId:"doge",quoteId:"uah"},"ETH/UAH":{id:"eth_uah",symbol:"ETH/UAH",base:"ETH",quote:"UAH",baseId:"eth",quoteId:"uah"},"ITI/UAH":{id:"iti_uah",symbol:"ITI/UAH",base:"ITI",quote:"UAH",baseId:"iti",quoteId:"uah"},"KRB/UAH":{id:"krb_uah",symbol:"KRB/UAH",base:"KRB",quote:"UAH",baseId:"krb",quoteId:"uah"},"LTC/BTC":{id:"ltc_btc",symbol:"LTC/BTC",base:"LTC",quote:"BTC",baseId:"ltc",quoteId:"btc"},"LTC/UAH":{id:"ltc_uah",symbol:"LTC/UAH",base:"LTC",quote:"UAH",baseId:"ltc",quoteId:"uah"},"NVC/BTC":{id:"nvc_btc",symbol:"NVC/BTC",base:"NVC",quote:"BTC",baseId:"nvc",quoteId:"btc"},"NVC/UAH":{id:"nvc_uah",symbol:"NVC/UAH",base:"NVC",quote:"UAH",baseId:"nvc",quoteId:"uah"},"PPC/BTC":{id:"ppc_btc",symbol:"PPC/BTC",base:"PPC",quote:"BTC",baseId:"ppc",quoteId:"btc"},"SIB/UAH":{id:"sib_uah",symbol:"SIB/UAH",base:"SIB",quote:"UAH",baseId:"sib",quoteId:"uah"},"XMR/UAH":{id:"xmr_uah",symbol:"XMR/UAH",base:"XMR",quote:"UAH",baseId:"xmr",quoteId:"uah"},"ZEC/UAH":{id:"zec_uah",symbol:"ZEC/UAH",base:"ZEC",quote:"UAH",baseId:"zec",quoteId:"uah"}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:6e-4,LTC:.01,NVC:.01,DOGE:10}}}})}async signIn(e={}){return await this.privatePostAuth(e)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostBalance(e),i={info:t},s=this.safeValue(t,"accounts");for(let r=0;r<s.length;r++){const e=s[r],t=this.safeString(e,"currency"),a=this.safeCurrencyCode(t),o=this.account();o.total=this.safeFloat(e,"balance"),i[a]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id},r=await this.publicGetTradesBuySymbol(this.extend(s,i)),a=await this.publicGetTradesSellSymbol(this.extend(s,i)),o={bids:[],asks:[]};return r&&"list"in r&&(o.bids=r.list),a&&"list"in a&&(o.asks=a.list),this.parseOrderBook(o,void 0,"bids","asks","price","currency_trade")}async fetchTicker(e,t={}){await this.loadMarkets();const i={symbol:this.marketId(e)},s=await this.publicGetJapanStatHighSymbol(this.extend(i,t)),r=this.safeValue(s,"trades"),a=this.milliseconds(),o={symbol:e,timestamp:a,datetime:this.iso8601(a),high:void 0,low:void 0,bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:void 0,last:void 0,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:void 0,info:r},n=r.length;if(n>0){for(let t=Math.max(n-48,0);t<r.length;t++){const e=r[t];void 0===o.open&&(o.open=e[1]),(void 0===o.high||o.high<e[2])&&(o.high=e[2]),(void 0===o.low||o.low>e[3])&&(o.low=e[3]),void 0===o.baseVolume?o.baseVolume=-e[5]:o.baseVolume-=e[5]}const e=n-1;o.last=r[e][4],o.close=o.last,o.baseVolume=-1*o.baseVolume}return o}convertCyrillicMonthNameToString(e){return this.safeString({"\u044f\u043d\u0432\u0430\u0440\u044f":"01","\u0444\u0435\u0432\u0440\u0430\u043b\u044f":"02","\u043c\u0430\u0440\u0442\u0430":"03","\u0430\u043f\u0440\u0435\u043b\u044f":"04","\u043c\u0430\u044f":"05","\u0438\u044e\u043d\u044f":"06","\u0438\u044e\u043b\u044f":"07","\u0430\u0432\u0433\u0443\u0441\u0442\u0430":"08","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f":"09","\u043e\u043a\u0442\u044f\u0431\u0440\u044f":"10","\u043d\u043e\u044f\u0431\u0440\u044f":"11","\u0434\u0435\u043a\u0430\u0431\u0440\u044f":"12"},e)}parseCyrillicDatetime(e){const t=e.split(" ");let i=t[0];const s=this.convertCyrillicMonthNameToString(t[1]);if(!s)throw new r(this.id+" parseTrade() undefined month name: "+e);const a=t[2];let o=t[4];7===o.length&&(o="0"+o),1===i.length&&(i="0"+i);const n=[a,s,i].join("-")+"T"+o,d=this.parse8601(n);let c=[s,i].join("");return c=parseInt(c),c<325||c>1028?d-72e5:d-108e5}parseTrade(e,t){const i=this.parseCyrillicDatetime(this.safeString(e,"pub_date")),s=this.safeString(e,"id"),r=this.safeString(e,"type"),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amnt_trade");let n=void 0;void 0!==o&&void 0!==a&&(n=a*o);let d=void 0;return void 0!==t&&(d=t.symbol),{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:d,type:"limit",side:r,order:void 0,takerOrMaker:void 0,price:a,amount:o,cost:n,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id},o=await this.publicGetDealsSymbol(this.extend(a,s)),n=[];for(let d=0;d<o.length;d++)o[d].id%2&&n.push(o[d]);return this.parseTrades(n,r,t,i)}async createOrder(e,t,i,s,a,o={}){if("market"===t)throw new r(this.id+" allows limit orders only");await this.loadMarkets();const n=this.market(e),d="privatePost"+this.capitalize(i)+"Id",c={count:s,currency1:n.quoteId,currency:n.baseId,price:a};return this[d](this.extend(c,o))}async cancelOrder(e,t,i={}){const s={id:e};return await this.privatePostRemoveOrderId(this.extend(s,i))}parseOrder(e,t){const i=this.milliseconds();let s=void 0;return void 0!==t&&(s=t.symbol),{id:this.safeString(e,"id"),clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:"open",symbol:s,type:void 0,side:this.safeString(e,"type"),price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"amnt_trade"),filled:0,remaining:this.safeFloat(e,"amnt_trade"),trades:void 0,info:e}}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchOpenOrders requires a symbol argument");await this.loadMarkets();const r=this.market(e),o={symbol:r.id},n=await this.privatePostMyOrdersSymbol(this.extend(o,s)),d=this.safeValue(n,"your_open_orders");return this.parseOrders(d,r,t,i)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+=this.implodeParams(e,n));else{this.checkRequiredCredentials();const e=this.nonce(),t=(a=this.urlencode(this.extend({out_order_id:e,nonce:e},n)))+this.secret;r={"public-key":this.apiKey,"api-sign":this.hash(this.encode(t),"sha256"),"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}}},cdDq:function(e,t,i){"use strict";const{unCamelCase:s}=i("Kqm6");e.exports=(e=>{for(const t in e)e[s(t)]=e[t];return e})(Object.assign({},i("/cFS"),i("ZDdG"),i("Kqm6"),i("YuN0"),i("rwG2"),i("BtsK"),i("H6LP"),i("LP85"),i("g26j"),i("v+hw")))},ciOl:function(e,t){e.exports={newInvalidAsn1Error:function(e){var t=new Error;return t.name="InvalidAsn1Error",t.message=e||"",t}}},cuLj:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinmarketcap",name:"CoinMarketCap",rateLimit:1e4,version:"v1",countries:["US"],has:{CORS:!0,privateAPI:!1,createOrder:!1,createMarketOrder:!1,createLimitOrder:!1,cancelOrder:!1,editOrder:!1,fetchBalance:!1,fetchOrderBook:!1,fetchL2OrderBook:!1,fetchOHLCV:!1,fetchTrades:!1,fetchTickers:!0,fetchCurrencies:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28244244-9be6312a-69ed-11e7-99c1-7c1797275265.jpg",api:{public:"https://api.coinmarketcap.com",files:"https://files.coinmarketcap.com",charts:"https://graph.coinmarketcap.com"},www:"https://coinmarketcap.com",doc:"https://coinmarketcap.com/api"},requiredCredentials:{apiKey:!1,secret:!1},api:{files:{get:["generated/stats/global.json"]},graphs:{get:["currencies/{name}/"]},public:{get:["ticker/","ticker/{id}/","global/"]}},currencyCodes:["AUD","BRL","CAD","CHF","CNY","EUR","GBP","HKD","IDR","INR","JPY","KRW","MXN","RUB","USD","BTC","ETH","LTC"]})}async fetchOrderBook(e,t,i={}){throw new r("Fetching order books is not supported by the API of "+this.id)}currencyCode(e,t){return this.safeValue({ACChain:"ACChain",AdCoin:"AdCoin",BatCoin:"BatCoin",Bitgem:"Bitgem",BlazeCoin:"BlazeCoin",BlockCAT:"BlockCAT","Blocktrade Token":"Blocktrade Token",Catcoin:"Catcoin",CanYaCoin:"CanYaCoin",Comet:"Comet",CPChain:"CPChain",CrowdCoin:"CrowdCoin",Cryptaur:"Cryptaur",Cubits:"Cubits","DAO.Casino":"DAO.Casino","E-Dinar Coin":"E-Dinar Coin",EDRcoin:"EDRcoin",ENTCash:"ENTCash",FairCoin:"FairCoin","Fabric Token":"Fabric Token","Global Tour Coin":"Global Tour Coin",GuccioneCoin:"GuccioneCoin",HarmonyCoin:"HarmonyCoin","Harvest Masternode Coin":"Harvest Masternode Coin","HOT Token":"HOT Token","Hydro Protocol":"Hydro Protocol",Huncoin:"Huncoin",iCoin:"iCoin","Infinity Economics":"Infinity Economics","KingN Coin":"KingN Coin",LiteBitcoin:"LiteBitcoin",Maggie:"Maggie",Monarch:"Monarch","MTC Mesh Network":"MTC Mesh Network",IOTA:"IOTA",NetCoin:"NetCoin",PCHAIN:"PCHAIN",Plair:"Plair",PlayChip:"PlayChip",Polcoin:"Polcoin",PutinCoin:"PutinCoin",Rcoin:"Rcoin",Themis:"Themis","Menlo One":"Menlo One","BigONE Token":"BigONE Token"},t,e)}async fetchMarkets(e={}){const t=await this.publicGetTicker(this.extend({limit:0},e)),i=[];for(let s=0;s<t.length;s++){const e=t[s],r=this.currencyCodes;for(let t=0;t<r.length;t++){const s=r[t],a=s.toLowerCase(),o=e.id,n=this.currencyCode(e.symbol,e.name),d=n+"/"+s,c=o+"/"+a;i.push({id:c,symbol:d,base:n,quote:s,baseId:o,quoteId:a,info:e})}}return i}async fetchGlobal(e="USD"){await this.loadMarkets();const t={};return e&&(t.convert=e),await this.publicGetGlobal(t)}parseTicker(e,t){let i=this.safeTimestamp(e,"last_updated");void 0===i&&(i=this.milliseconds());const s=this.safeFloat(e,"percent_change_24h");let r=void 0,a=void 0,o=void 0;if(void 0!==t){a=t.symbol;const i="price_"+t.quoteId;r=this.safeFloat(e,i);const s="24h_volume_"+t.quoteId;o=this.safeFloat(e,s)}return{symbol:a,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:s,average:void 0,baseVolume:void 0,quoteVolume:o,info:e}}async fetchTickers(e="USD",t={}){await this.loadMarkets();const i={limit:1e4};e&&(i.convert=e);const s=await this.publicGetTicker(this.extend(i,t)),r={};for(let a=0;a<s.length;a++){const t=s[a],i=e.toLowerCase(),o=t.id+"/"+i;let n=o,d=void 0;o in this.markets_by_id&&(d=this.markets_by_id[o],n=d.symbol),r[n]=this.parseTicker(t,d)}return r}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={convert:i.quote,id:i.baseId},r=(await this.publicGetTickerId(this.extend(s,t)))[0];return this.parseTicker(r,i)}async fetchCurrencies(e={}){const t=await this.publicGetTicker(this.extend({limit:0},e)),i={};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"symbol"),a=this.safeString(e,"name"),o=8,n=this.currencyCode(r,a);i[n]={id:r,code:n,info:e,name:a,active:!0,fee:void 0,precision:o,limits:{amount:{min:Math.pow(10,-o),max:Math.pow(10,o)},price:{min:Math.pow(10,-o),max:Math.pow(10,o)},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}}}return i}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));return Object.keys(n).length&&(o+="?"+this.urlencode(n)),{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){const n=await this.fetch2(e,t,i,s,a,o);if("error"in n&&n.error)throw new r(this.id+" "+this.json(n));return n}}},d3wi:function(e,t,i){"use strict";const s=i("OjXq"),{ArgumentsRequired:r,AuthenticationError:a,ExchangeError:o,InsufficientFunds:n,OrderNotFound:d,PermissionDenied:c,BadRequest:h,DDoSProtection:l}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"stex",name:"STEX",countries:["EE"],rateLimit:500,certified:!1,has:{CORS:!1,createMarketOrder:!1,fetchCurrencies:!0,fetchMarkets:!0,fetchTicker:!0,fetchTickers:!0,fetchOrderBook:!0,fetchOHLCV:!0,fetchBalance:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchMyTrades:!0,fetchOrderTrades:!0,fetchDepositAddress:!0,createDepositAddress:!0,fetchDeposits:!0,fetchWithdrawals:!0,withdraw:!0,fetchFundingFees:!0},version:"v3",urls:{logo:"https://user-images.githubusercontent.com/1294454/69680782-03fd0b80-10bd-11ea-909e-7f603500e9cc.jpg",api:"https://api3.stex.com",www:"https://www.stex.com",doc:["https://help.stex.com/en/collections/1593608-api-v3-documentation"],fees:"https://app.stex.com/en/pairs-specification",referral:"https://app.stex.com?ref=36416021"},requiredCredentials:{apiKey:!1,secret:!1,token:!0},timeframes:{"1m":"1","5m":"5","30m":"30","1h":"60","4h":"240","12h":"720","1d":"1D"},api:{public:{get:["currencies","currencies/{currencyId}","markets","pairs-groups","currency_pairs/list/{code}","currency_pairs/group/{currencyPairGroupId}","currency_pairs/{currencyPairId}","ticker","ticker/{currencyPairId}","trades/{currencyPairId}","orderbook/{currencyPairId}","chart/{currencyPairId}/{candlesType}","deposit-statuses","deposit-statuses/{statusId}","withdrawal-statuses","withdrawal-statuses/{statusId}","ping","mobile-versions"]},trading:{get:["fees/{currencyPairId}","orders","orders/{currencyPairId}","order/{orderId}"],post:["orders/{currencyPairId}"],delete:["orders","orders/{currencyPairId}","order/{orderId}"]},reports:{get:["orders","orders/{orderId}","trades/{currencyPairId}","background/{listMode}","background/{id}","background/download/{id}"],post:["background/create"],delete:["background/{id}"]},profile:{get:["info","wallets","wallets/{walletId}","wallets/address/{walletId}","deposits","deposits/{id}","withdrawals","withdrawals/{id}","notifications","favorite/currency_pairs","token-scopes"],post:["wallets/burn/{walletId}","wallets/{currencyId}","wallets/address/{walletId}","withdraw","referral/program","referral/insert/{code}","referral/bonus_transfer/{currencyId}"],put:["profile/favorite/currency_pairs/set"],delete:["profile/withdraw/{withdrawalId}"]},verification:{get:["verification/countries","verification/stex"],post:["verification/stex"]},settings:{get:["notifications/{event}","notifications"],put:["notifications","notifications/set"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002}},commonCurrencies:{BHD:"Bithold"},options:{parseOrderToPrecision:!1},exceptions:{exact:{"Wrong parameters":h,"Unauthenticated.":a,"Server Error":o,"This feature is only enabled for users verifies by Cryptonomica":c,"Too Many Attempts.":l},broad:{"Not enough":n}}})}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i={},s=this.safeValue(t,"data",[]);for(let r=0;r<s.length;r++){const e=s[r],t=this.safeString(e,"id"),a=this.safeInteger(e,"id"),o=this.safeCurrencyCode(this.safeString(e,"code")),n=this.safeInteger(e,"precision"),d=this.safeFloat(e,"withdrawal_fee_const"),c=this.safeValue(e,"active",!0);i[o]={id:t,numericId:a,code:o,info:e,type:void 0,name:this.safeString(e,"name"),active:c,fee:d,precision:n,limits:{amount:{min:Math.pow(10,-n),max:void 0},price:{min:Math.pow(10,-n),max:void 0},cost:{min:void 0,max:void 0},deposit:{min:this.safeFloat(e,"minimum_deposit_amount"),max:void 0},withdraw:{min:this.safeFloat(e,"minimum_withdrawal_amount"),max:void 0}}}}return i}async fetchMarkets(e={}){const t=await this.publicGetCurrencyPairsListCode(this.extend({code:"ALL"},e)),i=[],s=this.safeValue(t,"data",[]);for(let r=0;r<s.length;r++){const e=s[r],t=this.safeString(e,"id"),a=this.safeInteger(e,"id"),o=this.safeString(e,"currency_id"),n=this.safeString(e,"market_currency_id"),d=this.safeInteger(e,"currency_id"),c=this.safeInteger(e,"market_currency_id"),h=this.safeCurrencyCode(this.safeString(e,"currency_code")),l=this.safeCurrencyCode(this.safeString(e,"market_code")),u=h+"/"+l,f={amount:this.safeInteger(e,"currency_precision"),price:this.safeInteger(e,"market_precision")},p=this.safeValue(e,"active"),m=this.safeFloat(e,"min_buy_price"),y=this.safeFloat(e,"min_sell_price"),b=Math.max(m,y),v=this.safeFloat(e,"buy_fee_percent")/100,g=this.safeFloat(e,"sell_fee_percent")/100,w=Math.max(v,g);i.push({id:t,numericId:a,symbol:u,base:h,quote:l,baseId:o,quoteId:n,baseNumericId:d,quoteNumericId:c,info:e,active:p,maker:w,taker:w,precision:f,limits:{amount:{min:this.safeFloat(e,"min_order_amount"),max:void 0},price:{min:b,max:void 0},cost:{min:void 0,max:void 0}}})}return i}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={currencyPairId:i.id},r=await this.publicGetTickerCurrencyPairId(this.extend(s,t)),a=this.safeValue(r,"data",{});return this.parseTicker(a,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={currencyPairId:this.market(e).id};void 0!==t&&(s.limit_bids=t,s.limit_asks=t);const r=await this.publicGetOrderbookCurrencyPairId(this.extend(s,i)),a=this.safeValue(r,"data",{});return this.parseOrderBook(a,void 0,"bid","ask","price","amount")}parseTicker(e,t){const i=this.safeInteger(e,"timestamp");let s=void 0,r=this.safeString(e,"id");if(r in this.markets_by_id)t=this.markets_by_id[r];else if(r=this.safeString(e,"symbol"),void 0!==r){const[e,t]=r.split("_");s=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}void 0===s&&void 0!==t&&(s=t.symbol);const a=this.safeFloat(e,"last"),o=this.safeFloat(e,"open");let n=void 0,d=void 0;return void 0!==a&&void 0!==o&&o>0&&(n=a-o,d=100/o*a-100),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:o,close:a,last:a,previousClose:void 0,change:n,percentage:d,average:void 0,baseVolume:this.safeFloat(e,"volumeQuote"),quoteVolume:this.safeFloat(e,"volume"),info:e}}parseTickers(e,t){const i=[];for(let s=0;s<e.length;s++)i.push(this.parseTicker(e[s]));return this.filterByArray(i,"symbol",t)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t),s=this.safeValue(i,"data",[]);return this.parseTickers(s,e)}parseOHLCV(e,t,i="1d",s,r){return[this.safeInteger(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchOHLCV(e,t="1d",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={currencyPairId:a.id,candlesType:this.timeframes[t]};void 0===s?s=100:o.limit=s;const n=s*this.parseTimeframe(t);void 0===i?(o.timeEnd=this.seconds(),o.timeStart=o.timeEnd-n):(o.timeStart=parseInt(i/1e3),o.timeEnd=this.sum(o.timeStart,n));const d=await this.publicGetChartCurrencyPairIdCandlesType(this.extend(o,r)),c=this.safeValue(d,"data",[]);return this.parseOHLCVs(c,a,t,i,s)}parseTrade(e,t){const i=this.safeString(e,"id"),s=this.safeTimestamp(e,"timestamp"),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount");let o=void 0;void 0!==r&&void 0!==a&&(o=r*a);let n=void 0;void 0===n&&void 0!==t&&(n=t.symbol);const d=this.safeStringLower2(e,"type","trade_type");return{info:e,timestamp:s,datetime:this.iso8601(s),symbol:n,id:i,order:void 0,type:void 0,takerOrMaker:void 0,side:d,price:r,amount:a,cost:o,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={currencyPairId:r.id};void 0!==i&&(a.limit=i),void 0!==t&&(a.sort="ASC",a.from=parseInt(t/1e3));const o=await this.publicGetTradesCurrencyPairId(this.extend(a,s)),n=this.safeValue(o,"data",[]);return this.parseTrades(n,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.profileGetWallets(e),i={info:t},s=this.safeValue(t,"data",[]);for(let r=0;r<s.length;r++){const e=s[r],t=this.safeCurrencyCode(this.safeString(e,"currency_id")),a=this.account();a.free=this.safeFloat(e,"balance"),a.used=this.safeFloat(e,"frozen_balance"),i[t]=a}return this.parseBalance(i)}parseOrderStatus(e){return this.safeString({PROCESSING:"open",PENDING:"open",PARTIAL:"open",FINISHED:"closed",CANCELLED:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.parseOrderStatus(this.safeString(e,"status"));let r=void 0,a=this.safeString(e,"currency_pair_id");if(a in this.markets_by_id)t=this.markets_by_id[a];else if(a=this.safeString(e,"currency_pair_name"),void 0!==a){const[e,t]=a.split("_");r=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}void 0===r&&void 0!==t&&(r=t.symbol);const o=this.safeTimestamp(e,"timestamp"),n=this.safeFloat(e,"price"),d=this.safeFloat(e,"initial_amount"),c=this.safeFloat(e,"processed_amount");let h=void 0,l=void 0;void 0!==c&&(void 0!==d&&(h=d-c,this.options.parseOrderToPrecision&&(h=parseFloat(this.amountToPrecision(r,h))),h=Math.max(h,0)),void 0!==n&&void 0===l&&(l=n*c));let u=this.safeString(e,"original_type");"BUY"!==u&&"SELL"!==u||(u=void 0);const f=this.safeStringLower(e,"type"),p=this.safeValue(e,"trades");let m=void 0;void 0!==p&&(m=this.parseTrades(p,t,void 0,void 0,{symbol:r,order:i}));const y={info:e,id:i,clientOrderId:void 0,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:void 0,symbol:r,type:u,side:f,price:n,amount:d,cost:l,average:void 0,filled:c,remaining:h,status:s,trades:m},b=this.safeValue(e,"fees");if(void 0===b)y.fee=void 0;else{if(b.length>0){y.fees=[];for(let e=0;e<b.length;e++){const t=this.safeFloat(b[e],"amount");if(void 0!==t){const i=this.safeString(b[e],"currency_id"),s=this.safeCurrencyCode(i);y.fees.push({cost:t,currency:s})}}}else y.fee=void 0}return y}async createOrder(e,t,i,s,r,a={}){if("market"===t)throw new o(this.id+" createOrder allows limit orders only");await this.loadMarkets();const n=this.market(e);"limit"===t&&(t=i);const d={currencyPairId:n.id,type:t.toUpperCase(),amount:parseFloat(this.amountToPrecision(e,s)),price:parseFloat(this.priceToPrecision(e,r))},c=await this.tradingPostOrdersCurrencyPairId(this.extend(d,a)),h=this.safeValue(c,"data",{});return this.parseOrder(h,n)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e},r=await this.tradingGetOrderOrderId(this.extend(s,i)),a=this.safeValue(r,"data",{});let o=void 0;return void 0!==t&&(o=this.market(t)),this.parseOrder(a,o)}async fetchClosedOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e},r=await this.reportsGetOrdersOrderId(this.extend(s,i)),a=this.safeValue(r,"data",{});let o=void 0;return void 0!==t&&(o=this.market(t)),this.parseOrder(a,o)}async fetchOrderTrades(e,t,i,s,r={}){return(await this.fetchClosedOrder(e,t,r)).trades}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0,a="tradingGetOrders";const o={};void 0!==e&&(a="tradingGetOrdersCurrencyPairId",r=this.market(e),o.currencyPairId=r.id),void 0!==i&&(o.limit=i);const n=await this[a](this.extend(o,s)),d=this.safeValue(n,"data",[]);return this.parseOrders(d,r,t,i)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e},r=await this.tradingDeleteOrderOrderId(this.extend(s,i)),a=this.safeValue(r,"data",{}),o=this.safeValue(a,"put_into_processing_queue",[]),n=this.safeValue(a,"not_put_into_processing_queue",[]),c=o.length,h=n.length;if(c<1){if(h<1)throw new d(this.id+" cancelOrder received an empty response: "+this.json(r));return this.parseOrder(n[0])}if(h<1)return this.parseOrder(o[0]);throw new d(this.id+" cancelOrder received an empty response: "+this.json(r))}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let s="tradingDeleteOrders";if(void 0!==e){const t=this.market(e);i.currencyPairId=t.id,s="tradingDeleteOrdersCurrencyPairId"}return await this[s](this.extend(i,t))}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const a=this.market(e),o={currencyPairId:a.id};void 0!==t&&(o.timeStart=this.iso8601(t)),void 0!==i&&(o.limit=i);const n=await this.reportsGetTradesCurrencyPairId(this.extend(o,s)),d=this.safeValue(n,"data",[]);return this.parseTrades(d,a,t,i)}async createDepositAddress(e,t={}){await this.loadMarkets();const i={currencyId:this.currency(e).id},s=await this.profilePostWalletsCurrencyId(this.extend(i,t)),r=this.safeValue(s,"data",{}),a=this.safeValue(r,"deposit_address",{}),o=this.safeString(a,"address"),n=this.safeString(a,"additional_address_parameter");return this.checkAddress(o),{currency:e,address:o,tag:n,info:s}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=await this.fetchBalance(),s=this.safeValue(i.info,"data",[]),r=this.indexBy(s,"currency_id"),a=this.currency(e),n=this.safeValue(r,a.id);if(void 0===n)throw new o(this.id+" fetchDepositAddress() could not find the wallet id for currency code "+e+", try to call createDepositAddress() first");const d=this.safeInteger(n,"id");if(void 0===d)throw new o(this.id+" fetchDepositAddress() could not find the wallet id for currency code "+e+", try to call createDepositAddress() first");const c={walletId:d},h=await this.profileGetWalletsWalletId(this.extend(c,t)),l=this.safeValue(h,"data",[]),u=this.safeValue(l,"deposit_address",{}),f=this.safeString(u,"address"),p=this.safeString(u,"additional_address_parameter");return this.checkAddress(f),{currency:e,address:f,tag:p,info:h}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+t+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));return"public"===t?Object.keys(n).length&&(o+="?"+this.urlencode(n)):(this.checkRequiredCredentials(),r={Authorization:"Bearer "+this.token},"GET"===i||"DELETE"===i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):(a=this.json(n),Object.keys(n).length&&(r["Content-Type"]="application/json"))),{url:o,method:i,body:a,headers:r}}parseTransactionStatus(e){return this.safeString({processing:"pending","checking by system":"pending",hodl:"pending","amount too low":"failed","not confirmed":"pending","cancelled by User":"canceled",approved:"pending",finished:"ok","withdrawal error":"failed","deposit error":"failed","cancelled by admin":"canceled",awaiting:"pending"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeValue(e,"withdrawal_address",{}),r=this.safeString(s,"address"),a=this.safeString(s,"additional_address_parameter"),o=this.safeString(e,"currency_id");let n=void 0;o in this.currencies_by_id?t=this.currencies_by_id[o]:n=this.commonCurrencyCode(this.safeString(e,"currency_code")),void 0===n&&void 0!==t&&(n=t.code);const d="deposit_status_id"in e?"deposit":"withdrawal",c=this.safeFloat(e,"amount"),h=this.parseTransactionStatus(this.safeStringLower(e,"status")),l=this.safeTimestamp2(e,"timestamp","created_ts"),u=this.safeTimestamp(e,"updated_ts"),f=this.safeString(e,"txid");let p=void 0;const m=this.safeFloat(e,"fee");if(void 0!==m){const t=this.safeString(e,"fee_currency_id","deposit_fee_currency_id");p={cost:m,currency:this.safeCurrencyCode(t)}}return{info:e,id:i,txid:f,timestamp:l,datetime:this.iso8601(l),addressFrom:void 0,address:r,addressTo:r,tagFrom:void 0,tag:a,tagTo:a,type:d,amount:c,currency:n,status:h,updated:u,fee:p}}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==e&&(r=this.currency(e),a.currencyId=r.id),void 0!==i&&(a.limit=i),void 0!==t&&(a.timeStart=t);const o=await this.profileGetDeposits(this.extend(a,s)),n=this.safeValue(o,"data",[]);return this.parseTransactions(n,e,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==e&&(r=this.currency(e),a.currencyId=r.id),void 0!==i&&(a.limit=i),void 0!==t&&(a.timeStart=t);const o=await this.profileGetWithdrawals(this.extend(a,s)),n=this.safeValue(o,"data",[]);return this.parseTransactions(n,e,t,i)}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a=this.currency(e),o={currency_id:a.id,amount:parseFloat(this.currencyToPrecision(e,t)),address:i};void 0!==s&&(o.additional_address_parameter=s);const n=await this.profilePostWithdraw(this.extend(o,r)),d=this.safeValue(n,"data",{});return this.parseTransaction(d,a)}async fetchFundingFees(e,t={}){const i=await this.publicGetCurrencies(t),s=this.safeValue(i,"data",[]),r={},a={};for(let o=0;o<s.length;o++){const e=this.safeString(s[o],"id"),t=this.safeCurrencyCode(e);r[t]=this.safeFloat(s[o],"withdrawal_fee_const"),a[t]=this.safeFloat(s[o],"deposit_fee_const")}return{withdraw:r,deposit:a,info:i}}handleErrors(e,t,i,s,r,a,n,d,c){if(void 0===n)return;if(!this.safeValue(n,"success",!1)){const e=this.safeString(n,"message"),t=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,e,t),this.throwBroadlyMatchedException(this.exceptions.broad,e,t),new o(t)}}}},d4Ax:function(e,t,i){"use strict";const s=i("OjXq"),{ArgumentsRequired:r,ExchangeError:a,BadSymbol:o,InvalidOrder:n,PermissionDenied:d,InvalidAddress:c,AuthenticationError:h,InvalidNonce:l,BadRequest:u,InsufficientFunds:f,OrderNotFound:p}=i("ucJe"),{TRUNCATE:m}=i("rwG2");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"aofex",name:"AOFEX",countries:["GB","CN"],rateLimit:1e3,has:{fetchMarkets:!0,fetchCurrencies:!1,fetchOrderBook:!0,fetchTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchOHLCV:!0,fetchBalance:!0,createOrder:!0,cancelOrder:!0,cancelAllOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchClosedOrder:!0,fetchTradingFee:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","6h":"6hour","12h":"12hour","1d":"1day","1w":"1week"},urls:{logo:"https://user-images.githubusercontent.com/51840849/77670271-056d1080-6f97-11ea-9ac2-4268e9ed0c1f.jpg",api:{public:"https://openapi.aofex.com/openApi",private:"https://openapi.aofex.com/openApi"},www:"https://aofex.com",doc:"https://aofex.zendesk.com/hc/en-us/sections/360005576574-API",fees:"https://aofex.zendesk.com/hc/en-us/articles/360025814934-Fees-on-AOFEX",referral:"https://aofex.com/#/register?key=9763840"},api:{public:{get:["market/symbols","market/trade","market/depth","market/kline","market/precision","market/24kline","market/gears_depth","market/detail"]},private:{get:["entrust/currentList","entrust/historyList","entrust/rate","wallet/list","entrust/detail"],post:["entrust/add","entrust/cancel"]}},fees:{trading:{maker:.0019,taker:.002}},exceptions:{exact:{20001:a,20401:d,20500:a,20501:o,20502:a,20503:a,20504:f,20505:u,20506:h,20507:a,20508:c,20509:f,20510:n,20511:n,20512:n,20513:n,20514:n,20515:n,20516:n,20517:n,50518:n,20519:l,20520:l,20521:u,20522:a,20523:h,20524:d,20525:h,20526:d,20527:d,20528:d,20529:h,20530:d},broad:{}},options:{fetchBalance:{show_all:"0"}}})}async fetchMarkets(e={}){let t=await this.publicGetMarketSymbols(e),i=await this.publicGetMarketPrecision();i=this.safeValue(i,"result",{}),t=this.safeValue(t,"result",[]);const s=[];for(let r=0;r<t.length;r++){const e=t[r],a=this.safeString(e,"symbol"),o=this.safeString(e,"base_currency"),n=this.safeString(e,"quote_currency"),d=this.safeCurrencyCode(o),c=this.safeCurrencyCode(n),h=d+"/"+c,l=this.safeInteger(e,"id"),u=this.safeValue(i,a,{}),f=this.safeFloat(e,"maker_fee"),p=this.safeFloat(e,"taker_fee");s.push({id:a,numericId:l,symbol:h,baseId:o,quoteId:n,base:d,quote:c,active:void 0,maker:f/1e3,taker:p/1e3,precision:{amount:this.safeInteger(u,"amount"),price:this.safeInteger(u,"price")},limits:{amount:{min:this.safeFloat(e,"min_size"),max:this.safeFloat(e,"max_size")},price:{min:this.safeFloat(e,"min_price"),max:this.safeFloat(e,"max_price")},cost:{min:void 0,max:void 0}},info:e})}return s}parseOHLCV(e,t,i="5m",s,r){return[this.safeTimestamp(e,"id"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"amount")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e);void 0===s&&(s=150);const o={symbol:a.id,period:this.timeframes[t],size:s},n=await this.publicGetMarketKline(this.extend(o,r)),d=this.safeValue(n,"result",{}),c=this.safeValue(d,"data",[]);return this.parseOHLCVs(c,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeValue(this.options,"fetchBalance",{}),i={show_all:this.safeValue(t,"show_all","0")},s=await this.privateGetWalletList(this.extend(i,e)),r={info:s},a=this.safeValue(s,"result",[]);for(let o=0;o<a.length;o++){const e=a[o],t=this.safeString(e,"currency"),i=this.safeCurrencyCode(t),s=this.account();s.free=this.safeFloat(e,"available"),s.used=this.safeFloat(e,"frozen"),r[i]=s}return this.parseBalance(r)}async fetchTradingFee(e,t={}){await this.loadMarkets();const i={symbol:this.market(e).id},s=await this.privateGetEntrustRate(this.extend(i,t)),r=this.safeValue(s,"result",{});return{info:s,symbol:e,maker:this.safeFloat(r,"fromFee"),taker:this.safeFloat(r,"toFee")}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)},r=await this.publicGetMarketDepth(this.extend(s,i)),a=this.safeValue(r,"result",{}),o=this.safeInteger(a,"ts");return this.parseOrderBook(a,o)}parseTicker(e,t){const i=this.safeTimestamp(e,"id");let s=void 0;t&&(s=t.symbol);const r=this.safeFloat(e,"open"),a=this.safeFloat(e,"close");let o=void 0;o=void 0!==s?parseFloat(this.priceToPrecision(s,a-r)):a-r;const n=this.sum(a,r)/2,d=o/r*100,c=this.safeFloat(e,"amount"),h=this.safeFloat(e,"vol");let l=void 0;return void 0!==h&&void 0!==c&&c>0&&(l=parseFloat(this.priceToPrecision(s,h/c))),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:l,open:r,close:a,last:a,previousClose:void 0,change:o,percentage:d,average:n,baseVolume:c,quoteVolume:h,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i={};if(void 0!==e){const t=this.marketIds(e);i.symbol=t.join(",")}const s=await this.publicGetMarket24kline(this.extend(i,t)),r=this.safeValue(s,"result",[]),a={};for(let o=0;o<r.length;o++){const e=this.safeString(r[o],"symbol");let t=void 0,i=e;if(void 0!==e)if(e in this.markets_by_id)t=this.markets_by_id[e],i=t.symbol;else{const[t,s]=e.split("-");i=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(s)}const s=this.safeValue(r[o],"data",{}),n=this.parseTicker(s,t);n.symbol=i,a[i]=n}return this.filterByArray(a,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetMarketDetail(this.extend(s,t)),a=this.safeValue(r,"result",{});return this.parseTicker(a,i)}parseTrade(e,t){const i=this.safeString(e,"id"),s=this.parse8601(this.safeString(e,"ctime")),r=this.safeTimestamp(e,"ts",s);let a=void 0;void 0===a&&void 0!==t&&(a=t.symbol);const o=this.safeString(e,"direction"),n=this.safeFloat(e,"price"),d=this.safeFloat2(e,"amount","number");let c=this.safeFloat(e,"total_price");void 0===c&&void 0!==n&&void 0!==d&&(c=n*d);const h=this.safeFloat(e,"fee");let l=void 0;if(void 0!==h){let e=void 0;void 0!==t&&("buy"===o?e=t.base:"sell"===o&&(e=t.quote)),l={cost:h,currency:e}}return{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:a,order:void 0,type:void 0,side:o,takerOrMaker:void 0,price:n,amount:d,cost:c,fee:l}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id},o=await this.publicGetMarketTrade(this.extend(a,s)),n=this.safeValue(o,"result",{}),d=this.safeValue(n,"data",[]);return this.parseTrades(d,r,t,i)}parseOrderStatus(e){return this.safeString({1:"open",2:"open",3:"closed",4:"canceled",5:"canceled",6:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"order_sn"),s=this.safeString(e,"status"),r=this.parseOrderStatus(s);let a=void 0;const o=this.safeString(e,"symbol");let n=void 0,d=void 0;if(void 0!==o)if(o in this.markets_by_id)t=this.markets_by_id[o];else{const[e,t]=o.split("-");n=this.safeCurrencyCode(e),d=this.safeCurrencyCode(t),a=n+"/"+d}void 0===a&&void 0!==t&&(a=t.symbol,n=t.base,d=t.quote);const c=this.parse8601(this.safeString(e,"ctime")),h="2"===this.safeString(e,"type")?"limit":"market",l=this.safeString(e,"side");let u=void 0,f=void 0,p=void 0,m=void 0;const y=this.safeFloat(e,"number"),b=this.safeFloat(e,"total_price");"limit"===h?(p=y,f=this.safeFloat(e,"price")):(m=this.safeFloat(e,"deal_price"),p="buy"===l?this.safeFloat(e,"deal_number"):y);let v=void 0,g=void 0,w=void 0,k=void 0,_=void 0,T=void 0;if("1"!==s&&"6"!==s){const s=this.safeValue(e,"trades");if(void 0!==s){for(let e=0;e<s.length;e++)s[e].direction=l;if(g=this.parseTrades(s,t,void 0,void 0,{symbol:t.symbol,order:i,side:l,type:h}),g.length>0){const e=g[0];k=e.fee.cost,T=e.timestamp,w=e.amount,u=e.cost;for(let t=1;t<g.length;t++){const e=g[t];k=this.sum(k,e.fee.cost),w=this.sum(w,e.amount),u=this.sum(u,e.cost),T=Math.max(T,e.timestamp)}void 0!==p&&(w=Math.min(p,w)),w>0&&(m=u/w)}if(void 0!==k){v={cost:k,currency:"buy"===l?n:d}}}}else w=0,u=0;return void 0===u&&("limit"===h?u=b:"buy"===l&&(u=y)),void 0===w&&"limit"===h&&"3"===s&&(w=p),void 0!==w&&void 0!==p&&(_=Math.max(p-w,0)),{info:e,id:i,clientOrderId:void 0,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:T,status:r,symbol:a,type:h,side:l,price:f,cost:u,average:m,amount:p,filled:w,remaining:_,trades:g,fee:v}}async fetchClosedOrder(e,t,i={}){await this.loadMarkets();const s={order_sn:e},r=await this.privateGetEntrustDetail(this.extend(s,i)),a=this.safeValue(r,"result",{}),o=this.safeValue(a,"trades",[]),n=this.safeValue(a,"entrust",{});return n.trades=o,this.parseOrder(n)}async fetchOrdersWithMethod(e,t,i,s,r={}){await this.loadMarkets();const a={};let o=void 0;void 0!==t&&(o=this.market(t),a.symbol=o.id),void 0!==s&&(a.limit=s);const n=await this[e](this.extend(a,r)),d=this.safeValue(n,"result",[]);return this.parseOrders(d,o,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersWithMethod("privateGetEntrustCurrentList",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersWithMethod("privateGetEntrustHistoryList",e,t,i,s)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),d=i+"-"+t,c={symbol:o.id,type:d};if("limit"===t)c.amount=this.amountToPrecision(e,s),c.price=this.priceToPrecision(e,r);else if("market"===t)if("buy"===i){let e=s;if(this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){if(void 0===r)throw new n(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument");e=s*r}const t=o.precision.price;c.amount=this.decimalToPrecision(e,m,t,this.precisionMode)}else c.amount=this.amountToPrecision(e,s);const h=await this.privatePostEntrustAdd(this.extend(c,a)),l=this.safeValue(h,"result",{}),u=this.parseOrder(l,o),f=this.milliseconds();return this.extend(u,{timestamp:f,datetime:this.iso8601(f),amount:s,price:r,type:t,side:i})}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_ids:e},r=await this.privatePostEntrustCancel(this.extend(s,i)),a=this.safeValue(r,"result",{}),o=this.safeValue(a,"success",[]);if(!this.inArray(e,o))throw new p(this.id+" order id "+e+" not found in successfully canceled orders: "+this.json(r));return{info:r,id:e,timestamp:void 0,datetime:this.iso8601(void 0),lastTradeTimestamp:void 0,status:"canceled",symbol:t,type:void 0,side:void 0,price:void 0,cost:void 0,average:void 0,amount:void 0,filled:void 0,remaining:void 0,trades:void 0,fee:void 0}}async cancelAllOrders(e,t={}){if(void 0===e)throw new r(this.id+" cancelAllOrders() requires a symbol argument");await this.loadMarkets();const i={symbol:this.market(e).id};return await this.privatePostEntrustCancel(this.extend(i,t))}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/"+e,n=Object.keys(s);const d=n.length;if("public"===t)d>0&&(o+="?"+this.urlencode(s));else{const e=this.nonce().toString()+"_"+this.uuid().slice(0,5),t={};t[this.apiKey]=this.apiKey,t[this.secret]=this.secret,t[e]=e;for(let i=0;i<d;i++){const e=n[i];t[e]=e+"="+s[e]}const c=this.keysort(t);let h="";n=Object.keys(c);for(let i=0;i<n.length;i++){h+=c[n[i]]}const l=this.hash(this.encode(h),"sha1");r={Nonce:e,Token:this.apiKey,Signature:l},"POST"===i?(r["Content-Type"]="application/x-www-form-urlencoded",d>0&&(a=this.urlencode(s))):d>0&&(o+="?"+this.urlencode(s))}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,o,n,d,c){if(void 0===n)return;const h=this.safeString(n,"errno");if(void 0!==h&&"0"!==h){const e=this.safeString(n,"errmsg"),t=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,h,t),this.throwBroadlyMatchedException(this.exceptions.broad,e,t),new a(t)}}}},dTKc:function(e,t,i){"use strict";var s=i("LE+o"),r=i("tk5I"),a=i("3NQs").inherits,o=s.base,n=i("3NQs").utils;function d(e){o.call(this,"mont",e),this.a=new r(e.a,16).toRed(this.red),this.b=new r(e.b,16).toRed(this.red),this.i4=new r(4).toRed(this.red).redInvm(),this.two=new r(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function c(e,t,i){o.BasePoint.call(this,e,"projective"),null===t&&null===i?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new r(t,16),this.z=new r(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}a(d,o),e.exports=d,d.prototype.validate=function(e){var t=e.normalize().x,i=t.redSqr(),s=i.redMul(t).redAdd(i.redMul(this.a)).redAdd(t);return 0===s.redSqrt().redSqr().cmp(s)},a(c,o.BasePoint),d.prototype.decodePoint=function(e,t){return this.point(n.toArray(e,t),1)},d.prototype.point=function(e,t){return new c(this,e,t)},d.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},c.prototype.precompute=function(){},c.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},c.fromJSON=function(e,t){return new c(e,t[0],t[1]||e.one)},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},c.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),i=e.redSub(t),s=e.redMul(t),r=i.redMul(t.redAdd(this.curve.a24.redMul(i)));return this.curve.point(s,r)},c.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.diffAdd=function(e,t){var i=this.x.redAdd(this.z),s=this.x.redSub(this.z),r=e.x.redAdd(e.z),a=e.x.redSub(e.z).redMul(i),o=r.redMul(s),n=t.z.redMul(a.redAdd(o).redSqr()),d=t.x.redMul(a.redISub(o).redSqr());return this.curve.point(n,d)},c.prototype.mul=function(e){for(var t=e.clone(),i=this,s=this.curve.point(null,null),r=[];0!==t.cmpn(0);t.iushrn(1))r.push(t.andln(1));for(var a=r.length-1;a>=0;a--)0===r[a]?(i=i.diffAdd(s,this),s=s.dbl()):(s=i.diffAdd(s,this),i=i.dbl());return s},c.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},c.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},dl7Y:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,OrderNotFound:a,ArgumentsRequired:o,InvalidOrder:n,DDoSProtection:d}=i("ucJe"),{ROUND:c}=i("rwG2");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btcmarkets",name:"BTC Markets",countries:["AU"],rateLimit:1e3,has:{CORS:!1,fetchOHLCV:!0,fetchOrder:!0,fetchOrders:!0,fetchClosedOrders:"emulated",fetchOpenOrders:!0,fetchMyTrades:!0,cancelOrders:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/29142911-0e1acfc2-7d5c-11e7-98c4-07d9532b29d7.jpg",api:{public:"https://api.btcmarkets.net",private:"https://api.btcmarkets.net",web:"https://btcmarkets.net/data"},www:"https://btcmarkets.net",doc:"https://github.com/BTCMarkets/API"},api:{public:{get:["market/{id}/tick","market/{id}/orderbook","market/{id}/trades","v2/market/{id}/tickByTime/{timeframe}","v2/market/{id}/trades","v2/market/active"]},private:{get:["account/balance","account/{id}/tradingfee","fundtransfer/history","v2/order/open","v2/order/open/{id}","v2/order/history/{instrument}/{currency}/","v2/order/trade/history/{id}","v2/transaction/history/{currency}"],post:["fundtransfer/withdrawCrypto","fundtransfer/withdrawEFT","order/create","order/cancel","order/history","order/open","order/trade/history","order/createBatch","order/detail"]},web:{get:["market/BTCMarkets/{id}/tickByTime"]}},timeframes:{"1m":"minute","1h":"hour","1d":"day"},exceptions:{3:n,6:d},fees:{percentage:!0,tierBased:!0,maker:-5e-4,taker:.002},options:{fees:{AUD:{maker:.0085,taker:.0085}}}})}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const r={};void 0!==i&&(r.limit=i),void 0!==t&&(r.since=t);const a=(await this.privateGetFundtransferHistory(this.extend(r,s))).fundTransfers;return this.parseTransactions(a,void 0,t,i)}parseTransactionStatus(e){return this.safeString({Complete:"ok"},e,e)}parseTransaction(e,t){const i=this.safeInteger(e,"creationTime"),s=this.safeInteger(e,"lastUpdate"),r=this.safeString(e,"transferType"),a=this.safeValue(e,"cryptoPaymentDetail",{}),o=this.safeString(a,"address"),n=this.safeString(a,"txId");let d=void 0;d="DEPOSIT"===r?"deposit":"WITHDRAW"===r?"withdrawal":r;const c=this.safeFloat(e,"fee"),h=this.parseTransactionStatus(this.safeString(e,"status")),l=this.safeString(e,"currency"),u=this.safeCurrencyCode(l);let f=this.safeFloat(e,"amount");return void 0!==f&&(f*=1e-8),{id:this.safeString(e,"fundTransferId"),txid:n,timestamp:i,datetime:this.iso8601(i),address:o,tag:void 0,type:d,amount:f,currency:u,status:h,updated:s,fee:{currency:u,cost:c},info:e}}async fetchMarkets(e={}){const t=await this.publicGetV2MarketActive(e),i=[],s=this.safeValue(t,"markets");for(let r=0;r<s.length;r++){const e=s[r],t=this.safeString(e,"instrument"),a=this.safeString(e,"currency"),o=t+"/"+a,n=this.safeCurrencyCode(t),d=this.safeCurrencyCode(a),c=n+"/"+d,h=this.safeValue(this.safeValue(this.options,"fees",{}),d,this.fees);let l=2,u=4;const f=.001;let p=void 0;"AUD"===d&&("XRP"!==n&&"OMG"!==n||(l=4),u=-Math.log10(f),p=Math.pow(10,-l));const m={amount:u,price:l},y={amount:{min:f,max:void 0},price:{min:p,max:void 0},cost:{min:void 0,max:void 0}};i.push({info:e,id:o,symbol:c,base:n,quote:d,baseId:t,quoteId:a,active:void 0,maker:h.maker,taker:h.taker,limits:y,precision:m})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccountBalance(e),i={info:t};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"currency"),a=this.safeCurrencyCode(r),o=1e8;let n=this.safeFloat(e,"balance");void 0!==n&&(n/=o);let d=this.safeFloat(e,"pendingFunds");void 0!==d&&(d/=o);const c=this.account();c.used=d,c.total=n,i[a]=c}return this.parseBalance(i)}parseOHLCV(e,t,i="1m",s,r){const a=["open","high","low","close","volume"],o=[this.safeInteger(e,"timestamp")];for(let n=0;n<a.length;n++){const t=a[n];let i=this.safeFloat(e,t);void 0!==i&&(i/=1e8),o.push(i)}return o}async fetchOHLCV(e,t="1m",i,s,r={}){await this.load_markets();const a=this.market(e),o={id:a.id,timeframe:this.timeframes[t],indexForward:!0,sortForward:!0};void 0!==i&&(o.since=i),void 0!==s&&(o.limit=s);const n=await this.publicGetV2MarketIdTickByTimeTimeframe(this.extend(o,r)),d=this.safeValue(n,"ticks",[]);return this.parseOHLCVs(d,a,t,i,s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={id:this.market(e).id},r=await this.publicGetMarketIdOrderbook(this.extend(s,i)),a=this.safeTimestamp(r,"timestamp");return this.parseOrderBook(r,a)}parseTicker(e,t){const i=this.safeTimestamp(e,"timestamp");let s=void 0;void 0!==t&&(s=t.symbol);const r=this.safeFloat(e,"lastPrice");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:this.safeFloat(e,"bestBid"),bidVolume:void 0,ask:this.safeFloat(e,"bestAsk"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume24h"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={id:i.id},r=await this.publicGetMarketIdTick(this.extend(s,t));return this.parseTicker(r,i)}parseTrade(e,t){const i=this.safeTimestamp(e,"date");let s=void 0;void 0!==t&&(s=t.symbol);const r=this.safeString(e,"tid"),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount");let n=void 0;return void 0!==o&&void 0!==a&&(n=o*a),{info:e,id:r,order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:s,type:void 0,side:void 0,takerOrMaker:void 0,price:a,amount:o,cost:n,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={id:r.id},o=await this.publicGetMarketIdTrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),n="buy"===i?"Bid":"Ask",d=this.ordered({currency:o.quote});d.currency=o.quote,d.instrument=o.base,d.price=parseInt(this.decimalToPrecision(1e8*r,c,0)),d.volume=parseInt(this.decimalToPrecision(1e8*s,c,0)),d.orderSide=n,d.ordertype=this.capitalize(t),d.clientRequestId=this.nonce().toString();const h=await this.privatePostOrderCreate(this.extend(d,a));return{info:h,id:this.safeString(h,"id")}}async cancelOrders(e,t,i={}){await this.loadMarkets();for(let r=0;r<e.length;r++)e[r]=parseInt(e[r]);const s={orderIds:e};return await this.privatePostOrderCancel(this.extend(s,i))}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.cancelOrders([e])}calculateFee(e,t,i,s,r,a="taker",o={}){const n=this.markets[e],d=n[a];let c=void 0,h=void 0;return"AUD"===n.quote?(c=n.quote,h=parseFloat(this.costToPrecision(e,s*r))):(c=n.base,h=parseFloat(this.amountToPrecision(e,s))),{type:a,currency:c,rate:d,cost:parseFloat(this.feeToPrecision(e,d*h))}}parseMyTrade(e,t){const i=this.safeInteger(e,"creationTime");let s=this.safeFloat(e,"side");s="Bid"===s?"buy":"sell";let r=void 0,a=void 0;void 0!==t&&(r="AUD"===t.quote?t.quote:t.base,a=t.symbol);const o=this.safeString(e,"id");let n=this.safeFloat(e,"price");void 0!==n&&(n/=1e8);let d=this.safeFloat(e,"volume");void 0!==d&&(d/=1e8);let c=this.safeFloat(e,"fee");void 0!==c&&(c/=1e8);let h=void 0;void 0!==n&&void 0!==d&&(h=n*d);const l=this.safeString(e,"orderId");return{info:e,id:o,timestamp:i,datetime:this.iso8601(i),order:l,symbol:a,type:void 0,side:s,price:n,amount:d,cost:h,fee:{currency:r,cost:c}}}parseMyTrades(e,t,i,s){const r=[];for(let a=0;a<e.length;a++){const i=this.parseMyTrade(e[a],t);r.push(i)}return r}parseOrder(e,t){const i="Bid"===e.orderSide?"buy":"sell",s="Limit"===e.ordertype?"limit":"market",r=this.safeInteger(e,"creationTime");void 0===t&&(t=this.market(e.instrument+"/"+e.currency));let a="open";"Failed"===e.status||"Cancelled"===e.status||"Partially Cancelled"===e.status||"Error"===e.status?a="canceled":"Fully Matched"!==e.status&&"Partially Matched"!==e.status||(a="closed");const o=this.safeFloat(e,"price")/1e8,n=this.safeFloat(e,"volume")/1e8,d=this.safeFloat(e,"openVolume",0)/1e8,c=n-d,h=this.parseMyTrades(e.trades,t),l=h.length;let u=c*o,f=void 0,p=void 0;if(l>0){u=0;for(let e=0;e<l;e++){const t=h[e];u=this.sum(u,t.cost)}c>0&&(f=u/c),p=h[l-1].timestamp}return{info:e,id:this.safeString(e,"id"),clientOrderId:this.safeString(e,"clientRequestId"),timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:p,symbol:t.symbol,type:s,side:i,price:o,cost:u,amount:n,filled:c,remaining:d,average:f,status:a,trades:h,fee:void 0}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={orderIds:[parseInt(e)]},r=await this.privatePostOrderDetail(this.extend(s,i));if(r.orders.length<1)throw new a(this.id+" No matching order found: "+e);const o=r.orders[0];return this.parseOrder(o)}createPaginatedRequest(e,t,i){return i=void 0===i?100:i,t=void 0===t?0:t,this.ordered({currency:e.quoteId,instrument:e.baseId,limit:i,since:t})}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new o(this.id+": fetchOrders requires a `symbol` argument.");await this.loadMarkets();const r=this.market(e),a=this.createPaginatedRequest(r,t,i),n=await this.privatePostOrderHistory(this.extend(a,s));return this.parseOrders(n.orders,r)}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new o(this.id+": fetchOpenOrders requires a `symbol` argument.");await this.loadMarkets();const r=this.market(e),a=this.createPaginatedRequest(r,t,i),n=await this.privatePostOrderOpen(this.extend(a,s));return this.parseOrders(n.orders,r)}async fetchClosedOrders(e,t,i,s={}){const r=await this.fetchOrders(e,t,i,s);return this.filterBy(r,"status","closed")}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new o(this.id+": fetchMyTrades requires a `symbol` argument.");await this.loadMarkets();const r=this.market(e),a=this.createPaginatedRequest(r,t,i),n=await this.privatePostOrderTradeHistory(this.extend(a,s));return this.parseMyTrades(n.trades,r)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){const o="/"+this.implodeParams(e,s);let n=this.urls.api[t]+o;if("private"===t){this.checkRequiredCredentials();const t=this.nonce().toString();let d=void 0;if(r={apikey:this.apiKey,timestamp:t},"POST"===i)r["Content-Type"]="application/json",d=o+"\n"+t+"\n",d+=a=this.json(s);else{const i=this.keysort(this.omit(s,this.extractParams(e)));let r="";Object.keys(i).length&&(r=this.urlencode(i),n+="?"+r,r+="\n"),d=o+"\n"+r+t+"\n"}const c=this.base64ToBinary(this.secret),h=this.hmac(this.encode(d),c,"sha512","base64");r.signature=this.decode(h)}else Object.keys(s).length&&(n+="?"+this.urlencode(s));return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,c){if(void 0!==n&&"success"in n&&!n.success){const e=this.safeString(n,"errorCode"),t=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions,e,t),new r(t)}}}},dn2v:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,AuthenticationError:a,OrderNotFound:o,InsufficientFunds:n,DDoSProtection:d}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitforex",name:"Bitforex",countries:["CN"],version:"v1",has:{fetchBalance:!0,fetchMarkets:!0,createOrder:!0,cancelOrder:!0,fetchTicker:!0,fetchTickers:!1,fetchMyTrades:!1,fetchTrades:!0,fetchOrder:!0,fetchOrders:!1,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchOHLCV:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","12h":"12hour","1d":"1day","1w":"1week","1M":"1month"},urls:{logo:"https://user-images.githubusercontent.com/1294454/44310033-69e9e600-a3d8-11e8-873d-54d74d1bc4e4.jpg",api:"https://api.bitforex.com",www:"https://www.bitforex.com",doc:"https://github.com/githubdev2020/API_Doc_en/wiki",fees:"https://help.bitforex.com/en_us/?cat=13",referral:"https://www.bitforex.com/en/invitationRegister?inviterId=1867438"},api:{public:{get:["api/v1/market/symbols","api/v1/market/ticker","api/v1/market/depth","api/v1/market/trades","api/v1/market/kline"]},private:{post:["api/v1/fund/mainAccount","api/v1/fund/allAccount","api/v1/trade/placeOrder","api/v1/trade/placeMultiOrder","api/v1/trade/cancelOrder","api/v1/trade/orderInfo","api/v1/trade/orderInfos"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.001},funding:{tierBased:!1,percentage:!0,deposit:{},withdraw:{BTC:5e-4,ETH:.01,BCH:1e-4,LTC:.001,ETC:.005,USDT:5,CMCT:30,AION:3,LVT:0,DATA:40,RHP:50,NEO:0,AIDOC:10,BQT:2,R:2,DPY:.8,GTC:40,AGI:30,DENT:100,SAN:1,SPANK:8,AID:5,OMG:.1,BFT:5,SHOW:150,TRX:20,ABYSS:10,THM:25,ZIL:20,PPT:.2,WTC:.4,LRC:7,BNT:1,CTXC:1,MITH:20,TRUE:4,LYM:10,VEE:100,AUTO:200,REN:50,TIO:2.5,NGC:1.5,PST:10,CRE:200,IPC:5,PTT:1e3,XMCT:20,ATMI:40,TERN:40,XLM:.01,ODE:15,FTM:100,RTE:100,DCC:100,IMT:500,GOT:3,EGT:500,DACC:1e3,UBEX:500,ABL:100,OLT:100,DAV:40,THRT:10,RMESH:3,UPP:20,SDT:0,SHR:10,MTV:3,ESS:100,MET:3,TTC:20,LXT:10,XCLP:100,LUK:100,UBC:100,DTX:10,BEAT:20,DEED:2,BGX:3e3,PRL:20,ELY:50,CARD:300,SQR:15,VRA:400,BWX:3500,MAS:75,FLP:.6,UNC:300,CRNC:15,MFG:70,ZXC:70,TRT:30,ZIX:35,XRA:10,AMO:1600,IPG:3,uDoo:50,URB:30,ARCONA:3,CRAD:5,NOBS:1e3,ADF:2,ELF:5,LX:20,PATH:15,SILK:120,SKYFT:50,EDN:50,ADE:50,EDR:10,TIME:.25,SPRK:20,QTUM:.01,BF:5,ZPR:100,HYB:10,CAN:30,CEL:10,ATS:50,KCASH:1,ACT:.01,MT:300,DXT:30,WAB:4e3,HYDRO:400,LQD:5,OPTC:200,EQUAD:80,LATX:50,LEDU:100,RIT:70,ACDC:500,FSN:2}}},commonCurrencies:{UOS:"UOS Network"},exceptions:{4004:o,1013:a,1016:a,3002:n,10204:d}})}async fetchMarkets(e={}){const t=(await this.publicGetApiV1MarketSymbols(e)).data,i=[];for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"symbol"),a=r.split("-"),o=a[2],n=a[1],d=this.safeCurrencyCode(o),c=this.safeCurrencyCode(n),h=d+"/"+c,l=!0,u={amount:this.safeInteger(e,"amountPrecision"),price:this.safeInteger(e,"pricePrecision")},f={amount:{min:this.safeFloat(e,"minOrderAmount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}};i.push({id:r,symbol:h,base:d,quote:c,baseId:o,quoteId:n,active:l,precision:u,limits:f,info:e})}return i}parseTrade(e,t){let i=void 0;void 0!==t&&(i=t.symbol);const s=this.safeInteger(e,"time"),r=this.safeString(e,"tid"),a=this.safeFloat(e,"amount"),o=this.safeFloat(e,"price");let n=void 0;void 0!==o&&void 0!==a&&(n=a*o);const d=this.safeInteger(e,"direction"),c=this.parseSide(d);return{info:e,id:r,timestamp:s,datetime:this.iso8601(s),symbol:i,type:void 0,side:c,price:o,amount:a,cost:n,order:void 0,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r={symbol:this.marketId(e)};void 0!==i&&(r.size=i);const a=this.market(e),o=await this.publicGetApiV1MarketTrades(this.extend(r,s));return this.parseTrades(o.data,a,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostApiV1FundAllAccount(e),i=t.data,s={info:t};for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"currency"),a=this.safeCurrencyCode(t),o=this.account();o.used=this.safeFloat(e,"frozen"),o.free=this.safeFloat(e,"active"),o.total=this.safeFloat(e,"fix"),s[a]=o}return this.parseBalance(s)}async fetchTicker(e,t={}){await this.loadMarkets();const i={symbol:this.markets[e].id},s=await this.publicGetApiV1MarketTicker(this.extend(i,t)),r=s.data,a=this.safeInteger(r,"date");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(r,"high"),low:this.safeFloat(r,"low"),bid:this.safeFloat(r,"buy"),bidVolume:void 0,ask:this.safeFloat(r,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:this.safeFloat(r,"last"),last:this.safeFloat(r,"last"),previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(r,"vol"),quoteVolume:void 0,info:s}}parseOHLCV(e,t,i="1m",s,r){return[this.safeInteger(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"vol")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={symbol:a.id,ktype:this.timeframes[t]};void 0!==s&&(o.size=s);const n=await this.publicGetApiV1MarketKline(this.extend(o,r)),d=this.safeValue(n,"data",[]);return this.parseOHLCVs(d,a,t,i,s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)};void 0!==t&&(s.size=t);const r=await this.publicGetApiV1MarketDepth(this.extend(s,i)),a=this.safeValue(r,"data"),o=this.safeInteger(r,"time");return this.parseOrderBook(a,o,"bids","asks","price","amount")}parseOrderStatus(e){const t={0:"open",1:"open",2:"closed",3:"canceled",4:"canceled"};return e in t?t[e]:e}parseSide(e){return 1===e?"buy":2===e?"sell":void 0}parseOrder(e,t){const i=this.safeString(e,"orderId"),s=this.safeFloat(e,"createTime"),r=this.safeFloat(e,"lastTime"),a=t.symbol,o=this.safeInteger(e,"tradeType"),n=this.parseSide(o),d=this.safeFloat(e,"orderPrice"),c=this.safeFloat(e,"avgPrice"),h=this.safeFloat(e,"orderAmount"),l=this.safeFloat(e,"dealAmount"),u=h-l,f=this.parseOrderStatus(this.safeString(e,"orderState")),p=l*d,m=t["buy"===n?"base":"quote"],y={cost:this.safeFloat(e,"tradeFee"),currency:m};return{info:e,id:i,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:r,symbol:a,type:void 0,side:n,price:d,cost:p,average:c,amount:h,filled:l,remaining:u,status:f,fee:y}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s=this.market(t),r={symbol:this.marketId(t),orderId:e},a=await this.privatePostApiV1TradeOrderInfo(this.extend(r,i));return this.parseOrder(a.data,s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:this.marketId(e),state:0},o=await this.privatePostApiV1TradeOrderInfos(this.extend(a,s));return this.parseOrders(o.data,r,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:this.marketId(e),state:1},o=await this.privatePostApiV1TradeOrderInfos(this.extend(a,s));return this.parseOrders(o.data,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=void 0;"buy"===i?o=1:"sell"===i&&(o=2);const n={symbol:this.marketId(e),price:r,amount:s,tradeType:o},d=await this.privatePostApiV1TradePlaceOrder(this.extend(n,a)),c=d.data;return{info:d,id:this.safeString(c,"orderId")}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e};void 0!==t&&(s.symbol=this.marketId(t));const r=await this.privatePostApiV1TradeCancelOrder(this.extend(s,i));return{info:r,success:r.success}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let t=this.urlencode({accessKey:this.apiKey});n.nonce=this.milliseconds(),Object.keys(n).length&&(t+="&"+this.urlencode(this.keysort(n)));const i="/"+e+"?"+t;a=t+"&signData="+this.hmac(this.encode(i),this.encode(this.secret)),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,c){if("string"===typeof o&&("{"===o[0]||"["===o[0])){const e=this.id+" "+o,t=this.safeValue(n,"success");if(void 0!==t&&!t){const t=this.safeString(n,"code");throw this.throwExactlyMatchedException(this.exceptions,t,e),new r(e)}}}}},e0KM:function(e,t,i){"use strict";(function(t){var s=i("xFKm"),r=i("+C5w");function a(e){var t=e;if("string"!==typeof t)throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}function o(e){return"0x"+e.toString(16)}e.exports={arrayContainsArray:function(e,t,i){if(!0!==Array.isArray(e))throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(!0!==Array.isArray(t))throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[Boolean(i)?"some":"every"]((function(t){return e.indexOf(t)>=0}))},intToBuffer:function(e){var i=o(e);return new t(a(i.slice(2)),"hex")},getBinarySize:function(e){if("string"!==typeof e)throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return t.byteLength(e,"utf8")},isHexPrefixed:s,stripHexPrefix:r,padToEven:a,intToHex:o,fromAscii:function(e){for(var t="",i=0;i<e.length;i++){var s=e.charCodeAt(i).toString(16);t+=s.length<2?"0"+s:s}return"0x"+t},fromUtf8:function(e){return"0x"+a(new t(e,"utf8").toString("hex")).replace(/^0+|0+$/g,"")},toAscii:function(e){var t="",i=0,s=e.length;for("0x"===e.substring(0,2)&&(i=2);i<s;i+=2){var r=parseInt(e.substr(i,2),16);t+=String.fromCharCode(r)}return t},toUtf8:function(e){return new t(a(r(e).replace(/^0+|0+$/g,"")),"hex").toString("utf8")},getKeys:function(e,t,i){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if("string"!==typeof t)throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var s=[],r=0;r<e.length;r++){var a=e[r][t];if(i&&!a)a="";else if("string"!==typeof a)throw new Error("invalid abi");s.push(a)}return s},isHexString:function(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}}}).call(this,i("zkTx").Buffer)},e8CT:function(e,t,i){"use strict";var s=i("LE+o"),r=i("3NQs"),a=i("tk5I"),o=r.inherits,n=s.base,d=r.utils.assert;function c(e){n.call(this,"short",e),this.a=new a(e.a,16).toRed(this.red),this.b=new a(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function h(e,t,i,s){n.BasePoint.call(this,e,"affine"),null===t&&null===i?(this.x=null,this.y=null,this.inf=!0):(this.x=new a(t,16),this.y=new a(i,16),s&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function l(e,t,i,s){n.BasePoint.call(this,e,"jacobian"),null===t&&null===i&&null===s?(this.x=this.curve.one,this.y=this.curve.one,this.z=new a(0)):(this.x=new a(t,16),this.y=new a(i,16),this.z=new a(s,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(c,n),e.exports=c,c.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,i;if(e.beta)t=new a(e.beta,16).toRed(this.red);else{var s=this._getEndoRoots(this.p);t=(t=s[0].cmp(s[1])<0?s[0]:s[1]).toRed(this.red)}if(e.lambda)i=new a(e.lambda,16);else{var r=this._getEndoRoots(this.n);0===this.g.mul(r[0]).x.cmp(this.g.x.redMul(t))?i=r[0]:(i=r[1],d(0===this.g.mul(i).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:i,basis:e.basis?e.basis.map((function(e){return{a:new a(e.a,16),b:new a(e.b,16)}})):this._getEndoBasis(i)}}},c.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:a.mont(e),i=new a(2).toRed(t).redInvm(),s=i.redNeg(),r=new a(3).toRed(t).redNeg().redSqrt().redMul(i);return[s.redAdd(r).fromRed(),s.redSub(r).fromRed()]},c.prototype._getEndoBasis=function(e){for(var t,i,s,r,o,n,d,c,h,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),u=e,f=this.n.clone(),p=new a(1),m=new a(0),y=new a(0),b=new a(1),v=0;0!==u.cmpn(0);){var g=f.div(u);c=f.sub(g.mul(u)),h=y.sub(g.mul(p));var w=b.sub(g.mul(m));if(!s&&c.cmp(l)<0)t=d.neg(),i=p,s=c.neg(),r=h;else if(s&&2===++v)break;d=c,f=u,u=c,y=p,p=h,b=m,m=w}o=c.neg(),n=h;var k=s.sqr().add(r.sqr());return o.sqr().add(n.sqr()).cmp(k)>=0&&(o=t,n=i),s.negative&&(s=s.neg(),r=r.neg()),o.negative&&(o=o.neg(),n=n.neg()),[{a:s,b:r},{a:o,b:n}]},c.prototype._endoSplit=function(e){var t=this.endo.basis,i=t[0],s=t[1],r=s.b.mul(e).divRound(this.n),a=i.b.neg().mul(e).divRound(this.n),o=r.mul(i.a),n=a.mul(s.a),d=r.mul(i.b),c=a.mul(s.b);return{k1:e.sub(o).sub(n),k2:d.add(c).neg()}},c.prototype.pointFromX=function(e,t){(e=new a(e,16)).red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),s=i.redSqrt();if(0!==s.redSqr().redSub(i).cmp(this.zero))throw new Error("invalid point");var r=s.fromRed().isOdd();return(t&&!r||!t&&r)&&(s=s.redNeg()),this.point(e,s)},c.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,i=e.y,s=this.a.redMul(t),r=t.redSqr().redMul(t).redIAdd(s).redIAdd(this.b);return 0===i.redSqr().redISub(r).cmpn(0)},c.prototype._endoWnafMulAdd=function(e,t,i){for(var s=this._endoWnafT1,r=this._endoWnafT2,a=0;a<e.length;a++){var o=this._endoSplit(t[a]),n=e[a],d=n._getBeta();o.k1.negative&&(o.k1.ineg(),n=n.neg(!0)),o.k2.negative&&(o.k2.ineg(),d=d.neg(!0)),s[2*a]=n,s[2*a+1]=d,r[2*a]=o.k1,r[2*a+1]=o.k2}for(var c=this._wnafMulAdd(1,s,r,2*a,i),h=0;h<2*a;h++)s[h]=null,r[h]=null;return c},o(h,n.BasePoint),c.prototype.point=function(e,t,i){return new h(this,e,t,i)},c.prototype.pointFromJSON=function(e,t){return h.fromJSON(this,e,t)},h.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,s=function(e){return i.point(e.x.redMul(i.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(s)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(s)}}}return t}},h.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},h.fromJSON=function(e,t,i){"string"===typeof t&&(t=JSON.parse(t));var s=e.point(t[0],t[1],i);if(!t[2])return s;function r(t){return e.point(t[0],t[1],i)}var a=t[2];return s.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[s].concat(a.doubles.points.map(r))},naf:a.naf&&{wnd:a.naf.wnd,points:[s].concat(a.naf.points.map(r))}},s},h.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},h.prototype.isInfinity=function(){return this.inf},h.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var i=t.redSqr().redISub(this.x).redISub(e.x),s=t.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)},h.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,i=this.x.redSqr(),s=e.redInvm(),r=i.redAdd(i).redIAdd(i).redIAdd(t).redMul(s),a=r.redSqr().redISub(this.x.redAdd(this.x)),o=r.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)},h.prototype.getX=function(){return this.x.fromRed()},h.prototype.getY=function(){return this.y.fromRed()},h.prototype.mul=function(e){return e=new a(e,16),this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},h.prototype.mulAdd=function(e,t,i){var s=[this,t],r=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(s,r):this.curve._wnafMulAdd(1,s,r,2)},h.prototype.jmulAdd=function(e,t,i){var s=[this,t],r=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(s,r,!0):this.curve._wnafMulAdd(1,s,r,2,!0)},h.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},h.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,s=function(e){return e.neg()};t.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(s)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(s)}}}return t},h.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(l,n.BasePoint),c.prototype.jpoint=function(e,t,i){return new l(this,e,t,i)},l.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),i=this.x.redMul(t),s=this.y.redMul(t).redMul(e);return this.curve.point(i,s)},l.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},l.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),i=this.z.redSqr(),s=this.x.redMul(t),r=e.x.redMul(i),a=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(i.redMul(this.z)),n=s.redSub(r),d=a.redSub(o);if(0===n.cmpn(0))return 0!==d.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=n.redSqr(),h=c.redMul(n),l=s.redMul(c),u=d.redSqr().redIAdd(h).redISub(l).redISub(l),f=d.redMul(l.redISub(u)).redISub(a.redMul(h)),p=this.z.redMul(e.z).redMul(n);return this.curve.jpoint(u,f,p)},l.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),i=this.x,s=e.x.redMul(t),r=this.y,a=e.y.redMul(t).redMul(this.z),o=i.redSub(s),n=r.redSub(a);if(0===o.cmpn(0))return 0!==n.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var d=o.redSqr(),c=d.redMul(o),h=i.redMul(d),l=n.redSqr().redIAdd(c).redISub(h).redISub(h),u=n.redMul(h.redISub(l)).redISub(r.redMul(c)),f=this.z.redMul(o);return this.curve.jpoint(l,u,f)},l.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,i=0;i<e;i++)t=t.dbl();return t}var s=this.curve.a,r=this.curve.tinv,a=this.x,o=this.y,n=this.z,d=n.redSqr().redSqr(),c=o.redAdd(o);for(i=0;i<e;i++){var h=a.redSqr(),l=c.redSqr(),u=l.redSqr(),f=h.redAdd(h).redIAdd(h).redIAdd(s.redMul(d)),p=a.redMul(l),m=f.redSqr().redISub(p.redAdd(p)),y=p.redISub(m),b=f.redMul(y);b=b.redIAdd(b).redISub(u);var v=c.redMul(n);i+1<e&&(d=d.redMul(u)),a=m,n=v,c=b}return this.curve.jpoint(a,c.redMul(r),n)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},l.prototype._zeroDbl=function(){var e,t,i;if(this.zOne){var s=this.x.redSqr(),r=this.y.redSqr(),a=r.redSqr(),o=this.x.redAdd(r).redSqr().redISub(s).redISub(a);o=o.redIAdd(o);var n=s.redAdd(s).redIAdd(s),d=n.redSqr().redISub(o).redISub(o),c=a.redIAdd(a);c=(c=c.redIAdd(c)).redIAdd(c),e=d,t=n.redMul(o.redISub(d)).redISub(c),i=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),l=this.y.redSqr(),u=l.redSqr(),f=this.x.redAdd(l).redSqr().redISub(h).redISub(u);f=f.redIAdd(f);var p=h.redAdd(h).redIAdd(h),m=p.redSqr(),y=u.redIAdd(u);y=(y=y.redIAdd(y)).redIAdd(y),e=m.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(y),i=(i=this.y.redMul(this.z)).redIAdd(i)}return this.curve.jpoint(e,t,i)},l.prototype._threeDbl=function(){var e,t,i;if(this.zOne){var s=this.x.redSqr(),r=this.y.redSqr(),a=r.redSqr(),o=this.x.redAdd(r).redSqr().redISub(s).redISub(a);o=o.redIAdd(o);var n=s.redAdd(s).redIAdd(s).redIAdd(this.curve.a),d=n.redSqr().redISub(o).redISub(o);e=d;var c=a.redIAdd(a);c=(c=c.redIAdd(c)).redIAdd(c),t=n.redMul(o.redISub(d)).redISub(c),i=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),l=this.y.redSqr(),u=this.x.redMul(l),f=this.x.redSub(h).redMul(this.x.redAdd(h));f=f.redAdd(f).redIAdd(f);var p=u.redIAdd(u),m=(p=p.redIAdd(p)).redAdd(p);e=f.redSqr().redISub(m),i=this.y.redAdd(this.z).redSqr().redISub(l).redISub(h);var y=l.redSqr();y=(y=(y=y.redIAdd(y)).redIAdd(y)).redIAdd(y),t=f.redMul(p.redISub(e)).redISub(y)}return this.curve.jpoint(e,t,i)},l.prototype._dbl=function(){var e=this.curve.a,t=this.x,i=this.y,s=this.z,r=s.redSqr().redSqr(),a=t.redSqr(),o=i.redSqr(),n=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(r)),d=t.redAdd(t),c=(d=d.redIAdd(d)).redMul(o),h=n.redSqr().redISub(c.redAdd(c)),l=c.redISub(h),u=o.redSqr();u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var f=n.redMul(l).redISub(u),p=i.redAdd(i).redMul(s);return this.curve.jpoint(h,f,p)},l.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr(),s=t.redSqr(),r=e.redAdd(e).redIAdd(e),a=r.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(s),n=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(a)).redSqr(),d=s.redIAdd(s);d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var c=r.redIAdd(o).redSqr().redISub(a).redISub(n).redISub(d),h=t.redMul(c);h=(h=h.redIAdd(h)).redIAdd(h);var l=this.x.redMul(n).redISub(h);l=(l=l.redIAdd(l)).redIAdd(l);var u=this.y.redMul(c.redMul(d.redISub(c)).redISub(o.redMul(n)));u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var f=this.z.redAdd(o).redSqr().redISub(i).redISub(n);return this.curve.jpoint(l,u,f)},l.prototype.mul=function(e,t){return e=new a(e,t),this.curve._wnafMul(this,e)},l.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),i=e.z.redSqr();if(0!==this.x.redMul(i).redISub(e.x.redMul(t)).cmpn(0))return!1;var s=t.redMul(this.z),r=i.redMul(e.z);return 0===this.y.redMul(r).redISub(e.y.redMul(s)).cmpn(0)},l.prototype.eqXToP=function(e){var t=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(i))return!0;for(var s=e.clone(),r=this.curve.redN.redMul(t);;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(r),0===this.x.cmp(i))return!0}return!1},l.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},eAlZ:function(e,t,i){"use strict";(function(e){var i=Object.prototype.toString;t.isArray=function(e,t){if(!Array.isArray(e))throw TypeError(t)},t.isBoolean=function(e,t){if("[object Boolean]"!==i.call(e))throw TypeError(t)},t.isBuffer=function(t,i){if(!e.isBuffer(t))throw TypeError(i)},t.isFunction=function(e,t){if("[object Function]"!==i.call(e))throw TypeError(t)},t.isNumber=function(e,t){if("[object Number]"!==i.call(e))throw TypeError(t)},t.isObject=function(e,t){if("[object Object]"!==i.call(e))throw TypeError(t)},t.isBufferLength=function(e,t,i){if(e.length!==t)throw RangeError(i)},t.isBufferLength2=function(e,t,i,s){if(e.length!==t&&e.length!==i)throw RangeError(s)},t.isLengthGTZero=function(e,t){if(0===e.length)throw RangeError(t)},t.isNumberInInterval=function(e,t,i,s){if(e<=t||e>=i)throw RangeError(s)}}).call(this,i("zkTx").Buffer)},eRx0:function(e,t,i){"use strict";const s=i("OjXq"),{ArgumentsRequired:r,ExchangeError:a}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bit2c",name:"Bit2C",countries:["IL"],rateLimit:3e3,has:{CORS:!1,fetchOpenOrders:!0,fetchMyTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766119-3593220e-5ece-11e7-8b3a-5a041f6bcc3f.jpg",api:"https://bit2c.co.il",www:"https://www.bit2c.co.il",referral:"https://bit2c.co.il/Aff/63bfed10-e359-420c-ab5a-ad368dab0baf",doc:["https://www.bit2c.co.il/home/api","https://github.com/OferE/bit2c"]},api:{public:{get:["Exchanges/{pair}/Ticker","Exchanges/{pair}/orderbook","Exchanges/{pair}/trades","Exchanges/{pair}/lasttrades"]},private:{post:["Merchant/CreateCheckout","Order/AddCoinFundsRequest","Order/AddFund","Order/AddOrder","Order/AddOrderMarketPriceBuy","Order/AddOrderMarketPriceSell","Order/CancelOrder","Order/AddCoinFundsRequest","Order/AddStopOrder","Payment/GetMyId","Payment/Send","Payment/Pay"],get:["Account/Balance","Account/Balance/v2","Order/MyOrders","Order/GetById","Order/AccountHistory","Order/OrderHistory"]}},markets:{"BTC/NIS":{id:"BtcNis",symbol:"BTC/NIS",base:"BTC",quote:"NIS",baseId:"Btc",quoteId:"Nis"},"ETH/NIS":{id:"EthNis",symbol:"ETH/NIS",base:"ETH",quote:"NIS",baseId:"Eth",quoteId:"Nis"},"BCH/NIS":{id:"BchabcNis",symbol:"BCH/NIS",base:"BCH",quote:"NIS",baseId:"Bchabc",quoteId:"Nis"},"LTC/NIS":{id:"LtcNis",symbol:"LTC/NIS",base:"LTC",quote:"NIS",baseId:"Ltc",quoteId:"Nis"},"ETC/NIS":{id:"EtcNis",symbol:"ETC/NIS",base:"ETC",quote:"NIS",baseId:"Etc",quoteId:"Nis"},"BTG/NIS":{id:"BtgNis",symbol:"BTG/NIS",base:"BTG",quote:"NIS",baseId:"Btg",quoteId:"Nis"},"BSV/NIS":{id:"BchsvNis",symbol:"BSV/NIS",base:"BSV",quote:"NIS",baseId:"Bchsv",quoteId:"Nis"},"GRIN/NIS":{id:"GrinNis",symbol:"GRIN/NIS",base:"GRIN",quote:"NIS",baseId:"Grin",quoteId:"Nis"}},fees:{trading:{maker:.005,taker:.005}},options:{fetchTradesMethod:"public_get_exchanges_pair_lasttrades"},exceptions:{}})}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccountBalanceV2(e),i={info:t},s=Object.keys(this.currencies);for(let r=0;r<s.length;r++){const e=s[r],a=this.account(),o=this.currencyId(e).toUpperCase();o in t&&(a.free=this.safeFloat(t,"AVAILABLE_"+o),a.total=this.safeFloat(t,o)),i[e]=a}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair:this.marketId(e)},r=await this.publicGetExchangesPairOrderbook(this.extend(s,i));return this.parseOrderBook(r)}async fetchTicker(e,t={}){await this.loadMarkets();const i={pair:this.marketId(e)},s=await this.publicGetExchangesPairTicker(this.extend(i,t)),r=this.milliseconds(),a=this.safeFloat(s,"av"),o=this.safeFloat(s,"a");let n=void 0;void 0!==o&&void 0!==a&&(n=o*a);const d=this.safeFloat(s,"ll");return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:void 0,low:void 0,bid:this.safeFloat(s,"h"),bidVolume:void 0,ask:this.safeFloat(s,"l"),askVolume:void 0,vwap:void 0,open:void 0,close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:a,baseVolume:o,quoteVolume:n,info:s}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),o=this.options.fetchTradesMethod,n={pair:r.id},d=await this[o](this.extend(n,s));if("string"===typeof d)throw new a(d);return this.parseTrades(d,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o="privatePostOrderAddOrder";const n={Amount:s,Pair:this.marketId(e)};"market"===t?o+="MarketPrice"+this.capitalize(i):(n.Price=r,n.Total=s*r,n.IsBid="buy"===i);const d=await this[o](this.extend(n,a));return{info:d,id:d.NewOrder.id}}async cancelOrder(e,t,i={}){const s={id:e};return await this.privatePostOrderCancelOrder(this.extend(s,i))}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchOpenOrders() requires a symbol argument");await this.loadMarkets();const a=this.market(e),o={pair:a.id},n=await this.privateGetOrderMyOrders(this.extend(o,s)),d=this.safeValue(n,a.id,{}),c=this.safeValue(d,"ask",[]),h=this.safeValue(d,"bid",[]);return this.parseOrders(this.arrayConcat(c,h),a,t,i)}parseOrder(e,t){const i=this.safeInteger(e,"created"),s=this.safeFloat(e,"price"),r=this.safeFloat(e,"amount");let a=void 0;void 0!==s&&void 0!==r&&(a=s*r);let o=void 0;void 0!==t&&(o=t.symbol);let n=this.safeValue(e,"type");0===n?n="buy":1===n&&(n="sell");const d=this.safeString(e,"id"),c=this.safeString(e,"status");return{id:d,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:c,symbol:o,type:void 0,side:n,price:s,amount:r,filled:void 0,remaining:void 0,cost:a,trades:void 0,fee:void 0,info:e}}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==i&&(a.take=i),a.take=i,void 0!==t&&(a.toTime=this.ymd(this.milliseconds(),"."),a.fromTime=this.ymd(t,".")),void 0!==e&&(r=this.market(e),a.pair=r.id);const o=await this.privateGetOrderOrderHistory(this.extend(a,s));return this.parseTrades(o,r,t,i)}parseTrade(e,t){let i=void 0,s=void 0,r=void 0,a=void 0,o=void 0,n=void 0,d=void 0;const c=this.safeString(e,"reference");if(void 0!==c){i=this.safeTimestamp(e,"ticks"),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"firstAmount");const h=c.split("|");if(void 0===t){const i=this.safeString(e,"pair");i in this.markets_by_id[i]?t=this.markets_by_id[i]:h[0]in this.markets_by_id&&(t=this.markets_by_id[h[0]])}o=h[1],s=h[2],d=this.safeInteger(e,"action"),0===d?d="buy":1===d&&(d="sell"),n=this.safeFloat(e,"feeAmount")}else i=this.safeTimestamp(e,"date"),s=this.safeString(e,"tid"),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),d=this.safeValue(e,"isBid"),void 0!==d&&(d=d?"buy":"sell");let h=void 0;return void 0!==t&&(h=t.symbol),{info:e,id:s,timestamp:i,datetime:this.iso8601(i),symbol:h,order:o,type:void 0,side:d,takerOrMaker:void 0,price:r,amount:a,cost:r*a,fee:{cost:n,currency:"NIS",rate:void 0}}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s);if("public"===t)o+=".json";else{this.checkRequiredCredentials();const e=this.nonce(),t=this.extend({nonce:e},s),n=this.urlencode(t);"GET"===i?Object.keys(t).length&&(o+="?"+n):a=n;const d=this.hmac(this.encode(n),this.encode(this.secret),"sha512","base64");r={"Content-Type":"application/x-www-form-urlencoded",key:this.apiKey,sign:this.decode(d)}}return{url:o,method:i,body:a,headers:r}}}},eYCJ:function(e,t,i){"use strict";const s=i("NQdM");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coolcoin",name:"CoolCoin",countries:["HK"],urls:{logo:"https://user-images.githubusercontent.com/1294454/36770529-be7b1a04-1c5b-11e8-9600-d11f1996b539.jpg",api:{web:"https://www.coolcoin.com/coin",rest:"https://www.coolcoin.com/api/v1"},www:"https://www.coolcoin.com",doc:"https://www.coolcoin.com/help.api.html",fees:"https://www.coolcoin.com/spend.price.html",referral:"https://www.coolcoin.com/user/register?invite_code=bhaega"},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:.001,BCH:.002,ETH:.01,ETC:.01,LTC:.001,TBC:"1%",HSR:"1%",NEO:"1%",SDC:"1%",EOS:"1%",BTM:"1%",XAS:"1%",ACT:"1%",SAK:"1%",GCS:"1%",HCC:"1%",QTUM:"1%",GEC:"1%",TRX:"1%",IFC:"1%",PAY:"1%",PGC:"1%",KTC:"1%",INT:"1%",LSK:"0.5%",SKT:"1%",SSS:"1%",BT1:"1%",BT2:"1%"}}},options:{quoteIds:["btc","usdt"]}})}}},eebJ:function(e,t,i){"use strict";const s=i("OjXq");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bl3p",name:"BL3P",countries:["NL","EU"],rateLimit:1e3,version:"1",comment:"An exchange market by BitonicNL",has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/28501752-60c21b82-6feb-11e7-818b-055ee6d0e754.jpg",api:"https://api.bl3p.eu",www:["https://bl3p.eu","https://bitonic.nl"],doc:["https://github.com/BitonicNL/bl3p-api/tree/master/docs","https://bl3p.eu/api","https://bitonic.nl/en/api"]},api:{public:{get:["{market}/ticker","{market}/orderbook","{market}/trades"]},private:{post:["{market}/money/depth/full","{market}/money/order/add","{market}/money/order/cancel","{market}/money/order/result","{market}/money/orders","{market}/money/orders/history","{market}/money/trades/fetch","GENMKT/money/info","GENMKT/money/deposit_address","GENMKT/money/new_deposit_address","GENMKT/money/wallet/history","GENMKT/money/withdraw"]}},markets:{"BTC/EUR":{id:"BTCEUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"BTC",quoteId:"EUR",maker:.0025,taker:.0025},"LTC/EUR":{id:"LTCEUR",symbol:"LTC/EUR",base:"LTC",quote:"EUR",baseId:"LTC",quoteId:"EUR",maker:.0025,taker:.0025}}})}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGENMKTMoneyInfo(e),i=this.safeValue(t,"data",{}),s=this.safeValue(i,"wallets"),r={info:i},a=Object.keys(this.currencies);for(let o=0;o<a.length;o++){const e=a[o],t=this.currency(e).id,i=this.safeValue(s,t,{}),n=this.safeValue(i,"available",{}),d=this.safeValue(i,"balance",{}),c=this.account();c.free=this.safeFloat(n,"value"),c.total=this.safeFloat(d,"value"),r[e]=c}return this.parseBalance(r)}parseBidAsk(e,t=0,i=1){return[e[t]/1e5,e[i]/1e8]}async fetchOrderBook(e,t,i={}){const s={market:this.market(e).id},r=await this.publicGetMarketOrderbook(this.extend(s,i)),a=this.safeValue(r,"data");return this.parseOrderBook(a,void 0,"bids","asks","price_int","amount_int")}async fetchTicker(e,t={}){const i={market:this.marketId(e)},s=await this.publicGetMarketTicker(this.extend(i,t)),r=this.safeTimestamp(s,"timestamp"),a=this.safeFloat(s,"last");return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(s.volume,"24h"),quoteVolume:void 0,info:s}}parseTrade(e,t){const i=this.safeString(e,"trade_id"),s=this.safeInteger(e,"date");let r=this.safeFloat(e,"price_int");void 0!==r&&(r/=1e5);let a=this.safeFloat(e,"amount_int");void 0!==a&&(a/=1e8);let o=void 0;void 0!==r&&void 0!==a&&(o=a*r);let n=void 0;return void 0!==t&&(n=t.symbol),{id:i,info:e,timestamp:s,datetime:this.iso8601(s),symbol:n,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:r,amount:a,cost:o,fee:void 0}}async fetchTrades(e,t,i,s={}){const r=this.market(e),a=await this.publicGetMarketTrades(this.extend({market:r.id},s));return this.parseTrades(a.data.trades,r,t,i)}async createOrder(e,t,i,s,r,a={}){const o=this.market(e),n={market:o.id,amount_int:parseInt(1e8*s),fee_currency:o.quote,type:"buy"===i?"bid":"ask"};"limit"===t&&(n.price_int=parseInt(1e5*r));const d=await this.privatePostMarketMoneyOrderAdd(this.extend(n,a));return{info:d,id:this.safeString(d.data,"order_id")}}async cancelOrder(e,t,i={}){const s={order_id:e};return await this.privatePostMarketMoneyOrderCancel(this.extend(s,i))}sign(e,t="public",i="GET",s={},r,a){const o=this.implodeParams(e,s);let n=this.urls.api+"/"+this.version+"/"+o;const d=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(d).length&&(n+="?"+this.urlencode(d));else{this.checkRequiredCredentials();const e=this.nonce();a=this.urlencode(this.extend({nonce:e},d));const t=this.base64ToBinary(this.secret),i=o+"\0"+a,s=this.hmac(this.encode(i),t,"sha512","base64");r={"Content-Type":"application/x-www-form-urlencoded","Rest-Key":this.apiKey,"Rest-Sign":this.decode(s)}}return{url:n,method:i,body:a,headers:r}}}},eoLT:function(e,t,i){(function(e){t.fetch=n(e.fetch)&&n(e.ReadableStream),t.writableStream=n(e.WritableStream),t.abortController=n(e.AbortController),t.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),t.blobConstructor=!0}catch(d){}var i;function s(){if(void 0!==i)return i;if(e.XMLHttpRequest){i=new e.XMLHttpRequest;try{i.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(d){i=null}}else i=null;return i}function r(e){var t=s();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(d){}return!1}var a="undefined"!==typeof e.ArrayBuffer,o=a&&n(e.ArrayBuffer.prototype.slice);function n(e){return"function"===typeof e}t.arraybuffer=t.fetch||a&&r("arraybuffer"),t.msstream=!t.fetch&&o&&r("ms-stream"),t.mozchunkedarraybuffer=!t.fetch&&a&&r("moz-chunked-arraybuffer"),t.overrideMimeType=t.fetch||!!s()&&n(s().overrideMimeType),t.vbArray=n(e.VBArray),i=null}).call(this,i("pCvA"))},fGCF:function(e,t,i){"use strict";const s=i("OjXq"),{InvalidNonce:r,InsufficientFunds:a,AuthenticationError:o,InvalidOrder:n,ExchangeError:d,OrderNotFound:c,AccountSuspended:h,BadSymbol:l,OrderImmediatelyFillable:u,RateLimitExceeded:f}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitbay",name:"BitBay",countries:["MT","EU"],rateLimit:1e3,has:{CORS:!0,withdraw:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOHLCV:!0},timeframes:{"1m":"60","3m":"180","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","4h":"14400","6h":"21600","12h":"43200","1d":"86400","3d":"259200","1w":"604800"},urls:{referral:"https://auth.bitbay.net/ref/jHlbB4mIkdS1",logo:"https://user-images.githubusercontent.com/1294454/27766132-978a7bd8-5ece-11e7-9540-bc96d1e9bbb8.jpg",www:"https://bitbay.net",api:{public:"https://bitbay.net/API/Public",private:"https://bitbay.net/API/Trading/tradingApi.php",v1_01Public:"https://api.bitbay.net/rest",v1_01Private:"https://api.bitbay.net/rest"},doc:["https://bitbay.net/public-api","https://bitbay.net/en/private-api","https://bitbay.net/account/tab-api","https://github.com/BitBayNet/API","https://docs.bitbay.net/v1.0.1-en/reference"],fees:"https://bitbay.net/en/fees"},api:{public:{get:["{id}/all","{id}/market","{id}/orderbook","{id}/ticker","{id}/trades"]},private:{post:["info","trade","cancel","orderbook","orders","transfer","withdraw","history","transactions"]},v1_01Public:{get:["trading/ticker","trading/ticker/{symbol}","trading/stats","trading/orderbook/{symbol}","trading/transactions/{symbol}","trading/candle/history/{symbol}/{resolution}"]},v1_01Private:{get:["payments/withdrawal/{detailId}","payments/deposit/{detailId}","trading/offer","trading/config/{symbol}","trading/history/transactions","balances/BITBAY/history","balances/BITBAY/balance","fiat_cantor/rate/{baseId}/{quoteId}","fiat_cantor/history"],post:["trading/offer/{symbol}","trading/config/{symbol}","balances/BITBAY/balance","balances/BITBAY/balance/transfer/{source}/{destination}","fiat_cantor/exchange"],delete:["trading/offer/{symbol}/{id}/{side}/{price}"],put:["balances/BITBAY/balance/{id}"]}},fees:{trading:{maker:.003,taker:.0043},funding:{withdraw:{BTC:9e-4,LTC:.005,ETH:.00126,LSK:.2,BCH:6e-4,GAME:.005,DASH:.001,BTG:8e-4,PLN:4,EUR:1.5}}},exceptions:{400:d,401:n,402:n,403:n,404:n,405:n,406:a,408:n,501:o,502:o,503:r,504:d,505:o,506:h,509:d,510:l,FUNDS_NOT_SUFFICIENT:a,OFFER_FUNDS_NOT_EXCEEDING_MINIMUMS:n,OFFER_NOT_FOUND:c,OFFER_WOULD_HAVE_BEEN_PARTIALLY_FILLED:u,ACTION_LIMIT_EXCEEDED:f}})}async fetchMarkets(e={}){const t=await this.v1_01PublicGetTradingTicker(e),i=[],s=this.safeValue(t,"items"),r=Object.keys(s);for(let a=0;a<r.length;a++){const e=s[r[a]],t=this.safeValue(e,"market",{}),o=this.safeValue(t,"first",{}),n=this.safeValue(t,"second",{}),d=this.safeString(o,"currency"),c=this.safeString(n,"currency"),h=d+c,l=this.safeCurrencyCode(d),u=this.safeCurrencyCode(c),f=l+"/"+u,p={amount:this.safeInteger(o,"scale"),price:this.safeInteger(n,"scale")};i.push({id:h,symbol:f,base:l,quote:u,baseId:d,quoteId:c,precision:p,active:void 0,fee:void 0,limits:{amount:{min:this.safeFloat(o,"minOffer"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(n,"minOffer"),max:void 0}},info:e})}return i}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r=await this.v1_01PrivateGetTradingOffer(this.extend({},s)),a=this.safeValue(r,"items",[]);return this.parseOrders(a,void 0,t,i,{status:"open"})}parseOrder(e,t){const i=this.safeString(e,"market");let s=void 0;if(void 0!==i)if(i in this.markets_by_id)t=this.markets_by_id[i];else{const[e,t]=i.split("-");s=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}void 0===s&&void 0!==t&&(s=t.symbol);const r=this.safeInteger(e,"time"),a=this.safeFloat(e,"startAmount"),o=this.safeFloat(e,"currentAmount");let n=void 0;return void 0!==a&&void 0!==o&&(n=Math.max(0,a-o)),{id:this.safeString(e,"id"),clientOrderId:void 0,info:e,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,status:void 0,symbol:s,type:this.safeString(e,"mode"),side:this.safeStringLower(e,"offerType"),price:this.safeFloat(e,"rate"),amount:a,cost:void 0,filled:n,remaining:o,average:void 0,fee:void 0,trades:void 0}}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};if(e){const t=[this.marketId(e)];r.markets=t}const a={query:this.json(this.extend(r,s))},o=await this.v1_01PrivateGetTradingHistoryTransactions(a),n=this.safeValue(o,"items"),d=this.parseTrades(n,void 0,t,i);return void 0===e?d:this.filterBySymbol(d,e)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.v1_01PrivateGetBalancesBITBAYBalance(e),i=this.safeValue(t,"balances");if(void 0===i)throw new d(this.id+" empty balance response "+this.json(t));const s={info:t};for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"currency"),a=this.safeCurrencyCode(t),o=this.account();o.used=this.safeFloat(e,"lockedFunds"),o.free=this.safeFloat(e,"availableFunds"),s[a]=o}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={id:this.marketId(e)},r=await this.publicGetIdOrderbook(this.extend(s,i));return this.parseOrderBook(r)}async fetchTicker(e,t={}){await this.loadMarkets();const i={id:this.marketId(e)},s=await this.publicGetIdTicker(this.extend(i,t)),r=this.milliseconds(),a=this.safeFloat(s,"volume"),o=this.safeFloat(s,"vwap");let n=void 0;void 0!==a&&void 0!==o&&(n=a*o);const d=this.safeFloat(s,"last");return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(s,"max"),low:this.safeFloat(s,"min"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:o,open:void 0,close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(s,"average"),baseVolume:a,quoteVolume:n,info:s}}async fetchLedger(e,t,i,s={}){const r=[];if(void 0!==e){const t=this.currency(e);r.push(t.id)}let a={balanceCurrencies:r};void 0!==t&&(a.fromTime=t),void 0!==i&&(a.limit=i),a=this.extend(a,s);const o=(await this.v1_01PrivateGetBalancesBITBAYHistory({query:this.json(a)})).items;return this.parseLedger(o,void 0,t,i)}parseLedgerEntry(e,t){const i=this.safeInteger(e,"time"),s=this.safeValue(e,"balance",{}),r=this.safeString(s,"currency"),a=this.safeCurrencyCode(r),o=this.safeValue(e,"change",{});let n=this.safeFloat(o,"total"),d="in";n<0&&(d="out",n=-n);const c=this.safeString(e,"historyId"),h=this.safeString(e,"detailId"),l=this.parseLedgerEntryType(this.safeString(e,"type")),u=this.safeValue(e,"fundsBefore",{}),f=this.safeFloat(u,"total"),p=this.safeValue(e,"fundsAfter",{});return{info:e,id:c,direction:d,account:void 0,referenceId:h,referenceAccount:void 0,type:l,currency:a,amount:n,before:f,after:this.safeFloat(p,"total"),status:"ok",timestamp:i,datetime:this.iso8601(i),fee:void 0}}parseLedgerEntryType(e){return this.safeString({ADD_FUNDS:"transaction",BITCOIN_GOLD_FORK:"transaction",CREATE_BALANCE:"transaction",FUNDS_MIGRATION:"transaction",WITHDRAWAL_LOCK_FUNDS:"transaction",WITHDRAWAL_SUBTRACT_FUNDS:"transaction",WITHDRAWAL_UNLOCK_FUNDS:"transaction",TRANSACTION_COMMISSION_OUTCOME:"fee",TRANSACTION_COMMISSION_RETURN:"fee",TRANSACTION_OFFER_ABORTED_RETURN:"trade",TRANSACTION_OFFER_COMPLETED_RETURN:"trade",TRANSACTION_POST_INCOME:"trade",TRANSACTION_POST_OUTCOME:"trade",TRANSACTION_PRE_LOCKING:"trade"},e,e)}parseOHLCV(e,t,i="1m",s,r){return[parseInt(e[0]),this.safeFloat(e[1],"o"),this.safeFloat(e[1],"h"),this.safeFloat(e[1],"l"),this.safeFloat(e[1],"c"),this.safeFloat(e[1],"v")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={symbol:a.baseId+"-"+a.quoteId,resolution:this.timeframes[t]};void 0===s&&(s=100);const n=s*this.parseTimeframe(t)*1e3;void 0===i?(o.to=this.milliseconds(),o.from=o.to-n):(o.from=parseInt(i),o.to=this.sum(o.from,n));const d=await this.v1_01PublicGetTradingCandleHistorySymbolResolution(this.extend(o,r)),c=this.safeValue(d,"items",[]);return this.parseOHLCVs(c,a,t,i,s)}parseTrade(e,t){const i=this.safeInteger2(e,"time","t"),s="Buy"===this.safeString(e,"userAction")?"buy":"sell",r=this.safeValue(e,"wasTaker");let a=void 0;void 0!==r&&(a=r?"taker":"maker");const o=this.safeFloat2(e,"rate","r"),n=this.safeFloat2(e,"amount","a");let d=void 0;void 0!==n&&void 0!==o&&(d=o*n);const c=this.safeFloat(e,"commissionValue"),h=this.safeString(e,"market");let l=void 0,u=void 0,f=void 0;if(void 0!==h)if(h in this.markets_by_id)f=(t=this.markets_by_id[h]).symbol,l=t.base,u=t.quote;else{const[e,t]=h.split("-");l=this.safeCurrencyCode(e),u=this.safeCurrencyCode(t),f=l+"/"+u}void 0!==t&&(void 0===f&&(f=t.symbol),void 0===l&&(l=t.base));let p=void 0;if(void 0!==c){p={currency:"buy"===s?l:u,cost:c}}const m=this.safeString(e,"offerId");let y=void 0;return void 0!==m&&(y=m?"limit":"market"),{id:this.safeString(e,"id"),order:m,timestamp:i,datetime:this.iso8601(i),symbol:f,type:y,side:s,price:o,amount:n,cost:d,takerOrMaker:a,fee:p,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.baseId+"-"+r.quoteId};void 0!==t&&(a.fromTime=t-1),void 0!==i&&(a.limit=i);const o=await this.v1_01PublicGetTradingTransactionsSymbol(this.extend(a,s)),n=this.safeValue(o,"items");return this.parseTrades(n,e,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),n={symbol:o.baseId+"-"+o.quoteId,offerType:i,amount:s,mode:t};"limit"===t&&(n.rate=r);const d=await this.v1_01PrivatePostTradingOfferSymbol(this.extend(n,a)),c=this.milliseconds(),h=this.safeString(d,"offerId"),l=this.safeValue(d,"completed",!1)?"closed":"open";let u=0,f=void 0;const p=this.safeValue(d,"transactions");let m=void 0;if(void 0!==p){m=this.parseTrades(p,o,void 0,void 0,{timestamp:c,datetime:this.iso8601(c),symbol:e,side:i,type:t,orderId:h}),f=0;for(let e=0;e<m.length;e++)u=this.sum(u,m[e].amount),f=this.sum(f,m[e].cost)}const y=s-u;return{id:h,info:d,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:void 0,status:l,symbol:e,type:t,side:i,price:parseFloat(r),amount:parseFloat(s),cost:f,filled:u,remaining:y,average:void 0,fee:void 0,trades:m}}async cancelOrder(e,t,i={}){const s=this.safeString(i,"side");if(void 0===s)throw new d(this.id+' cancelOrder() requires a `side` parameter ("buy" or "sell")');const r=this.safeValue(i,"price");if(void 0===r)throw new d(this.id+" cancelOrder() requires a `price` parameter (float or string)");await this.loadMarkets();const a=this.market(t),o={symbol:a.baseId+"-"+a.quoteId,id:e,side:s,price:r};return this.v1_01PrivateDeleteTradingOfferSymbolIdSidePrice(this.extend(o,i))}isFiat(e){return this.safeValue({USD:!0,EUR:!0,PLN:!0},e,!1)}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();let a=void 0;const o={currency:this.currency(e).id,quantity:t};return this.isFiat(e)?a="privatePostWithdraw":(a="privatePostTransfer",void 0!==s&&(i+="?dt="+s.toString()),o.address=i),{info:await this[a](this.extend(o,r)),id:void 0}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t];if("public"===t){const t=this.omit(s,this.extractParams(e));o+="/"+this.implodeParams(e,s)+".json",Object.keys(t).length&&(o+="?"+this.urlencode(t))}else if("v1_01Public"===t){const t=this.omit(s,this.extractParams(e));o+="/"+this.implodeParams(e,s),Object.keys(t).length&&(o+="?"+this.urlencode(t))}else if("v1_01Private"===t){this.checkRequiredCredentials();const t=this.omit(s,this.extractParams(e));o+="/"+this.implodeParams(e,s);const n=this.milliseconds().toString();let d=void 0;"POST"!==i?(Object.keys(t).length&&(o+="?"+this.urlencode(t)),d=this.apiKey+n):void 0===a&&(a=this.json(t),d=this.apiKey+n+a),r={"Request-Timestamp":n,"Operation-Id":this.uuid(),"API-Key":this.apiKey,"API-Hash":this.hmac(this.encode(d),this.encode(this.secret),"sha512"),"Content-Type":"application/json"}}else this.checkRequiredCredentials(),a=this.urlencode(this.extend({method:e,moment:this.nonce()},s)),r={"Content-Type":"application/x-www-form-urlencoded","API-Key":this.apiKey,"API-Hash":this.hmac(this.encode(a),this.encode(this.secret),"sha512")};return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,o,n,c){if(void 0!==o){if("code"in o){const e=this.safeString(o,"code"),t=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,e,t),new d(t)}if("status"in o){if("Fail"===this.safeString(o,"status")){const e=this.safeValue(o,"errors"),t=this.id+" "+a;for(let i=0;i<e.length;i++){const s=e[i];this.throwExactlyMatchedException(this.exceptions,s,t)}throw new d(t)}}}}}},fR7u:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,InsufficientFunds:a,InvalidOrder:o,AuthenticationError:n,PermissionDenied:d,InvalidNonce:c,OrderNotFound:h,DDoSProtection:l}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btcbox",name:"BtcBox",countries:["JP"],rateLimit:1e3,version:"v1",has:{CORS:!1,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchTickers:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/31275803-4df755a8-aaa1-11e7-9abb-11ec2fad9f2d.jpg",api:"https://www.btcbox.co.jp/api",www:"https://www.btcbox.co.jp/",doc:"https://www.btcbox.co.jp/help/asm",fees:"https://support.btcbox.co.jp/hc/en-us/articles/360001235694-Fees-introduction"},api:{public:{get:["depth","orders","ticker"]},private:{post:["balance","trade_add","trade_cancel","trade_list","trade_view","wallet"]}},markets:{"BTC/JPY":{id:"btc",symbol:"BTC/JPY",base:"BTC",quote:"JPY",baseId:"btc",quoteId:"jpy",taker:5e-4,maker:5e-4},"ETH/JPY":{id:"eth",symbol:"ETH/JPY",base:"ETH",quote:"JPY",baseId:"eth",quoteId:"jpy",taker:.001,maker:.001},"LTC/JPY":{id:"ltc",symbol:"LTC/JPY",base:"LTC",quote:"JPY",baseId:"ltc",quoteId:"jpy",taker:.001,maker:.001},"BCH/JPY":{id:"bch",symbol:"BCH/JPY",base:"BCH",quote:"JPY",baseId:"bch",quoteId:"jpy",taker:.001,maker:.001}},exceptions:{104:n,105:d,106:c,107:o,200:a,201:o,202:o,203:h,401:h,402:l}})}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostBalance(e),i={info:t},s=Object.keys(this.currencies);for(let r=0;r<s.length;r++){const e=s[r],a=this.currency(e).id,o=a+"_balance";if(o in t){const s=this.account(),r=a+"_lock";s.free=this.safeFloat(t,o),s.used=this.safeFloat(t,r),i[e]=s}}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={};this.symbols.length>1&&(r.coin=s.baseId);const a=await this.publicGetDepth(this.extend(r,i));return this.parseOrderBook(a)}parseTicker(e,t){const i=this.milliseconds();let s=void 0;void 0!==t&&(s=t.symbol);const r=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"volume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={};this.symbols.length>1&&(s.coin=i.baseId);const r=await this.publicGetTicker(this.extend(s,t));return this.parseTicker(r,i)}parseTrade(e,t){const i=this.safeTimestamp(e,"date");let s=void 0;void 0!==t&&(s=t.symbol);const r=this.safeString(e,"tid"),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount");let n=void 0;void 0!==o&&void 0!==a&&(n=a*o);const d=this.safeString(e,"type");return{info:e,id:r,order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:s,type:void 0,side:d,takerOrMaker:void 0,price:a,amount:o,cost:n,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={};this.symbols.length>1&&(a.coin=r.baseId);const o=await this.publicGetOrders(this.extend(a,s));return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),n={amount:s,price:r,type:i,coin:o.baseId},d=await this.privatePostTradeAdd(this.extend(n,a));return this.parseOrder(d,o)}async cancelOrder(e,t,i={}){await this.loadMarkets(),void 0===t&&(t="BTC/JPY");const s=this.market(t),r={id:e,coin:s.baseId},a=await this.privatePostTradeCancel(this.extend(r,i));return this.parseOrder(a,s)}parseOrderStatus(e){return this.safeString({part:"open",all:"closed",cancelled:"canceled",closed:"closed",no:"closed"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id");let s=void 0;void 0!==this.safeString(e,"datetime")&&(s=this.parse8601(e.datetime+"+09:00"));const r=this.safeFloat(e,"amount_original"),a=this.safeFloat(e,"amount_outstanding");let o=void 0;void 0!==r&&void 0!==a&&(o=r-a);const n=this.safeFloat(e,"price");let d=void 0;void 0!==n&&void 0!==o&&(d=o*n);let c=this.parseOrderStatus(this.safeString(e,"status"));void 0===c&&void 0!==a&&0===a&&(c="closed");let h=void 0;void 0!==t&&(h=t.symbol);const l=this.safeString(e,"type");return{id:i,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,amount:r,remaining:a,filled:o,side:l,type:void 0,status:c,symbol:h,price:n,cost:d,trades:void 0,fee:void 0,info:e}}async fetchOrder(e,t,i={}){await this.loadMarkets(),void 0===t&&(t="BTC/JPY");const s=this.market(t),r=this.extend({id:e,coin:s.baseId},i),a=await this.privatePostTradeView(this.extend(r,i));return this.parseOrder(a,s)}async fetchOrdersByType(e,t,i,s,r={}){await this.loadMarkets(),void 0===t&&(t="BTC/JPY");const a=this.market(t),o={type:e,coin:a.baseId},n=await this.privatePostTradeList(this.extend(o,r)),d=this.parseOrders(n,a,i,s);if("open"===e)for(let c=0;c<d.length;c++)d[c].status="open";return d}async fetchOrders(e,t,i,s={}){return await this.fetchOrdersByType("all",e,t,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByType("open",e,t,i,s)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+e;if("public"===t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();const e=this.nonce().toString(),t=this.extend({key:this.apiKey,nonce:e},s),i=this.urlencode(t),o=this.hash(this.encode(this.secret));t.signature=this.hmac(this.encode(i),this.encode(o)),a=this.urlencode(t),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,c){if(void 0===n)return;if(e>=400)return;const h=this.safeValue(n,"result");if(void 0===h||!0===h)return;const l=this.safeValue(n,"code"),u=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions,l,u),new r(u)}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("string"===typeof n){if(n=this.strip(n),!this.isJsonEncodedObject(n))throw new r(this.id+" "+n);n=JSON.parse(n)}return n}}},fobv:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"flowbtc",name:"flowBTC",countries:["BR"],version:"v1",rateLimit:1e3,has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/28162465-cd815d4c-67cf-11e7-8e57-438bea0523a2.jpg",api:"https://publicapi.flowbtc.com.br",www:"https://www.flowbtc.com.br",doc:"https://www.flowbtc.com.br/api.html"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{post:["GetTicker","GetTrades","GetTradesByDate","GetOrderBook","GetProductPairs","GetProducts"]},private:{post:["CreateAccount","GetUserInfo","SetUserInfo","GetAccountInfo","GetAccountTrades","GetDepositAddresses","Withdraw","CreateOrder","ModifyOrder","CancelOrder","CancelAllOrders","GetAccountOpenOrders","GetOrderFee"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.0025,taker:.005}}})}async fetchMarkets(e={}){const t=await this.publicPostGetProductPairs(e),i=this.safeValue(t,"productPairs"),s={};for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"name"),a=this.safeString(e,"product1Label"),o=this.safeString(e,"product2Label"),n=this.safeCurrencyCode(a),d=this.safeCurrencyCode(o),c={amount:this.safeInteger(e,"product1DecimalPlaces"),price:this.safeInteger(e,"product2DecimalPlaces")},h=n+"/"+d;s[h]={id:t,symbol:h,base:n,quote:d,baseId:a,quoteId:o,precision:c,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},info:e}}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGetAccountInfo(e),i=this.safeValue(t,"currencies"),s={info:t};for(let r=0;r<i.length;r++){const e=i[r],t=e.name,a=this.safeCurrencyCode(t),o=this.account();o.free=this.safeFloat(e,"balance"),o.total=this.safeFloat(e,"hold"),s[a]=o}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={productPair:this.market(e).id},r=await this.publicPostGetOrderBook(this.extend(s,i));return this.parseOrderBook(r,void 0,"bids","asks","px","qty")}async fetchTicker(e,t={}){await this.loadMarkets();const i={productPair:this.market(e).id},s=await this.publicPostGetTicker(this.extend(i,t)),r=this.milliseconds(),a=this.safeFloat(s,"last");return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(s,"volume24hr"),quoteVolume:this.safeFloat(s,"volume24hrProduct2"),info:s}}parseTrade(e,t){const i=this.safeTimestamp(e,"unixtime"),s=0===e.incomingOrderSide?"buy":"sell",r=this.safeString(e,"tid"),a=this.safeFloat(e,"px"),o=this.safeFloat(e,"qty");let n=void 0;return void 0!==a&&void 0!==o&&(n=a*o),{info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,id:r,order:void 0,type:void 0,side:s,price:a,amount:o,cost:n}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={ins:r.id,startIndex:-1},o=await this.publicPostGetTrades(this.extend(a,s));return this.parseTrades(o.trades,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o="market"===t?1:0,n={ins:this.marketId(e),side:i,orderType:o,qty:s,px:this.priceToPrecision(e,r)},d=await this.privatePostCreateOrder(this.extend(n,a));return{info:d,id:d.serverOrderId}}async cancelOrder(e,t,i={}){if(await this.loadMarkets(),"ins"in i){const t={serverOrderId:e};return await this.privatePostCancelOrder(this.extend(t,i))}throw new r(this.id+" requires `ins` symbol parameter for cancelling an order")}sign(e,t="public",i="GET",s={},r,a){const o=this.urls.api+"/"+this.version+"/"+e;if("public"===t)Object.keys(s).length&&(a=this.json(s));else{this.checkRequiredCredentials();const e=this.nonce(),t=e.toString()+this.uid+this.apiKey,i=this.hmac(this.encode(t),this.encode(this.secret));a=this.json(this.extend({apiKey:this.apiKey,apiNonce:e,apiSig:i.toUpperCase()},s)),r={"Content-Type":"application/json"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){const n=await this.fetch2(e,t,i,s,a,o);if("isAccepted"in n&&n.isAccepted)return n;throw new r(this.id+" "+this.json(n))}}},g26j:function(e,t,i){"use strict";const{sleep:s,now:r}=i("LP85");e.exports={throttle:function e(t){let i=r(),a=void 0!==t.numTokens?t.numTokens:t.capacity,o=!1;const n=[];return Object.assign((e,d)=>{if(n.length>t.maxCapacity)throw new Error("Backlog is over max capacity of "+t.maxCapacity);return new Promise(async(c,h)=>{try{if(n.push({cost:d,resolve:c,reject:h}),!o){for(o=!0;n.length>0;){if((t.capacity?a>0:a>=0)&&n.length>0){let{cost:e,resolve:i,reject:s}=n[0];e=e||t.defaultCost,a>=Math.min(e,t.capacity)&&(a-=e,n.shift(),i())}const o=r(),d=o-i;i=o,a=Math.min(t.capacity,a+d*(1/e)),await s(t.delay)}o=!1}}catch(l){h(l)}})},t,{configure:i=>e(Object.assign({},t,i))})}}},g94P:function(e,t,i){"use strict";const s=i("OjXq"),{ArgumentsRequired:r,AuthenticationError:a,ExchangeError:o,InsufficientFunds:n,InvalidOrder:d,BadSymbol:c}=i("ucJe"),{ROUND:h}=i("rwG2");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitmax",name:"BitMax",countries:["CN"],rateLimit:500,certified:!1,has:{CORS:!1,fetchAccounts:!0,fetchTickers:!0,fetchOHLCV:!0,fetchMyTrades:!1,fetchOrder:!0,fetchOrders:!1,fetchOpenOrders:!0,fetchOrderTrades:!0,fetchClosedOrders:!0,fetchTransactions:!1,fetchCurrencies:!0,cancelAllOrders:!0,fetchDepositAddress:!0},timeframes:{"1m":"1","3m":"3","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","4h":"240","6h":"360","12h":"720","1d":"1d","1w":"1w","1M":"1m"},version:"v1",urls:{logo:"https://user-images.githubusercontent.com/1294454/66820319-19710880-ef49-11e9-8fbe-16be62a11992.jpg",api:"https://bitmax.io",test:"https://bitmax-test.io",www:"https://bitmax.io",doc:["https://github.com/bitmax-exchange/api-doc/blob/master/bitmax-api-doc-v1.2.md"],fees:"https://bitmax.io/#/feeRate/tradeRate",referral:"https://bitmax.io/#/register?inviteCode=EL6BXBQM"},api:{public:{get:["assets","depth","fees","quote","depth","trades","products","ticker/24hr","barhist","barhist/info","margin/ref-price"]},private:{get:["deposit","user/info","balance","order/batch","order/open","order","order/history","order/{coid}","order/fills/{coid}","transaction","margin/balance","margin/order/open","margin/order"],post:["margin/order","order","order/batch"],delete:["margin/order","order","order/all","order/batch"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001}},options:{accountGroup:void 0,parseOrderToPrecision:!1},exceptions:{exact:{2100:a,5002:c,6010:n,60060:d,600503:d},broad:{}},commonCurrencies:{BTCBEAR:"BEAR",BTCBULL:"BULL"}})}async fetchCurrencies(e={}){const t=await this.publicGetAssets(e),i={};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"assetCode"),a=this.safeCurrencyCode(r),o=this.safeInteger(e,"precisionScale"),n=this.safeFloat(e,"withdrawalFee"),d="Normal"===this.safeString(e,"status");i[a]={id:r,code:a,info:e,type:void 0,name:this.safeString(e,"assetName"),active:d,fee:n,precision:o,limits:{amount:{min:Math.pow(10,-o),max:void 0},price:{min:Math.pow(10,-o),max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(e,"minWithdrawalAmt"),max:void 0}}}}return i}async fetchMarkets(e={}){const t=await this.publicGetProducts(e),i=[];for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"symbol"),a=this.safeString(e,"baseAsset"),o=this.safeString(e,"quoteAsset"),n=this.safeCurrencyCode(a),d=this.safeCurrencyCode(o),c=n+"/"+d,h={amount:this.safeInteger(e,"qtyScale"),price:this.safeInteger(e,"notionalScale")},l="Normal"===this.safeString(e,"status");i.push({id:r,symbol:c,base:n,quote:d,baseId:a,quoteId:o,info:e,active:l,precision:h,limits:{amount:{min:this.safeFloat(e,"minQty"),max:this.safeFloat(e,"maxQty")},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(e,"minNotional"),max:this.safeFloat(e,"maxNotional")}}})}return i}calculateFee(e,t,i,s,r,a="taker",o={}){const n=this.markets[e];let d="quote";const c=n[a];let l=s*c,u=n.precision.price;return"sell"===i?l*=r:(d="base",u=n.precision.amount),l=this.decimalToPrecision(l,h,u,this.precisionMode),{type:a,currency:n[d],rate:c,cost:parseFloat(l)}}async fetchAccounts(e={}){let t=this.safeString(this.options,"accountGroup"),i=void 0;return void 0===t&&(i=await this.privateGetUserInfo(e),t=this.safeString(i,"accountGroup")),[{id:t,type:void 0,currency:void 0,info:i}]}async fetchBalance(e={}){await this.loadMarkets(),await this.loadAccounts();const t=await this.privateGetBalance(e),i={info:t},s=this.safeValue(t,"data",[]);for(let r=0;r<s.length;r++){const e=s[r],t=this.safeCurrencyCode(this.safeString(e,"assetCode")),a=this.account();a.free=this.safeFloat(e,"availableAmount"),a.used=this.safeFloat(e,"inOrderAmount"),a.total=this.safeFloat(e,"totalAmount"),i[t]=a}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id};void 0!==t&&(s.n=t);const r=await this.publicGetDepth(this.extend(s,i)),a=this.safeInteger(r,"ts"),o=this.parseOrderBook(r,a);return o.nonce=this.safeInteger(r,"seqnum"),o}parseTicker(e,t){const i=this.safeInteger(e,"barStartTime");let s=void 0;const r=this.safeString(e,"symbol");if(r in this.markets_by_id)t=this.markets_by_id[r];else if(void 0!==r){const[e,t]=r.split("/");s=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}void 0===s&&void 0!==t&&(s=t.symbol);const a=this.safeFloat(e,"closePrice");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"highPrice"),low:this.safeFloat(e,"lowPrice"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"openPrice"),close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}parseTickers(e,t){const i=[];for(let s=0;s<e.length;s++)i.push(this.parseTicker(e[s]));return this.filterByArray(i,"symbol",t)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetTicker24hr(this.extend(s,t));return this.parseTicker(r,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker24hr(t);return this.parseTickers(i,e)}parseOHLCV(e,t,i="1m",s,r){return[this.safeInteger(e,"t"),this.safeFloat(e,"o"),this.safeFloat(e,"h"),this.safeFloat(e,"l"),this.safeFloat(e,"c"),this.safeFloat(e,"v")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={symbol:a.id,interval:this.timeframes[t]},n=this.parseTimeframe(t);void 0!==i?(o.from=i,void 0!==s&&(o.to=this.sum(i,s*n*1e3,1))):void 0!==s&&(o.to=this.milliseconds(),o.from=o.to-s*n*1e3-1);const d=await this.publicGetBarhist(this.extend(o,r));return this.parseOHLCVs(d,a,t,i,s)}parseTrade(e,t){const i=this.safeInteger(e,"t"),s=this.safeFloat(e,"p"),r=this.safeFloat(e,"q");let a=void 0;void 0!==s&&void 0!==r&&(a=s*r);const o=this.safeValue(e,"bm");let n=void 0;const d=this.safeString(e,"s");if(void 0!==d)if(d in this.markets_by_id)n=(t=this.markets_by_id[d]).symbol;else{const[e,i]=t.split("/");n=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(i)}void 0===n&&void 0!==t&&(n=t.symbol);let c=void 0;const h=this.safeFloat(e,"fee");if(void 0!==h){const t=this.safeString(e,"fa");c={cost:h,currency:this.safeCurrencyCode(t)}}const l=this.safeString(e,"coid");let u=this.safeStringLower(e,"side");void 0===u&&void 0!==o&&(u=o?"buy":"sell");const f=this.safeStringLower(e,"orderType");return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:n,id:void 0,order:l,type:f,takerOrMaker:void 0,side:u,price:s,amount:r,cost:a,fee:c}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==i&&(a.n=i);const o=await this.publicGetTrades(this.extend(a,s)),n=this.safeValue(o,"trades",[]);return this.parseTrades(n,r,t,i)}parseOrderStatus(e){return this.safeString({PendingNew:"open",New:"open",PartiallyFilled:"open",Filled:"closed",Canceled:"canceled",Rejected:"rejected"},e,e)}parseOrder(e,t){const i=this.parseOrderStatus(this.safeString(e,"status")),s=this.safeString(e,"symbol");let r=void 0;if(void 0!==s)if(s in this.markets_by_id)t=this.markets_by_id[s];else{const[e,t]=s.split("/");r=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}void 0===r&&void 0!==t&&(r=t.symbol);const a=this.safeInteger(e,"sendingTime");let o=this.safeFloat(e,"orderPrice");const n=this.safeFloat(e,"orderQty"),d=this.safeFloat(e,"filledQty");let c=void 0,h=this.safeFloat(e,"cummulativeQuoteQty");void 0!==d&&(void 0!==n&&(c=n-d,this.options.parseOrderToPrecision&&(c=parseFloat(this.amountToPrecision(r,c))),c=Math.max(c,0)),void 0!==o&&void 0===h&&(h=o*d));const l=this.safeString(e,"coid");let u=this.safeString(e,"orderType");void 0!==u&&(u=u.toLowerCase(),"market"===u&&0===o&&void 0!==h&&void 0!==d&&h>0&&d>0&&(o=h/d));const f=this.safeStringLower(e,"side"),p={cost:this.safeFloat(e,"fee"),currency:this.safeString(e,"feeAsset")},m=this.safeFloat(e,"avgPrice");return{info:e,id:l,clientOrderId:l,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:r,type:u,side:f,price:o,amount:n,cost:h,average:m,filled:d,remaining:c,status:i,fee:p,trades:void 0}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets(),await this.loadAccounts();const o=this.market(e),n={coid:this.coid(),symbol:o.id,orderQty:this.amountToPrecision(e,s),orderType:t,side:i};"limit"!==t&&"stop_limit"!==t||(n.orderPrice=this.priceToPrecision(e,r));const d=await this.privatePostOrder(this.extend(n,a)),c=this.safeValue(d,"data",{});return this.parseOrder(c,o)}async fetchOrder(e,t,i={}){await this.loadMarkets(),await this.loadAccounts();let s=void 0;void 0!==t&&(s=this.market(t));const r={coid:e},a=await this.privateGetOrderCoid(this.extend(r,i)),o=this.safeValue(a,"data",{});return this.parseOrder(o,s)}async fetchOrderTrades(e,t,i,s,r={}){await this.loadMarkets(),await this.loadAccounts();let a=void 0;void 0!==t&&(a=this.market(t));const o={coid:e},n=await this.privateGetOrderFillsCoid(this.extend(o,r)),d=this.safeValue(n,"data",{});return this.parseTrades(d,a,i,s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets(),await this.loadAccounts();let r=void 0;const a={};void 0!==e&&(r=this.market(e),a.symbol=r.id);const o=await this.privateGetOrderOpen(this.extend(a,s)),n=this.safeValue(o,"data",[]);return this.parseOrders(n,r,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets(),await this.loadAccounts();let r=void 0;const a={};void 0!==e&&(r=this.market(e),a.symbol=r.id),void 0!==t&&(a.startTime=t),void 0!==i&&(a.n=i);const o=await this.privateGetOrderHistory(this.extend(a,s)),n=this.safeValue(o,"data",{}),d=this.safeValue(n,"data",[]);return this.parseOrders(d,r,t,i)}async cancelOrder(e,t,i={}){if(void 0===t)throw new r(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets(),await this.loadAccounts();const s={symbol:this.market(t).id,coid:this.coid(),origCoid:e},a=await this.privateDeleteOrder(this.extend(s,i)),o=this.safeValue(a,"data",{});return this.parseOrder(o)}async cancelAllOrders(e,t={}){await this.loadMarkets(),await this.loadAccounts();const i={};let s=void 0;return void 0!==e&&(s=this.market(e),i.symbol=s.id),await this.privateDeleteOrderAll(this.extend(i,t))}coid(){return this.uuid().split("-").join("").slice(0,32)}async fetchDepositAddress(e,t={}){await this.loadMarkets(),await this.loadAccounts();const i=this.currency(e),s={requestId:this.coid(),assetCode:i.id},r=await this.privateGetDeposit(this.extend(s,t));let a=this.safeValue(r,"data");if(Array.isArray(a)){const e=this.safeValue(a,0,{});a=this.safeValue(e,"addressData",{})}const o=this.safeString(a,"address"),n=this.safeString(a,"destTag");return this.checkAddress(o),{currency:e,address:o,tag:n,info:r}}sign(e,t="public",i="GET",s={},r,a){let o="/api/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let t=this.safeString(this.options,"accountGroup");void 0===t&&void 0!==this.accounts&&(t=this.accounts[0].id),void 0!==t&&(o="/"+t+o);const s=this.safeString(n,"coid");n.time=this.milliseconds().toString();let d=n.time+"+"+e.replace("/{coid}","");r={"x-auth-key":this.apiKey,"x-auth-timestamp":n.time,"Content-Type":"application/json"},void 0!==s&&(d+="+"+s,r["x-auth-coid"]=s);const c=this.hmac(this.encode(d),this.encode(this.secret),"sha256","base64");r["x-auth-signature"]=this.decode(c),"GET"===i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):a=this.json(n)}return o=this.urls.api+o,{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,n,d,c){if(void 0===n)return;const h=this.safeString(n,"code"),l=this.safeString(n,"message");if(void 0!==h&&"0"!==h||void 0!==l){const e=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,h,e),this.throwExactlyMatchedException(this.exceptions.exact,l,e),this.throwBroadlyMatchedException(this.exceptions.broad,l,e),new o(e)}}}},gVbT:function(e,t,i){"use strict";var s=i("tk5I"),r=i("3NQs").utils.assert;function a(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=a,a.fromPublic=function(e,t,i){return t instanceof a?t:new a(e,{pub:t,pubEnc:i})},a.fromPrivate=function(e,t,i){return t instanceof a?t:new a(e,{priv:t,privEnc:i})},a.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},a.prototype.getPublic=function(e,t){return"string"===typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},a.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},a.prototype._importPrivate=function(e,t){this.priv=new s(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},a.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?r(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||r(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},a.prototype.derive=function(e){return e.mul(this.priv).getX()},a.prototype.sign=function(e,t,i){return this.ec.sign(e,this,t,i)},a.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},a.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},gkJv:function(e,t,i){e.exports={pkcs1:i("19XG"),isEncryption:function(t){return e.exports[t]&&e.exports[t].isEncryption},isSignature:function(t){return e.exports[t]&&e.exports[t].isSignature}}},hIzy:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,AuthenticationError:a,InsufficientFunds:o,ExchangeNotAvailable:n,InvalidOrder:d,BadRequest:c,OrderNotFound:h,NotSupported:l}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"anxpro",name:"ANXPro",countries:["JP","SG","HK","NZ"],rateLimit:1500,userAgent:this.userAgents.chrome,has:{CORS:!1,fetchCurrencies:!0,fetchOHLCV:!1,fetchTrades:!1,fetchOpenOrders:!0,fetchDepositAddress:!0,fetchTransactions:!0,fetchMyTrades:!0,createDepositAddress:!1,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27765983-fd8595da-5ec9-11e7-82e3-adb3ab8c2612.jpg",api:{public:"https://anxpro.com/api/2",private:"https://anxpro.com/api/2",v3public:"https://anxpro.com/api/3",v3private:"https://anxpro.com/api/3"},www:"https://anxpro.com",doc:["https://anxv2.docs.apiary.io","https://anxv3.docs.apiary.io","https://anxpro.com/pages/api"]},api:{v3public:{get:["currencyStatic"]},v3private:{post:["register/register","register/verifyRegistration","register/resendVerification","register/autoRegister","account","subaccount/new","transaction/list","order/list","trade/list","send","receive","receive/create","batch/new","batch/add","batch/list","batch/info","batch/closeForSend","order/new","order/info","order/cancel","retail/quote","retail/trade","validateAddress","address/check","alert/create","alert/delete","alert/list","kyc/personal","kyc/document","kyc/status","kyc/verifyCode","news/list","press/list","announcements/list","apiDoc/list"]},public:{get:["{currency_pair}/money/ticker","{currency_pair}/money/depth/full","{currency_pair}/money/trade/fetch"]},private:{post:["{currency_pair}/money/order/add","{currency_pair}/money/order/cancel","{currency_pair}/money/order/quote","{currency_pair}/money/order/result","{currency_pair}/money/orders","money/{currency}/address","money/{currency}/send_simple","money/info","money/trade/list","money/wallet/history"]}},httpExceptions:{403:a},exceptions:{exact:{"Insufficient Funds":o,"Trade value too small":d,"The currency pair is not supported":c,"Order amount is too low":d,"Order amount is too high":d,"order rate is too low":d,"order rate is too high":d,"Too many open orders":d,"Unexpected error":r,"Order Engine is offline":n,"No executed order with that identifer found":h,"Unknown server error, please contact support.":r,"Not available":n}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.002}},options:{fetchMyTradesMethod:"private_post_money_trade_list"}})}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const r={};void 0!==t&&(r.from=t),void 0!==i&&(r.max=i);const a=void 0===e?void 0:this.currency(e);void 0!==a&&(r.ccy=a.id);const o=await this.v3privatePostTransactionList(this.extend(r,s)),n=this.safeValue(o,"transactions",[]),d=this.groupBy(n,"transactionType",[]),c=this.arrayConcat(this.safeValue(d,"DEPOSIT",[]),this.safeValue(d,"WITHDRAWAL",[]));return this.parseTransactions(c,a,t,i)}parseTransaction(e,t){const i=this.safeInteger(e,"received"),s=this.safeInteger(e,"processed"),r=this.safeString(e,"transactionType");let a=void 0,o=this.safeFloat(e,"amount"),n=this.safeString(e,"coinAddress"),d=void 0;if("WITHDRAWAL"===r){if(a="withdrawal",o=-o,n&&n.indexOf("?dt=")>=0){const e=n.split("?dt=");n=e[0],d=e[1]}}else if("DEPOSIT"===r){if(!n){const t=this.safeString(e,"displayDescription").replace("Deposit to: ","");if(t.length>0)if(t.indexOf("?dt=")>=0){const e=t.split("?dt=");n=e[0],d=e[1]}else n=t}a="deposit"}const c=this.safeString(e,"ccy"),h=this.safeCurrencyCode(c),l=this.safeString(e,"transactionState"),u=this.parseTransactionStatus(l),f=this.safeFloat(e,"fee"),p=o-f;return{timestamp:i,datetime:this.iso8601(i),id:this.safeString(e,"uuid"),currency:h,amount:p,address:n,tag:d,status:u,type:a,updated:s,txid:this.safeString(e,"coinTransactionId"),fee:{cost:f,currency:h},info:e}}parseTransactionStatus(e){return this.safeString({PROCESSED:"ok",REVERSED:"canceled",CANCELLED_INSUFFICIENT_FUNDS:"canceled",CANCELLED_LIMIT_BREACH:"canceled"},e,e)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};void 0!==i&&(r.max=i);const a=this.safeString(this.options,"fetchMyTradesMethod","private_post_money_trade_list"),o=await this[a](this.extend(r,s)),n=this.safeValue2(o,"trades","data",[]),d=void 0===e?void 0:this.market(e);return this.parseTrades(n,d,t,i)}parseTrade(e,t){const i=this.safeString(e,"tradeId"),s=this.safeString(e,"orderId"),r=this.safeInteger(e,"timestamp"),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"tradedCurrencyFillAmount"),n=this.safeFloat(e,"settlementCurrencyFillAmount"),d=this.safeStringLower(e,"side");let c=void 0;const h=this.safeString(e,"ccyPair");return h in this.markets_by_id&&(t=this.markets_by_id[h]),void 0===c&&void 0!==t&&(c=t.symbol),{id:i,order:s,timestamp:r,datetime:this.iso8601(r),symbol:c,type:void 0,side:d,price:a,amount:o,cost:n,fee:void 0,info:e}}async fetchCurrencies(e={}){const t=await this.v3publicGetCurrencyStatic(e),i=this.safeValue(t,"currencyStatic",{}),s=this.safeValue(i,"currencies",{}),r={},a=Object.keys(s);for(let o=0;o<a.length;o++){const e=a[o],t=s[e],i=this.safeCurrencyCode(e),n=this.safeValue(t,"engineSettings"),d=this.safeValue(n,"depositsEnabled"),c=this.safeValue(n,"withdrawalsEnabled"),h=this.safeValue(n,"displayEnabled"),l=d&&c&&h,u=this.safeInteger(t,"decimals"),f=this.safeFloat(t,"networkFee"),p=this.safeStringLower(t,"type");r[i]={id:e,code:i,info:t,name:i,type:p,active:l,precision:u,fee:f,limits:{amount:{min:this.safeFloat(t,"minOrderSize"),max:this.safeFloat(t,"maxOrderSize")},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(t,"minOrderValue"),max:this.safeFloat(t,"maxOrderValue")},withdraw:{min:void 0,max:void 0}}}}return r}async fetchMarkets(e={}){const t=await this.v3publicGetCurrencyStatic(e),i=this.safeValue(t,"currencyStatic",{}),s=this.safeValue(i,"currencies",{}),r=this.safeValue(i,"currencyPairs",{}),a=[],o=Object.keys(r);for(let n=0;n<o.length;n++){const e=o[n],t=r[e],i=this.safeString(t,"tradedCcy"),d=this.safeString(t,"settlementCcy"),c=this.safeCurrencyCode(i),h=this.safeCurrencyCode(d),l=c+"/"+h,u=this.safeValue(s,i,{}),f=this.safeValue(s,d,{}),p={price:this.safeInteger(t,"priceDecimals"),amount:this.safeInteger(u,"decimals")},m=this.safeValue(t,"engineSettings"),y=this.safeValue(m,"displayEnabled"),b=this.safeValue(m,"tradingEnabled"),v=y&&b;a.push({id:e,symbol:l,base:c,quote:h,baseId:i,quoteId:d,precision:p,active:v,limits:{price:{min:this.safeFloat(t,"minOrderRate"),max:this.safeFloat(t,"maxOrderRate")},amount:{min:this.safeFloat(u,"minOrderSize"),max:this.safeFloat(u,"maxOrderSize")},cost:{min:this.safeFloat(f,"minOrderValue"),max:this.safeFloat(f,"maxOrderValue")}},info:t})}return a}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostMoneyInfo(e),i=this.safeValue(t,"data",{}),s=this.safeValue(i,"Wallets",{}),r=Object.keys(s),a={info:i};for(let o=0;o<r.length;o++){const e=r[o],t=this.safeCurrencyCode(e),i=this.account(),n=this.safeValue(s,e);i.free=this.safeFloat(n.Available_Balance,"value"),i.total=this.safeFloat(n.Balance,"value"),a[t]=i}return this.parseBalance(a)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={currency_pair:this.marketId(e)},r=await this.publicGetCurrencyPairMoneyDepthFull(this.extend(s,i)),a=this.safeValue(r,"data",{}),o=this.safeIntegerProduct(a,"dataUpdateTime",.001);return this.parseOrderBook(a,o,"bids","asks","price","amount")}async fetchTicker(e,t={}){await this.loadMarkets();const i={currency_pair:this.marketId(e)},s=await this.publicGetCurrencyPairMoneyTicker(this.extend(i,t)),r=this.safeValue(s,"data",{}),a=this.safeIntegerProduct(r,"dataUpdateTime",.001),o=this.safeFloat(r.buy,"value"),n=this.safeFloat(r.sell,"value"),d=this.safeFloat(r.vol,"value"),c=this.safeFloat(r.last,"value");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(r.high,"value"),low:this.safeFloat(r.low,"value"),bid:o,bidVolume:void 0,ask:n,askVolume:void 0,vwap:void 0,open:void 0,close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(r.avg,"value"),baseVolume:d,quoteVolume:void 0,info:r}}async fetchTrades(e,t,i,s={}){throw new l(this.id+" switched off the trades endpoint, see their docs at https://docs.anxv2.apiary.io")}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r={};void 0!==i&&(r.max=i);const a=await this.v3privatePostOrderList(this.extend(r,s)),o=this.safeValue(a,"orders",[]),n=void 0===e?void 0:this.market(e);return this.parseOrders(o,n,t,i)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={currency_pair:r.id},o=await this.privatePostCurrencyPairMoneyOrders(this.extend(a,s));return this.parseOrders(this.safeValue(o,"data",{}),r,t,i)}parseOrder(e,t){return"orderId"in e?this.parseOrderV3(e,t):this.parseOrderV2(e,t)}parseOrderStatus(e){return this.safeString({ACTIVE:"open",FULL_FILL:"closed",CANCEL:"canceled",USER_CANCEL_PARTIAL:"canceled",PARTIAL_FILL:"canceled"},e,e)}parseOrderV3(e,t){const i=this.parseOrderStatus(this.safeString(e,"orderStatus")),s=this.safeCurrencyCode(this.safeString(e,"tradedCurrency"))+"/"+this.safeCurrencyCode(this.safeString(e,"settlementCurrency")),r="true"===this.safeString(e,"buyTradedCurrency")?"buy":"sell",a=this.safeInteger(e,"timestamp");let o=void 0;const n=[];let d=0;const c=this.safeStringLower(e,"orderType");for(let m=0;m<e.trades.length;m++){const t=e.trades[m],i=this.safeInteger(t,"timestamp");(!o||o<i)&&(o=i);const s=this.extend(this.parseTrade(t),{side:r,type:c});n.push(s),d=this.sum(d,s.amount)}const h=this.safeFloat(e,"limitPriceInSettlementCurrency"),l=this.safeFloat(e,"executedAverageRate"),u="market"===c?0:this.safeFloat(e,"tradedCurrencyAmountOutstanding");let f=this.safeFloat(e,"tradedCurrencyAmount");if(!f){f=this.safeFloat(e,"settlementCurrencyAmount")/l}const p=l*d;return{id:this.safeString(e,"orderId"),clientOrderId:void 0,symbol:s,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:o,type:c,side:r,price:h,cost:p,amount:f,remaining:u,filled:d,status:i,fee:void 0,trades:n,info:e}}parseOrderV2(e,t){const i=this.safeString(e,"oid"),s=this.safeString(e,"status"),r=this.safeInteger(e,"date"),a=this.safeString(e,"item")+"/"+this.safeString(e,"currency");let o=void 0;"undefined"!==typeof(t=this.safeValue(this.markets_by_id,a))&&(o=t.symbol);const n=this.safeValue(e,"amount",{}),d=this.safeValue(e,"effective_amount",{}),c=this.safeValue(e,"price",{}),h=this.safeFloat(d,"value"),l=this.safeFloat(n,"volume"),u=this.safeFloat(c,"value");let f=void 0,p=void 0;"undefined"!==typeof l&&"undefined"!==typeof h&&(f=l-h,p=u*f);let m=this.safeString(e,"type");m="offer"===m?"sell":"buy";return{info:e,id:i,clientOrderId:void 0,symbol:o,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,type:"limit",side:m,price:u,cost:p,amount:l,remaining:h,filled:f,status:s,fee:void 0,trades:void 0}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),n=Math.pow(10,o.precision.amount),d={currency_pair:o.id,amount_int:parseInt(s*n)};if("limit"===t){const e=Math.pow(10,o.precision.price);d.price_int=parseInt(r*e)}d.type="buy"===i?"bid":"ask";const c=await this.privatePostCurrencyPairMoneyOrderAdd(this.extend(d,a));return{info:c,id:c.data}}async cancelOrder(e,t,i={}){return await this.privatePostCurrencyPairMoneyOrderCancel({oid:e})}getAmountMultiplier(e){return this.safeInteger({BTC:1e8,LTC:1e8,STR:1e8,XRP:1e8,DOGE:1e8},e,100)}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a=this.currency(e),o=this.getAmountMultiplier(e),n={currency:a,amount_int:parseInt(t*o),address:i};void 0!==s&&(n.destinationTag=s);const d=await this.privatePostMoneyCurrencySendSimple(this.extend(n,r));return{info:d,id:d.data.transactionId}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privatePostMoneyCurrencyAddress(this.extend(i,t)),r=this.safeValue(s,"data",{}),a=this.safeString(r,"addr");return this.checkAddress(a),{currency:e,address:a,tag:void 0,info:s}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){const o=this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));let d=this.urls.api[t]+"/"+o;if("public"===t||"v3public"===t)Object.keys(n).length&&(d+="?"+this.urlencode(n));else{this.checkRequiredCredentials();const e=this.nonce();let i=void 0,s=void 0;if("v3private"===t){a=this.json(this.extend({tonce:1e3*e},n)),i=d.replace("https://anxpro.com/","")+"\0"+a,s="application/json"}else i=o+"\0"+(a=this.urlencode(this.extend({nonce:e},n))),s="application/x-www-form-urlencoded";const c=this.base64ToBinary(this.secret),h=this.hmac(this.encode(i),c,"sha512","base64");r={"Content-Type":s,"Rest-Key":this.apiKey,"Rest-Sign":this.decode(h)}}return{url:d,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,c){if(void 0===n||""===n)return;const h=this.safeString(n,"result"),l=this.safeString(n,"resultCode"),u=this.safeString(n,"status");if(void 0!==h&&"success"!==h||void 0!==l&&"OK"!==l||void 0!==u){const e=this.safeString(n,"error"),t=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,l,t),this.throwExactlyMatchedException(this.exceptions.exact,e,t),this.throwExactlyMatchedException(this.exceptions.exact,u,t),this.throwBroadlyMatchedException(this.exceptions.broad,e,t),new r(t)}}}},hTj0:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ExchangeNotAvailable:a,AuthenticationError:o,BadRequest:n,PermissionDenied:d,InvalidAddress:c}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bithumb",name:"Bithumb",countries:["KR"],rateLimit:500,has:{CORS:!0,fetchTickers:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/30597177-ea800172-9d5e-11e7-804c-b9d4fa9b56b0.jpg",api:{public:"https://api.bithumb.com/public",private:"https://api.bithumb.com"},www:"https://www.bithumb.com",doc:"https://apidocs.bithumb.com",fees:"https://en.bithumb.com/customer_support/info_fee"},api:{public:{get:["ticker/{currency}","ticker/all","orderbook/{currency}","orderbook/all","transaction_history/{currency}","transaction_history/all"]},private:{post:["info/account","info/balance","info/wallet_address","info/ticker","info/orders","info/user_transactions","trade/place","info/order_detail","trade/cancel","trade/btc_withdrawal","trade/krw_deposit","trade/krw_withdrawal","trade/market_buy","trade/market_sell"]}},fees:{trading:{maker:.0025,taker:.0025}},exceptions:{"Bad Request(SSL)":n,"Bad Request(Bad Method)":n,"Bad Request.(Auth Data)":o,"Not Member":o,"Invalid Apikey":o,"Method Not Allowed.(Access IP)":d,"Method Not Allowed.(BTC Adress)":c,"Method Not Allowed.(Access)":d,"Database Fail":a,"Invalid Parameter":n,5600:r,"Unknown Error":r,"After May 23th, recent_transactions is no longer, hence users will not be able to connect to recent_transactions":r}})}async fetchMarkets(e={}){const t=await this.publicGetTickerAll(e),i=this.safeValue(t,"data"),s=Object.keys(i),r=[];for(let a=0;a<s.length;a++){const e=s[a];if("date"===e)continue;const t=i[e],o=e,n="KRW",d=e+"/"+n;let c=!0;if(Array.isArray(t)){0===t.length&&(c=!1)}r.push({id:e,symbol:d,base:o,quote:n,info:t,active:c,precision:{amount:void 0,price:void 0},limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}})}return r}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostInfoBalance(this.extend({currency:"ALL"},e)),i={info:t},s=this.safeValue(t,"data"),r=Object.keys(this.currencies);for(let a=0;a<r.length;a++){const e=r[a],t=this.account(),o=this.currency(e),n=this.safeStringLower(o,"id");t.total=this.safeFloat(s,"total_"+n),t.used=this.safeFloat(s,"in_use_"+n),t.free=this.safeFloat(s,"available_"+n),i[e]=t}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={currency:this.market(e).base};void 0!==t&&(s.count=t);const r=await this.publicGetOrderbookCurrency(this.extend(s,i)),a=this.safeValue(r,"data"),o=this.safeInteger(a,"timestamp");return this.parseOrderBook(a,o,"bids","asks","price","quantity")}parseTicker(e,t){const i=this.safeInteger(e,"date");let s=void 0;void 0!==t&&(s=t.symbol);const r=this.safeFloat(e,"opening_price"),a=this.safeFloat(e,"closing_price");let o=void 0,n=void 0,d=void 0;void 0!==a&&void 0!==r&&(o=a-r,r>0&&(n=o/r*100),d=this.sum(r,a)/2);const c=this.safeFloat(e,"units_traded_24H"),h=this.safeFloat(e,"acc_trade_value_24H");let l=void 0;return void 0!==h&&void 0!==c&&(l=h/c),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"max_price"),low:this.safeFloat(e,"min_price"),bid:this.safeFloat(e,"buy_price"),bidVolume:void 0,ask:this.safeFloat(e,"sell_price"),askVolume:void 0,vwap:l,open:r,close:a,last:a,previousClose:void 0,change:o,percentage:n,average:d,baseVolume:c,quoteVolume:h,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickerAll(t),s={},r=this.safeInteger(i.data,"date"),a=this.omit(i.data,"date"),o=Object.keys(a);for(let n=0;n<o.length;n++){const e=o[n];let t=e,i=void 0;e in this.markets_by_id&&(i=this.markets_by_id[e],t=i.symbol);const d=a[e];Array.isArray(d)||(d.date=r,s[t]=this.parseTicker(d,i))}return s}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={currency:i.base},r=await this.publicGetTickerCurrency(this.extend(s,t));return this.parseTicker(r.data,i)}parseTrade(e,t){const i=e.transaction_date.split(" "),s=i[0];let r=i[1];r.length<8&&(r="0"+r);let a=this.parse8601(s+" "+r);a-=324e5;let o=this.safeString(e,"type");o="ask"===o?"sell":"buy";const n=this.safeString(e,"cont_no");let d=void 0;void 0!==t&&(d=t.symbol);const c=this.safeFloat(e,"price"),h=this.safeFloat(e,"units_traded");let l=void 0;return void 0!==h&&void 0!==c&&(l=c*h),{id:n,info:e,timestamp:a,datetime:this.iso8601(a),symbol:d,order:void 0,type:void 0,side:o,takerOrMaker:void 0,price:c,amount:h,cost:l,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={currency:r.base};void 0===i&&(a.count=i);const o=await this.publicGetTransactionHistoryCurrency(this.extend(a,s));return this.parseTrades(o.data,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e);let n=void 0,d="privatePostTrade";"limit"===t?(n={order_currency:o.id,Payment_currency:o.quote,units:s,price:r,type:"buy"===i?"bid":"ask"},d+="Place"):"market"===t&&(n={currency:o.id,units:s},d+="Market"+this.capitalize(i));const c=await this[d](this.extend(n,a));return{info:c,id:this.safeString(c,"order_id")}}async cancelOrder(e,t,i={}){if(!("side"in i))throw new r(this.id+" cancelOrder requires a `side` parameter (sell or buy) and a `currency` parameter");const s=this.safeString(i,"currency");if(void 0===s)throw new r(this.id+" cancelOrder requires a `currency` parameter (a currency id)");const a="buy"===i.side?"bid":"ask";i=this.omit(i,["side","currency"]);const o={order_id:e,type:a,currency:s};return await this.privatePostTradeCancel(this.extend(o,i))}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const o=this.currency(e),n={units:t,address:i,currency:o.id};if("XRP"===o||"XMR"===o){const t=this.safeString(a,"destination");if(void 0===s&&void 0===t)throw new r(this.id+" "+e+" withdraw() requires a tag argument or an extra destination param");void 0!==s&&(n.destination=s)}return{info:await this.privatePostTradeBtcWithdrawal(this.extend(n,a)),id:void 0}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){const o="/"+this.implodeParams(e,s);let n=this.urls.api[t]+o;const d=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(d).length&&(n+="?"+this.urlencode(d));else{this.checkRequiredCredentials(),a=this.urlencode(this.extend({endpoint:o},d));const e=this.nonce().toString(),t=o+"\0"+a+"\0"+e,i=this.hmac(this.encode(t),this.encode(this.secret),"sha512"),s=this.decode(this.stringToBase64(this.encode(i)));r={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded","Api-Key":this.apiKey,"Api-Sign":s.toString(),"Api-Nonce":e}}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,c){if(void 0!==n&&"status"in n){const e=this.safeString(n,"status"),t=this.safeString(n,"message");if(void 0!==e){if("0000"===e)return;const i=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions,e,i),this.throwExactlyMatchedException(this.exceptions,t,i),new r(i)}}}async request(e,t="public",i="GET",s={},a,o){const n=await this.fetch2(e,t,i,s,a,o);if("status"in n){if("0000"===n.status)return n;throw new r(this.id+" "+this.json(n))}return n}}},hawN:function(e,t,i){"use strict";e.exports={BaseError:{ExchangeError:{AuthenticationError:{PermissionDenied:{},AccountSuspended:{}},ArgumentsRequired:{},BadRequest:{BadSymbol:{}},BadResponse:{NullResponse:{}},InsufficientFunds:{},InvalidAddress:{AddressPending:{}},InvalidOrder:{OrderNotFound:{},OrderNotCached:{},CancelPending:{},OrderImmediatelyFillable:{},OrderNotFillable:{},DuplicateOrderId:{}},NotSupported:{}},NetworkError:{DDoSProtection:{RateLimitExceeded:{}},ExchangeNotAvailable:{OnMaintenance:{}},InvalidNonce:{},RequestTimeout:{}}}}},i4Ti:function(e,t,i){"use strict";var s=i("+un8"),r=4,a=0,o=1,n=2;function d(e){for(var t=e.length;--t>=0;)e[t]=0}var c=0,h=1,l=2,u=29,f=256,p=f+1+u,m=30,y=19,b=2*p+1,v=15,g=16,w=7,k=256,_=16,T=17,O=18,x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],S=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],E=new Array(2*(p+2));d(E);var M=new Array(2*m);d(M);var A=new Array(512);d(A);var F=new Array(256);d(F);var B=new Array(u);d(B);var P,q,L,D=new Array(m);function V(e,t,i,s,r){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=s,this.max_length=r,this.has_stree=e&&e.length}function R(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function G(e){return e<256?A[e]:A[256+(e>>>7)]}function N(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function H(e,t,i){e.bi_valid>g-i?(e.bi_buf|=t<<e.bi_valid&65535,N(e,e.bi_buf),e.bi_buf=t>>g-e.bi_valid,e.bi_valid+=i-g):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)}function U(e,t,i){H(e,i[2*t],i[2*t+1])}function j(e,t){var i=0;do{i|=1&e,e>>>=1,i<<=1}while(--t>0);return i>>>1}function K(e,t,i){var s,r,a=new Array(v+1),o=0;for(s=1;s<=v;s++)a[s]=o=o+i[s-1]<<1;for(r=0;r<=t;r++){var n=e[2*r+1];0!==n&&(e[2*r]=j(a[n]++,n))}}function z(e){var t;for(t=0;t<p;t++)e.dyn_ltree[2*t]=0;for(t=0;t<m;t++)e.dyn_dtree[2*t]=0;for(t=0;t<y;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*k]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function X(e){e.bi_valid>8?N(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function W(e,t,i,s){var r=2*t,a=2*i;return e[r]<e[a]||e[r]===e[a]&&s[t]<=s[i]}function Y(e,t,i){for(var s=e.heap[i],r=i<<1;r<=e.heap_len&&(r<e.heap_len&&W(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!W(t,s,e.heap[r],e.depth));)e.heap[i]=e.heap[r],i=r,r<<=1;e.heap[i]=s}function Z(e,t,i){var s,r,a,o,n=0;if(0!==e.last_lit)do{s=e.pending_buf[e.d_buf+2*n]<<8|e.pending_buf[e.d_buf+2*n+1],r=e.pending_buf[e.l_buf+n],n++,0===s?U(e,r,t):(U(e,(a=F[r])+f+1,t),0!==(o=x[a])&&H(e,r-=B[a],o),U(e,a=G(--s),i),0!==(o=S[a])&&H(e,s-=D[a],o))}while(n<e.last_lit);U(e,k,t)}function J(e,t){var i,s,r,a=t.dyn_tree,o=t.stat_desc.static_tree,n=t.stat_desc.has_stree,d=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=b,i=0;i<d;i++)0!==a[2*i]?(e.heap[++e.heap_len]=c=i,e.depth[i]=0):a[2*i+1]=0;for(;e.heap_len<2;)a[2*(r=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[r]=0,e.opt_len--,n&&(e.static_len-=o[2*r+1]);for(t.max_code=c,i=e.heap_len>>1;i>=1;i--)Y(e,a,i);r=d;do{i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Y(e,a,1),s=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=s,a[2*r]=a[2*i]+a[2*s],e.depth[r]=(e.depth[i]>=e.depth[s]?e.depth[i]:e.depth[s])+1,a[2*i+1]=a[2*s+1]=r,e.heap[1]=r++,Y(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var i,s,r,a,o,n,d=t.dyn_tree,c=t.max_code,h=t.stat_desc.static_tree,l=t.stat_desc.has_stree,u=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(a=0;a<=v;a++)e.bl_count[a]=0;for(d[2*e.heap[e.heap_max]+1]=0,i=e.heap_max+1;i<b;i++)(a=d[2*d[2*(s=e.heap[i])+1]+1]+1)>p&&(a=p,m++),d[2*s+1]=a,s>c||(e.bl_count[a]++,o=0,s>=f&&(o=u[s-f]),n=d[2*s],e.opt_len+=n*(a+o),l&&(e.static_len+=n*(h[2*s+1]+o)));if(0!==m){do{for(a=p-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[p]--,m-=2}while(m>0);for(a=p;0!==a;a--)for(s=e.bl_count[a];0!==s;)(r=e.heap[--i])>c||(d[2*r+1]!==a&&(e.opt_len+=(a-d[2*r+1])*d[2*r],d[2*r+1]=a),s--)}}(e,t),K(a,c,e.bl_count)}function Q(e,t,i){var s,r,a=-1,o=t[1],n=0,d=7,c=4;for(0===o&&(d=138,c=3),t[2*(i+1)+1]=65535,s=0;s<=i;s++)r=o,o=t[2*(s+1)+1],++n<d&&r===o||(n<c?e.bl_tree[2*r]+=n:0!==r?(r!==a&&e.bl_tree[2*r]++,e.bl_tree[2*_]++):n<=10?e.bl_tree[2*T]++:e.bl_tree[2*O]++,n=0,a=r,0===o?(d=138,c=3):r===o?(d=6,c=3):(d=7,c=4))}function $(e,t,i){var s,r,a=-1,o=t[1],n=0,d=7,c=4;for(0===o&&(d=138,c=3),s=0;s<=i;s++)if(r=o,o=t[2*(s+1)+1],!(++n<d&&r===o)){if(n<c)do{U(e,r,e.bl_tree)}while(0!==--n);else 0!==r?(r!==a&&(U(e,r,e.bl_tree),n--),U(e,_,e.bl_tree),H(e,n-3,2)):n<=10?(U(e,T,e.bl_tree),H(e,n-3,3)):(U(e,O,e.bl_tree),H(e,n-11,7));n=0,a=r,0===o?(d=138,c=3):r===o?(d=6,c=3):(d=7,c=4)}}d(D);var ee=!1;function te(e,t,i,r){H(e,(c<<1)+(r?1:0),3),function(e,t,i,r){X(e),r&&(N(e,i),N(e,~i)),s.arraySet(e.pending_buf,e.window,t,i,e.pending),e.pending+=i}(e,t,i,!0)}t._tr_init=function(e){ee||(!function(){var e,t,i,s,r,a=new Array(v+1);for(i=0,s=0;s<u-1;s++)for(B[s]=i,e=0;e<1<<x[s];e++)F[i++]=s;for(F[i-1]=s,r=0,s=0;s<16;s++)for(D[s]=r,e=0;e<1<<S[s];e++)A[r++]=s;for(r>>=7;s<m;s++)for(D[s]=r<<7,e=0;e<1<<S[s]-7;e++)A[256+r++]=s;for(t=0;t<=v;t++)a[t]=0;for(e=0;e<=143;)E[2*e+1]=8,e++,a[8]++;for(;e<=255;)E[2*e+1]=9,e++,a[9]++;for(;e<=279;)E[2*e+1]=7,e++,a[7]++;for(;e<=287;)E[2*e+1]=8,e++,a[8]++;for(K(E,p+1,a),e=0;e<m;e++)M[2*e+1]=5,M[2*e]=j(e,5);P=new V(E,x,f+1,p,v),q=new V(M,S,0,m,v),L=new V(new Array(0),C,0,y,w)}(),ee=!0),e.l_desc=new R(e.dyn_ltree,P),e.d_desc=new R(e.dyn_dtree,q),e.bl_desc=new R(e.bl_tree,L),e.bi_buf=0,e.bi_valid=0,z(e)},t._tr_stored_block=te,t._tr_flush_block=function(e,t,i,s){var d,c,u=0;e.level>0?(e.strm.data_type===n&&(e.strm.data_type=function(e){var t,i=4093624447;for(t=0;t<=31;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return a;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return o;for(t=32;t<f;t++)if(0!==e.dyn_ltree[2*t])return o;return a}(e)),J(e,e.l_desc),J(e,e.d_desc),u=function(e){var t;for(Q(e,e.dyn_ltree,e.l_desc.max_code),Q(e,e.dyn_dtree,e.d_desc.max_code),J(e,e.bl_desc),t=y-1;t>=3&&0===e.bl_tree[2*I[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),d=e.opt_len+3+7>>>3,(c=e.static_len+3+7>>>3)<=d&&(d=c)):d=c=i+5,i+4<=d&&-1!==t?te(e,t,i,s):e.strategy===r||c===d?(H(e,(h<<1)+(s?1:0),3),Z(e,E,M)):(H(e,(l<<1)+(s?1:0),3),function(e,t,i,s){var r;for(H(e,t-257,5),H(e,i-1,5),H(e,s-4,4),r=0;r<s;r++)H(e,e.bl_tree[2*I[r]+1],3);$(e,e.dyn_ltree,t-1),$(e,e.dyn_dtree,i-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,u+1),Z(e,e.dyn_ltree,e.dyn_dtree)),z(e),s&&X(e)},t._tr_tally=function(e,t,i){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&i,e.last_lit++,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(F[i]+f+1)]++,e.dyn_dtree[2*G(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){H(e,h<<1,3),U(e,k,E),function(e){16===e.bi_valid?(N(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},i4x7:function(e,t,i){"use strict";const s=i("OjXq"),{TICK_SIZE:r}=i("rwG2"),{AuthenticationError:a,ExchangeError:o,ArgumentsRequired:n,PermissionDenied:d,InvalidOrder:c,OrderNotFound:h,InsufficientFunds:l,BadRequest:u,RateLimitExceeded:f,InvalidNonce:p}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bybit",name:"Bybit",countries:["VG"],version:"v2",userAgent:void 0,rateLimit:100,has:{CORS:!0,fetchMarkets:!0,fetchBalance:!0,fetchOHLCV:!0,editOrder:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchOrderTrades:!0,createOrder:!0,cancelOrder:!0,cancelAllOrders:!0,fetchTime:!0,fetchWithdrawals:!0,fetchDeposits:!1,fetchTransactions:!1,fetchLedger:!0},timeframes:{"1m":"1","3m":"3","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","3h":"180","6h":"360","12h":"720","1d":"D","1w":"W","1M":"M","1y":"Y"},urls:{test:"https://api-testnet.bybit.com",logo:"https://user-images.githubusercontent.com/51840849/76547799-daff5b80-649e-11ea-87fb-3be9bac08954.jpg",api:"https://api.bybit.com",www:"https://www.bybit.com/",doc:["https://bybit-exchange.github.io/docs/inverse/","https://github.com/bybit-exchange"],fees:"https://help.bybit.com/hc/en-us/articles/360039261154",referral:"https://www.bybit.com/app/register?ref=X7Prm"},api:{public:{get:["orderBook/L2","kline/list","tickers","trading-records","symbols","time","announcement"]},private:{get:["order","stop-order","position/list","wallet/balance","execution/list"],post:["order/create","order/cancel","order/cancelAll","stop-order/cancelAll"]},openapi:{get:["order/list","stop-order/list","wallet/risk-limit/list","wallet/risk-limit","funding/prev-funding-rate","funding/prev-funding","funding/predicted-funding","api-key","wallet/fund/records","wallet/withdraw/list"],post:["order/replace","stop-order/create","stop-order/cancel","stop-order/replace","position/trading-stop"]},position:{post:["change-position-margin"]},user:{get:["leverage"],post:["leverage/save"]}},httpExceptions:{403:f},exceptions:{exact:{10001:u,10002:p,10003:a,10004:a,10005:d,10006:f,10007:a,10010:d,10017:u,20001:h,20003:c,20004:c,20005:c,20006:c,20007:c,20008:c,20009:c,20010:c,20011:c,20012:c,20013:c,20014:c,20015:c,20016:c,20017:c,20018:c,20019:c,20020:c,20021:c,20022:u,20023:u,20031:u,20070:u,20071:u,20084:u,30001:u,30003:c,30004:c,30005:c,30007:c,30008:c,30009:o,30010:l,30011:d,30012:d,30013:d,30014:c,30015:c,30016:o,30017:c,30018:c,30019:c,30020:c,30021:c,30022:c,30023:c,30024:c,30025:c,30026:c,30027:c,30028:c,30029:c,30030:c,30031:l,30032:c,30033:f,30034:h,30035:f,30036:o,30037:c,30041:o,30042:l,30043:d,30044:d,30045:d,30049:l,30050:o,30051:o,30052:o,30054:o,30057:o,30063:o,30067:l,30068:o,34026:o},broad:{"unknown orderInfo":h}},precisionMode:r,options:{code:"BTC",fetchBalance:{code:"BTC"},cancelAllOrders:{method:"privatePostOrderCancelAll"},recvWindow:5e3,timeDifference:0,adjustForTimeDifference:!1},fees:{trading:{tierBased:!1,percentage:!0,taker:75e-5,maker:-25e-5},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}}})}nonce(){return this.milliseconds()-this.options.timeDifference}async loadTimeDifference(){const e=await this.fetchTime(),t=this.milliseconds();return this.options.timeDifference=t-e,this.options.timeDifference}async fetchTime(e={}){const t=await this.publicGetTime(e);return this.safeTimestamp(t,"time_now")}async fetchMarkets(e={}){this.options.adjustForTimeDifference&&await this.loadTimeDifference();const t=await this.publicGetSymbols(e),i=this.safeValue(t,"result",[]),s=[];for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"name"),a=this.safeString(e,"base_currency"),o=this.safeString(e,"quote_currency"),n=this.safeCurrencyCode(a),d=this.safeCurrencyCode(o),c=n+"/"+d,h=this.safeValue(e,"lot_size_filter",{}),l=this.safeValue(e,"price_filter",{}),u={amount:this.safeFloat(h,"qty_step"),price:this.safeFloat(l,"tick_size")};s.push({id:t,symbol:c,base:n,quote:d,active:void 0,precision:u,taker:this.safeFloat(e,"taker_fee"),maker:this.safeFloat(e,"maker_fee"),limits:{amount:{min:this.safeFloat(h,"min_trading_qty"),max:this.safeFloat(h,"max_trading_qty")},price:{min:this.safeFloat(l,"min_price"),max:this.safeFloat(l,"max_price")},cost:{min:void 0,max:void 0}},type:"future",spot:!1,future:!0,option:!1,info:e})}return s}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeValue(this.options,"code","BTC"),i=this.safeValue(this.options,"fetchBalance",{}),s=this.safeValue(i,"code",t),r={coin:this.currency(s).id},a=await this.privateGetWalletBalance(this.extend(r,e)),o={info:a},n=this.safeValue(a,"result",{}),d=Object.keys(n);for(let c=0;c<d.length;c++){const e=d[c],t=n[e],i=this.safeCurrencyCode(e),s=this.account();s.free=this.safeFloat(t,"available_balance"),s.used=this.safeFloat(t,"used_margin"),s.total=this.safeFloat(t,"equity"),o[i]=s}return this.parseBalance(o)}parseTicker(e,t){const i=this.safeString(e,"symbol");let s=i;i in this.markets_by_id&&(t=this.markets_by_id[i]),void 0===s&&void 0!==t&&(s=t.symbol);const r=this.safeFloat(e,"last_price"),a=this.safeFloat(e,"prev_price_24h");let o=this.safeFloat(e,"price_24h_pcnt");void 0!==o&&(o*=100);let n=void 0,d=void 0;void 0!==r&&void 0!==a&&(n=r-a,d=this.sum(a,r)/2);const c=this.safeFloat(e,"turnover_24h"),h=this.safeFloat(e,"volume_24h");let l=void 0;return void 0!==h&&void 0!==c&&(l=h/c),{symbol:s,timestamp:void 0,datetime:this.iso8601(void 0),high:this.safeFloat(e,"high_price_24h"),low:this.safeFloat(e,"low_price_24h"),bid:this.safeFloat(e,"bid_price"),bidVolume:void 0,ask:this.safeFloat(e,"ask_price"),askVolume:void 0,vwap:l,open:a,close:r,last:r,previousClose:void 0,change:n,percentage:o,average:d,baseVolume:c,quoteVolume:h,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetTickers(this.extend(s,t)),a=this.safeValue(r,"result",[]),o=this.safeValue(a,0),n=this.safeTimestamp(r,"time_now"),d=this.parseTicker(o,i);return d.timestamp=n,d.datetime=this.iso8601(n),d}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(t),s=this.safeValue(i,"result",[]),r={};for(let a=0;a<s.length;a++){const e=this.parseTicker(s[a]);r[e.symbol]=e}return this.filterByArray(r,"symbol",e)}parseOHLCV(e,t,i="1m",s,r){return[this.safeTimestamp(e,"open_time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"turnover")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={symbol:a.id,interval:this.timeframes[t]},d=this.parseTimeframe(t),c=this.seconds();if(void 0===i){if(void 0===s)throw new n(this.id+" fetchOHLCV requires a since argument or a limit argument");o.from=c-s*d}else o.from=parseInt(i/1e3);void 0!==s&&(o.limit=s);const h=await this.publicGetKlineList(this.extend(o,r)),l=this.safeValue(h,"result",{});return this.parseOHLCVs(l,a,t,i,s)}parseTrade(e,t){const i=this.safeString2(e,"id","exec_id");let s=void 0,r=void 0;const a=this.safeString(e,"symbol");a in this.markets_by_id&&(s=(t=this.markets_by_id[a]).symbol,r=t.base),void 0===s&&void 0!==t&&(s=t.symbol,r=t.base);let o=this.parse8601(this.safeString(e,"time"));void 0===o&&(o=this.safeTimestamp(e,"exec_time"));const n=this.safeStringLower(e,"side"),d=this.safeFloat2(e,"price","exec_price"),c=this.safeFloat2(e,"qty","exec_qty");let h=this.safeFloat(e,"exec_value");void 0===h&&void 0!==c&&void 0!==d&&(h=c*d);const l="AddedLiquidity"===this.safeString(e,"last_liquidity_ind")?"maker":"taker",u=this.safeFloat(e,"exec_fee");let f=void 0;return void 0!==u&&(f={cost:u,currency:r,rate:this.safeFloat(e,"fee_rate")}),{id:i,info:e,timestamp:o,datetime:this.iso8601(o),symbol:s,order:this.safeString(e,"order_id"),type:this.safeStringLower(e,"order_type"),side:n,takerOrMaker:l,price:d,amount:c,cost:h,fee:f}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==i&&(a.count=i);const o=await this.publicGetTradingRecords(this.extend(a,s)),n=this.safeValue(o,"result",{});return this.parseTrades(n,r,t,i)}parseOrderBook(e,t,i="Buy",s="Sell",r="price",a="size"){const n=[],d=[];for(let c=0;c<e.length;c++){const t=e[c],i=this.safeString(t,"side");if("Buy"===i)n.push(this.parseBidAsk(t,r,a));else{if("Sell"!==i)throw new o(this.id+" parseOrderBook encountered an unrecognized bidask format: "+this.json(t));d.push(this.parseBidAsk(t,r,a))}}return{bids:this.sortBy(n,0,!0),asks:this.sortBy(d,0),timestamp:t,datetime:this.iso8601(t),nonce:void 0}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id},r=await this.publicGetOrderBookL2(this.extend(s,i)),a=this.safeValue(r,"result",[]),o=this.safeTimestamp(r,"time_now");return this.parseOrderBook(a,o,"Buy","Sell","price","size")}parseOrderStatus(e){return this.safeString({Created:"open",Rejected:"rejected",New:"open",PartiallyFilled:"open",Filled:"filled",Cancelled:"canceled",PendingCancel:"canceling",Active:"closed",Untriggered:"open",Triggered:"closed",Deactivated:"canceled"},e,e)}parseOrder(e,t){const i=this.parse8601(this.safeString(e,"created_at")),s=this.safeString(e,"order_id"),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"average_price"),o=this.safeFloat(e,"qty");let n=this.safeFloat(e,"cum_exec_qty"),d=this.safeFloat(e,"leaves_qty"),c=this.safeTimestamp(e,"last_exec_time");0===c&&(c=void 0);let h=this.safeFloat(e,"cum_exec_value");void 0===n&&void 0!==o&&void 0!==d&&(n=o-d),void 0!==n&&(void 0===d&&void 0!==o&&(d=o-n),void 0===h&&void 0!==r&&(h=r*n));const l=this.parseOrderStatus(this.safeString(e,"order_status")),u=this.safeString(e,"symbol");let f=void 0,p=void 0;u in this.markets_by_id&&(f=(t=this.markets_by_id[u]).symbol,p=t.base),void 0!==t&&(void 0===f&&(f=t.symbol),void 0===p&&(p=t.base));const m=this.safeStringLower(e,"side");let y=this.safeFloat(e,"cum_exec_fee"),b=void 0;void 0!==y&&(y=Math.abs(y),b={cost:y,currency:p});const v=this.safeStringLower(e,"order_type");let g=this.safeString(e,"order_link_id");return void 0!==g&&g.length<1&&(g=void 0),{info:e,id:s,clientOrderId:g,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:c,symbol:f,type:v,side:m,price:r,amount:o,cost:h,average:a,filled:n,remaining:d,status:l,fee:b,trades:void 0}}async fetchOrder(e,t,i={}){if(void 0===t)throw new n(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={symbol:s.id};let a="privateGetOrder";if(void 0===this.safeString(i,"stop_order_id")){void 0===this.safeString(i,"order_link_id")&&(r.order_id=e)}else a="privateGetStopOrder";const o=await this[a](this.extend(r,i)),d=this.safeValue(o,"result");return this.parseOrder(d,s)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),d={side:this.capitalize(i),symbol:o.id,order_type:this.capitalize(t),qty:this.amountToPrecision(e,s),time_in_force:"GoodTillCancel"};let c=!1;if("limit"===t&&(c=!0),c){if(void 0===r)throw new n(this.id+" createOrder requires a price argument for a "+t+" order");d.price=this.priceToPrecision(e,r)}const h=this.safeValue(a,"stop_px"),l=this.safeValue(a,"base_price");let u="privatePostOrderCreate";if(void 0!==h){if(void 0===l)throw new n(this.id+" createOrder requires both the stop_px and base_price params for a conditional "+t+" order");u="openapiPostStopOrderCreate",d.stop_px=this.priceToPrecision(e,h),d.base_price=this.priceToPrecision(e,l),a=this.omit(a,["stop_px","base_price"])}else if(void 0!==l)throw new n(this.id+" createOrder requires both the stop_px and base_price params for a conditional "+t+" order");const f=await this[u](this.extend(d,a)),p=this.safeValue(f,"result");return this.parseOrder(p,o)}async editOrder(e,t,i,s,r,a,o={}){if(void 0===t)throw new n(this.id+" editOrder requires an symbol argument");await this.loadMarkets();const d={symbol:this.market(t).id},c=this.safeString(o,"stop_order_id");let h="openapiPostOrderReplace";void 0!==c?(h="openapiPostStopOrderReplace",d.stop_order_id=c,o=this.omit(o,["stop_order_id"])):d.order_id=e,void 0!==r&&(d.p_r_qty=this.amountToPrecision(t,r)),void 0!==a&&(d.p_r_price=this.priceToPrecision(t,r));const l=await this[h](this.extend(d,o)),u=this.safeValue(l,"result",{});return{info:l,id:this.safeString2(u,"order_id","stop_order_id"),order_id:this.safeString(u,"order_id"),stop_order_id:this.safeString(u,"stop_order_id")}}async cancelOrder(e,t,i={}){if(void 0===t)throw new n(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={symbol:s.id};let a="privatePostOrderCancel";if(void 0===this.safeString(i,"stop_order_id")){void 0===this.safeString(i,"order_link_id")&&(r.order_id=e)}else a="openapiPostStopOrderCancel";const o=await this[a](this.extend(r,i)),d=this.safeValue(o,"result",{});return this.parseOrder(d,s)}async cancelAllOrders(e,t={}){if(void 0===e)throw new n(this.id+" cancelAllOrders requires a symbol argument");await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=this.safeValue(this.options,"cancelAllOrders"),a=this.safeString(r,"method","privatePostOrderCancelAll"),o=await this[a](this.extend(s,t)),d=this.safeValue(o,"result",[]);return this.parseOrders(d,i)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.market(e),r.symbol=a.id),void 0!==i&&(r.limit=i);const o=this.safeValue(this.options,"fetchOrders",{});let n="openapiGetOrderList",d=s;if("stop_order_id"in s||"stop_order_status"in s){let e=this.safeValue(s,"stopOrderStatus");void 0!==e&&(Array.isArray(e)&&(e=e.join(",")),r.stop_order_status=e,d=this.omit(s,"stop_order_status")),n="openapiGetStopOrderList"}const c=this.safeString(o,"method",n),h=await this[c](this.extend(r,d)),l=this.safeValue(h,"result",{}),u=this.safeValue(l,"data",[]);return this.parseOrders(u,a,t,i)}async fetchClosedOrders(e,t,i,s={}){const r=this.safeValue(this.options,"fetchClosedOrders",{});let a=this.safeValue(r,"order_status",["Rejected","Filled","Cancelled"]);Array.isArray(a)&&(a=a.join(","));const o={},n=this.safeValue(s,"stop_order_status");return void 0===n?o.order_status=a:o.stop_order_status=n,await this.fetchOrders(e,t,i,this.extend(o,s))}async fetchOpenOrders(e,t,i,s={}){const r=this.safeValue(this.options,"fetchOpenOrders",{});let a=this.safeValue(r,"order_status",["Created","New","PartiallyFilled","PendingCancel"]);Array.isArray(a)&&(a=a.join(","));const o={},n=this.safeValue(s,"stop_order_status");return void 0===n?o.order_status=a:o.stop_order_status=n,await this.fetchOrders(e,t,i,this.extend(o,s))}async fetchOrderTrades(e,t,i,s,r={}){const a={order_id:e};return await this.fetchMyTrades(t,i,s,this.extend(a,r))}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;if(void 0===e){const e=this.safeString(s,"order_id");if(void 0===e)throw new n(this.id+" fetchMyTrades requires a symbol argument or an order_id param");r.order_id=e,s=this.omit(s,"order_id")}else a=this.market(e),r.symbol=a.id;void 0!==t&&(r.start_time=parseInt(t/1e3)),void 0!==i&&(r.limit=i);const o=await this.privateGetExecutionList(this.extend(r,s)),d=this.safeValue(o,"result",{}),c=this.safeValue(d,"trade_list",[]);return this.parseTrades(c,a,t,i)}async fetchDeposits(e,t,i,s={}){if(void 0===e)throw new n(this.id+" fetchWithdrawals() requires a currency code argument");await this.loadMarkets();const r=this.currency(e),a={currency:r.id};void 0!==i&&(a.count=i);const o=await this.privateGetGetDeposits(this.extend(a,s)),d=this.safeValue(o,"result",{}),c=this.safeValue(d,"data",[]);return this.parseTransactions(c,r,t,i,s)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.currency(e),r.coin=a.id),void 0!==t&&(r.start_date=this.iso8601(t)),void 0!==i&&(r.limit=i);const o=await this.openapiGetWalletWithdrawList(this.extend(r,s)),n=this.safeValue(o,"result",{}),d=this.safeValue(n,"data",[]);return this.parseTransactions(d,a,t,i,s)}parseTransactionStatus(e){return this.safeString({ToBeConfirmed:"pending",UnderReview:"pending",Pending:"pending",Success:"ok",CancelByUser:"canceled",Reject:"rejected",Expire:"expired"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"coin"),s=this.safeCurrencyCode(i,t),r=this.parse8601(this.safeString(e,"submited_at")),a=this.parse8601(this.safeString(e,"updated_at")),o=this.parseTransactionStatus(this.safeString(e,"status")),n=this.safeString(e,"address"),d=this.safeFloat(e,"fee");let c=void 0;return void 0!==d&&(c={cost:d,currency:s}),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"tx_id"),timestamp:r,datetime:this.iso8601(r),address:n,addressTo:void 0,addressFrom:void 0,tag:void 0,tagTo:void 0,tagFrom:void 0,type:"withdrawal",amount:this.safeFloat(e,"amount"),currency:s,status:o,updated:a,fee:c}}async fetchLedger(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.currency(e),r.coin=a.id),void 0!==t&&(r.start_date=this.iso8601(t)),void 0!==i&&(r.limit=i);const o=await this.openapiGetWalletFundRecords(this.extend(r,s)),n=this.safeValue(o,"result",{}),d=this.safeValue(n,"data",[]);return this.parseLedger(d,a,t,i)}parseLedgerEntry(e,t){const i=this.safeString(e,"coin"),s=this.safeCurrencyCode(i,t),r=this.safeFloat(e,"amount"),a=this.safeFloat(e,"wallet_balance"),o=r<0?"out":"in";let n=void 0;if(void 0!==a&&void 0!==r){const e="out"===o?r:-r;n=this.sum(a,e)}const d=this.parse8601(this.safeString(e,"exec_time")),c=this.parseLedgerEntryType(this.safeString(e,"type")),h=this.safeString(e,"id"),l=this.safeString(e,"tx_id");return{id:h,currency:s,account:this.safeString(e,"wallet_id"),referenceAccount:void 0,referenceId:l,status:void 0,amount:r,before:n,after:a,fee:void 0,direction:o,timestamp:d,datetime:this.iso8601(d),type:c,info:e}}parseLedgerEntryType(e){return this.safeString({Deposit:"transaction",Withdraw:"transaction",RealisedPNL:"trade",Commission:"fee",Refund:"cashback",Prize:"prize",ExchangeOrderWithdraw:"transaction",ExchangeOrderDeposit:"transaction"},e,e)}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api,n=e;if("public"===t)n="/"+this.version+"/"+t+"/"+n,Object.keys(s).length&&(n+="?"+this.rawencode(s));else{this.checkRequiredCredentials(),"openapi"===t?n="/open-api/"+n:"private"===t?n="/"+this.version+"/"+t+"/"+n:n+="/"+t+"/"+n;const e=this.nonce(),o=this.extend(s,{api_key:this.apiKey,recvWindow:this.options.recvWindow,timestamp:e}),d=this.rawencode(this.keysort(o)),c=this.hmac(this.encode(d),this.encode(this.secret));"POST"===i?(a=this.json(this.extend(o,{sign:c})),r={"Content-Type":"application/json"}):n+="?"+d+"&sign="+c}return o+=n,{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,n,d,c){if(!n)return;const h=this.safeValue(n,"ret_code");if(0!==h){const e=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,h,e),this.throwBroadlyMatchedException(this.exceptions.broad,a,e),new o(e)}}}},iWax:function(e,t,i){"use strict";const s=i("6kI6");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"huobiru",name:"Huobi Russia",countries:["RU"],hostname:"www.huobi.com.ru",pro:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/52978816-e8552e00-33e3-11e9-98ed-845acfece834.jpg",api:{market:"https://{hostname}/api",public:"https://{hostname}/api",private:"https://{hostname}/api",zendesk:"https://huobiglobal.zendesk.com/hc/en-us/articles"},www:"https://www.huobi.com.ru/ru-ru",referral:"https://www.huobi.com.ru/invite?invite_code=esc74",doc:"https://github.com/cloudapidoc/API_Docs_en",fees:"https://www.huobi.com.ru/ru-ru/about/fee/"}})}}},"iak/":function(e,t,i){"use strict";e.exports=function(e,t,i,s){for(var r=65535&e|0,a=e>>>16&65535|0,o=0;0!==i;){i-=o=i>2e3?2e3:i;do{a=a+(r=r+t[s++]|0)|0}while(--o);r%=65521,a%=65521}return r|a<<16|0}},jYrF:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return v}));var s=i("NthX"),r=i.n(s),a=i("mwLw"),o=i.n(a),n=i("7p8N"),d=i.n(n),c=i("fCyT"),h=i.n(c),l=i("ON82"),u=i.n(l),f=i("eciW"),p=i.n(f),m=i("0TTc"),y=i.n(m),b={apiKey:!0,secret:!0,uid:!1,password:!1};function v(){var e=y.a,t=function(t,i){return t&&e[t]?new e[t](i):(console.log("Exchange ".concat(t," is not supported")),!1)},i=function(e,i){var s,a,n;return r.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return s=t(e,i),d.next=3,r.a.awrap(s.fetchBalance());case 3:if(a=d.sent,!(n=o()(["info","error"],a))){d.next=9;break}throw new Error(n);case 9:return d.abrupt("return",a);case 10:case"end":return d.stop()}}))},s=function(e){return e.has.privateAPI&&e.has.fetchBalance};return{fetchExchangeAccountBalance:i,testExchangeConnection:function(e,t){var s;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,r.a.awrap(i(e,t));case 3:return s=a.sent,a.abrupt("return",s);case 7:throw a.prev=7,a.t0=a.catch(0),console.log(a.t0),a.t0;case 11:case"end":return a.stop()}}),null,null,[[0,7]])},getExchangesList:function(){return p()(u()(t),h()(s),u()(d()(["id","name"])))(e.exchanges)},getExchangeInstance:t,getExchangeRequiredCredentialsList:function(e){if(!e)return b;var i=t(e);return i?i.requiredCredentials:void 0}}}},jh01:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ArgumentsRequired:a,ExchangeNotAvailable:o,InsufficientFunds:n,OrderNotFound:d,InvalidOrder:c,AccountSuspended:h,InvalidNonce:l,NotSupported:u,BadRequest:f,AuthenticationError:p,BadSymbol:m,RateLimitExceeded:y}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"kucoin",name:"KuCoin",countries:["SC"],rateLimit:334,version:"v2",certified:!1,pro:!0,comment:"Platform 2.0",has:{CORS:!1,fetchTime:!0,fetchMarkets:!0,fetchCurrencies:!0,fetchTicker:!0,fetchTickers:!0,fetchOrderBook:!0,fetchOrder:!0,fetchClosedOrders:!0,fetchOpenOrders:!0,fetchDepositAddress:!0,createDepositAddress:!0,withdraw:!0,fetchDeposits:!0,fetchWithdrawals:!0,fetchBalance:!0,fetchTrades:!0,fetchMyTrades:!0,createOrder:!0,cancelOrder:!0,fetchAccounts:!0,fetchFundingFee:!0,fetchOHLCV:!0,fetchLedger:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/57369448-3cc3aa80-7196-11e9-883e-5ebeb35e4f57.jpg",referral:"https://www.kucoin.com/?rcode=E5wkqe",api:{public:"https://openapi-v2.kucoin.com",private:"https://openapi-v2.kucoin.com"},test:{public:"https://openapi-sandbox.kucoin.com",private:"https://openapi-sandbox.kucoin.com"},www:"https://www.kucoin.com",doc:["https://docs.kucoin.com"]},requiredCredentials:{apiKey:!0,secret:!0,password:!0},api:{public:{get:["timestamp","symbols","market/allTickers","market/orderbook/level{level}","market/orderbook/level2","market/orderbook/level2_20","market/orderbook/level2_100","market/orderbook/level3","market/histories","market/candles","market/stats","currencies","currencies/{currency}"],post:["bullet-public"]},private:{get:["accounts","accounts/{accountId}","accounts/{accountId}/ledgers","accounts/{accountId}/holds","deposit-addresses","deposits","hist-deposits","hist-orders","hist-withdrawals","withdrawals","withdrawals/quotas","orders","orders/{orderId}","fills","limit/fills"],post:["accounts","accounts/inner-transfer","accounts/sub-transfer","deposit-addresses","withdrawals","orders","bullet-private"],delete:["withdrawals/{withdrawalId}","orders/{orderId}"]}},timeframes:{"1m":"1min","3m":"3min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","8h":"8hour","12h":"12hour","1d":"1day","1w":"1week"},exceptions:{exact:{"order not exist":d,"order not exist.":d,order_not_exist:d,order_not_exist_or_not_allow_to_cancel:c,"Order size below the minimum requirement.":c,"The withdrawal amount is below the minimum requirement.":r,400:f,401:p,403:u,404:u,405:u,429:y,500:r,503:o,200004:n,230003:n,260100:n,3e5:c,4e5:m,400001:p,400002:l,400003:p,400004:p,400005:p,400006:p,400007:p,400008:u,400100:f,411100:h,415e3:f,5e5:r},broad:{"Exceeded the access frequency":y}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},commonCurrencies:{HOT:"HOTNOW",EDGE:"DADI",WAX:"WAXP",TRY:"Trias"},options:{version:"v1",symbolSeparator:"-",fetchMyTradesMethod:"private_get_fills",fetchBalance:{type:"trade"},versions:{public:{GET:{"market/orderbook/level{level}":"v1","market/orderbook/level2":"v2","market/orderbook/level2_20":"v1","market/orderbook/level2_100":"v1"}},private:{POST:{"accounts/inner-transfer":"v2","accounts/sub-transfer":"v2"}}}}})}nonce(){return this.milliseconds()}async loadTimeDifference(){const e=await this.publicGetTimestamp(),t=this.milliseconds(),i=this.safeInteger(e,"data");return this.options.timeDifference=parseInt(t-i),this.options.timeDifference}async fetchTime(e={}){const t=await this.publicGetTimestamp(e);return this.safeInteger(t,"data")}async fetchMarkets(e={}){const t=(await this.publicGetSymbols(e)).data,i=[];for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"symbol"),[a,o]=r.split("-"),n=this.safeCurrencyCode(a),d=this.safeCurrencyCode(o),c=n+"/"+d,h=this.safeValue(e,"enableTrading"),l=this.safeFloat(e,"baseMaxSize"),u=this.safeFloat(e,"baseMinSize"),f=this.safeFloat(e,"quoteMaxSize"),p=this.safeFloat(e,"quoteMinSize"),m={amount:this.precisionFromString(this.safeString(e,"baseIncrement")),price:this.precisionFromString(this.safeString(e,"priceIncrement"))},y={amount:{min:u,max:l},price:{min:this.safeFloat(e,"priceIncrement"),max:f/u},cost:{min:p,max:f}};i.push({id:r,symbol:c,baseId:a,quoteId:o,base:n,quote:d,active:h,precision:m,limits:y,info:e})}return i}async fetchCurrencies(e={}){const t=(await this.publicGetCurrencies(e)).data,i={};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"currency"),a=this.safeString(e,"fullName"),o=this.safeCurrencyCode(r),n=this.safeInteger(e,"precision");i[o]={id:r,name:a,code:o,precision:n,info:e}}return i}async fetchAccounts(e={}){const t=await this.privateGetAccounts(e),i=this.safeValue(t,"data"),s=[];for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"id"),a=this.safeString(e,"currency"),o=this.safeCurrencyCode(a),n=this.safeString(e,"type");s.push({id:t,type:n,currency:o,info:e})}return s}async fetchFundingFee(e,t={}){const i={currency:this.currencyId(e)},s=await this.privateGetWithdrawalsQuotas(this.extend(i,t)),r=s.data,a={};return a[e]=this.safeFloat(r,"withdrawMinFee"),{info:s,withdraw:a,deposit:{}}}parseTicker(e,t){let i=this.safeFloat(e,"changeRate");void 0!==i&&(i*=100);const s=this.safeFloat2(e,"last","lastTradedPrice");let r=void 0;const a=this.safeString(e,"symbol");if(void 0!==a)if(a in this.markets_by_id)r=(t=this.markets_by_id[a]).symbol;else{const[e,t]=a.split("-");r=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}void 0===r&&void 0!==t&&(r=t.symbol);const o=this.safeInteger2(e,"time","datetime");return{symbol:r,timestamp:o,datetime:this.iso8601(o),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:s,last:s,previousClose:void 0,change:this.safeFloat(e,"changePrice"),percentage:i,average:this.safeFloat(e,"averagePrice"),baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"volValue"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetMarketAllTickers(t),s=this.safeValue(i,"data",{}),r=this.safeValue(s,"ticker",[]),a={};for(let o=0;o<r.length;o++){const e=this.parseTicker(r[o]),t=this.safeString(e,"symbol");void 0!==t&&(a[t]=e)}return a}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetMarketStats(this.extend(s,t));return this.parseTicker(r.data,i)}parseOHLCV(e,t,i="1m",s,r){return[1e3*parseInt(e[0]),parseFloat(e[1]),parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[2]),parseFloat(e[5])]}async fetchOHLCV(e,t="15m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={symbol:a.id,type:this.timeframes[t]},n=1e3*this.parseTimeframe(t);let d=this.milliseconds();void 0!==i?(o.startAt=parseInt(Math.floor(i/1e3)),void 0===s&&(s=this.safeInteger(this.options,"fetchOHLCVLimit",1500)),d=this.sum(i,s*n)):void 0!==s&&(i=d-s*n,o.startAt=parseInt(Math.floor(i/1e3))),o.endAt=parseInt(Math.floor(d/1e3));const c=await this.publicGetMarketCandles(this.extend(o,r)),h=this.safeValue(c,"data",[]);return this.parseOHLCVs(h,a,t,i,s)}async createDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currencyId(e)},s=await this.privatePostDepositAddresses(this.extend(i,t)),r=this.safeValue(s,"data",{});let a=this.safeString(r,"address");void 0!==a&&(a=a.replace("bitcoincash:",""));const o=this.safeString(r,"memo");return this.checkAddress(a),{info:s,currency:e,address:a,tag:o}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currencyId(e)},s=await this.privateGetDepositAddresses(this.extend(i,t)),r=this.safeValue(s,"data",{});let a=this.safeString(r,"address");void 0!==a&&(a=a.replace("bitcoincash:",""));const o=this.safeString(r,"memo");return this.checkAddress(a),{info:s,currency:e,address:a,tag:o}}async fetchOrderBook(e,t,i={}){let s="2";if(void 0!==t){if(20!==t&&100!==t)throw new r(this.id+" fetchOrderBook limit argument must be undefined, 20 or 100");s+="_"+t.toString()}await this.loadMarkets();const a=this.marketId(e),o=this.extend({symbol:a,level:s},i),n=(await this.publicGetMarketOrderbookLevelLevel(o)).data,d=this.safeInteger(n,"time"),c=this.safeString(o,"level").split("_"),h=parseInt(c[0]),l=this.parseOrderBook(n,d,"bids","asks",h-2,h-1);return l.nonce=this.safeInteger(n,"sequence"),l}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.marketId(e),n=this.uuid(),d={clientOid:n,side:i,symbol:o,type:t};"market"!==t?(d.price=this.priceToPrecision(e,r),d.size=this.amountToPrecision(e,s)):this.safeValue(a,"quoteAmount")?d.funds=this.amountToPrecision(e,s):d.size=this.amountToPrecision(e,s);const c=await this.privatePostOrders(this.extend(d,a)),h=this.safeValue(c,"data",{}),l=this.milliseconds(),u={id:this.safeString(h,"orderId"),symbol:e,type:t,side:i,price:r,cost:void 0,filled:void 0,remaining:void 0,timestamp:l,datetime:this.iso8601(l),fee:void 0,status:"open",clientOid:n,info:h};return this.safeValue(a,"quoteAmount")||(u.amount=s),u}async cancelOrder(e,t,i={}){const s={orderId:e};return await this.privateDeleteOrdersOrderId(this.extend(s,i))}async fetchOrdersByStatus(e,t,i,s,r={}){await this.loadMarkets();const a={status:e};let o=void 0;void 0!==t&&(o=this.market(t),a.symbol=o.id),void 0!==i&&(a.startAt=i),void 0!==s&&(a.pageSize=s);const n=await this.privateGetOrders(this.extend(a,r)),d=this.safeValue(n,"data",{}),c=this.safeValue(d,"items",[]);return this.parseOrders(c,o,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByStatus("done",e,t,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByStatus("active",e,t,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e};let r=void 0;void 0!==t&&(r=this.market(t));const a=(await this.privateGetOrdersOrderId(this.extend(s,i))).data;return this.parseOrder(a,r)}parseOrder(e,t){let i=void 0;const s=this.safeString(e,"symbol");if(void 0!==s){if(s in this.markets_by_id)i=(t=this.markets_by_id[s]).symbol;else{const[e,t]=s.split("-");i=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}t=this.safeValue(this.markets_by_id,s)}void 0===i&&void 0!==t&&(i=t.symbol);const r=this.safeString(e,"id"),a=this.safeString(e,"type"),o=this.safeInteger(e,"createdAt"),n=this.iso8601(o);let d=this.safeFloat(e,"price");const c=this.safeString(e,"side"),h=this.safeString(e,"feeCurrency"),l=this.safeCurrencyCode(h),u=this.safeFloat(e,"fee"),f=this.safeFloat(e,"size"),p=this.safeFloat(e,"dealSize"),m=this.safeFloat(e,"dealFunds"),y=f-p;let b=e.isActive?"open":"closed";b=e.cancelExist?"canceled":b;const v={currency:l,cost:u};return"market"===a&&0===d&&void 0!==m&&void 0!==p&&m>0&&p>0&&(d=m/p),{id:r,clientOrderId:this.safeString(e,"clientOid"),symbol:i,type:a,side:c,amount:f,price:d,cost:m,filled:p,remaining:y,timestamp:o,datetime:n,fee:v,status:b,info:e}}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a={};let o=void 0;void 0!==e&&(o=this.market(e),a.symbol=o.id),void 0!==i&&(a.pageSize=i);const n=this.options.fetchMyTradesMethod;let d=!1;if("private_get_fills"===n)void 0!==t&&(a.startAt=t);else if("private_get_limit_fills"===n)d=!0;else{if("private_get_hist_orders"!==n)throw new r(this.id+" invalid fetchClosedOrder method");void 0!==t&&(a.startAt=parseInt(t/1e3))}const c=await this[n](this.extend(a,s)),h=this.safeValue(c,"data",{});let l=void 0;return l=d?h:this.safeValue(h,"items",[]),this.parseTrades(l,o,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==t&&(a.startAt=Math.floor(t/1e3)),void 0!==i&&(a.pageSize=i);const o=await this.publicGetMarketHistories(this.extend(a,s)),n=this.safeValue(o,"data",[]);return this.parseTrades(n,r,t,i)}parseTrade(e,t){let i=void 0;const s=this.safeString(e,"symbol");if(void 0!==s)if(s in this.markets_by_id)i=(t=this.markets_by_id[s]).symbol;else{const[e,t]=s.split("-");i=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}void 0===i&&void 0!==t&&(i=t.symbol);const r=this.safeString2(e,"tradeId","id"),a=this.safeString(e,"orderId"),o=this.safeString(e,"liquidity"),n=this.safeFloat2(e,"size","amount");let d=this.safeInteger(e,"time");void 0!==d?d=parseInt(d/1e6):(d=this.safeInteger(e,"createdAt"),"dealValue"in e&&void 0!==d&&(d*=1e3));const c=this.safeFloat2(e,"price","dealPrice"),h=this.safeString(e,"side");let l=void 0;const u=this.safeFloat(e,"fee");if(void 0!==u){const i=this.safeString(e,"feeCurrency");let s=this.safeCurrencyCode(i);void 0===s&&void 0!==t&&(s="sell"===h?t.quote:t.base),l={cost:u,currency:s,rate:this.safeFloat(e,"feeRate")}}const f=this.safeString(e,"type");let p=this.safeFloat2(e,"funds","dealValue");return void 0===p&&void 0!==n&&void 0!==c&&(p=n*c),{info:e,id:r,order:a,timestamp:d,datetime:this.iso8601(d),symbol:i,type:f,takerOrMaker:o,side:h,price:c,amount:n,cost:p,fee:l}}async withdraw(e,t,i,s,r={}){await this.loadMarkets(),this.checkAddress(i);const a={currency:this.currencyId(e),address:i,amount:t};void 0!==s&&(a.memo=s);const o=await this.privatePostWithdrawals(this.extend(a,r)),n=this.safeValue(o,"data",{});return{id:this.safeString(n,"withdrawalId"),info:o}}parseTransactionStatus(e){return this.safeString({SUCCESS:"ok",PROCESSING:"ok",FAILURE:"failed"},e)}parseTransaction(e,t){const i=this.safeString(e,"currency"),s=this.safeCurrencyCode(i,t);let r=this.safeString(e,"address");const a=this.safeFloat(e,"amount");let o=this.safeString(e,"walletTxId");if(void 0!==o){const e=o.split("@");e.length>1&&void 0===r&&e[1].length>1&&(r=e[1]),o=e[0]}let n=void 0===o?"withdrawal":"deposit";const d=this.safeString(e,"status"),c=this.parseTransactionStatus(d);let h=void 0;const l=this.safeFloat(e,"fee");if(void 0!==l){let e=void 0;void 0!==a&&(e=l/a),h={cost:l,rate:e,currency:s}}const u=this.safeString(e,"memo");let f=this.safeInteger2(e,"createdAt","createAt");const p=this.safeString(e,"id");let m=this.safeInteger(e,"updatedAt");return!("createdAt"in e)&&(n="address"in e?"withdrawal":"deposit",void 0!==f&&(f*=1e3),void 0!==m&&(m*=1e3)),{id:p,address:r,tag:u,currency:s,amount:a,txid:o,type:n,status:c,fee:h,timestamp:f,datetime:this.iso8601(f),updated:m,info:e}}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==i&&(r.pageSize=i);let o="privateGetDeposits";void 0!==t&&(t<1550448e6?(r.startAt=parseInt(t/1e3),o="privateGetHistDeposits"):r.startAt=t);const n=(await this[o](this.extend(r,s))).data.items;return this.parseTransactions(n,a,t,i,{type:"deposit"})}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==i&&(r.pageSize=i);let o="privateGetWithdrawals";void 0!==t&&(t<1550448e6?(r.startAt=parseInt(t/1e3),o="privateGetHistWithdrawals"):r.startAt=t);const n=(await this[o](this.extend(r,s))).data.items;return this.parseTransactions(n,a,t,i,{type:"withdrawal"})}async fetchBalance(e={}){await this.loadMarkets();let t=void 0;const i={};if("type"in e)t=e.type,void 0!==t&&(i.type=t),e=this.omit(e,"type");else{const e=this.safeValue(this.options,"fetchBalance",{});t=this.safeString(e,"type","trade")}const s=await this.privateGetAccounts(this.extend(i,e)),r=this.safeValue(s,"data",[]),a={info:s};for(let o=0;o<r.length;o++){const e=r[o];if(this.safeString(e,"type")===t){const t=this.safeString(e,"currency"),i=this.safeCurrencyCode(t),s=this.account();s.total=this.safeFloat(e,"balance"),s.free=this.safeFloat(e,"available"),s.used=this.safeFloat(e,"holds"),a[i]=s}}return this.parseBalance(a)}async fetchLedger(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchLedger requires a code param");await this.loadMarkets(),await this.loadAccounts();const o=this.currency(e);let n=this.safeString(s,"accountId");if(void 0===n)for(let r=0;r<this.accounts.length;r++){const t=this.accounts[r];if(t.currency===e&&"main"===t.type){n=t.id;break}}if(void 0===n)throw new r(this.id+" "+e+"main account is not loaded in loadAccounts");const d={accountId:n};void 0!==t&&(d.startAt=Math.floor(t/1e3));const c=(await this.privateGetAccountsAccountIdLedgers(this.extend(d,s))).data.items;return this.parseLedger(c,o,t,i)}parseLedgerEntry(e,t){const i=this.safeString(e,"currency"),s=this.safeCurrencyCode(i,t),r={cost:this.safeFloat(e,"fee"),code:s},a=this.safeFloat(e,"amount"),o=this.safeFloat(e,"balance"),n=this.safeString(e,"direction");let d=void 0;if(void 0!==o&&void 0!==a){const e="out"===n?a:-a;d=this.sum(o,e)}const c=this.safeInteger(e,"createdAt"),h=this.parseLedgerEntryType(this.safeString(e,"bizType")),l=this.safeString(e,"context");let u=void 0,f=void 0;if(this.isJsonEncodedObject(l)){const e=this.parseJson(l);u=this.safeString(e,"orderId"),"trade"===h?f=this.safeString(e,"tradeId"):"transaction"===h&&(f=this.safeString(e,"txId"))}return{id:u,currency:s,account:void 0,referenceAccount:void 0,referenceId:f,status:void 0,amount:a,before:d,after:o,fee:r,direction:n,timestamp:c,datetime:this.iso8601(c),type:h,info:e}}parseLedgerEntryType(e){return this.safeString({Exchange:"trade",Withdrawal:"transaction",Deposit:"transaction",Transfer:"transfer"},e,e)}sign(e,t="public",i="GET",s={},r,a){const o=this.safeValue(this.options,"versions",{}),n=this.safeValue(o,t),d=this.safeValue(n,i,{}),c=this.safeString(d,e,this.options.version),h=this.safeString(s,"version",c);s=this.omit(s,"version");let l="/api/"+h+"/"+this.implodeParams(e,s);const u=this.omit(s,this.extractParams(e));let f="";r=void 0!==r?r:{},Object.keys(u).length&&("GET"!==i?(f=a=this.json(u),r["Content-Type"]="application/json"):l+="?"+this.urlencode(u));const p=this.urls.api[t]+l;if("private"===t){this.checkRequiredCredentials();const e=this.nonce().toString();r=this.extend({"KC-API-KEY":this.apiKey,"KC-API-TIMESTAMP":e,"KC-API-PASSPHRASE":this.password},r);const t=e+i+l+f,s=this.hmac(this.encode(t),this.encode(this.secret),"sha256","base64");r["KC-API-SIGN"]=this.decode(s)}return{url:p,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,o,n,d){if(!o)return void this.throwBroadlyMatchedException(this.exceptions.broad,a,a);const c=this.safeString(o,"code"),h=this.safeString(o,"msg");this.throwExactlyMatchedException(this.exceptions.exact,h,h),this.throwExactlyMatchedException(this.exceptions.exact,c,h)}}},jiBz:function(e,t,i){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},jt4p:function(e,t,i){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},"jzP+":function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"paymium",name:"Paymium",countries:["FR","EU"],rateLimit:2e3,version:"v1",has:{CORS:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27790564-a945a9d4-5ff9-11e7-9d2d-b635763f2f24.jpg",api:"https://paymium.com/api",www:"https://www.paymium.com",fees:"https://www.paymium.com/page/help/fees",doc:["https://github.com/Paymium/api-documentation","https://www.paymium.com/page/developers"]},api:{public:{get:["countries","data/{id}/ticker","data/{id}/trades","data/{id}/depth","bitcoin_charts/{id}/trades","bitcoin_charts/{id}/depth"]},private:{get:["merchant/get_payment/{UUID}","user","user/addresses","user/addresses/{btc_address}","user/orders","user/orders/{UUID}","user/price_alerts"],post:["user/orders","user/addresses","user/payment_requests","user/price_alerts","merchant/create_payment"],delete:["user/orders/{UUID}/cancel","user/price_alerts/{id}"]}},markets:{"BTC/EUR":{id:"eur",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"btc",quoteId:"eur"}},fees:{trading:{maker:.002,taker:.002}}})}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetUser(e),i={info:t},s=Object.keys(this.currencies);for(let r=0;r<s.length;r++){const e=s[r],a=this.currencyId(e),o="balance_"+a;if(o in t){const s=this.account(),r="locked_"+a;s.free=this.safeFloat(t,o),s.used=this.safeFloat(t,r),i[e]=s}}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={id:this.marketId(e)},r=await this.publicGetDataIdDepth(this.extend(s,i));return this.parseOrderBook(r,void 0,"bids","asks","price","amount")}async fetchTicker(e,t={}){const i={id:this.marketId(e)},s=await this.publicGetDataIdTicker(this.extend(i,t)),r=this.safeTimestamp(s,"at"),a=this.safeFloat(s,"vwap"),o=this.safeFloat(s,"volume");let n=void 0;void 0!==o&&void 0!==a&&(n=o*a);const d=this.safeFloat(s,"price");return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:a,open:this.safeFloat(s,"open"),close:d,last:d,previousClose:void 0,change:void 0,percentage:this.safeFloat(s,"variation"),average:void 0,baseVolume:o,quoteVolume:n,info:s}}parseTrade(e,t){const i=this.safeTimestamp(e,"created_at_int"),s=this.safeString(e,"uuid");let r=void 0;void 0!==t&&(r=t.symbol);const a=this.safeString(e,"side"),o=this.safeFloat(e,"price"),n="traded_"+t.base.toLowerCase(),d=this.safeFloat(e,n);let c=void 0;return void 0!==o&&void 0!==d&&(c=d*o),{info:e,id:s,order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:r,type:void 0,side:a,takerOrMaker:void 0,price:o,amount:d,cost:c,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={id:r.id},o=await this.publicGetDataIdTrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o={type:this.capitalize(t)+"Order",currency:this.marketId(e),direction:i,amount:s};"market"!==t&&(o.price=r);const n=await this.privatePostUserOrders(this.extend(o,a));return{info:n,id:n.uuid}}async cancelOrder(e,t,i={}){const s={UUID:e};return await this.privateDeleteUserOrdersUUIDCancel(this.extend(s,i))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();const e=this.nonce().toString();let t=e+o;"POST"===i&&Object.keys(n).length&&(t+=a=this.json(n)),r={"Api-Key":this.apiKey,"Api-Signature":this.hmac(this.encode(t),this.encode(this.secret)),"Api-Nonce":e,"Content-Type":"application/json"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){const n=await this.fetch2(e,t,i,s,a,o);if("errors"in n)throw new r(this.id+" "+this.json(n));return n}}},kJEJ:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,AuthenticationError:a}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"itbit",name:"itBit",countries:["US"],rateLimit:2e3,version:"v1",has:{CORS:!0,createMarketOrder:!1,fetchMyTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27822159-66153620-60ad-11e7-89e7-005f6d7f3de0.jpg",api:"https://api.itbit.com",www:"https://www.itbit.com",doc:["https://api.itbit.com/docs","https://www.itbit.com/api"]},api:{public:{get:["markets/{symbol}/ticker","markets/{symbol}/order_book","markets/{symbol}/trades"]},private:{get:["wallets","wallets/{walletId}","wallets/{walletId}/balances/{currencyCode}","wallets/{walletId}/funding_history","wallets/{walletId}/trades","wallets/{walletId}/orders","wallets/{walletId}/orders/{id}"],post:["wallet_transfers","wallets","wallets/{walletId}/cryptocurrency_deposits","wallets/{walletId}/cryptocurrency_withdrawals","wallets/{walletId}/orders","wire_withdrawal"],delete:["wallets/{walletId}/orders/{id}"]}},markets:{"BTC/USD":{id:"XBTUSD",symbol:"BTC/USD",base:"BTC",quote:"USD",baseId:"XBT",quoteId:"USD"},"BTC/SGD":{id:"XBTSGD",symbol:"BTC/SGD",base:"BTC",quote:"SGD",baseId:"XBT",quoteId:"SGD"},"BTC/EUR":{id:"XBTEUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"XBT",quoteId:"EUR"},"ETH/USD":{id:"ETHUSD",symbol:"ETH/USD",base:"ETH",quote:"USD",baseId:"ETH",quoteId:"USD"},"ETH/EUR":{id:"ETHEUR",symbol:"ETH/EUR",base:"ETH",quote:"EUR",baseId:"ETH",quoteId:"EUR"},"ETH/SGD":{id:"ETHSGD",symbol:"ETH/SGD",base:"ETH",quote:"SGD",baseId:"ETH",quoteId:"SGD"}},fees:{trading:{maker:-3e-4,taker:.35/100}},commonCurrencies:{XBT:"BTC"}})}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)},r=await this.publicGetMarketsSymbolOrderBook(this.extend(s,i));return this.parseOrderBook(r)}async fetchTicker(e,t={}){await this.loadMarkets();const i={symbol:this.marketId(e)},s=await this.publicGetMarketsSymbolTicker(this.extend(i,t)),a=this.safeString(s,"serverTimeUTC");if(!a)throw new r(this.id+" fetchTicker returned a bad response: "+this.json(s));const o=this.parse8601(a),n=this.safeFloat(s,"vwap24h"),d=this.safeFloat(s,"volume24h");let c=void 0;void 0!==d&&void 0!==n&&(c=d*n);const h=this.safeFloat(s,"lastPrice");return{symbol:e,timestamp:o,datetime:this.iso8601(o),high:this.safeFloat(s,"high24h"),low:this.safeFloat(s,"low24h"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:n,open:this.safeFloat(s,"openToday"),close:h,last:h,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:d,quoteVolume:c,info:s}}parseTrade(e,t){const i=this.safeString2(e,"executionId","matchNumber"),s=this.parse8601(this.safeString(e,"timestamp")),r=this.safeString(e,"direction"),a=this.safeString(e,"orderId");let o=this.safeFloat(e,"commissionPaid");const n=this.safeString(e,"commissionCurrency"),d=this.safeCurrencyCode(n);let c=this.safeFloat(e,"rebatesApplied");void 0!==c&&(c=-c);const h=this.safeString(e,"rebateCurrency"),l=this.safeCurrencyCode(h),u=this.safeFloat2(e,"price","rate"),f=this.safeFloat2(e,"currency1Amount","amount");let p=void 0;void 0!==u&&void 0!==f&&(p=u*f);let m=void 0;const y=this.safeString(e,"instrument");if(void 0!==y)if(y in this.markets_by_id)t=this.markets_by_id[y];else{const t=this.safeString(e,"currency1"),i=this.safeString(e,"currency2");m=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(i)}void 0===m&&void 0!==t&&(m=t.symbol);const b={info:e,id:i,timestamp:s,datetime:this.iso8601(s),symbol:m,order:a,type:void 0,side:r,takerOrMaker:void 0,price:u,amount:f,cost:p};return void 0!==o&&(void 0!==c?d===l?(o=this.sum(o,c),b.fee={cost:o,currency:d}):b.fees=[{cost:o,currency:d},{cost:c,currency:l}]:b.fee={cost:o,currency:d}),"fee"in b||"fees"in b||(b.fee=void 0),b}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const a=this.safeString(s,"walletId");if(void 0===a)throw new r(this.id+" fetchMyTrades requires a walletId parameter");const o={walletId:a};void 0!==i&&(o.perPage=i);const n=(await this.privateGetWalletsWalletIdFundingHistory(this.extend(o,s))).fundingHistory,d=[];for(let r=0;r<n.length;r++){const e=n[r],t=this.safeString(e,"time"),i=this.parse8601(t),s=this.safeString(e,"currency"),a=this.safeString(e,"destinationAddress"),o=this.safeString(e,"txnHash"),c=this.safeStringLower(e,"transactionType"),h=this.safeString(e,"status"),l=this.parseTransferStatus(h);d.push({id:this.safeString(e,"withdrawalId"),timestamp:i,datetime:this.iso8601(i),currency:this.safeCurrencyCode(s),address:a,tag:void 0,txid:o,type:c,status:l,amount:this.safeFloat(e,"amount"),fee:void 0,info:e})}return d}parseTransferStatus(e){return this.safeString({cancelled:"canceled",completed:"ok"},e,"pending")}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a=this.safeString(s,"walletId");if(void 0===a)throw new r(this.id+" fetchMyTrades requires a walletId parameter");const o={walletId:a};void 0!==t&&(o.rangeStart=this.ymdhms(t,"T")),void 0!==i&&(o.perPage=i);const n=await this.privateGetWalletsWalletIdTrades(this.extend(o,s)),d=this.safeValue(n,"tradingHistory",[]);let c=void 0;return void 0!==e&&(c=this.market(e)),this.parseTrades(d,c,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id},o=await this.publicGetMarketsSymbolTrades(this.extend(a,s)),n=this.safeValue(o,"recentTrades",[]);return this.parseTrades(n,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.fetchWallets(e),i=t[0].balances,s={info:t};for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"currency"),a=this.safeCurrencyCode(t),o=this.account();o.free=this.safeFloat(e,"availableBalance"),o.total=this.safeFloat(e,"totalBalance"),s[a]=o}return this.parseBalance(s)}async fetchWallets(e={}){if(await this.loadMarkets(),!this.uid)throw new a(this.id+" fetchWallets requires uid API credential");const t={userId:this.uid};return await this.privateGetWallets(this.extend(t,e))}async fetchWallet(e,t={}){await this.loadMarkets();const i={walletId:e};return await this.privateGetWalletsWalletId(this.extend(i,t))}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"open"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"filled"},s))}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let a=void 0;if(void 0!==e&&(a=this.market(e)),!("walletId"in s))throw new r(this.id+" fetchOrders requires a walletId parameter");const o={walletId:s.walletId},n=await this.privateGetWalletsWalletIdOrders(this.extend(o,s));return this.parseOrders(n,a,t,i)}parseOrderStatus(e){return this.safeString({submitted:"open",open:"open",filled:"closed",cancelled:"canceled",rejected:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"side"),s=this.safeString(e,"type"),r=this.markets_by_id[e.instrument].symbol,a=this.parse8601(e.createdTime),o=this.safeFloat(e,"amount"),n=this.safeFloat(e,"amountFilled");let d=void 0,c=void 0;const h=this.safeFloat(e,"price"),l=this.safeFloat(e,"volumeWeightedAveragePrice");void 0!==n&&(void 0!==o&&(d=o-n),void 0!==l&&(c=n*l));const u=this.safeString(e,"clientOrderIdentifier");return{id:this.safeString(e,"id"),clientOrderId:u,info:e,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,status:this.parseOrderStatus(this.safeString(e,"status")),symbol:r,type:s,side:i,price:h,cost:c,average:l,amount:o,filled:n,remaining:d,fee:void 0}}nonce(){return this.milliseconds()}async createOrder(e,t,i,s,a,o={}){if(await this.loadMarkets(),"market"===t)throw new r(this.id+" allows limit orders only");if(!("walletId"in o))throw new r(this.id+" createOrder requires a walletId parameter");s=s.toString(),a=a.toString();const n=this.market(e),d={side:i,type:t,currency:n.id.replace(n.quote,""),amount:s,display:s,price:a,instrument:n.id},c=await this.privatePostWalletsWalletIdOrders(this.extend(d,o));return{info:c,id:c.id}}async fetchOrder(e,t,i={}){if(await this.loadMarkets(),!("walletId"in i))throw new r(this.id+" fetchOrder requires a walletId parameter");const s={id:e},a=await this.privateGetWalletsWalletIdOrdersId(this.extend(s,i));return this.parseOrder(a)}async cancelOrder(e,t,i={}){if(!("walletId"in i))throw new r(this.id+" cancelOrder requires a walletId parameter");const s={id:e};return await this.privateDeleteWalletsWalletIdOrdersId(this.extend(s,i))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("GET"===i&&Object.keys(n).length&&(o+="?"+this.urlencode(n)),"POST"===i&&Object.keys(n).length&&(a=this.json(n)),"private"===t){this.checkRequiredCredentials();const e=this.nonce().toString(),t=e,s=[i,o,"POST"===i?a:"",e,t],n=e+this.json(s).replace("\\/","/"),d=this.hash(this.encode(n),"sha256","binary"),c=this.stringToBinary(this.encode(o)),h=this.binaryConcat(c,d),l=this.hmac(h,this.encode(this.secret),"sha512","base64");r={Authorization:this.apiKey+":"+this.decode(l),"Content-Type":"application/json","X-Auth-Timestamp":t,"X-Auth-Nonce":e}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){const n=await this.fetch2(e,t,i,s,a,o);if("code"in n)throw new r(this.id+" "+this.json(n));return n}}},kbH8:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ArgumentsRequired:a,InvalidOrder:o}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"mercado",name:"Mercado Bitcoin",countries:["BR"],rateLimit:1e3,version:"v3",has:{CORS:!0,createMarketOrder:!0,fetchOrder:!0,withdraw:!0,fetchOHLCV:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchTicker:!0,fetchTickers:!1},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","6h":"6h","12h":"12h","1d":"1d","3d":"3d","1w":"1w","2w":"2w"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27837060-e7c58714-60ea-11e7-9192-f05e86adb83f.jpg",api:{public:"https://www.mercadobitcoin.net/api",private:"https://www.mercadobitcoin.net/tapi",v4Public:"https://www.mercadobitcoin.com.br/v4"},www:"https://www.mercadobitcoin.com.br",doc:["https://www.mercadobitcoin.com.br/api-doc","https://www.mercadobitcoin.com.br/trade-api"]},api:{public:{get:["{coin}/orderbook/","{coin}/ticker/","{coin}/trades/","{coin}/trades/{from}/","{coin}/trades/{from}/{to}","{coin}/day-summary/{year}/{month}/{day}/"]},private:{post:["cancel_order","get_account_info","get_order","get_withdrawal","list_system_messages","list_orders","list_orderbook","place_buy_order","place_sell_order","place_market_buy_order","place_market_sell_order","withdraw_coin"]},v4Public:{get:["{coin}/candle/"]}},markets:{"BTC/BRL":{id:"BRLBTC",symbol:"BTC/BRL",base:"BTC",quote:"BRL",precision:{amount:8,price:5},suffix:"Bitcoin"},"LTC/BRL":{id:"BRLLTC",symbol:"LTC/BRL",base:"LTC",quote:"BRL",precision:{amount:8,price:5},suffix:"Litecoin"},"BCH/BRL":{id:"BRLBCH",symbol:"BCH/BRL",base:"BCH",quote:"BRL",precision:{amount:8,price:5},suffix:"BCash"},"XRP/BRL":{id:"BRLXRP",symbol:"XRP/BRL",base:"XRP",quote:"BRL",precision:{amount:8,price:5},suffix:"Ripple"},"ETH/BRL":{id:"BRLETH",symbol:"ETH/BRL",base:"ETH",quote:"BRL",precision:{amount:8,price:5},suffix:"Ethereum"}},fees:{trading:{maker:.003,taker:.7/100}}})}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={coin:this.market(e).base},r=await this.publicGetCoinOrderbook(this.extend(s,i));return this.parseOrderBook(r)}async fetchTicker(e,t={}){await this.loadMarkets();const i={coin:this.market(e).base},s=await this.publicGetCoinTicker(this.extend(i,t)),r=this.safeValue(s,"ticker",{}),a=this.safeTimestamp(r,"date"),o=this.safeFloat(r,"last");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(r,"high"),low:this.safeFloat(r,"low"),bid:this.safeFloat(r,"buy"),bidVolume:void 0,ask:this.safeFloat(r,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(r,"vol"),quoteVolume:void 0,info:r}}parseTrade(e,t){const i=this.safeTimestamp(e,"date");let s=void 0;void 0!==t&&(s=t.symbol);const r=this.safeString(e,"tid"),a=this.safeString(e,"type"),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount");let d=void 0;return void 0!==o&&void 0!==n&&(d=o*n),{id:r,info:e,timestamp:i,datetime:this.iso8601(i),symbol:s,order:void 0,type:void 0,side:a,takerOrMaker:void 0,price:o,amount:n,cost:d,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e);let a="publicGetCoinTrades";const o={coin:r.base};void 0!==t&&(a+="From",o.from=parseInt(t/1e3)),void 0!==this.safeInteger(s,"to")&&(a+="To");const n=await this[a](this.extend(o,s));return this.parseTrades(n,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGetAccountInfo(e),i=this.safeValue(t,"response_data",{}),s=this.safeValue(i,"balance",{}),r={info:t},a=Object.keys(s);for(let o=0;o<a.length;o++){const e=a[o],t=this.safeCurrencyCode(e);if(e in s){const i=this.safeValue(s,e,{}),a=this.account();a.free=this.safeFloat(i,"available"),a.total=this.safeFloat(i,"total"),r[t]=a}}return this.parseBalance(r)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n={coin_pair:this.marketId(e)};let d=this.capitalize(i)+"Order";if("limit"===t)d="privatePostPlace"+d,n.limit_price=this.priceToPrecision(e,r),n.quantity=this.amountToPrecision(e,s);else if(d="privatePostPlaceMarket"+d,"buy"===i){if(void 0===r)throw new o(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount");n.cost=this.priceToPrecision(e,s*r)}else n.quantity=this.amountToPrecision(e,s);const c=await this[d](this.extend(n,a));return{info:c,id:c.response_data.order.order_id.toString()}}async cancelOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" cancelOrder () requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={coin_pair:s.id,order_id:e},o=await this.privatePostCancelOrder(this.extend(r,i)),n=this.safeValue(o,"response_data",{}),d=this.safeValue(n,"order",{});return this.parseOrder(d,s)}parseOrderStatus(e){return this.safeString({2:"open",3:"canceled",4:"closed"},e,e)}parseOrder(e,t){const i=this.safeString(e,"order_id");let s=void 0;"order_type"in e&&(s=1===e.order_type?"buy":"sell");const r=this.parseOrderStatus(this.safeString(e,"status"));let a=void 0;if(void 0===t){const i=this.safeString(e,"coin_pair");t=this.safeValue(this.markets_by_id,i)}void 0!==t&&(a=t.symbol);const o=this.safeTimestamp(e,"created_timestamp"),n={cost:this.safeFloat(e,"fee"),currency:t.quote},d=this.safeFloat(e,"limit_price"),c=this.safeFloat(e,"executed_price_avg"),h=this.safeFloat(e,"quantity"),l=this.safeFloat(e,"executed_quantity"),u=h-l,f=l*c,p=this.safeTimestamp(e,"updated_timestamp");return{info:e,id:i,clientOrderId:void 0,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:p,symbol:a,type:"limit",side:s,price:d,cost:f,average:c,amount:h,filled:l,remaining:u,status:r,fee:n,trades:void 0}}async fetchOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" fetchOrder () requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={coin_pair:s.id,order_id:parseInt(e)},o=await this.privatePostGetOrder(this.extend(r,i)),n=this.safeValue(o,"response_data",{}),d=this.safeValue(n,"order");return this.parseOrder(d,s)}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const o={coin:this.currency(e).id,quantity:t.toFixed(10),address:i};if("BRL"===e){if(!("account_ref"in a))throw new r(this.id+" requires account_ref parameter to withdraw "+e)}else if("LTC"!==e){if(!("tx_fee"in a))throw new r(this.id+" requires tx_fee parameter to withdraw "+e);if("XRP"===e)if(void 0===s){if(!("destination_tag"in a))throw new r(this.id+" requires a tag argument or destination_tag parameter to withdraw "+e)}else o.destination_tag=s}const n=await this.privatePostWithdrawCoin(this.extend(o,a));return{info:n,id:n.response_data.withdrawal.id}}parseOHLCV(e,t,i="1m",s,r){return[this.safeTimestamp(e,"timestamp"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchOHLCV(e,t="5m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={precision:this.timeframes[t],coin:a.id.toLowerCase()};void 0!==s&&void 0!==i?(o.from=parseInt(i/1e3),o.to=this.sum(o.from,s*this.parseTimeframe(t))):void 0!==i?(o.from=parseInt(i/1e3),o.to=this.sum(this.seconds(),1)):void 0!==s&&(o.to=this.seconds(),o.from=o.to-s*this.parseTimeframe(t));const n=await this.v4PublicGetCoinCandle(this.extend(o,r)),d=this.safeValue(n,"candles",[]);return this.parseOHLCVs(d,a,t,i,s)}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchOrders () requires a symbol argument");await this.loadMarkets();const r=this.market(e),o={coin_pair:r.id},n=await this.privatePostListOrders(this.extend(o,s)),d=this.safeValue(n,"response_data",{}),c=this.safeValue(d,"orders",[]);return this.parseOrders(c,r,t,i)}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/";const n=this.omit(s,this.extractParams(e));if("public"===t||"v4Public"===t)o+=this.implodeParams(e,s),Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials(),o+=this.version+"/";const t=this.nonce();a=this.urlencode(this.extend({tapi_method:e,tapi_nonce:t},s));const i="/tapi/"+this.version+"/?"+a;r={"Content-Type":"application/x-www-form-urlencoded","TAPI-ID":this.apiKey,"TAPI-MAC":this.hmac(this.encode(i),this.encode(this.secret),"sha512")}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){const n=await this.fetch2(e,t,i,s,a,o);if("error_message"in n)throw new r(this.id+" "+this.json(n));return n}}},l6ZL:function(e,t,i){"use strict";const s=i("OjXq"),{InvalidNonce:r,AuthenticationError:a,AccountSuspended:o,InsufficientFunds:n,ExchangeError:d,ArgumentsRequired:c,NotSupported:h}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"stronghold",name:"Stronghold",country:["US"],rateLimit:1e3,version:"v1",comment:"This comment is optional",urls:{logo:"https://user-images.githubusercontent.com/1294454/52160042-98c1f300-26be-11e9-90dd-da8473944c83.jpg",api:{public:"https://api.stronghold.co",private:"https://api.stronghold.co"},www:"https://stronghold.co",doc:["https://docs.stronghold.co"]},requiredCredentials:{apiKey:!0,secret:!0,password:!0},has:{fetchMarkets:!0,fetchCurrencies:!0,fetchOrderBook:!0,fetchOpenOrders:!0,fetchTime:!0,fetchTrades:!0,fetchMyTrades:!0,fetchDepositAddress:!1,createDepositAddress:!0,withdraw:!0,fetchTicker:!1,fetchTickers:!1,fetchAccounts:!0,fetchTransactions:!0},api:{public:{get:["utilities/time","utilities/uuid","venues","venues/{venueId}/assets","venues/{venueId}/markets","venues/{venueId}/markets/{marketId}/orderbook","venues/{venueId}/markets/{marketId}/trades"],post:["venues/{venueId}/assets","iam/credentials","identities"],patch:["identities"],put:["iam/credentials/{credentialId}"],delete:["iam/credentials/{credentialId}"]},private:{get:["venues","venues/{venueId}/accounts","venues/{venueId}/accounts/{accountId}","venues/{venueId}/accounts/{accountId}/payments/{paymentId}","venues/{venueId}/accounts/{accountId}/orders","venues/{venueId}/accounts/{accountId}/trades","venues/{venueId}/accounts/{accountId}/transactions"],post:["venues/{venueId}/accounts","venues/{venueId}/accounts/{accountId}/orders","venues/{venueId}/accounts/{accountId}/deposit","venues/{venueId}/accounts/{accountId}/withdrawal","venues/{venueId}/accounts/{accountId}/payments","venues/{venueId}/accounts/{accountId}/payments/{paymentId}/stop","venues/{venueId}/custody/accounts/{accountId}/operations/{operationId}/signatures","venues/{venueId}/anchor/withdrawal","venues/{venueId}/testing/friendbot"],delete:["venues/{venueId}/accounts/{accountId}/orders/{orderId}"]}},options:{accountId:void 0,venueId:"trade-public",venues:{trade:"trade-public",sandbox:"sandbox-public"},paymentMethods:{ETH:"ethereum",BTC:"bitcoin",XLM:"stellar",XRP:"ripple",LTC:"litecoin",SHX:"stellar"}},exceptions:{CREDENTIAL_MISSING:a,CREDENTIAL_INVALID:a,CREDENTIAL_REVOKED:o,CREDENTIAL_NO_IDENTITY:a,PASSPHRASE_INVALID:a,SIGNATURE_INVALID:a,TIME_INVALID:r,BYPASS_INVALID:a,INSUFFICIENT_FUNDS:n}})}async getActiveAccount(){if(void 0!==this.options.accountId)return this.options.accountId;if(await this.loadAccounts(),this.accounts.length>0)return this.accounts[0].id;throw new d(this.id+" requires an accountId.")}async fetchAccounts(e={}){const t={venueId:this.options.venueId};return(await this.privateGetVenuesVenueIdAccounts(this.extend(t,e))).result}async fetchTime(e={}){const t=await this.publicGetUtilitiesTime(e);return this.parse8601(this.safeString(t.result,"timestamp"))}async fetchMarkets(e={}){const t={venueId:this.options.venueId},i=(await this.publicGetVenuesVenueIdMarkets(this.extend(t,e))).result,s={};for(let r=0;r<i.length;r++){const e=i[r],t=e.id,a=this.safeString(e,"baseAssetId"),o=this.safeString(e,"counterAssetId"),n=a.split("/")[0],d=o.split("/")[0],c=this.safeCurrencyCode(n),h=this.safeCurrencyCode(d),l=c+"/"+h,u={amount:{min:this.safeFloat(e,"minimumOrderSize"),max:void 0}},f={price:this.safeInteger(e,"displayDecimalsPrice"),amount:this.safeInteger(e,"displayDecimalsAmount")};s[l]={symbol:l,id:t,base:c,quote:h,baseId:a,quoteId:o,precision:f,info:e,limits:u}}return s}async fetchCurrencies(e={}){const t={venueId:this.options.venueId},i=(await this.publicGetVenuesVenueIdAssets(this.extend(t,e))).result,s={},r={amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}};for(let a=0;a<i.length;a++){const e=i[a],t=this.safeString(e,"id"),o=this.safeString(e,"code"),n=this.safeCurrencyCode(o),d=this.safeInteger(e,"displayDecimalsFull");s[n]={code:n,id:t,precision:d,info:e,active:void 0,name:void 0,limits:r}}return s}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={marketId:this.marketId(e),venueId:this.options.venueId},r=await this.publicGetVenuesVenueIdMarketsMarketIdOrderbook(this.extend(s,i)),a=r.result,o=this.parse8601(this.safeString(r,"timestamp"));return this.parseOrderBook(a,o)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={marketId:r.id,venueId:this.options.venueId},o=await this.publicGetVenuesVenueIdMarketsMarketIdTrades(this.extend(a,s));return this.parseTrades(o.result.trades,r,t,i)}parseTrade(e,t){let i=void 0,s=void 0,r=void 0,a=void 0,o=void 0,n=void 0,d=void 0,c=void 0;if(Array.isArray(e))r=parseFloat(e[0]),a=parseFloat(e[1]),n=e[2],d=this.parse8601(e[3]);else{i=this.safeString(e,"id"),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"size"),n=this.safeString(e,"side"),d=this.parse8601(this.safeString(e,"executedAt")),c=this.safeString(e,"orderId");const o=this.safeString(e,"marketId");t=this.safeValue(this.markets_by_id,o),s=this.safeValue(e,"maker")?"maker":"taker"}void 0!==a&&void 0!==r&&(o=a*r);let h=void 0;return void 0!==t&&(h=t.symbol),{id:i,info:e,timestamp:d,datetime:this.iso8601(d),symbol:h,type:void 0,order:c,side:n,price:r,amount:a,cost:o,takerOrMaker:s,fee:{cost:void 0,currency:void 0,rate:void 0}}}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const r=this.extend({venueId:this.options.venueId,accountId:await this.getActiveAccount()},s);if(!r.accountId)throw new c(this.id+" fetchTransactions requires either the 'accountId' extra parameter or exchange.options['accountId'] = 'YOUR_ACCOUNT_ID'.");const a=await this.privateGetVenuesVenueIdAccountsAccountIdTransactions(r);let o=void 0;return void 0!==e&&(o=this.currency(e)),this.parseTransactions(a.result,o,t,i)}parseTransactionStatus(e){return this.safeString({queued:"pending",settling:"pending"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"assetId");let r=void 0;if(void 0!==s){const e=s.split("/")[0];r=this.safeCurrencyCode(e)}else void 0!==t&&(r=t.code);const a=this.safeFloat(e,"amount"),o=this.parseTransactionStatus(this.safeString(e,"status")),n=this.safeFloat(e,"feeAmount");let d=void 0;void 0!==n&&(d=n/a);const c=this.safeString(e,"direction"),h=this.safeString(e,"requestedAt"),l=this.parse8601(h);return{id:i,info:e,currency:r,amount:a,status:o,fee:{cost:n,rate:d},tag:void 0,type:"outgoing"===c||"withdrawal"===c?"withdrawal":"deposit",updated:this.parse8601(this.safeString(e,"updatedAt")),address:void 0,txid:void 0,timestamp:l,datetime:h}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),n=this.extend({venueId:this.options.venueId,accountId:await this.getActiveAccount(),marketID:o.id,type:t,side:i,size:this.amountToPrecision(e,s),price:this.priceToPrecision(e,r)},a);if(!n.accountId)throw new c(this.id+" createOrder requires either the 'accountId' extra parameter or exchange.options['accountId'] = 'YOUR_ACCOUNT_ID'.");const d=await this.privatePostVenuesVenueIdAccountsAccountIdOrders(n);return this.parseOrder(d,o)}async cancelOrder(e,t,i={}){const s=this.extend({venueId:this.options.venueId,accountId:await this.getActiveAccount(),orderId:e},i);if(!s.accountId)throw new c(this.id+" cancelOrder requires either the 'accountId' extra parameter or exchange.options['accountId'] = 'YOUR_ACCOUNT_ID'.");const r=await this.privateDeleteVenuesVenueIdAccountsAccountIdOrdersOrderId(s);return this.parseOrder(r)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;void 0!==e&&(r=this.market(e));const a=this.extend({venueId:this.options.venueId,accountId:await this.getActiveAccount()},s);if(!a.accountId)throw new c(this.id+" cancelOrder requires either the 'accountId' extra parameter or exchange.options['accountId'] = 'YOUR_ACCOUNT_ID'.");const o=await this.privateGetVenuesVenueIdAccountsAccountIdOrders(a);return this.parseOrders(o.result,r,t,i)}parseOrder(e,t){const i=this.safeString(e,"marketId");void 0!==i&&(t=this.safeValue(this.marketsById,i));let s=void 0;void 0!==t&&(s=t.symbol);const r=this.safeString(e,"id"),a=this.safeString(e,"placedAt"),o=this.safeFloat(e,"size"),n=this.safeFloat(e,"price"),d=this.safeFloat(e,"sizeFilled");let c=void 0,h=void 0;return void 0!==o&&(void 0!==d&&(h=o-d),void 0!==n&&(c=o*n)),{id:r,clientOrderId:void 0,info:e,symbol:s,datetime:a,timestamp:this.parse8601(a),side:this.safeString(e,"side"),amount:o,filled:d,remaining:h,price:n,cost:c,trades:[],lastTradeTimestamp:void 0,status:void 0,type:void 0,average:void 0}}nonce(){return this.seconds()}setSandboxMode(e){this.options.venueId=e?this.options.venues.sandbox:this.options.venues.trade}async fetchBalance(e={}){const t=this.extend({venueId:this.options.venueId,accountId:await this.getActiveAccount()},e);if(!("accountId"in t))throw new c(this.id+" fetchBalance requires either the 'accountId' extra parameter or exchange.options['accountId'] = 'YOUR_ACCOUNT_ID'.");const i=await this.privateGetVenuesVenueIdAccountsAccountId(t),s=this.safeValue(i.result,"balances"),r={info:i};for(let a=0;a<s.length;a++){const e=s[a],t=this.safeString(e,"assetId");if(void 0!==t){const i=t.split("/")[0],s=this.safeCurrencyCode(i),a={};a.total=this.safeFloat(e,"amount"),a.free=this.safeFloat(e,"availableForTrade"),r[s]=a}}return this.parseBalance(r)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r=this.extend({venueId:this.options.venueId,accountId:await this.getActiveAccount()},s);if(!r.accountId)throw new c(this.id+" fetchMyTrades requires either the 'accountId' extra parameter or exchange.options['accountId'] = 'YOUR_ACCOUNT_ID'.");const a=await this.privateGetVenuesVenueIdAccountsAccountIdTrades(r);let o=void 0;return void 0!==e&&(o=this.market(e)),this.parseTrades(a.result,o,t,i)}async createDepositAddress(e,t={}){await this.loadMarkets();const i=this.safeString(this.options.paymentMethods,e);if(void 0===i)throw new h(this.id+" createDepositAddress requires code to be BTC, ETH, or XLM");const s=this.extend({venueId:this.options.venueId,accountId:await this.getActiveAccount(),assetId:this.currencyId(e),paymentMethod:i},t);if(!s.accountId)throw new c(this.id+" createDepositAddress requires either the 'accountId' extra parameter or exchange.options['accountId'] = 'YOUR_ACCOUNT_ID'.");const r=await this.privatePostVenuesVenueIdAccountsAccountIdDeposit(s),a=r.result.paymentMethodInstructions,o=a.deposit_address,n=this.safeString(a,"reference");return{currency:e,address:this.checkAddress(o),tag:n,info:r}}async withdraw(e,t,i,s,r={}){await this.loadMarkets();const a=this.safeString(this.options.paymentMethods,e);if(void 0===a)throw new h(this.id+" withdraw requires code to be BTC, ETH, or XLM");const o=this.extend({venueId:this.options.venueId,accountId:await this.getActiveAccount(),assetId:this.currencyId(e),amount:t,paymentMethod:a,paymentMethodDetails:{withdrawal_address:i}},r);if(void 0!==s&&(o.paymentMethodDetails.reference=s),!o.accountId)throw new c(this.id+" withdraw requires either the 'accountId' extra parameter or exchange.options['accountId'] = 'YOUR_ACCOUNT_ID'.");const n=await this.privatePostVenuesVenueIdAccountsAccountIdWithdrawal(o),d=n.result;return{id:this.safeString(d,"id"),info:n}}handleErrors(e,t,i,s,r,a,o,n,c){if(!o)return;const h=this.safeString(o,"errorCode");if(h in this.exceptions){throw new(0,this.exceptions[h])(this.id+" "+a)}if(!this.safeValue(o,"success"))throw new d(this.id+" "+a)}sign(e,t="public",i="GET",s={},r,a){const o="/"+this.version+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));let d=this.urls.api[t]+o;if(Object.keys(n).length&&("GET"===i?d+="?"+this.urlencode(n):a=this.json(n)),"private"===t){this.checkRequiredCredentials();const e=this.nonce().toString();let t=e+i+o;void 0!==a&&(t+=a);const s=this.base64ToBinary(this.secret);r={"SH-CRED-ID":this.apiKey,"SH-CRED-SIG":this.hmac(this.encode(t),s,"sha256","base64"),"SH-CRED-TIME":e,"SH-CRED-PASS":this.password,"Content-Type":"application/json"}}return{url:d,method:i,body:a,headers:r}}}},lWi4:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,DDoSProtection:a,AuthenticationError:o,InvalidOrder:n}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"lbank",name:"LBank",countries:["CN"],version:"v1",has:{fetchTickers:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!1,fetchClosedOrders:!0},timeframes:{"1m":"minute1","5m":"minute5","15m":"minute15","30m":"minute30","1h":"hour1","2h":"hour2","4h":"hour4","6h":"hour6","8h":"hour8","12h":"hour12","1d":"day1","1w":"week1"},urls:{logo:"https://user-images.githubusercontent.com/1294454/38063602-9605e28a-3302-11e8-81be-64b1e53c4cfb.jpg",api:"https://api.lbank.info",www:"https://www.lbank.info",doc:"https://github.com/LBank-exchange/lbank-official-api-docs",fees:"https://lbankinfo.zendesk.com/hc/en-gb/articles/360012072873-Trading-Fees",referral:"https://www.lbex.io/invite?icode=7QCY"},api:{public:{get:["currencyPairs","ticker","depth","trades","kline","accuracy"]},private:{post:["user_info","create_order","cancel_order","orders_info","orders_info_history","withdraw","withdrawCancel","withdraws","withdrawConfigs"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:void 0,ZEC:.01,ETH:.01,ETC:.01,VEN:10,BCH:2e-4,SC:50,BTM:20,NAS:1,EOS:1,XWC:5,BTS:1,INK:10,BOT:3,YOYOW:15,TGC:10,NEO:0,CMT:20,SEER:2e3,FIL:void 0,BTG:void 0}}},commonCurrencies:{VET_ERC20:"VEN"},options:{cacheSecretAsPem:!0}})}async fetchMarkets(e={}){const t=await this.publicGetAccuracy(e),i=[];for(let s=0;s<t.length;s++){const e=t[s],r=e.symbol,a=r.split("_");let o=void 0,n=void 0;a.length>2?(o=a[0]+"_"+a[1],n=a[2]):(o=a[0],n=a[1]);const d=this.safeCurrencyCode(o),c=this.safeCurrencyCode(n),h=d+"/"+c,l={amount:this.safeInteger(e,"quantityAccuracy"),price:this.safeInteger(e,"priceAccuracy")};i.push({id:r,symbol:h,base:d,quote:c,baseId:o,quoteId:n,active:!0,precision:l,limits:{amount:{min:Math.pow(10,-l.amount),max:void 0},price:{min:Math.pow(10,-l.price),max:Math.pow(10,l.price)},cost:{min:void 0,max:void 0}},info:r})}return i}parseTicker(e,t){let i=void 0;if(void 0===t){const t=this.safeString(e,"symbol");if(t in this.markets_by_id){i=this.marketsById[t].symbol}else{const e=t.split("_");let s=void 0,r=void 0;e.length>2?(s=e[0]+"_"+e[1],r=e[2]):(s=e[0],r=e[1]),i=this.safeCurrencyCode(s)+"/"+this.safeCurrencyCode(r)}}const s=this.safeInteger(e,"timestamp"),r=e;e=r.ticker;const a=this.safeFloat(e,"latest"),o=this.safeFloat(e,"change");let n=void 0;if(void 0!==o){const e=this.sum(1,o/100);e>0&&(n=a/this.sum(1,e))}let d=void 0,c=void 0;return void 0!==a&&void 0!==n&&(d=a-n,c=this.sum(a,n)/2),void 0!==t&&(i=t.symbol),{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:d,percentage:o,average:c,baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"turnover"),info:r}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetTicker(this.extend(s,t));return this.parseTicker(r,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(this.extend({symbol:"all"},t)),s={};for(let r=0;r<i.length;r++){const e=this.parseTicker(i[r]);s[e.symbol]=e}return s}async fetchOrderBook(e,t=60,i={}){await this.loadMarkets();let s=60;void 0!==t&&(s=Math.min(t,s));const r={symbol:this.marketId(e),size:s},a=await this.publicGetDepth(this.extend(r,i));return this.parseOrderBook(a)}parseTrade(e,t){let i=void 0;void 0!==t&&(i=t.symbol);const s=this.safeInteger(e,"date_ms"),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount");let o=void 0;void 0!==r&&void 0!==a&&(o=parseFloat(this.costToPrecision(i,r*a)));const n=this.safeString(e,"tid"),d=this.safeString(e,"type");return{id:n,info:this.safeValue(e,"info",e),timestamp:s,datetime:this.iso8601(s),symbol:i,order:void 0,type:void 0,side:d,takerOrMaker:void 0,price:r,amount:a,cost:o,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id,size:100};void 0!==t&&(a.time=parseInt(t)),void 0!==i&&(a.size=i);const o=await this.publicGetTrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}parseOHLCV(e,t,i="1m",s,r){return[1e3*e[0],e[1],e[2],e[3],e[4],e[5]]}async fetchOHLCV(e,t="5m",i,s=1e3,a={}){await this.loadMarkets();const o=this.market(e);if(void 0===i)throw new r(this.id+" fetchOHLCV requires a `since` argument");if(void 0===s)throw new r(this.id+" fetchOHLCV requires a `limit` argument");const n={symbol:o.id,type:this.timeframes[t],size:s,time:parseInt(i/1e3)},d=await this.publicGetKline(this.extend(n,a));return this.parseOHLCVs(d,o,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostUserInfo(e),i={info:t},s=this.safeValue(t,"info",{}),r=this.safeValue(s,"free",{}),a=this.safeValue(s,"freeze",{}),o=this.safeValue(s,"asset",{}),n=Object.keys(r);for(let d=0;d<n.length;d++){const e=n[d],t=this.safeCurrencyCode(e),s=this.account();s.free=this.safeFloat(r,e),s.used=this.safeFloat(a,e),s.total=this.safeFloat(o,e),i[t]=s}return this.parseBalance(i)}parseOrderStatus(e){return this.safeString({"-1":"cancelled",0:"open",1:"open",2:"closed",4:"closed"},e)}parseOrder(e,t){let i=void 0;const s=this.safeValue(this.marketsById,e.symbol);void 0!==s?i=s.symbol:void 0!==t&&(i=t.symbol);const r=this.safeInteger(e,"create_time"),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount",0),n=this.safeFloat(e,"deal_amount",0),d=this.safeFloat(e,"avg_price");let c=void 0;void 0!==d&&(c=n*d);const h=this.parseOrderStatus(this.safeString(e,"status")),l=this.safeString(e,"order_id"),u=this.safeString(e,"order_type"),f=this.safeString(e,"type");let p=void 0;return void 0!==o&&void 0!==n&&(p=o-n),{id:l,clientOrderId:void 0,datetime:this.iso8601(r),timestamp:r,lastTradeTimestamp:void 0,status:h,symbol:i,type:u,side:f,price:a,cost:c,amount:o,filled:n,remaining:p,trades:void 0,fee:void 0,info:this.safeValue(e,"info",e)}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e);let n={symbol:o.id,type:i,amount:s};"market"===t?n.type+="_market":n.price=r;const d=await this.privatePostCreateOrder(this.extend(n,a));n=this.omit(n,"type"),n.order_id=d.order_id,n.type=i,n.order_type=t,n.create_time=this.milliseconds(),n.info=d,n=this.parseOrder(n,o);const c=n.id;return this.orders[c]=n,n}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(t).id,order_id:e};return await this.privatePostCancelOrder(this.extend(s,i))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s=this.market(t),r={symbol:s.id,order_id:e},a=await this.privatePostOrdersInfo(this.extend(r,i)),o=this.parseOrders(a.orders,s);return 1===o.length?o[0]:o}async fetchOrders(e,t,i,s={}){await this.loadMarkets(),void 0===i&&(i=100);const r={symbol:this.market(e).id,current_page:1,page_length:i},a=await this.privatePostOrdersInfoHistory(this.extend(r,s));return this.parseOrders(a.orders,void 0,t,i)}async fetchClosedOrders(e,t,i,s={}){const r=await this.fetchOrders(e,t,i,s),a=this.filterBy(r,"status","closed"),o=this.filterBy(r,"status","cancelled"),n=this.arrayConcat(a,o);return this.filterBySymbolSinceLimit(n,e,t,i)}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a={assetCode:this.currency(e).id,amount:t,account:i};void 0!==s&&(a.memo=s);const o=this.privatePostWithdraw(this.extend(a,r));return{id:o.id,info:o}}convertSecretToPem(e){const t=e.length-0;let i=parseInt(t/64);i=this.sum(i,1);let s="-----BEGIN PRIVATE KEY-----\n";for(let r=0;r<i;r++){const e=64*r,t=this.sum(e,64);s+=this.secret.slice(e,t)+"\n"}return s+"-----END PRIVATE KEY-----"}sign(e,t="public",i="GET",s={},r,a){const o=this.omit(s,this.extractParams(e));let n=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s);if(n+=".do","public"===t)Object.keys(o).length&&(n+="?"+this.urlencode(o));else{this.checkRequiredCredentials();const e=this.keysort(this.extend({api_key:this.apiKey},s)),t=this.rawencode(e),i=this.hash(this.encode(t)).toUpperCase();let o=void 0;this.safeValue(this.options,"cacheSecretAsPem",!0)?(o=this.safeValue(this.options,"pem"),void 0===o&&(o=this.convertSecretToPem(this.secret),this.options.pem=o)):o=this.convertSecretToPem(this.secret);const n=this.binaryToBase64(this.rsa(i,this.encode(o),"RS256"));e.sign=n,a=this.urlencode(e),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:n,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},d,c){const h=await this.fetch2(e,t,i,s,d,c);if("false"===this.safeString(h,"result")){const e=this.safeString(h,"error_code"),t=this.safeString({1e4:"Internal error",10001:"The required parameters can not be empty",10002:"verification failed",10003:"Illegal parameters",10004:"User requests are too frequent",10005:"Key does not exist",10006:"user does not exist",10007:"Invalid signature",10008:"This currency pair is not supported",10009:"Limit orders can not be missing orders and the number of orders",10010:"Order price or order quantity must be greater than 0",10011:"Market orders can not be missing the amount of the order",10012:"market sell orders can not be missing orders",10013:"is less than the minimum trading position 0.001",10014:"Account number is not enough",10015:"The order type is wrong",10016:"Account balance is not enough",10017:"Abnormal server",10018:"order inquiry can not be more than 50 less than one",10019:"withdrawal orders can not be more than 3 less than one",10020:"less than the minimum amount of the transaction limit of 0.001",10022:"Insufficient key authority"},e,this.json(h));throw new(this.safeValue({10002:o,10004:a,10005:o,10006:o,10007:o,10009:n,10010:n,10011:n,10012:n,10013:n,10014:n,10015:n,10016:n,10022:o},e,r))(t)}return h}}},"m2R+":function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,InvalidNonce:a,AuthenticationError:o,OrderNotFound:n}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitso",name:"Bitso",countries:["MX"],rateLimit:2e3,version:"v3",has:{CORS:!1,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766335-715ce7aa-5ed5-11e7-88a8-173a27bb30fe.jpg",api:"https://api.bitso.com",www:"https://bitso.com",doc:"https://bitso.com/api_info",fees:"https://bitso.com/fees?l=es",referral:"https://bitso.com/?ref=itej"},options:{precision:{XRP:6,MXN:2,TUSD:2},defaultPrecision:8},api:{public:{get:["available_books","ticker","order_book","trades"]},private:{get:["account_status","balance","fees","fundings","fundings/{fid}","funding_destination","kyc_documents","ledger","ledger/trades","ledger/fees","ledger/fundings","ledger/withdrawals","mx_bank_codes","open_orders","order_trades/{oid}","orders/{oid}","user_trades","user_trades/{tid}","withdrawals/","withdrawals/{wid}"],post:["bitcoin_withdrawal","debit_card_withdrawal","ether_withdrawal","ripple_withdrawal","bcash_withdrawal","litecoin_withdrawal","orders","phone_number","phone_verification","phone_withdrawal","spei_withdrawal","ripple_withdrawal","bcash_withdrawal","litecoin_withdrawal"],delete:["orders/{oid}","orders/all"]}},exceptions:{"0201":o,104:a}})}async fetchMarkets(e={}){const t=await this.publicGetAvailableBooks(e),i=this.safeValue(t,"payload"),s=[];for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"book"),[a,o]=t.split("_");let n=a.toUpperCase(),d=o.toUpperCase();n=this.safeCurrencyCode(n),d=this.safeCurrencyCode(d);const c=n+"/"+d,h={amount:{min:this.safeFloat(e,"minimum_amount"),max:this.safeFloat(e,"maximum_amount")},price:{min:this.safeFloat(e,"minimum_price"),max:this.safeFloat(e,"maximum_price")},cost:{min:this.safeFloat(e,"minimum_value"),max:this.safeFloat(e,"maximum_value")}},l={amount:this.safeInteger(this.options.precision,n,this.options.defaultPrecision),price:this.safeInteger(this.options.precision,d,this.options.defaultPrecision)};s.push({id:t,symbol:c,base:n,quote:d,baseId:a,quoteId:o,info:e,limits:h,precision:l})}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalance(e),i=this.safeValue(t.payload,"balances"),s={info:t};for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"currency"),a=this.safeCurrencyCode(t),o={free:this.safeFloat(e,"available"),used:this.safeFloat(e,"locked"),total:this.safeFloat(e,"total")};s[a]=o}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={book:this.marketId(e)},r=await this.publicGetOrderBook(this.extend(s,i)),a=this.safeValue(r,"payload"),o=this.parse8601(this.safeString(a,"updated_at"));return this.parseOrderBook(a,o,"bids","asks","price","amount")}async fetchTicker(e,t={}){await this.loadMarkets();const i={book:this.marketId(e)},s=await this.publicGetTicker(this.extend(i,t)),r=this.safeValue(s,"payload"),a=this.parse8601(this.safeString(r,"created_at")),o=this.safeFloat(r,"vwap"),n=this.safeFloat(r,"volume");let d=void 0;void 0!==n&&void 0!==o&&(d=n*o);const c=this.safeFloat(r,"last");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(r,"high"),low:this.safeFloat(r,"low"),bid:this.safeFloat(r,"bid"),bidVolume:void 0,ask:this.safeFloat(r,"ask"),askVolume:void 0,vwap:o,open:void 0,close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:n,quoteVolume:d,info:r}}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"created_at"));let s=void 0;if(void 0===t){const i=this.safeString(e,"book");i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(s=t.symbol);const r=this.safeString2(e,"side","maker_side");let a=this.safeFloat2(e,"amount","major");void 0!==a&&(a=Math.abs(a));let o=void 0;const n=this.safeFloat(e,"fees_amount");if(void 0!==n){const t=this.safeString(e,"fees_currency");o={cost:n,currency:this.safeCurrencyCode(t)}}let d=this.safeFloat(e,"minor");void 0!==d&&(d=Math.abs(d));const c=this.safeFloat(e,"price"),h=this.safeString(e,"oid");return{id:this.safeString(e,"tid"),info:e,timestamp:i,datetime:this.iso8601(i),symbol:s,order:h,type:void 0,side:r,takerOrMaker:void 0,price:c,amount:a,cost:d,fee:o}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={book:r.id},o=await this.publicGetTrades(this.extend(a,s));return this.parseTrades(o.payload,r,t,i)}async fetchMyTrades(e,t,i=25,s={}){await this.loadMarkets();const a=this.market(e),o="marker"in s;if(void 0!==t&&!o)throw new r(this.id+" fetchMyTrades does not support fetching trades starting from a timestamp with the `since` argument, use the `marker` extra param to filter starting from an integer trade id");o&&(s=this.extend(s,{marker:parseInt(s.marker)}));const n={book:a.id,limit:i},d=await this.privateGetUserTrades(this.extend(n,s));return this.parseTrades(d.payload,a,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o={book:this.marketId(e),side:i,type:t,major:this.amountToPrecision(e,s)};"limit"===t&&(o.price=this.priceToPrecision(e,r));const n=await this.privatePostOrders(this.extend(o,a));return{info:n,id:this.safeString(n.payload,"oid")}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={oid:e};return await this.privateDeleteOrdersOid(this.extend(s,i))}parseOrderStatus(e){return this.safeString({"partial-fill":"open",completed:"closed"},e,e)}parseOrder(e,t){const i=this.safeString(e,"oid"),s=this.safeString(e,"side"),r=this.parseOrderStatus(this.safeString(e,"status"));let a=void 0;const o=this.safeString(e,"book");if(void 0!==o)if(o in this.markets_by_id)t=this.markets_by_id[o];else{const[e,t]=o.split("_");a=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}void 0===a&&void 0!==t&&(a=t.symbol);const n=this.safeString(e,"type"),d=this.parse8601(this.safeString(e,"created_at")),c=this.safeFloat(e,"price"),h=this.safeFloat(e,"original_amount"),l=this.safeFloat(e,"unfilled_amount");let u=void 0;return void 0!==h&&void 0!==l&&(u=h-l),{info:e,id:i,clientOrderId:this.safeString(e,"client_id"),timestamp:d,datetime:this.iso8601(d),lastTradeTimestamp:void 0,symbol:a,type:n,side:s,price:c,amount:h,cost:void 0,remaining:l,filled:u,status:r,fee:void 0}}async fetchOpenOrders(e,t,i=25,s={}){await this.loadMarkets();const a=this.market(e),o="marker"in s;if(void 0!==t&&!o)throw new r(this.id+" fetchOpenOrders does not support fetching orders starting from a timestamp with the `since` argument, use the `marker` extra param to filter starting from an integer trade id");o&&(s=this.extend(s,{marker:parseInt(s.marker)}));const n={book:a.id,limit:i},d=await this.privateGetOpenOrders(this.extend(n,s));return this.parseOrders(d.payload,a,t,i)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s=await this.privateGetOrdersOid({oid:e}),r=this.safeValue(s,"payload");if(Array.isArray(r)){if(1===s.payload.length)return this.parseOrder(r[0])}throw new n(this.id+": The order "+e+" not found.")}async fetchOrderTrades(e,t,i,s,r={}){await this.loadMarkets();const a=this.market(t),o={oid:e},n=await this.privateGetOrderTradesOid(this.extend(o,r));return this.parseTrades(n.payload,a)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={fund_currency:this.currency(e).id},s=await this.privateGetFundingDestination(this.extend(i,t));let r=this.safeString(s.payload,"account_identifier"),a=void 0;if("XRP"===e){const e=r.split("?dt=");r=e[0],a=e[1]}return this.checkAddress(r),{currency:e,address:r,tag:a,info:s}}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const o={BTC:"Bitcoin",ETH:"Ether",XRP:"Ripple",BCH:"Bcash",LTC:"Litecoin"},n=e in o?o[e]:void 0;if(void 0===n)throw new r(this.id+" not valid withdraw coin: "+e);const d={amount:t,address:i,destination_tag:s},c="privatePost"+n+"Withdrawal",h=await this[c](this.extend(d,a));return{info:h,id:this.safeString(h.payload,"wid")}}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));"GET"===i&&Object.keys(n).length&&(o+="?"+this.urlencode(n));const d=this.urls.api+o;if("private"===t){this.checkRequiredCredentials();const e=this.nonce().toString();let t=[e,i,o].join("");"GET"!==i&&Object.keys(n).length&&(t+=a=this.json(n));const s=this.hmac(this.encode(t),this.encode(this.secret));r={Authorization:"Bitso "+(this.apiKey+":"+e+":"+s),"Content-Type":"application/json"}}return{url:d,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,c){if(void 0!==n&&"success"in n){let e=this.safeValue(n,"success",!1);if("string"===typeof e&&(e="true"===e||"1"===e),!e){const e=this.id+" "+this.json(n),t=this.safeValue(n,"error");if(void 0===t)throw new r(e);const i=this.safeString(t,"code");throw this.throwExactlyMatchedException(this.exceptions,i,e),new r(e)}}}async request(e,t="public",i="GET",s={},a,o){const n=await this.fetch2(e,t,i,s,a,o);if("success"in n&&n.success)return n;throw new r(this.id+" "+this.json(n))}}},"mZ7+":function(e,t,i){"use strict";const s=i("OjXq"),{NotSupported:r,RateLimitExceeded:a,AuthenticationError:o,PermissionDenied:n,ArgumentsRequired:d,ExchangeError:c,ExchangeNotAvailable:h,InsufficientFunds:l,InvalidOrder:u,OrderNotFound:f,InvalidNonce:p}=i("ucJe"),{SIGNIFICANT_DIGITS:m}=i("rwG2");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitfinex",name:"Bitfinex",countries:["VG"],version:"v1",rateLimit:1500,certified:!0,pro:!0,has:{CORS:!1,cancelAllOrders:!0,createDepositAddress:!0,deposit:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchFundingFees:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchTickers:!0,fetchTransactions:!0,fetchDeposits:!1,fetchWithdrawals:!1,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","3h":"3h","6h":"6h","12h":"12h","1d":"1D","1w":"7D","2w":"14D","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766244-e328a50c-5ed2-11e7-947b-041416579bb3.jpg",api:{v2:"https://api-pub.bitfinex.com",public:"https://api.bitfinex.com",private:"https://api.bitfinex.com"},www:"https://www.bitfinex.com",referral:"https://www.bitfinex.com/?refcode=P61eYxFL",doc:["https://docs.bitfinex.com/v1/docs","https://github.com/bitfinexcom/bitfinex-api-node"]},api:{v2:{get:["platform/status","tickers","ticker/{symbol}","trades/{symbol}/hist","book/{symbol}/{precision}","book/{symbol}/P0","book/{symbol}/P1","book/{symbol}/P2","book/{symbol}/P3","book/{symbol}/R0","stats1/{key}:{size}:{symbol}:{side}/{section}","stats1/{key}:{size}:{symbol}/{section}","stats1/{key}:{size}:{symbol}:long/last","stats1/{key}:{size}:{symbol}:long/hist","stats1/{key}:{size}:{symbol}:short/last","stats1/{key}:{size}:{symbol}:short/hist","candles/trade:{timeframe}:{symbol}/{section}","candles/trade:{timeframe}:{symbol}/last","candles/trade:{timeframe}:{symbol}/hist"]},public:{get:["book/{symbol}","lendbook/{currency}","lends/{currency}","pubticker/{symbol}","stats/{symbol}","symbols","symbols_details","tickers","trades/{symbol}"]},private:{post:["account_fees","account_infos","balances","basket_manage","credits","deposit/new","funding/close","history","history/movements","key_info","margin_infos","mytrades","mytrades_funding","offer/cancel","offer/new","offer/status","offers","offers/hist","order/cancel","order/cancel/all","order/cancel/multi","order/cancel/replace","order/new","order/new/multi","order/status","orders","orders/hist","position/claim","position/close","positions","summary","taken_funds","total_taken_funds","transfer","unused_taken_funds","withdraw"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:.001,taker:.002,tiers:{taker:[[0,.002],[5e5,.002],[1e6,.002],[25e5,.002],[5e6,.002],[75e5,.002],[1e7,.0018],[15e6,.0016],[2e7,.14/100],[25e6,.0012],[3e7,.001]],maker:[[0,.001],[5e5,8e-4],[1e6,6e-4],[25e5,4e-4],[5e6,2e-4],[75e5,0],[1e7,0],[15e6,0],[2e7,0],[25e6,0],[3e7,0]]}},funding:{tierBased:!1,percentage:!1,deposit:{BTC:4e-4,IOTA:.5,ETH:.0027,BCH:1e-4,LTC:.001,EOS:.24279,XMR:.04,SAN:.99269,DASH:.01,ETC:.01,XRP:.02,YYW:16.915,NEO:0,ZEC:.001,BTG:0,OMG:.14026,DATA:20.773,QASH:1.9858,ETP:.01,QTUM:.01,EDO:.95001,AVT:1.3045,USDT:0,TRX:28.184,ZRX:1.9947,RCN:10.793,TNB:31.915,SNT:14.976,RLC:1.414,GNT:5.8952,SPK:10.893,REP:.041168,BAT:6.1546,ELF:1.8753,FUN:32.336,SNG:18.622,AID:8.08,MNA:16.617,NEC:1.6504,XTZ:.2},withdraw:{BTC:4e-4,IOTA:.5,ETH:.0027,BCH:1e-4,LTC:.001,EOS:.24279,XMR:.04,SAN:.99269,DASH:.01,ETC:.01,XRP:.02,YYW:16.915,NEO:0,ZEC:.001,BTG:0,OMG:.14026,DATA:20.773,QASH:1.9858,ETP:.01,QTUM:.01,EDO:.95001,AVT:1.3045,USDT:20,TRX:28.184,ZRX:1.9947,RCN:10.793,TNB:31.915,SNT:14.976,RLC:1.414,GNT:5.8952,SPK:10.893,REP:.041168,BAT:6.1546,ELF:1.8753,FUN:32.336,SNG:18.622,AID:8.08,MNA:16.617,NEC:1.6504,XTZ:.2}}},commonCurrencies:{ABS:"ABYSS",AIO:"AION",ALG:"ALGO",AMP:"AMPL",ATM:"ATMI",ATO:"ATOM",BAB:"BCH",CTX:"CTXC",DAD:"DADI",DAT:"DATA",DSH:"DASH",DRK:"DRK",GSD:"GUSD",HOT:"Hydro Protocol",IOS:"IOST",IOT:"IOTA",IQX:"IQ",MIT:"MITH",MNA:"MANA",NCA:"NCASH",ORS:"ORS Group",POY:"POLY",QSH:"QASH",QTM:"QTUM",SEE:"SEER",SNG:"SNGLS",SPK:"SPANK",STJ:"STORJ",TSD:"TUSD",YYW:"YOYOW",UDC:"USDC",UST:"USDT",UTN:"UTNP",VSY:"VSYS",WAX:"WAXP",XCH:"XCHF",ZBT:"ZB"},exceptions:{exact:{temporarily_unavailable:h,"Order could not be cancelled.":f,"No such order found.":f,"Order price must be positive.":u,"Could not find a key matching the given X-BFX-APIKEY.":o,'Key price should be a decimal number, e.g. "123.456"':u,'Key amount should be a decimal number, e.g. "123.456"':u,ERR_RATE_LIMIT:a,Ratelimit:a,"Nonce is too small.":p,"No summary found.":c,"Cannot evaluate your available balance, please try again":h},broad:{"This API key does not have permission":n,"not enough exchange balance for ":l,"minimum size for ":u,"Invalid order":u,"The available balance is only":l}},precisionMode:m,options:{currencyNames:{AGI:"agi",AID:"aid",AIO:"aio",ANT:"ant",AVT:"aventus",BAT:"bat",BCH:"bab",BCI:"bci",BFT:"bft",BTC:"bitcoin",BTG:"bgold",CFI:"cfi",DAI:"dai",DADI:"dad",DASH:"dash",DATA:"datacoin",DTH:"dth",EDO:"eidoo",ELF:"elf",EOS:"eos",ETC:"ethereumc",ETH:"ethereum",ETP:"metaverse",FUN:"fun",GNT:"golem",IOST:"ios",IOTA:"iota",LEO:"let",LRC:"lrc",LTC:"litecoin",LYM:"lym",MANA:"mna",MIT:"mit",MKR:"mkr",MTN:"mtn",NEO:"neo",ODE:"ode",OMG:"omisego",OMNI:"mastercoin",QASH:"qash",QTUM:"qtum",RCN:"rcn",RDN:"rdn",REP:"rep",REQ:"req",RLC:"rlc",SAN:"santiment",SNGLS:"sng",SNT:"status",SPANK:"spk",STORJ:"stj",TNB:"tnb",TRX:"trx",USD:"wire",USDC:"udc",UTK:"utk",USDT:"tetheruso",VEE:"vee",WAX:"wax",XLM:"xlm",XMR:"monero",XRP:"ripple",XVG:"xvg",YOYOW:"yoyow",ZEC:"zcash",ZRX:"zrx",XTZ:"xtz"},orderTypes:{limit:"exchange limit",market:"exchange market"}}})}async fetchFundingFees(e={}){await this.loadMarkets();const t=await this.privatePostAccountFees(e),i=t.withdraw,s={},r=Object.keys(i);for(let a=0;a<r.length;a++){const e=r[a];s[this.safeCurrencyCode(e)]=this.safeFloat(i,e)}return{info:t,withdraw:s,deposit:s}}async fetchTradingFees(e={}){await this.loadMarkets();const t=await this.privatePostSummary(e);return{info:t,maker:this.safeFloat(t,"maker_fee"),taker:this.safeFloat(t,"taker_fee")}}async fetchMarkets(e={}){const t=await this.publicGetSymbols(),i=await this.publicGetSymbolsDetails(),s=[];for(let r=0;r<i.length;r++){const e=i[r];let a=this.safeString(e,"pair");if(!this.inArray(a,t))continue;a=a.toUpperCase();let o=void 0,n=void 0;if(a.indexOf(":")>=0){const e=a.split(":");o=e[0],n=e[1]}else o=a.slice(0,3),n=a.slice(3,6);const d=this.safeCurrencyCode(o),c=this.safeCurrencyCode(n),h=d+"/"+c,l={price:e.price_precision,amount:void 0},u={amount:{min:this.safeFloat(e,"minimum_order_size"),max:this.safeFloat(e,"maximum_order_size")},price:{min:Math.pow(10,-l.price),max:Math.pow(10,l.price)}};u.cost={min:u.amount.min*u.price.min,max:void 0},s.push({id:a,symbol:h,base:d,quote:c,baseId:o,quoteId:n,active:!0,precision:l,limits:u,info:e})}return s}amountToPrecision(e,t){return this.numberToString(t)}calculateFee(e,t,i,s,r,a="taker",o={}){const n=this.markets[e],d=n[a];let c=s*d,h="quote";"sell"===i?c*=r:h="base";const l=n[h],u=this.safeValue(this.currencies,l);if(void 0!==u){void 0!==this.safeInteger(u,"precision")&&(c=parseFloat(this.currencyToPrecision(l,c)))}return{type:a,currency:n[h],rate:d,cost:c}}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeString(e,"type","exchange"),i=this.omit(e,"type"),s=await this.privatePostBalances(i),r={info:s};for(let a=0;a<s.length;a++){const e=s[a];if(e.type===t){const t=this.safeString(e,"currency"),i=this.safeCurrencyCode(t);if(!(i in r)){const t=this.account();t.free=this.safeFloat(e,"available"),t.total=this.safeFloat(e,"amount"),r[i]=t}}}return this.parseBalance(r)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)};void 0!==t&&(s.limit_bids=t,s.limit_asks=t);const r=await this.publicGetBookSymbol(this.extend(s,i));return this.parseOrderBook(r,void 0,"bids","asks","price","amount")}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(t),s={};for(let r=0;r<i.length;r++){const e=this.parseTicker(i[r]);s[e.symbol]=e}return s}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetPubtickerSymbol(this.extend(s,t));return this.parseTicker(r,i)}parseTicker(e,t){let i=this.safeFloat(e,"timestamp");void 0!==i&&(i*=1e3),i=parseInt(i);let s=void 0;if(void 0!==t)s=t.symbol;else if("pair"in e){const i=this.safeString(e,"pair");if(void 0!==i)if(i in this.markets_by_id)s=(t=this.markets_by_id[i]).symbol;else{const e=i.slice(0,3),t=i.slice(3,6);s=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}}const r=this.safeFloat(e,"last_price");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"mid"),baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}parseTrade(e,t){const i=this.safeString(e,"tid");let s=this.safeFloat(e,"timestamp");void 0!==s&&(s=1e3*parseInt(s));const r=this.safeStringLower(e,"type"),a=this.safeString(e,"order_id"),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount");let d=void 0;void 0!==o&&void 0!==n&&(d=o*n);let c=void 0;if("fee_amount"in e){const t=-this.safeFloat(e,"fee_amount"),i=this.safeString(e,"fee_currency");c={cost:t,currency:this.safeCurrencyCode(i)}}return{id:i,info:e,timestamp:s,datetime:this.iso8601(s),symbol:t.symbol,type:void 0,order:a,side:r,takerOrMaker:void 0,price:o,amount:n,cost:d,fee:c}}async fetchTrades(e,t,i=50,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id,limit_trades:i};void 0!==t&&(a.timestamp=parseInt(t/1e3));const o=await this.publicGetTradesSymbol(this.extend(a,s));return this.parseTrades(o,r,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new d(this.id+" fetchMyTrades requires a `symbol` argument");await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==i&&(a.limit_trades=i),void 0!==t&&(a.timestamp=parseInt(t/1e3));const o=await this.privatePostMytrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o={symbol:this.marketId(e),side:i,amount:this.amountToPrecision(e,s),type:this.safeString(this.options.orderTypes,t,t),ocoorder:!1,buy_price_oco:0,sell_price_oco:0};o.price="market"===t?this.nonce().toString():this.priceToPrecision(e,r);const n=await this.privatePostOrderNew(this.extend(o,a));return this.parseOrder(n)}async editOrder(e,t,i,s,r,a,o={}){await this.loadMarkets();const n={order_id:e};void 0!==a&&(n.price=this.priceToPrecision(t,a)),void 0!==r&&(n.amount=this.numberToString(r)),void 0!==t&&(n.symbol=this.marketId(t)),void 0!==s&&(n.side=s),void 0!==i&&(n.type=this.safeString(this.options.orderTypes,i,i));const d=await this.privatePostOrderCancelReplace(this.extend(n,o));return this.parseOrder(d)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:parseInt(e)};return await this.privatePostOrderCancel(this.extend(s,i))}async cancelAllOrders(e,t={}){return await this.privatePostOrderCancelAll(t)}parseOrder(e,t){const i=this.safeString(e,"side"),s=this.safeValue(e,"is_live"),r=this.safeValue(e,"is_cancelled");let a=void 0;a=s?"open":r?"canceled":"closed";let o=void 0;if(void 0===t){const i=this.safeStringUpper(e,"symbol");void 0!==i&&i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(o=t.symbol);let n=e.type;if(n.indexOf("exchange ")>=0){n=e.type.split(" ")[1]}let d=this.safeFloat(e,"timestamp");return void 0!==d&&(d=1e3*parseInt(d)),{info:e,id:this.safeString(e,"id"),clientOrderId:void 0,timestamp:d,datetime:this.iso8601(d),lastTradeTimestamp:void 0,symbol:o,type:n,side:i,price:this.safeFloat(e,"price"),average:this.safeFloat(e,"avg_execution_price"),amount:this.safeFloat(e,"original_amount"),remaining:this.safeFloat(e,"remaining_amount"),filled:this.safeFloat(e,"executed_amount"),status:a,fee:void 0}}async fetchOpenOrders(e,t,i,s={}){if(await this.loadMarkets(),void 0!==e&&!(e in this.markets))throw new c(this.id+" has no symbol "+e);const r=await this.privatePostOrders(s);let a=this.parseOrders(r,void 0,t,i);return void 0!==e&&(a=this.filterBy(a,"symbol",e)),a}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const r={};void 0!==i&&(r.limit=i);const a=await this.privatePostOrdersHist(this.extend(r,s));let o=this.parseOrders(a,void 0,t,i);return void 0!==e&&(o=this.filterBy(o,"symbol",e)),o=this.filterByArray(o,"status",["closed","canceled"],!1),o}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:parseInt(e)},r=await this.privatePostOrderStatus(this.extend(s,i));return this.parseOrder(r)}parseOHLCV(e,t,i="1m",s,r){return[e[0],e[1],e[3],e[4],e[2],e[5]]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets(),void 0===s&&(s=100);const a=this.market(e),o={symbol:"t"+a.id,timeframe:this.timeframes[t],sort:1,limit:s};void 0!==i&&(o.start=i);const n=await this.v2GetCandlesTradeTimeframeSymbolHist(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}getCurrencyName(e){if(e in this.options.currencyNames)return this.options.currencyNames[e];throw new r(this.id+" "+e+" not supported for withdrawal")}async createDepositAddress(e,t={}){await this.loadMarkets();return await this.fetchDepositAddress(e,this.extend({renew:1},t))}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={method:this.getCurrencyName(e),wallet_name:"exchange",renew:0},s=await this.privatePostDepositNew(this.extend(i,t));let r=this.safeValue(s,"address"),a=void 0;return"address_pool"in s&&(a=r,r=s.address_pool),this.checkAddress(r),{currency:e,address:r,tag:a,info:s}}async fetchTransactions(e,t,i,s={}){if(void 0===e)throw new d(this.id+" fetchTransactions() requires a currency `code` argument");await this.loadMarkets();const r=this.currency(e),a={currency:r.id};void 0!==t&&(a.since=parseInt(t/1e3));const o=await this.privatePostHistoryMovements(this.extend(a,s));return this.parseTransactions(o,r,t,i)}parseTransaction(e,t){let i=this.safeFloat(e,"timestamp_created");void 0!==i&&(i=parseInt(1e3*i));let s=this.safeFloat(e,"timestamp");void 0!==s&&(s=parseInt(1e3*s));const r=this.safeString(e,"currency"),a=this.safeCurrencyCode(r,t),o=this.safeStringLower(e,"type"),n=this.parseTransactionStatus(this.safeString(e,"status"));let d=this.safeFloat(e,"fee");return void 0!==d&&(d=Math.abs(d)),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"txid"),timestamp:i,datetime:this.iso8601(i),address:this.safeString(e,"address"),tag:void 0,type:o,amount:this.safeFloat(e,"amount"),currency:a,status:n,updated:s,fee:{currency:a,cost:d,rate:void 0}}}parseTransactionStatus(e){return this.safeString({SENDING:"pending",CANCELED:"canceled",ZEROCONFIRMED:"failed",COMPLETED:"ok"},e,e)}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a={withdraw_type:this.getCurrencyName(e),walletselected:"exchange",amount:this.numberToString(t),address:i};void 0!==s&&(a.payment_id=s);const o=(await this.privatePostWithdraw(this.extend(a,r)))[0],n=this.safeString(o,"withdrawal_id"),d=this.safeString(o,"message"),h=this.findBroadlyMatchedKey(this.exceptions.broad,d);if(0===n){if(void 0!==h){throw new(0,this.exceptions.broad[h])(this.id+" "+d)}throw new c(this.id+" withdraw returned an id of zero: "+this.json(o))}return{info:o,id:n}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.implodeParams(e,s);o="v2"===t?"/"+t+o:"/"+this.version+o;let n=this.omit(s,this.extractParams(e)),d=this.urls.api[t]+o;if(("public"===t||e.indexOf("/hist")>=0)&&Object.keys(n).length){const e="?"+this.urlencode(n);d+=e,o+=e}if("private"===t){this.checkRequiredCredentials();const e=this.nonce();n=this.extend({nonce:e.toString(),request:o},n),a=this.json(n),n=this.encode(a);const t=this.stringToBase64(n),i=this.encode(this.secret),s=this.hmac(t,i,"sha384");r={"X-BFX-APIKEY":this.apiKey,"X-BFX-PAYLOAD":this.decode(t),"X-BFX-SIGNATURE":s}}return{url:d,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,o,n,d){if(void 0!==o&&e>=400&&"{"===a[0]){const e=this.id+" "+a,t=this.safeString2(o,"message","error");throw this.throwExactlyMatchedException(this.exceptions.exact,t,e),this.throwBroadlyMatchedException(this.exceptions.broad,t,e),new c(e)}}}},mdIA:function(e,t,i){"use strict";const s=i("OjXq"),{AddressPending:r,AuthenticationError:a,ExchangeError:o,NotSupported:n,PermissionDenied:d}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"buda",name:"Buda",countries:["AR","CL","CO","PE"],rateLimit:1e3,version:"v2",has:{CORS:!1,createDepositAddress:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!0,fetchMyTrades:!1,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/47380619-8a029200-d706-11e8-91e0-8a391fe48de3.jpg",api:"https://www.buda.com/api",www:"https://www.buda.com",doc:"https://api.buda.com",fees:"https://www.buda.com/comisiones"},status:{status:"error",updated:void 0,eta:void 0,url:void 0},api:{public:{get:["pairs","markets","currencies","markets/{market}","markets/{market}/ticker","markets/{market}/volume","markets/{market}/order_book","markets/{market}/trades","currencies/{currency}/fees/deposit","currencies/{currency}/fees/withdrawal","tv/history"],post:["markets/{market}/quotations"]},private:{get:["balances","balances/{currency}","currencies/{currency}/balances","orders","orders/{id}","markets/{market}/orders","deposits","currencies/{currency}/deposits","withdrawals","currencies/{currency}/withdrawals","currencies/{currency}/receive_addresses","currencies/{currency}/receive_addresses/{id}"],post:["markets/{market}/orders","currencies/{currency}/deposits","currencies/{currency}/withdrawals","currencies/{currency}/simulated_withdrawals","currencies/{currency}/receive_addresses"],put:["orders/{id}"]}},timeframes:{"1m":"1","5m":"5","30m":"30","1h":"60","2h":"120","1d":"D","1w":"W"},fees:{trading:{tierBased:!0,percentage:!0,taker:.008,maker:.004,tiers:{taker:[[0,.008],[2e3,.007],[2e4,.006],[1e5,.005],[5e5,.004],[25e5,.003],[125e5,.002]],maker:[[0,.004],[2e3,.0035],[2e4,.003],[1e5,.0025],[5e5,.002],[25e5,.0015],[125e5,.001]]}}},exceptions:{not_authorized:a,forbidden:d,invalid_record:o,not_found:o,parameter_missing:o,bad_parameter:o}})}async fetchCurrencyInfo(e,t){if(!t){const e=await this.publicGetCurrencies();t=this.safeValue(e,"currencies")}for(let i=0;i<t.length;i++){const s=t[i];if(s.id===e)return s}}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=this.safeValue(t,"markets"),s=await this.publicGetCurrencies(),r=this.safeValue(s,"currencies"),a=[];for(let o=0;o<i.length;o++){const e=i[o],t=this.safeString(e,"id"),s=this.safeString(e,"base_currency"),n=this.safeString(e,"quote_currency"),d=this.safeCurrencyCode(s),c=this.safeCurrencyCode(n),h=await this.fetchCurrencyInfo(s,r),l=await this.fetchCurrencyInfo(n,r),u=d+"/"+c,f={amount:h.input_decimals,price:l.input_decimals},p={amount:{min:parseFloat(e.minimum_order_amount[0]),max:void 0},price:{min:Math.pow(10,-f.price),max:void 0}};p.cost={min:p.amount.min*p.price.min,max:void 0},a.push({id:t,symbol:u,base:d,quote:c,baseId:s,quoteId:n,active:!0,precision:f,limits:p,info:e})}return a}async fetchCurrencies(e={}){const t=(await this.publicGetCurrencies()).currencies,i={};for(let s=0;s<t.length;s++){const e=t[s];if(!e.managed)continue;const r=this.safeString(e,"id"),a=this.safeCurrencyCode(r),o=this.safeFloat(e,"input_decimals"),n=Math.pow(10,-o);i[a]={id:r,code:a,info:e,name:void 0,active:!0,fee:void 0,precision:o,limits:{amount:{min:n,max:void 0},price:{min:n,max:void 0},cost:{min:void 0,max:void 0},deposit:{min:parseFloat(e.deposit_minimum[0]),max:void 0},withdraw:{min:parseFloat(e.withdrawal_minimum[0])}}}}return i}async fetchFundingFees(e,t={}){await this.loadMarkets();const i={},s={},r={};void 0===e&&(e=Object.keys(this.currencies));for(let a=0;a<e.length;a++){const t=e[a],o={currency:this.currency(t).id},n=await this.publicGetCurrenciesCurrencyFeesWithdrawal(o),d=await this.publicGetCurrenciesCurrencyFeesDeposit(o);i[t]=this.parseFundingFee(n.fee),s[t]=this.parseFundingFee(d.fee),r[t]={withdraw:n,deposit:d}}return{withdraw:i,deposit:s,info:r}}parseFundingFee(e,t){return void 0===t&&(t=e.name),"withdrawal"===t&&(t="withdraw"),{type:t,currency:e.base[1],rate:e.percent,cost:parseFloat(e.base[0])}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},r=await this.publicGetMarketsMarketTicker(this.extend(s,t)),a=this.safeValue(r,"ticker");return this.parseTicker(a,i)}parseTicker(e,t){const i=this.milliseconds();let s=void 0;void 0!==t&&(s=t.symbol);const r=parseFloat(e.last_price[0]),a=parseFloat(e.price_variation_24h),o=parseFloat(this.priceToPrecision(s,r/(a+1))),n=r-o,d=this.sum(r,o)/2;return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:parseFloat(e.max_bid[0]),bidVolume:void 0,ask:parseFloat(e.min_ask[0]),askVolume:void 0,vwap:void 0,open:o,close:r,last:r,previousClose:o,change:n,percentage:100*a,average:d,baseVolume:parseFloat(e.volume[0]),quoteVolume:void 0,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market:r.id};void 0!==i&&(a.limit=i);const o=await this.publicGetMarketsMarketTrades(this.extend(a,s));return this.parseTrades(o.trades.entries,r,t,i)}parseTrade(e,t){let i=void 0,s=void 0;let r=void 0,a=void 0,o=void 0;let n=void 0,d=void 0;return t&&(n=t.symbol),Array.isArray(e)&&(i=parseInt(e[0]),r=parseFloat(e[1]),a=parseFloat(e[2]),d=r*a,s=e[3],o=e[4].toString()),{id:o,order:void 0,info:e,timestamp:i,datetime:this.iso8601(i),symbol:n,type:void 0,side:s,takerOrMaker:void 0,price:r,amount:a,cost:d,fee:void 0}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.market(e).id},r=await this.publicGetMarketsMarketOrderBook(this.extend(s,i)),a=this.safeValue(r,"order_book");return this.parseOrderBook(a)}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e);void 0===i&&(i=this.milliseconds()-864e5);const o={symbol:a.id,resolution:this.timeframes[t],from:i/1e3,to:this.seconds()},n=await this.publicGetTvHistory(this.extend(o,r));return this.parseTradingViewOHLCV(n,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalances(e),i={info:t},s=this.safeValue(t,"balances");for(let r=0;r<s.length;r++){const e=s[r],t=this.safeString(e,"id"),a=this.safeCurrencyCode(t),o=this.account();o.free=parseFloat(e.available_amount[0]),o.total=parseFloat(e.amount[0]),i[a]=o}return this.parseBalance(i)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:parseInt(e)},r=await this.privateGetOrdersId(this.extend(s,i)),a=this.safeValue(r,"order");return this.parseOrder(a)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;void 0!==e&&(r=this.market(e));const a={market:r.id,per:i},o=await this.privateGetMarketsMarketOrders(this.extend(a,s)),n=this.safeValue(o,"orders");return this.parseOrders(n,r,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({state:"pending"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({state:"traded"},s))}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets(),i="buy"===i?"Bid":"Ask";const o={market:this.marketId(e),price_type:t,type:i,amount:this.amountToPrecision(e,s)};"limit"===t&&(o.limit=this.priceToPrecision(e,r));const n=await this.privatePostMarketsMarketOrders(this.extend(o,a)),d=this.safeValue(n,"order");return this.parseOrder(d)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:parseInt(e),state:"canceling"},r=await this.privatePutOrdersId(this.extend(s,i)),a=this.safeValue(r,"order");return this.parseOrder(a)}parseOrderStatus(e){return this.safeString({traded:"closed",received:"open",canceling:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.parse8601(this.safeString(e,"created_at"));let r=void 0;if(void 0===t){const i=e.market_id;i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(r=t.symbol);const a=this.safeString(e,"price_type"),o=this.safeStringLower(e,"type"),n=this.parseOrderStatus(this.safeString(e,"state")),d=parseFloat(e.original_amount[0]),c=parseFloat(e.amount[0]),h=parseFloat(e.traded_amount[0]),l=parseFloat(e.total_exchanged[0]);let u=this.safeFloat(e,"limit");void 0!==u&&(u=parseFloat(u[0])),l>0&&h>0&&(u=this.priceToPrecision(r,l/h));const f={cost:parseFloat(e.paid_fee[0]),currency:e.paid_fee[1]};return{id:i,clientOrderId:void 0,datetime:this.iso8601(s),timestamp:s,lastTradeTimestamp:void 0,status:n,symbol:r,type:a,side:o,price:u,cost:l,amount:d,filled:h,remaining:c,trades:void 0,fee:f,info:e}}isFiat(e){return this.safeValue({ARS:!0,CLP:!0,COP:!0,PEN:!0},e,!1)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e);if(this.isFiat(e))throw new n(this.id+" fetchDepositAddress() for fiat "+e+" is not supported");const s={currency:i.id},a=await this.privateGetCurrenciesCurrencyReceiveAddresses(this.extend(s,t)),o=this.safeValue(a,"receive_addresses"),d=[];for(let r=1;r<o.length;r++){const e=o[r];if(e.ready){const t=e.address;this.checkAddress(t),d.push(t)}}if(d.length<1)throw new r(this.id+": there are no addresses ready for receiving "+e+", retry again later)");return{currency:e,address:d[0],tag:void 0,info:o}}async createDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e);if(this.isFiat(e))throw new n(this.id+": fiat fetchDepositAddress() for "+e+" is not supported");const s={currency:i.id},r=await this.privatePostCurrenciesCurrencyReceiveAddresses(this.extend(s,t));return{currency:e,address:this.safeString(r.receive_address,"address"),tag:void 0,info:r}}parseTransactionStatus(e){return this.safeString({rejected:"failed",confirmed:"ok",anulled:"canceled",retained:"canceled",pending_confirmation:"pending"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.parse8601(this.safeString(e,"created_at")),r=this.safeString(e,"currency"),a=this.safeCurrencyCode(r,t),o=parseFloat(e.amount[0]),n=parseFloat(e.fee[0]),d=e.fee[1],c=this.parseTransactionStatus(this.safeString(e,"state")),h="deposit_data"in e?"deposit":"withdrawal",l=this.safeValue(e,h+"_data",{}),u=this.safeValue(l,"target_address"),f=this.safeString(l,"tx_hash"),p=this.parse8601(this.safeString(l,"updated_at"));return{info:e,id:i,txid:f,timestamp:s,datetime:this.iso8601(s),address:u,type:h,amount:o,currency:a,status:c,updated:p,fee:{cost:n,rate:d}}}async fetchDeposits(e,t,i,s={}){if(await this.loadMarkets(),void 0===e)throw new o(this.id+": fetchDeposits() requires a currency code argument");const r=this.currency(e),a={currency:r.id,per:i},n=await this.privateGetCurrenciesCurrencyDeposits(this.extend(a,s)),d=this.safeValue(n,"deposits");return this.parseTransactions(d,r,t,i)}async fetchWithdrawals(e,t,i,s={}){if(await this.loadMarkets(),void 0===e)throw new o(this.id+": fetchDeposits() requires a currency code argument");const r=this.currency(e),a={currency:r.id,per:i},n=await this.privateGetCurrenciesCurrencyWithdrawals(this.extend(a,s)),d=this.safeValue(n,"withdrawals");return this.parseTransactions(d,r,t,i)}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a={currency:this.currency(e).id,amount:t,withdrawal_data:{target_address:i}},o=await this.privatePostCurrenciesCurrencyWithdrawals(this.extend(a,r)),n=this.safeValue(o,"withdrawal");return this.parseTransaction(n)}nonce(){return this.microseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));Object.keys(n).length&&("GET"===i?o+="?"+this.urlencode(n):a=this.json(n));const d=this.urls.api+"/"+this.version+"/"+o;if("private"===t){this.checkRequiredCredentials();const e=this.nonce().toString(),t=[i,"/api/"+this.version+"/"+o];if(a){const e=this.stringToBase64(this.encode(a));t.push(this.decode(e))}t.push(e);const s=t.join(" "),n=this.hmac(this.encode(s),this.encode(this.secret),"sha384");r={"X-SBTC-APIKEY":this.apiKey,"X-SBTC-SIGNATURE":n,"X-SBTC-NONCE":e,"Content-Type":"application/json"}}return{url:d,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,n,d,c){if(void 0!==n&&e>=400){const e=this.safeString(n,"code"),t=this.safeString(n,"message",a),i=this.id+" "+t;if(void 0!==e)throw this.throwExactlyMatchedException(this.exceptions,e,i),new o(i)}}}},nUeX:function(e,t,i){"use strict";const s=i("OjXq"),{ArgumentsRequired:r,ExchangeError:a,OrderNotFound:o,AuthenticationError:n,InsufficientFunds:d,InvalidOrder:c,InvalidNonce:h,NotSupported:l,OnMaintenance:u,RateLimitExceeded:f}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"exmo",name:"EXMO",countries:["ES","RU"],rateLimit:350,version:"v1",has:{CORS:!1,fetchClosedOrders:"emulated",fetchDepositAddress:!0,fetchOpenOrders:!0,fetchOrder:"emulated",fetchOrders:"emulated",fetchOrderTrades:!0,fetchOrderBooks:!0,fetchMyTrades:!0,fetchTickers:!0,withdraw:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchFundingFees:!0,fetchCurrencies:!0,fetchTransactions:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766491-1b0ea956-5eda-11e7-9225-40d67b481b8d.jpg",api:{public:"https://api.exmo.com",private:"https://api.exmo.com",web:"https://exmo.me"},www:"https://exmo.me",referral:"https://exmo.me/?ref=131685",doc:["https://exmo.me/en/api_doc?ref=131685","https://github.com/exmo-dev/exmo_api_lib/tree/master/nodejs"],fees:"https://exmo.com/en/docs/fees"},api:{web:{get:["ctrl/feesAndLimits","en/docs/fees"]},public:{get:["currency","order_book","pair_settings","ticker","trades"]},private:{post:["user_info","order_create","order_cancel","user_open_orders","user_trades","user_cancelled_orders","order_trades","required_amount","deposit_address","withdraw_crypt","withdraw_get_txid","excode_create","excode_load","wallet_history"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002},funding:{tierBased:!1,percentage:!1}},options:{useWebapiForFetchingFees:!1,feesAndLimits:{success:1,ctlr:"feesAndLimits",error:"",data:{limits:[{pair:"EXM/USDT",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"1000",min_a:"0.01",max_a:"100000"},{pair:"EXM/ETH",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"5000"},{pair:"BTC/USD",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"30000",min_a:"1",max_a:"500000"},{pair:"BTC/KZT",min_q:"0.0001",max_q:"1000",min_p:"1000",max_p:"12000000",min_a:"1000",max_a:"100000000"},{pair:"ETH/KZT",min_q:"0.001",max_q:"5000",min_p:"4",max_p:"40000000",min_a:"3",max_a:"500000"},{pair:"USDT/KZT",min_q:"1",max_q:"500000",min_p:"200",max_p:"4000",min_a:"0.1",max_a:"500000"},{pair:"ONT/EXM",min_q:"1",max_q:"1000000",min_p:"0.01",max_p:"100000",min_a:"200",max_a:"15000000"},{pair:"ONT/BTC",min_q:"1",max_q:"1000000",min_p:"0.00000001",max_p:"1",min_a:"0.00001",max_a:"10"},{pair:"ONT/RUB",min_q:"1",max_q:"1000000",min_p:"0.01",max_p:"100000",min_a:"100",max_a:"6000000"},{pair:"ONT/UAH",min_q:"1",max_q:"1000000",min_p:"0.01",max_p:"100000",min_a:"200",max_a:"250000"},{pair:"ONG/EXM",min_q:"1",max_q:"1000000",min_p:"0.01",max_p:"100000",min_a:"100",max_a:"15000000"},{pair:"ONG/BTC",min_q:"1",max_q:"1000000",min_p:"0.00000001",max_p:"1",min_a:"0.00001",max_a:"10"},{pair:"ONG/RUB",min_q:"1",max_q:"1000000",min_p:"0.01",max_p:"100000",min_a:"100",max_a:"250000"},{pair:"ONG/UAH",min_q:"1",max_q:"1000000",min_p:"0.01",max_p:"100000",min_a:"50",max_a:"6000000"},{pair:"CRON/BTC",min_q:"1",max_q:"100000",min_p:"0.0000001",max_p:"1",min_a:"0.00001",max_a:"100"},{pair:"CRON/ETH",min_q:"1",max_q:"100000",min_p:"0.0000001",max_p:"10",min_a:"0.00001",max_a:"5000"},{pair:"CRON/USDT",min_q:"1",max_q:"100000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000"},{pair:"CRON/EXM",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"1000",min_a:"0.01",max_a:"100000"},{pair:"BTC/RUB",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"2000000",min_a:"10",max_a:"50000000"},{pair:"BTC/EUR",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"30000",min_a:"1",max_a:"500000"},{pair:"BTC/UAH",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"15000000",min_a:"10",max_a:"15000000"},{pair:"BTC/PLN",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"20000000",min_a:"50",max_a:"2000000"},{pair:"BTC/TRY",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"800000",min_a:"40",max_a:"6000000"},{pair:"BTC/USDT",min_q:"0.0001",max_q:"1000",min_p:"0.01",max_p:"30000",min_a:"3",max_a:"500000"},{pair:"ETH/BTC",min_q:"0.001",max_q:"5000",min_p:"0.00000001",max_p:"10",min_a:"0.001",max_a:"100"},{pair:"ETH/USD",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"3",max_a:"500000"},{pair:"ETH/RUB",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"150",max_a:"50000000"},{pair:"XRP/BTC",min_q:"1",max_q:"100000",min_p:"0.0000001",max_p:"1",min_a:"0.00001",max_a:"100"},{pair:"XRP/USD",min_q:"1",max_q:"100000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000"},{pair:"XRP/RUB",min_q:"1",max_q:"100000",min_p:"0.000001",max_p:"1000",min_a:"0.01",max_a:"50000000"},{pair:"ADA/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"ADA/ETH",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"10",min_a:"0.001",max_a:"5000"},{pair:"ADA/USD",min_q:"0.01",max_q:"10000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"500000"},{pair:"BCH/USD",min_q:"0.003",max_q:"10000",min_p:"0.00000001",max_p:"30000",min_a:"0.0001",max_a:"500000"},{pair:"BCH/RUB",min_q:"0.003",max_q:"10000",min_p:"0.00000001",max_p:"2000000",min_a:"0.0001",max_a:"50000000"},{pair:"BCH/EUR",min_q:"0.003",max_q:"100000",min_p:"0.01",max_p:"300000",min_a:"3",max_a:"500000"},{pair:"BCH/UAH",min_q:"0.003",max_q:"100000",min_p:"0.1",max_p:"30000",min_a:"10",max_a:"15000000"},{pair:"BCH/BTC",min_q:"0.003",max_q:"10000",min_p:"0.00000001",max_p:"5",min_a:"0.0001",max_a:"100"},{pair:"BCH/ETH",min_q:"0.003",max_q:"10000",min_p:"0.0000001",max_p:"200",min_a:"0.0001",max_a:"5000"},{pair:"BCH/USDT",min_q:"0.003",max_q:"100000",min_p:"0.01",max_p:"5000",min_a:"3",max_a:"500000"},{pair:"BTCZ/BTC",min_q:"100",max_q:"100000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"BTG/USD",min_q:"0.01",max_q:"200000",min_p:"0.001",max_p:"1000",min_a:"3",max_a:"500000"},{pair:"BTG/BTC",min_q:"0.01",max_q:"200000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"BTG/ETH",min_q:"0.01",max_q:"200000",min_p:"0.0001",max_p:"100",min_a:"0.01",max_a:"5000"},{pair:"BTT/RUB",min_q:"1",max_q:"10000000",min_p:"0.000001",max_p:"1000",min_a:"0.000001",max_a:"100"},{pair:"BTT/UAH",min_q:"1",max_q:"10000000",min_p:"0.000001",max_p:"1000",min_a:"0.000001",max_a:"100"},{pair:"BTT/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"0.1",min_a:"0.00001",max_a:"100"},{pair:"DAI/USD",min_q:"1",max_q:"500000",min_p:"0.001",max_p:"1000",min_a:"0.1",max_a:"500000"},{pair:"DAI/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"100000",min_a:"0.5",max_a:"30000000"},{pair:"DAI/BTC",min_q:"1",max_q:"500000",min_p:"0.0000001",max_p:"0.1",min_a:"0.00001",max_a:"100"},{pair:"DAI/ETH",min_q:"1",max_q:"500000",min_p:"0.000001",max_p:"10",min_a:"0.0001",max_a:"5000"},{pair:"DASH/USD",min_q:"0.01",max_q:"200000",min_p:"0.01",max_p:"10000",min_a:"3",max_a:"500000"},{pair:"DASH/RUB",min_q:"0.01",max_q:"200000",min_p:"0.01",max_p:"100000",min_a:"150",max_a:"50000000"},{pair:"DASH/UAH",min_q:"0.01",max_q:"200000",min_p:"0.01",max_p:"200000",min_a:"10",max_a:"15000000"},{pair:"DASH/BTC",min_q:"0.01",max_q:"200000",min_p:"0.0001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"DASH/USDT",min_q:"0.01",max_q:"100000",min_p:"0.01",max_p:"5000",min_a:"3",max_a:"500000"},{pair:"DCR/RUB",min_q:"0.01",max_q:"50000",min_p:"0.00001",max_p:"100000",min_a:"0.5",max_a:"3000000"},{pair:"DCR/UAH",min_q:"0.01",max_q:"50000",min_p:"0.00001",max_p:"100000",min_a:"0.25",max_a:"1000000"},{pair:"DCR/BTC",min_q:"0.01",max_q:"50000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"DOGE/USD",min_q:"100",max_q:"1000000000",min_p:"0.0000001",max_p:"1000",min_a:"0.01",max_a:"500000"},{pair:"DOGE/BTC",min_q:"100",max_q:"100000000",min_p:"0.0000001",max_p:"1",min_a:"0.0001",max_a:"100"},{pair:"DXT/USD",min_q:"100",max_q:"10000000",min_p:"0.00001",max_p:"1000",min_a:"0.1",max_a:"500000"},{pair:"DXT/BTC",min_q:"100",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"100"},{pair:"EOS/USD",min_q:"0.01",max_q:"100000",min_p:"0.01",max_p:"1000",min_a:"0.5",max_a:"500000"},{pair:"EOS/EUR",min_q:"0.01",max_q:"100000",min_p:"0.001",max_p:"1000",min_a:"0.5",max_a:"500000"},{pair:"EOS/BTC",min_q:"0.01",max_q:"100000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"ETC/USD",min_q:"0.2",max_q:"1000",min_p:"0.01",max_p:"10000",min_a:"0.01",max_a:"500000"},{pair:"ETC/RUB",min_q:"0.2",max_q:"1000",min_p:"0.01",max_p:"10000",min_a:"0.01",max_a:"50000000"},{pair:"ETC/BTC",min_q:"0.2",max_q:"1000",min_p:"0.0001",max_p:"0.5",min_a:"0.001",max_a:"100"},{pair:"ETH/EUR",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"3",max_a:"500000"},{pair:"ETH/UAH",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"1000000",min_a:"90",max_a:"15000000"},{pair:"ETH/PLN",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"50",max_a:"2000000"},{pair:"ETH/TRY",min_q:"0.001",max_q:"5000",min_p:"0.1",max_p:"80000",min_a:"10",max_a:"6000000"},{pair:"ETH/USDT",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"3",max_a:"500000"},{pair:"ETH/LTC",min_q:"0.001",max_q:"5000",min_p:"0.00000001",max_p:"100000",min_a:"0.05",max_a:"100000"},{pair:"ETZ/BTC",min_q:"1",max_q:"1000000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"10"},{pair:"ETZ/ETH",min_q:"1",max_q:"1000000",min_p:"0.00000001",max_p:"100",min_a:"0.001",max_a:"100"},{pair:"ETZ/USDT",min_q:"1",max_q:"1000000",min_p:"0.000001",max_p:"1000",min_a:"0.01",max_a:"1000"},{pair:"GAS/USD",min_q:"0.01",max_q:"10000000",min_p:"0.01",max_p:"50000",min_a:"0.1",max_a:"500000"},{pair:"GAS/BTC",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"GNT/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"GNT/ETH",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"10",min_a:"0.01",max_a:"5000"},{pair:"GUSD/USD",min_q:"1",max_q:"500000",min_p:"0.1",max_p:"10",min_a:"0.1",max_a:"500000"},{pair:"GUSD/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"1000",min_a:"10",max_a:"50000000"},{pair:"GUSD/BTC",min_q:"1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.0015",max_a:"100"},{pair:"HP/BTC",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"0.1",min_a:"0.00001",max_a:"100"},{pair:"HB/BTC",min_q:"10",max_q:"100000000",min_p:"0.00000001",max_p:"1",min_a:"0.000001",max_a:"100"},{pair:"INK/USD",min_q:"0.01",max_q:"10000000",min_p:"0.00001",max_p:"1000",min_a:"0.01",max_a:"500000"},{pair:"INK/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"INK/ETH",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"10",min_a:"0.001",max_a:"5000"},{pair:"KICK/RUB",min_q:"1",max_q:"100000000",min_p:"0.000001",max_p:"1000",min_a:"10",max_a:"50000000"},{pair:"KICK/USDT",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"1000",min_a:"0.01",max_a:"100000"},{pair:"KICK/BTC",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"0.1",min_a:"0.00001",max_a:"100"},{pair:"KICK/ETH",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"5000"},{pair:"LSK/USD",min_q:"0.1",max_q:"200000",min_p:"0.1",max_p:"1000",min_a:"1",max_a:"500000"},{pair:"LSK/RUB",min_q:"0.1",max_q:"200000",min_p:"0.001",max_p:"100000",min_a:"0.5",max_a:"50000000"},{pair:"LSK/BTC",min_q:"1",max_q:"200000",min_p:"0.0000001",max_p:"1",min_a:"0.0015",max_a:"100"},{pair:"LTC/USD",min_q:"0.05",max_q:"1000000",min_p:"0.01",max_p:"10000",min_a:"3",max_a:"500000"},{pair:"LTC/RUB",min_q:"0.05",max_q:"1000000",min_p:"0.01",max_p:"100000",min_a:"150",max_a:"50000000"},{pair:"LTC/EUR",min_q:"0.05",max_q:"1000000",min_p:"0.01",max_p:"10000",min_a:"3",max_a:"500000"},{pair:"LTC/UAH",min_q:"0.05",max_q:"1000000",min_p:"0.01",max_p:"300000",min_a:"5",max_a:"18000000"},{pair:"LTC/BTC",min_q:"0.05",max_q:"1000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"MKR/BTC",min_q:"0.0001",max_q:"1000",min_p:"0.0001",max_p:"100",min_a:"0.000001",max_a:"100"},{pair:"MKR/DAI",min_q:"0.0001",max_q:"1000",min_p:"0.5",max_p:"500000",min_a:"0.005",max_a:"500000"},{pair:"MNC/USD",min_q:"10",max_q:"100000000",min_p:"0.000001",max_p:"10000",min_a:"0.01",max_a:"100000"},{pair:"MNC/BTC",min_q:"10",max_q:"100000000",min_p:"0.00000001",max_p:"1",min_a:"0.000001",max_a:"100"},{pair:"MNC/ETH",min_q:"10",max_q:"100000000",min_p:"0.0000001",max_p:"10",min_a:"0.00001",max_a:"1000"},{pair:"MNX/USD",min_q:"0.01",max_q:"10000000",min_p:"0.0001",max_p:"1000",min_a:"0.5",max_a:"500000"},{pair:"MNX/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"MNX/ETH",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"10",min_a:"0.01",max_a:"5000"},{pair:"NEO/USD",min_q:"0.01",max_q:"200000",min_p:"0.01",max_p:"50000",min_a:"0.1",max_a:"500000"},{pair:"NEO/RUB",min_q:"0.01",max_q:"200000",min_p:"0.001",max_p:"1500000",min_a:"50",max_a:"50000000"},{pair:"NEO/BTC",min_q:"0.1",max_q:"200000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"OMG/USD",min_q:"0.01",max_q:"100000",min_p:"0.01",max_p:"1000",min_a:"0.5",max_a:"500000"},{pair:"OMG/BTC",min_q:"1",max_q:"100000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"OMG/ETH",min_q:"0.01",max_q:"100000",min_p:"0.00000001",max_p:"10",min_a:"0.01",max_a:"5000"},{pair:"PTI/RUB",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"600000",min_a:"10",max_a:"600000"},{pair:"PTI/BTC",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"1",min_a:"0.000001",max_a:"10"},{pair:"PTI/EOS",min_q:"1",max_q:"10000000",min_p:"0.0000001",max_p:"5000",min_a:"0.01",max_a:"20000"},{pair:"PTI/USDT",min_q:"1",max_q:"10000000",min_p:"0.000001",max_p:"10000",min_a:"0.01",max_a:"100000"},{pair:"QTUM/USD",min_q:"0.1",max_q:"200000",min_p:"0.00000001",max_p:"10000",min_a:"0.1",max_a:"500000"},{pair:"QTUM/BTC",min_q:"0.1",max_q:"200000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"100"},{pair:"QTUM/ETH",min_q:"0.1",max_q:"200000",min_p:"0.00000001",max_p:"100",min_a:"0.001",max_a:"5000"},{pair:"ROOBEE/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"0.1",min_a:"0.00001",max_a:"100"},{pair:"SMART/USD",min_q:"10",max_q:"10000000",min_p:"0.000001",max_p:"1000",min_a:"1",max_a:"500000"},{pair:"SMART/RUB",min_q:"10",max_q:"10000000",min_p:"0.0001",max_p:"100000",min_a:"10",max_a:"50000000"},{pair:"SMART/EUR",min_q:"10",max_q:"10000000",min_p:"0.000001",max_p:"1000",min_a:"1",max_a:"500000"},{pair:"SMART/BTC",min_q:"10",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.00001",max_a:"100"},{pair:"TRX/USD",min_q:"1",max_q:"10000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"500000"},{pair:"TRX/RUB",min_q:"1",max_q:"10000000",min_p:"0.000001",max_p:"100000",min_a:"0.1",max_a:"50000000"},{pair:"TRX/UAH",min_q:"1",max_q:"10000000",min_p:"0.000001",max_p:"100000",min_a:"0.1",max_a:"50000000"},{pair:"TRX/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"USDC/USD",min_q:"1",max_q:"500000",min_p:"0.0001",max_p:"1000",min_a:"3",max_a:"500000"},{pair:"USDC/BTC",min_q:"1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"100"},{pair:"USDC/ETH",min_q:"1",max_q:"500000",min_p:"0.0000001",max_p:"100",min_a:"0.001",max_a:"1000"},{pair:"USDC/USDT",min_q:"1",max_q:"500000",min_p:"0.0001",max_p:"1000",min_a:"3",max_a:"500000"},{pair:"USDT/USD",min_q:"1",max_q:"500000",min_p:"0.5",max_p:"10",min_a:"0.1",max_a:"500000"},{pair:"USDT/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"1000",min_a:"10",max_a:"50000000"},{pair:"USDT/EUR",min_q:"0.01",max_q:"100000",min_p:"0.1",max_p:"10",min_a:"0.1",max_a:"500000"},{pair:"USDT/UAH",min_q:"0.01",max_q:"100000",min_p:"1",max_p:"3000",min_a:"2",max_a:"15000000"},{pair:"VLX/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"0.1",min_a:"0.00001",max_a:"100"},{pair:"WAVES/USD",min_q:"0.5",max_q:"10000",min_p:"0.001",max_p:"3500",min_a:"0.5",max_a:"500000"},{pair:"WAVES/RUB",min_q:"0.5",max_q:"10000",min_p:"0.01",max_p:"10000",min_a:"1",max_a:"50000000"},{pair:"WAVES/BTC",min_q:"0.5",max_q:"10000",min_p:"0.000001",max_p:"1",min_a:"0.0001",max_a:"100"},{pair:"WAVES/ETH",min_q:"0.5",max_q:"10000",min_p:"0.00001",max_p:"30",min_a:"0.0035",max_a:"3500"},{pair:"XEM/USD",min_q:"10",max_q:"5000000",min_p:"0.00001",max_p:"1000",min_a:"0.1",max_a:"500000"},{pair:"XEM/EUR",min_q:"10",max_q:"5000000",min_p:"0.00001",max_p:"1000",min_a:"0.1",max_a:"500000"},{pair:"XEM/UAH",min_q:"1",max_q:"5000000",min_p:"0.0001",max_p:"30000",min_a:"10",max_a:"15000000"},{pair:"XEM/BTC",min_q:"10",max_q:"5000000",min_p:"0.0000001",max_p:"1",min_a:"0.00015",max_a:"100"},{pair:"XLM/USD",min_q:"0.01",max_q:"200000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"500000"},{pair:"XLM/RUB",min_q:"0.01",max_q:"200000",min_p:"0.00001",max_p:"100000",min_a:"0.1",max_a:"50000000"},{pair:"XLM/TRY",min_q:"0.01",max_q:"200000",min_p:"0.00001",max_p:"100000",min_a:"0.1",max_a:"6000000"},{pair:"XLM/BTC",min_q:"1",max_q:"200000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"XMR/USD",min_q:"0.01",max_q:"1000",min_p:"0.001",max_p:"1000",min_a:"0.1",max_a:"500000"},{pair:"XMR/RUB",min_q:"0.01",max_q:"200000",min_p:"0.001",max_p:"600000",min_a:"10",max_a:"16000000"},{pair:"XMR/EUR",min_q:"0.01",max_q:"1000",min_p:"0.001",max_p:"1000",min_a:"0.1",max_a:"500000"},{pair:"XMR/UAH",min_q:"0.01",max_q:"200000",min_p:"0.001",max_p:"300000",min_a:"5",max_a:"16000000"},{pair:"XMR/BTC",min_q:"0.01",max_q:"1000",min_p:"0.0001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"XMR/ETH",min_q:"0.01",max_q:"1000",min_p:"0.00000001",max_p:"100",min_a:"0.001",max_a:"5000"},{pair:"XRP/EUR",min_q:"1",max_q:"100000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000"},{pair:"XRP/TRY",min_q:"1",max_q:"100000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"6000000"},{pair:"XRP/UAH",min_q:"1",max_q:"100000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"15000000"},{pair:"XRP/USDT",min_q:"1",max_q:"100000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000"},{pair:"XRP/ETH",min_q:"1",max_q:"100000",min_p:"0.00000001",max_p:"10",min_a:"0.00001",max_a:"5000"},{pair:"XTZ/USD",min_q:"0.1",max_q:"100000",min_p:"0.0001",max_p:"1000",min_a:"0.1",max_a:"100000"},{pair:"XTZ/RUB",min_q:"0.1",max_q:"100000",min_p:"0.00001",max_p:"100000",min_a:"0.5",max_a:"500000"},{pair:"XTZ/BTC",min_q:"0.1",max_q:"100000",min_p:"0.00000001",max_p:"1",min_a:"0.00001",max_a:"10"},{pair:"XTZ/ETH",min_q:"0.1",max_q:"100000",min_p:"0.0000001",max_p:"10",min_a:"0.0001",max_a:"1000"},{pair:"ZEC/USD",min_q:"0.01",max_q:"1000",min_p:"0.001",max_p:"5000",min_a:"0.1",max_a:"500000"},{pair:"ZEC/RUB",min_q:"0.01",max_q:"1000",min_p:"0.001",max_p:"100000",min_a:"0.1",max_a:"50000000"},{pair:"ZEC/EUR",min_q:"0.01",max_q:"1000",min_p:"0.001",max_p:"5000",min_a:"0.1",max_a:"500000"},{pair:"ZEC/BTC",min_q:"0.01",max_q:"1000",min_p:"0.00001",max_p:"10",min_a:"0.001",max_a:"100"},{pair:"ZRX/USD",min_q:"0.01",max_q:"10000000",min_p:"0.00001",max_p:"1000",min_a:"0.1",max_a:"500000"},{pair:"ZRX/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"ZRX/ETH",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"10",min_a:"0.01",max_a:"5000"},{pair:"ZAG/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"0.1",min_a:"0.00001",max_a:"100"},{pair:"USD/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"1000",min_a:"10",max_a:"50000000"},{pair:"EXM/BTC",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"1",min_a:"0.0000001",max_a:"1"},{pair:"ATMCASH/BTC",min_q:"10",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.000001",max_a:"10"}],fees:[{group:"crypto",title:"\u041a\u0440\u0438\u043f\u0442\u043e\u0432\u0430\u043b\u044e\u0442\u0430",items:[{prov:"EXM",dep:"0%",wd:"1 EXM"},{prov:"BTC",dep:"0%",wd:"0.0005 BTC"},{prov:"LTC",dep:"0%",wd:"0.01 LTC"},{prov:"DOGE",dep:"0%",wd:"1 DOGE"},{prov:"DASH",dep:"0%",wd:"0.01 DASH"},{prov:"ETH",dep:"0%",wd:"0.01 ETH"},{prov:"WAVES",dep:"0%",wd:"0.001 WAVES"},{prov:"ZEC",dep:"0%",wd:"0.001 ZEC"},{prov:"USDT",dep:"0%",wd:"5 USDT"},{prov:"XMR",dep:"0%",wd:"0.05 XMR"},{prov:"XRP",dep:"0%",wd:"0.02 XRP"},{prov:"KICK",dep:"0%",wd:"50 KICK"},{prov:"ETC",dep:"0%",wd:"0.01 ETC"},{prov:"BCH",dep:"0%",wd:"0.001 BCH"},{prov:"BTG",dep:"0%",wd:"0.001 BTG"},{prov:"EOS",dep:"0%",wd:"0.05 EOS"},{prov:"BTCZ",dep:"0%",wd:"5 BTCZ"},{prov:"DXT",dep:"20 DXT",wd:"20 DXT"},{prov:"XLM",dep:"0%",wd:"0.01 XLM"},{prov:"MNX",dep:"0%",wd:"0.01 MNX"},{prov:"OMG",dep:"0.1 OMG",wd:"0.5 OMG"},{prov:"TRX",dep:"0%",wd:"1 TRX"},{prov:"ADA",dep:"0%",wd:"1 ADA"},{prov:"INK",dep:"10 INK",wd:"50 INK"},{prov:"NEO",dep:"0%",wd:"0%"},{prov:"GAS",dep:"0%",wd:"0%"},{prov:"ZRX",dep:"0%",wd:"1 ZRX"},{prov:"GNT",dep:"0%",wd:"1 GNT"},{prov:"GUSD",dep:"0%",wd:"0.5 GUSD"},{prov:"LSK",dep:"0%",wd:"0.1 LSK"},{prov:"XEM",dep:"0%",wd:"5 XEM"},{prov:"SMART",dep:"0%",wd:"0.5 SMART"},{prov:"QTUM",dep:"0%",wd:"0.01 QTUM"},{prov:"HB",dep:"0%",wd:"10 HB"},{prov:"DAI",dep:"0%",wd:"1 DAI"},{prov:"MKR",dep:"0%",wd:"0.005 MKR"},{prov:"MNC",dep:"0%",wd:"15 MNC"},{prov:"PTI",dep:"0%",wd:"10 PTI"},{prov:"ATMCASH",dep:"0%",wd:"5 ATMCASH"},{prov:"ETZ",dep:"0%",wd:"1 ETZ"},{prov:"USDC",dep:"0%",wd:"0.5 USDC"},{prov:"ROOBEE",dep:"0%",wd:"200 ROOBEE"},{prov:"DCR",dep:"0%",wd:"0.01 DCR"},{prov:"ZAG",dep:"0%",wd:"0%"},{prov:"BTT",dep:"0%",wd:"100 BTT"},{prov:"VLX",dep:"0%",wd:"1 VLX"},{prov:"CRON",dep:"0%",wd:"5 CRON"},{prov:"ONT",dep:"0%",wd:"1 ONT"},{prov:"ONG",dep:"0%",wd:"5 ONG"}]},{group:"usd",title:"USD",items:[{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"Payeer",dep:"3.95%",wd:"-"},{prov:"AdvCash",dep:"0%",wd:"3.99%"},{prov:"Visa/MasterCard (Simplex)",dep:"4.5% + 0.5 USD",wd:"-"},{prov:"Visa",dep:"3.45%",wd:"-"}]},{group:"eur",title:"EUR",items:[{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"Visa/MasterCard (Simplex)",dep:"4.5% + 0.5 EUR",wd:"-"},{prov:"Visa",dep:"2.95%",wd:"-"},{prov:"SEPA",dep:"10 EUR",wd:"50 EUR"}]},{group:"rub",title:"RUB",items:[{prov:"Payeer",dep:"2.49%",wd:"-"},{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"Qiwi",dep:"0.99%",wd:"2%"},{prov:"Yandex Money",dep:"1.95%",wd:"-"},{prov:"Enfins",dep:"0%",wd:"1.49%"},{prov:"AdvCash",dep:"0%",wd:"2.49%"},{prov:"Visa/MasterCard",dep:"1.99%",wd:"4.49% + 60 RUB"}]},{group:"pln",title:"PLN",items:[{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"Visa/MasterCard (Simplex)",dep:"4.5% + 1 PLN",wd:"-"}]},{group:"try",title:"TRY",items:[{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"Visa",dep:"3.05%",wd:"-"},{prov:"Visa/MasterCard (Simplex)",dep:"4.5% + 2 TRY",wd:"-"}]},{group:"uah",title:"UAH",items:[{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"Terminal",dep:"2.6%",wd:"-"},{prov:"Enfins",dep:"0%",wd:"1.95%"},{prov:"Visa/MasterCard",dep:"1% + 5 UAH",wd:"2.99%"}]},{group:"kzt",title:"KZT",items:[{prov:"Visa/MasterCard RoyalPay",dep:"-",wd:"2.99% + 450 KZT"},{prov:"Visa/MasterCard",dep:"3.5%",wd:"-"},{prov:"AdvCash",dep:"0%",wd:"1.49%"}]}]}}},exceptions:{exact:{40005:n,40009:h,40015:a,40016:u,40017:n,50052:d,50054:d,50304:o,50173:o,50319:c,50321:c},broad:{"API rate limit exceeded":f}}})}async fetchTradingFees(e={}){if(this.options.useWebapiForFetchingFees){let t=(await this.webGetEnDocsFees(e)).split('<td class="th_fees_2" colspan="2">'),i=t.length;if(2!==i)throw new l(this.id+" fetchTradingFees format has changed");if(t=t[1].split("</td>"),i=t.length,i<2)throw new l(this.id+" fetchTradingFees format has changed");const s=.01*parseFloat(t[0].replace("%",""));return{maker:s,taker:s}}return{maker:this.fees.trading.maker,taker:this.fees.trading.taker}}parseFixedFloatValue(e){if(void 0===e||"-"===e)return;const t=e.indexOf("%")>=0,i=e.split(" ")[0].replace("%",""),s=parseFloat(i);if(s>0&&t)throw new a(this.id+" parseFixedFloatValue detected an unsupported non-zero percentage-based fee "+e);return s}async fetchFundingFees(e={}){let t=void 0;t=this.options.useWebapiForFetchingFees?await this.webGetCtrlFeesAndLimits(e):this.options.feesAndLimits;const i={},s={},r=this.safeValue(t.data,"fees"),a=this.indexBy(r,"group"),o=a.crypto.items;for(let c=0;c<o.length;c++){const e=o[c],t=this.safeCurrencyCode(this.safeString(e,"prov")),r=this.safeString(e,"wd"),a=this.safeString(e,"dep");void 0!==r&&r.length>0&&(i[t]=this.parseFixedFloatValue(r)),void 0!==a&&a.length>0&&(s[t]=this.parseFixedFloatValue(a))}const n=this.toArray(this.omit(a,"crypto"));for(let c=0;c<n.length;c++){const e=this.safeCurrencyCode(this.safeString(n[c],"title"));i[e]=void 0,s[e]=void 0}const d={info:t,withdraw:i,deposit:s};return this.options.fundingFees=d,d}async fetchCurrencies(e={}){const t=await this.fetchFundingFees(e),i=Object.keys(t.withdraw),s=this.indexBy(t.info.data.limits,"pair"),r=Object.keys(s),a={},o={},n={},d={},c={},h={};for(let u=0;u<r.length;u++){const e=r[u],t=s[e],[i,l]=e.split("/"),f=this.safeCurrencyCode(i),p=this.safeCurrencyCode(l),m=this.safeFloat(t,"max_q"),y=this.safeFloat(t,"max_p"),b=this.safeFloat(t,"max_a"),v=this.safeFloat(t,"min_q"),g=this.safeFloat(t,"min_p"),w=this.safeFloat(t,"min_a");a[f]=Math.min(this.safeFloat(a,f,v),v),d[f]=Math.max(this.safeFloat(d,f,m),m),o[p]=Math.min(this.safeFloat(o,p,g),g),n[p]=Math.min(this.safeFloat(n,p,w),w),c[p]=Math.max(this.safeFloat(c,p,y),y),h[p]=Math.max(this.safeFloat(h,p,b),b)}const l={};for(let u=0;u<i.length;u++){const e=i[u],s=this.safeCurrencyCode(e),r=this.safeValue(t.withdraw,s),f=!0;l[s]={id:e,code:s,name:s,active:f,fee:r,precision:8,limits:{amount:{min:this.safeFloat(a,s),max:this.safeFloat(d,s)},price:{min:this.safeFloat(o,s),max:this.safeFloat(c,s)},cost:{min:this.safeFloat(n,s),max:this.safeFloat(h,s)}},info:e}}return l}async fetchMarkets(e={}){const t=await this.fetchTradingFees(),i=await this.publicGetPairSettings(e),s=Object.keys(i),r=[];for(let a=0;a<s.length;a++){const e=s[a],o=i[e],n=e.replace("_","/"),[d,c]=n.split("/"),h=this.safeCurrencyCode(d),l=this.safeCurrencyCode(c);r.push({id:e,symbol:n,base:h,quote:l,baseId:d,quoteId:c,active:!0,taker:t.taker,maker:t.maker,limits:{amount:{min:this.safeFloat(o,"min_quantity"),max:this.safeFloat(o,"max_quantity")},price:{min:this.safeFloat(o,"min_price"),max:this.safeFloat(o,"max_price")},cost:{min:this.safeFloat(o,"min_amount"),max:this.safeFloat(o,"max_amount")}},precision:{amount:8,price:8},info:o})}return r}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostUserInfo(e),i={info:t},s=Object.keys(this.currencies);for(let r=0;r<s.length;r++){const e=s[r],a=this.currencyId(e),o=this.account();a in t.balances&&(o.free=this.safeFloat(t.balances,a)),a in t.reserved&&(o.used=this.safeFloat(t.reserved,a)),i[e]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={pair:s.id};void 0!==t&&(r.limit=t);const a=await this.publicGetOrderBook(this.extend(r,i)),o=this.safeValue(a,s.id);return this.parseOrderBook(o,void 0,"bid","ask")}async fetchOrderBooks(e,t,i={}){await this.loadMarkets();let s=void 0;if(void 0===e){if(s=this.ids.join(","),s.length>2048){const e=this.ids.length;throw new a(this.id+" has "+e.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchOrderBooks")}}else s=this.marketIds(e),s=s.join(",");const r={pair:s};void 0!==t&&(r.limit=t);const o=await this.publicGetOrderBook(this.extend(r,i)),n={},d=Object.keys(o);for(let a=0;a<d.length;a++){const e=d[a];let t=e;if(e in this.markets_by_id){t=this.markets_by_id[e].symbol}n[t]=this.parseOrderBook(o[e],void 0,"bid","ask")}return n}parseTicker(e,t){const i=this.safeTimestamp(e,"updated");let s=void 0;void 0!==t&&(s=t.symbol);const r=this.safeFloat(e,"last_trade");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy_price"),bidVolume:void 0,ask:this.safeFloat(e,"sell_price"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"avg"),baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"vol_curr"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t),s={},r=Object.keys(i);for(let a=0;a<r.length;a++){const e=r[a],t=this.markets_by_id[e],o=t.symbol,n=i[e];s[o]=this.parseTicker(n,t)}return s}async fetchTicker(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t),s=this.market(e);return this.parseTicker(i[s.id],s)}parseTrade(e,t){const i=this.safeTimestamp(e,"date");let s=void 0,r=void 0;const o=this.safeString(e,"trade_id"),n=this.safeString(e,"order_id"),d=this.safeFloat(e,"price"),c=this.safeFloat(e,"quantity"),h=this.safeFloat(e,"amount"),l=this.safeString(e,"type");if(void 0!==t){if(r=t.symbol,t.taker!==t.maker)throw new a(this.id+" parseTrade can not deduce proper fee costs, taker and maker fees now differ");"buy"===l&&void 0!==c?s={currency:t.base,cost:c*t.taker,rate:t.taker}:"sell"===l&&void 0!==h&&(s={currency:t.quote,cost:h*t.taker,rate:t.taker})}return{id:o,info:e,timestamp:i,datetime:this.iso8601(i),symbol:r,order:n,type:void 0,side:l,takerOrMaker:void 0,price:d,amount:c,cost:h,fee:s}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pair:r.id},o=await this.publicGetTrades(this.extend(a,s)),n=this.safeValue(o,r.id,[]);return this.parseTrades(n,r,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchMyTrades() requires a symbol argument (a single symbol or an array)");await this.loadMarkets();let a=void 0,o=void 0;if(Array.isArray(e)){if(e.length<1)throw new r(this.id+" fetchMyTrades() requires a non-empty symbol array");a=this.marketIds(e).join(",")}else o=this.market(e),a=o.id;const n={pair:a};void 0!==i&&(n.limit=i);const d=await this.privatePostUserTrades(this.extend(n,s));let c=[];const h=Object.keys(d);for(let r=0;r<h.length;r++){const e=h[r];let s=void 0;if(e in this.markets_by_id)o=this.markets_by_id[e],s=o.symbol;else{const[t,i]=e.split("_");s=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(i)}const a=d[e],n=this.parseTrades(a,o,t,i,{symbol:s});c=this.arrayConcat(c,n)}return this.filterBySinceLimit(c,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o="market"===t?t+"_":"";"market"===t&&void 0===r&&(r=0);const n={pair:this.market(e).id,quantity:this.amountToPrecision(e,s),type:o+i,price:this.priceToPrecision(e,r)},d=await this.privatePostOrderCreate(this.extend(n,a)),c=this.safeString(d,"order_id"),h=this.milliseconds();s=parseFloat(s),r=parseFloat(r);const l={id:c,info:d,timestamp:h,datetime:this.iso8601(h),lastTradeTimestamp:void 0,status:"open",symbol:e,type:t,side:i,price:r,cost:r*s,amount:s,remaining:s,filled:0,fee:void 0,trades:void 0};return this.orders[c]=l,l}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},r=await this.privatePostOrderCancel(this.extend(s,i));return e in this.orders&&(this.orders[e].status="canceled"),r}async fetchOrder(e,t,i={}){await this.loadMarkets();try{const t={order_id:e.toString()},s=await this.privatePostOrderTrades(this.extend(t,i)),r=this.parseOrder(s);return this.extend(r,{id:e.toString()})}catch(s){if(s instanceof o&&e in this.orders)return this.orders[e]}throw new o(this.id+" fetchOrder order id "+e.toString()+" not found in cache.")}async fetchOrderTrades(e,t,i,s,r={}){let a=void 0;void 0!==t&&(a=this.market(t));const o={order_id:e.toString()},n=await this.privatePostOrderTrades(this.extend(o,r)),d=this.safeValue(n,"trades");return this.parseTrades(d,a,i,s)}updateCachedOrders(e,t){for(let r=0;r<e.length;r++){const t=e[r].id;this.orders[t]=e[r]}const i=this.indexBy(e,"id"),s=Object.keys(this.orders);for(let r=0;r<s.length;r++){const e=s[r];let a=this.orders[e];if(!(e in i)){if(void 0!==t&&t!==a.symbol)continue;"open"===a.status&&(a=this.extend(a,{status:"closed",cost:void 0,filled:a.amount,remaining:0}),void 0===a.cost&&void 0!==a.filled&&(a.cost=a.filled*a.price),this.orders[e]=a)}}return this.toArray(this.orders)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r=await this.privatePostUserOpenOrders(s),a=Object.keys(r);let o=[];for(let n=0;n<a.length;n++){const e=a[n];let t=void 0;e in this.markets_by_id&&(t=this.markets_by_id[e]);const i=this.parseOrders(r[e],t);o=this.arrayConcat(o,i)}return this.updateCachedOrders(o,e),this.filterBySymbolSinceLimit(this.toArray(this.orders),e,t,i)}async fetchOpenOrders(e,t,i,s={}){await this.fetchOrders(e,t,i,s);const r=this.filterBy(this.orders,"status","open");return this.filterBySymbolSinceLimit(r,e,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.fetchOrders(e,t,i,s);const r=this.filterBy(this.orders,"status","closed");return this.filterBySymbolSinceLimit(r,e,t,i)}parseOrder(e,t){let i=this.safeString(e,"order_id"),s=this.safeTimestamp(e,"created"),r=void 0;const a=this.safeString(e,"type");if(void 0===t){let i=void 0;"pair"in e?i=e.pair:"in_currency"in e&&"out_currency"in e&&(i="buy"===a?e.in_currency+"_"+e.out_currency:e.out_currency+"_"+e.in_currency),void 0!==i&&i in this.markets_by_id&&(t=this.markets_by_id[i])}let o=this.safeFloat(e,"quantity");if(void 0===o){const t="buy"===a?"in_amount":"out_amount";o=this.safeFloat(e,t)}let n=this.safeFloat(e,"price"),d=this.safeFloat(e,"amount"),c=0;const h=[],l=this.safeValue(e,"trades",[]);let u=void 0,f=void 0,p=void 0;const m=l.length;if(m>0){u=0;for(let e=0;e<m;e++){const r=this.parseTrade(l[e],t);void 0===i&&(i=r.order),void 0===s&&(s=r.timestamp),s>r.timestamp&&(s=r.timestamp),c=this.sum(c,r.amount),u=this.sum(u,r.fee.cost),h.push(r)}f=h[m-1].timestamp}let y=void 0;void 0!==o&&(y=o-c);let b=this.safeString(e,"status");b=c>=o?"closed":"open",void 0===t&&(t=this.getMarketFromTrades(h));let v=void 0;void 0!==t&&(r=t.symbol,v=t.quote),void 0===d?void 0!==n&&(d=n*c):c>0&&(void 0===p&&(p=d/c),void 0===n&&(n=d/c));const g={cost:u,currency:v};return{id:i,clientOrderId:void 0,datetime:this.iso8601(s),timestamp:s,lastTradeTimestamp:f,status:b,symbol:r,type:"limit",side:a,price:n,cost:d,amount:o,filled:c,remaining:y,average:p,trades:h,fee:g,info:e}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=await this.privatePostDepositAddress(t),s=this.safeString(i,e);let r=void 0,a=void 0;if(s){const e=s.split(",");r=e[0],e.length>1&&(a=e[1])}return this.checkAddress(r),{currency:e,address:r,tag:a,info:i}}getMarketFromTrades(e){const t=this.indexBy(e,"pair"),i=Object.keys(t);if(1===i.length)return this.markets[i[0]]}calculateFee(e,t,i,s,r,a="taker",o={}){const n=this.markets[e],d=n[a];let c=parseFloat(this.costToPrecision(e,s*d)),h="quote";return"sell"===i?c*=r:h="base",{type:a,currency:n[h],rate:d,cost:parseFloat(this.feeToPrecision(e,c))}}async withdraw(e,t,i,s,r={}){await this.loadMarkets();const a={amount:t,currency:this.currency(e).id,address:i};void 0!==s&&(a.invoice=s);const o=await this.privatePostWithdrawCrypt(this.extend(a,r));return{info:o,id:o.task_id}}parseTransactionStatus(e){return this.safeString({transferred:"ok",paid:"ok",pending:"pending",processing:"pending"},e,e)}parseTransaction(e,t){const i=this.safeTimestamp(e,"dt");let s=this.safeFloat(e,"amount");void 0!==s&&(s=Math.abs(s));const r=this.parseTransactionStatus(this.safeString(e,"status")),a=this.safeString(e,"txid"),o=this.safeString(e,"type"),n=this.safeString(e,"curr"),d=this.safeCurrencyCode(n,t);let c=this.safeString(e,"account");if(void 0!==c){const e=c.split(":");2===e.length&&(c=e[1].replace(" ",""))}let h=void 0;if(!this.fees.funding.percentage){const t="withdrawal"===o?"withdraw":"deposit";let i=this.safeFloat(this.options.fundingFees[t],d);"cashback"===this.safeString(e,"provider")&&(i=0),void 0!==i&&("withdrawal"===o&&(s-=i),h={cost:i,currency:d,rate:void 0})}return{info:e,id:void 0,currency:d,amount:s,address:c,tag:void 0,status:r,type:o,updated:void 0,txid:a,timestamp:i,datetime:this.iso8601(i),fee:h}}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const r={};void 0!==t&&(r.date=parseInt(t/1e3));let a=void 0;void 0!==e&&(a=this.currency(e));const o=await this.privatePostWalletHistory(this.extend(r,s));return this.parseTransactions(o.history,a,t,i)}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/";if("web"!==t&&(o+=this.version+"/"),o+=e,"public"===t||"web"===t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else if("private"===t){this.checkRequiredCredentials();const e=this.nonce();a=this.urlencode(this.extend({nonce:e},s)),r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}}return{url:o,method:i,body:a,headers:r}}nonce(){return this.milliseconds()}handleErrors(e,t,i,s,r,o,n,d,c){if(void 0!==n&&"result"in n){let e=this.safeValue(n,"result",!1);if("string"===typeof e&&(e="true"===e||"1"===e),!e){let e=void 0;const t=this.safeString(n,"error"),i=t.split(":");if(i.length>1){const t=i[0].split(" ");e=t.length>1?t[1]:t[0]}const s=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,e,s),this.throwBroadlyMatchedException(this.exceptions.broad,t,s),new a(s)}}}}},njSN:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,InvalidAddress:a,InsufficientFunds:o,InvalidNonce:n,InvalidOrder:d,OrderNotFound:c,PermissionDenied:h}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"cobinhood",name:"COBINHOOD",countries:["TW"],rateLimit:100,version:"v1",has:{fetchCurrencies:!0,fetchTickers:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchOrderTrades:!0,fetchOrder:!0,fetchDepositAddress:!0,createDepositAddress:!0,fetchDeposits:!0,fetchWithdrawals:!0,withdraw:!0,fetchMyTrades:!0,editOrder:!0},requiredCredentials:{apiKey:!0,secret:!1},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","3h":"3h","6h":"6h","12h":"12h","1d":"1D","1w":"7D","2w":"14D","1M":"1M"},urls:{referral:"https://cobinhood.com?referrerId=a9d57842-99bb-4d7c-b668-0479a15a458b",logo:"https://user-images.githubusercontent.com/1294454/35755576-dee02e5c-0878-11e8-989f-1595d80ba47f.jpg",api:"https://api.cobinhood.com",www:"https://cobinhood.com",doc:"https://cobinhood.github.io/api-public"},api:{system:{get:["info","time","messages","messages/{message_id}"]},admin:{get:["system/messages","system/messages/{message_id}"],post:["system/messages"],patch:["system/messages/{message_id}"],delete:["system/messages/{message_id}"]},public:{get:["market/fundingbook/precisions/{currency_id}","market/fundingbooks/{currency_id}","market/tickers","market/currencies","market/quote_currencies","market/trading_pairs","market/orderbook/precisions/{trading_pair_id}","market/orderbooks/{trading_pair_id}","market/stats","market/tickers","market/tickers/{trading_pair_id}","market/trades/{trading_pair_id}","market/trades_history/{trading_pair_id}","market/trading_pairs","chart/candles/{trading_pair_id}","system/time"]},private:{get:["funding/auto_offerings","funding/auto_offerings/{currency_id}","funding/funding_history","funding/fundings","funding/loans","funding/loans/{loan_id}","trading/orders/{order_id}","trading/orders/{order_id}/trades","trading/orders","trading/order_history","trading/positions","trading/positions/{trading_pair_id}","trading/positions/{trading_pair_id}/claimable_size","trading/trades","trading/trades/{trade_id}","trading/volume","wallet/balances","wallet/ledger","wallet/limits/withdrawal","wallet/generic_deposits","wallet/generic_deposits/{generic_deposit_id}","wallet/generic_withdrawals","wallet/generic_withdrawals/{generic_withdrawal_id}","wallet/deposit_addresses","wallet/deposit_addresses/iota","wallet/withdrawal_addresses","wallet/withdrawal_frozen","wallet/withdrawals/{withdrawal_id}","wallet/withdrawals","wallet/deposits/{deposit_id}","wallet/deposits"],patch:["trading/positions/{trading_pair_id}"],post:["funding/auto_offerings","funding/fundings","trading/check_order","trading/orders","wallet/deposit_addresses","wallet/transfer","wallet/withdrawal_addresses","wallet/withdrawals","wallet/withdrawals/fee"],put:["funding/fundings/{funding_id}","trading/orders/{order_id}"],delete:["funding/auto_offerings/{currency_id}","funding/fundings/{funding_id}","funding/loans/{loan_id}","trading/orders/{order_id}","trading/positions/{trading_pair_id}","wallet/generic_withdrawals/{generic_withdrawal_id}","wallet/withdrawal_addresses/{wallet_id}"]}},fees:{trading:{maker:0,taker:0}},precision:{amount:8,price:8},exceptions:{insufficient_balance:o,invalid_order_size:d,invalid_nonce:n,unauthorized_scope:h,invalid_address:a,parameter_error:c},commonCurrencies:{SMT:"SocialMedia.Market",MTN:"Motion Token"}})}async fetchCurrencies(e={}){const t=(await this.publicGetMarketCurrencies(e)).result.currencies,i={};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"currency"),a=this.safeString(e,"name"),o=this.safeCurrencyCode(r),n=this.safeFloat(e,"min_unit");i[o]={id:r,code:o,name:a,active:!0,fiat:!1,precision:this.precisionFromString(e.min_unit),limits:{amount:{min:n,max:void 0},price:{min:n,max:void 0},deposit:{min:n,max:void 0},withdraw:{min:n,max:void 0}},funding:{withdraw:{fee:this.safeFloat(e,"withdrawal_fee")},deposit:{fee:this.safeFloat(e,"deposit_fee")}},info:e}}return i}async fetchMarkets(e={}){const t=await this.publicGetMarketTradingPairs(e),i=this.safeValue(t.result,"trading_pairs"),s=[];for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"id"),[a,o]=t.split("-"),n=this.safeCurrencyCode(a),d=this.safeCurrencyCode(o),c=n+"/"+d,h={amount:8,price:this.precisionFromString(e.quote_increment)},l=this.safeValue(e,"is_active",!0);s.push({id:t,symbol:c,base:n,quote:d,baseId:a,quoteId:o,active:l,precision:h,limits:{amount:{min:this.safeFloat(e,"base_min_size"),max:this.safeFloat(e,"base_max_size")},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},info:e})}return s}parseTicker(e,t){let i=void 0;if(void 0===t){const s=this.safeString(e,"trading_pair_id");if(s in this.markets_by_id)t=this.markets_by_id[s];else{const[e,t]=s.split("-");i=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}}void 0!==t&&(i=t.symbol);const s=this.safeInteger(e,"timestamp"),r=this.safeFloat(e,"last_trade_price");return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"24h_high"),low:this.safeFloat(e,"24h_low"),bid:this.safeFloat(e,"highest_bid"),bidVolume:void 0,ask:this.safeFloat(e,"lowest_ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:this.safeFloat(e,"percentChanged24hr"),percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"24h_volume"),quoteVolume:this.safeFloat(e,"quote_volume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={trading_pair_id:i.id},r=await this.publicGetMarketTickersTradingPairId(this.extend(s,t)),a=this.safeValue(r.result,"ticker");return this.parseTicker(a,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetMarketTickers(t),s=this.safeValue(i.result,"tickers"),r=[];for(let a=0;a<s.length;a++)r.push(this.parseTicker(s[a]));return this.indexBy(r,"symbol")}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={trading_pair_id:this.marketId(e)};void 0!==t&&(s.limit=t);const r=await this.publicGetMarketOrderbooksTradingPairId(this.extend(s,i));return this.parseOrderBook(r.result.orderbook,void 0,"bids","asks",0,2)}parseTrade(e,t){let i=void 0;t&&(i=t.symbol);const s=this.safeInteger(e,"timestamp"),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"size");let o=void 0;void 0!==r&&void 0!==a&&(o=r*a);const n=this.safeString(e,"id");return{info:e,timestamp:s,datetime:this.iso8601(s),symbol:i,id:n,order:void 0,type:void 0,side:void 0,takerOrMaker:void 0,price:r,amount:a,cost:o,fee:void 0}}async fetchTrades(e,t,i=50,s={}){await this.loadMarkets();const r=this.market(e),a={trading_pair_id:r.id,limit:i},o=await this.publicGetMarketTradesTradingPairId(this.extend(a,s)),n=this.safeValue(o.result,"trades");return this.parseTrades(n,r,t,i)}parseOHLCV(e,t,i="5m",s,r){return[e.timestamp,parseFloat(e.open),parseFloat(e.high),parseFloat(e.low),parseFloat(e.close),parseFloat(e.volume)]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o=this.milliseconds(),n={trading_pair_id:a.id,timeframe:this.timeframes[t],end_time:o};void 0!==i&&(n.start_time=i);const d=await this.publicGetChartCandlesTradingPairId(this.extend(n,r)),c=this.safeValue(d.result,"candles");return this.parseOHLCVs(c,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetWalletBalances(e),i={info:t},s=this.safeValue(t.result,"balances");for(let r=0;r<s.length;r++){const e=s[r],t=this.safeString(e,"currency"),a=this.safeCurrencyCode(t),o=this.account();o.used=this.safeFloat(e,"on_order"),o.total=this.safeFloat(e,"total"),i[a]=o}return this.parseBalance(i)}parseOrderStatus(e){return this.safeString({filled:"closed",rejected:"closed",partially_filled:"open",pending_cancellation:"open",pending_modification:"open",open:"open",new:"open",queued:"open",cancelled:"canceled",triggered:"triggered"},e,e)}parseOrder(e,t){let i=void 0;if(void 0===t){const i=this.safeString2(e,"trading_pair","trading_pair_id");t=this.safeValue(this.markets_by_id,i)}void 0!==t&&(i=t.symbol);const s=this.safeInteger(e,"timestamp"),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"eq_price"),o=this.safeFloat(e,"size"),n=this.safeFloat(e,"filled");let d=void 0,c=void 0;void 0!==n&&void 0!==a?c=a*n:void 0!==a&&(c=a*o),void 0!==o&&void 0!==n&&(d=o-n);const h=this.parseOrderStatus(this.safeString(e,"state"));let l=this.safeString(e,"side");return"bid"===l?l="buy":"ask"===l&&(l="sell"),{id:this.safeString(e,"id"),clientOrderId:void 0,datetime:this.iso8601(s),timestamp:s,lastTradeTimestamp:void 0,status:h,symbol:i,type:this.safeString(e,"type"),side:l,price:r,cost:c,average:a,amount:o,filled:n,remaining:d,trades:void 0,fee:void 0,info:e}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e);i="sell"===i?"ask":"bid";const n={trading_pair_id:o.id,type:t,side:i,size:this.amountToPrecision(e,s)};"market"!==t&&(n.price=this.priceToPrecision(e,r));const d=await this.privatePostTradingOrders(this.extend(n,a)),c=this.parseOrder(d.result.order,o),h=c.id;return this.orders[h]=c,c}async editOrder(e,t,i,s,r,a,o={}){await this.loadMarkets();const n={order_id:e,price:this.priceToPrecision(t,a),size:this.amountToPrecision(t,r)},d=await this.privatePutTradingOrdersOrderId(this.extend(n,o));return this.parseOrder(this.extend(d,{id:e}))}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},r=await this.privateDeleteTradingOrdersOrderId(this.extend(s,i));return this.parseOrder(this.extend(r,{id:e}))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e.toString()},r=await this.privateGetTradingOrdersOrderId(this.extend(s,i));return this.parseOrder(r.result.order)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r=await this.privateGetTradingOrders(s),a=this.parseOrders(r.result.orders,void 0,t,i);return void 0!==e?this.filterBySymbolSinceLimit(a,e,t,i):this.filterBySinceLimit(a,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.market(e),r.trading_pair_id=a.id),void 0!==i&&(r.limit=i);const o=await this.privateGetTradingOrderHistory(this.extend(r,s)),n=this.parseOrders(o.result.orders,a,t,i);return void 0!==e?this.filterBySymbolSinceLimit(n,e,t,i):this.filterBySinceLimit(n,t,i)}async fetchOrderTrades(e,t,i,s,r={}){await this.loadMarkets();const a={order_id:e},o=await this.privateGetTradingOrdersOrderIdTrades(this.extend(a,r)),n=void 0===t?void 0:this.market(t);return this.parseTrades(o.result.trades,n)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={};void 0!==e&&(a.trading_pair_id=r.id);const o=await this.privateGetTradingTrades(this.extend(a,s));return this.parseTrades(o.result.trades,r,t,i)}async createDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s=this.safeString(t,"ledger_type","exchange"),r={currency:i.id,ledger_type:s},a=await this.privatePostWalletDepositAddresses(this.extend(r,t)),o=this.safeString(a.result.deposit_address,"address"),n=this.safeString(a.result.deposit_address,"memo");return this.checkAddress(o),{currency:e,address:o,tag:n,info:a}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privateGetWalletDepositAddresses(this.extend(i,t)),r=this.safeValue(s.result,"deposit_addresses",[]);let a=void 0,o=void 0;return r.length>0&&(a=this.safeString(r[0],"address"),o=this.safeString2(r[0],"memo","tag")),this.checkAddress(a),{currency:e,address:a,tag:o,info:s}}async withdraw(e,t,i,s,r={}){await this.loadMarkets();const a={currency:this.currency(e).id,amount:t,address:i};return void 0!==s&&(a.memo=s),{id:void 0,info:await this.privatePostWalletWithdrawals(this.extend(a,r))}}async fetchDeposits(e,t,i,s={}){if(await this.loadMarkets(),void 0===e)throw new r(this.id+" fetchDeposits() requires a currency code argument");const a=this.currency(e),o={currency:a.id},n=await this.privateGetWalletDeposits(this.extend(o,s));return this.parseTransactions(n.result.deposits,a)}async fetchWithdrawals(e,t,i,s={}){if(await this.loadMarkets(),void 0===e)throw new r(this.id+" fetchWithdrawals() requires a currency code argument");const a=this.currency(e),o={currency:a.id},n=await this.privateGetWalletWithdrawals(this.extend(o,s));return this.parseTransactions(n.result.withdrawals,a)}parseTransactionStatus(e){return this.safeString({tx_pending_two_factor_auth:"pending",tx_pending_email_auth:"pending",tx_pending_approval:"pending",tx_approved:"pending",tx_processing:"pending",tx_pending:"pending",tx_sent:"pending",tx_cancelled:"canceled",tx_timeout:"failed",tx_invalid:"failed",tx_rejected:"failed",tx_confirmed:"ok"},e,e)}parseTransaction(e,t){const i=this.safeInteger(e,"created_at"),s=this.safeString(e,"currency"),r=this.safeCurrencyCode(s,t);let a=void 0;const o=this.safeString(e,"withdrawal_id"),n=this.safeString(e,"deposit_id");let d=void 0,c=void 0;void 0!==o?(d="withdrawal",a=o,c=this.safeString(e,"to_address")):void 0!==n&&(d="deposit",a=n,c=this.safeString(e,"from_address"));const h=this.safeValue(e,"additional_info",{}),l=this.safeString(h,"memo");return{info:e,id:a,txid:this.safeString(e,"txhash"),timestamp:i,datetime:this.iso8601(i),address:c,tag:l,type:d,amount:this.safeFloat(e,"amount"),currency:r,status:this.parseTransactionStatus(e.status),updated:void 0,fee:{cost:this.safeFloat(e,"fee"),rate:void 0}}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));return r={},"private"===t&&(this.checkRequiredCredentials(),r.nonce=this.nonce().toString(),r.Authorization=this.apiKey),"GET"===i?(n=this.urlencode(n),n.length&&(o+="?"+n)):(r["Content-type"]="application/json; charset=UTF-8",a=this.json(n)),{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,c,h){if(e<400||e>=600)return;if("{"!==o[0])throw new r(this.id+" "+o);const l=this.id+" "+this.json(n),u=this.safeValue(n.error,"error_code");if(("DELETE"===s||"GET"===s)&&"parameter_error"===u&&i.indexOf("trading/orders/")>=0)throw new d(l);throw this.throwExactlyMatchedException(this.exceptions,u,l),new r(l)}nonce(){return this.milliseconds()}}},oAua:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ExchangeNotAvailable:a,ArgumentsRequired:o,BadRequest:n,AccountSuspended:d,InvalidAddress:c,PermissionDenied:h,DDoSProtection:l,InsufficientFunds:u,InvalidNonce:f,CancelPending:p,InvalidOrder:m,OrderNotFound:y,AuthenticationError:b,RequestTimeout:v,NotSupported:g,BadSymbol:w}=i("ucJe"),{TICK_SIZE:k,TRUNCATE:_}=i("rwG2");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"okex",name:"OKEX",countries:["CN","US"],version:"v3",rateLimit:1e3,pro:!0,has:{CORS:!1,fetchOHLCV:!0,fetchOrder:!0,fetchOrders:!1,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchCurrencies:!1,fetchDeposits:!0,fetchWithdrawals:!0,fetchTime:!0,fetchTransactions:!1,fetchMyTrades:!1,fetchDepositAddress:!0,fetchOrderTrades:!0,fetchTickers:!0,fetchLedger:!0,withdraw:!0,futures:!0},timeframes:{"1m":"60","3m":"180","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","4h":"14400","6h":"21600","12h":"43200","1d":"86400","1w":"604800"},hostname:"okex.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/32552768-0d6dd3c6-c4a6-11e7-90f8-c043b64756a7.jpg",api:{rest:"https://www.{hostname}"},www:"https://www.okex.com",doc:"https://www.okex.com/docs/en/",fees:"https://www.okex.com/pages/products/fees.html",referral:"https://www.okex.com/join/1888677"},api:{general:{get:["time"]},account:{get:["wallet","sub-account","asset-valuation","wallet/{currency}","withdrawal/history","withdrawal/history/{currency}","ledger","deposit/address","deposit/history","deposit/history{<currency}","currencies","withdrawal/fee"],post:["transfer","withdrawal"]},spot:{get:["accounts","accounts/{currency}","accounts/{currency}/ledger","orders","orders_pending","orders/{order_id}","orders/{client_oid}","trade_fee","fills","algo","instruments","instruments/{instrument_id}/book","instruments/ticker","instruments/{instrument_id}/ticker","instruments/{instrument_id}/trades","instruments/{instrument_id}/candles"],post:["order_algo","orders","batch_orders","cancel_orders/{order_id}","cancel_orders/{client_oid}","cancel_batch_algos","cancel_batch_orders"]},margin:{get:["accounts","accounts/{instrument_id}","accounts/{instrument_id}/ledger","accounts/availability","accounts/{instrument_id}/availability","accounts/borrowed","accounts/{instrument_id}/borrowed","orders","accounts/{instrument_id}/leverage","orders/{order_id}","orders/{client_oid}","orders_pending","fills","instruments/{instrument_id}/mark_price"],post:["accounts/borrow","accounts/repayment","orders","batch_orders","cancel_orders","cancel_orders/{order_id}","cancel_orders/{client_oid}","cancel_batch_orders","accounts/{instrument_id}/leverage"]},futures:{get:["position","{instrument_id}/position","accounts","accounts/{underlying}","accounts/{underlying}/leverage","accounts/{underlying}/ledger","order_algo/{instrument_id}","orders/{instrument_id}","orders/{instrument_id}/{order_id}","orders/{instrument_id}/{client_oid}","fills","trade_fee","accounts/{instrument_id}/holds","order_algo/{instrument_id}","instruments","instruments/{instrument_id}/book","instruments/ticker","instruments/{instrument_id}/ticker","instruments/{instrument_id}/trades","instruments/{instrument_id}/candles","instruments/{instrument_id}/index","rate","instruments/{instrument_id}/estimated_price","instruments/{instrument_id}/open_interest","instruments/{instrument_id}/price_limit","instruments/{instrument_id}/mark_price","instruments/{instrument_id}/liquidation"],post:["accounts/{underlying}/leverage","order","orders","cancel_order/{instrument_id}/{order_id}","cancel_order/{instrument_id}/{client_oid}","cancel_batch_orders/{instrument_id}","accounts/margin_mode","close_position","cancel_all","order_algo","cancel_algos"]},swap:{get:["position","{instrument_id}/position","accounts","{instrument_id}/accounts","accounts/{instrument_id}/settings","accounts/{instrument_id}/ledger","orders/{instrument_id}","orders/{instrument_id}/{order_id}","orders/{instrument_id}/{client_oid}","fills","accounts/{instrument_id}/holds","trade_fee","order_algo/{instrument_id}","instruments","instruments/{instrument_id}/depth","instruments/ticker","instruments/{instrument_id}/ticker","instruments/{instrument_id}/trades","instruments/{instrument_id}/candles","instruments/{instrument_id}/index","rate","instruments/{instrument_id}/open_interest","instruments/{instrument_id}/price_limit","instruments/{instrument_id}/liquidation","instruments/{instrument_id}/funding_time","instruments/{instrument_id}/mark_price","instruments/{instrument_id}/historical_funding_rate"],post:["accounts/{instrument_id}/leverage","order","orders","cancel_order/{instrument_id}/{order_id}","cancel_order/{instrument_id}/{client_oid}","cancel_batch_orders/{instrument_id}","order_algo","cancel_algos"]},option:{get:["accounts","{underlying}/position","accounts/{underlying}","orders/{underlying}","fills/{underlying}","accounts/{underlying}/ledger","trade_fee","orders/{underlying}/{order_id}","orders/{underlying}/{client_oid}","underlying","instruments/{underlying}","instruments/{underlying}/summary","instruments/{underlying}/summary/{instrument_id}","instruments/{instrument_id}/book","instruments/{instrument_id}/trades","instruments/{instrument_id}/ticker","instruments/{instrument_id}/candles"],post:["order","orders","cancel_order/{underlying}/{order_id}","cancel_order/{underlying}/{client_oid}","cancel_batch_orders/{underlying}","amend_order/{underlying}","amend_batch_orders/{underlying}"]},index:{get:["{instrument_id}/constituents"]}},fees:{trading:{taker:.0015,maker:.001},spot:{taker:.0015,maker:.001},futures:{taker:5e-4,maker:2e-4},swap:{taker:75e-5,maker:2e-4}},requiredCredentials:{apiKey:!0,secret:!0,password:!0},exceptions:{exact:{1:r,"failure to get a peer from the ring-balancer":a,4010:h,4001:r,4002:r,30001:b,30002:b,30003:b,30004:b,30005:f,30006:b,30007:n,30008:v,30009:r,30010:b,30011:h,30012:b,30013:b,30014:l,30015:b,30016:r,30017:r,30018:r,30019:a,30020:n,30021:n,30022:h,30023:n,30024:w,30025:n,30026:l,30027:b,30028:h,30029:d,30030:r,30031:n,30032:w,30033:n,30034:r,30035:r,30036:r,30038:b,30037:a,32001:d,32002:h,32003:p,32004:r,32005:m,32006:m,32007:m,32008:m,32009:m,32010:r,32011:r,32012:r,32013:r,32014:r,32015:r,32016:r,32017:r,32018:r,32019:r,32020:r,32021:r,32022:r,32023:r,32024:r,32025:r,32026:r,32027:r,32028:r,32029:r,32030:m,32031:o,32038:b,32040:r,32044:r,32045:r,32046:r,32047:r,32048:m,32049:r,32050:m,32051:m,32052:r,32053:r,32057:r,32054:r,32055:m,32056:r,32058:r,32059:m,32060:m,32061:m,32062:m,32063:m,32064:r,32065:r,32066:r,32067:r,32068:r,32069:r,32070:r,32071:r,32072:r,32073:r,32074:r,32075:r,32076:r,32077:r,32078:r,32079:r,32080:r,32083:r,33001:h,33002:d,33003:u,33004:r,33005:r,33006:r,33007:r,33008:r,33009:r,33010:r,33011:r,33012:r,33013:m,33014:y,33015:m,33016:r,33017:u,33018:r,33020:r,33021:n,33022:m,33023:r,33024:m,33025:m,33026:r,33027:m,33028:m,33029:m,33034:r,33035:r,33036:r,33037:r,33038:r,33039:r,33040:r,33041:r,33042:r,33043:r,33044:r,33045:r,33046:r,33047:r,33048:r,33049:r,33050:r,33051:r,33059:n,33060:n,33061:r,33062:r,33063:r,33064:r,33065:r,21009:r,34001:h,34002:c,34003:r,34004:r,34005:r,34006:r,34007:r,34008:u,34009:r,34010:r,34011:r,34012:r,34013:r,34014:r,34015:r,34016:h,34017:d,34018:b,34019:h,34020:h,34021:c,34022:r,34023:h,34026:r,34036:r,34037:r,34038:r,34039:r,35001:r,35002:r,35003:r,35004:r,35005:b,35008:m,35010:m,35012:m,35014:m,35015:m,35017:r,35019:m,35020:m,35021:m,35022:r,35024:r,35025:u,35026:r,35029:y,35030:m,35031:m,35032:r,35037:r,35039:r,35040:m,35044:r,35046:u,35047:u,35048:r,35049:m,35050:m,35052:u,35053:r,35055:u,35057:r,35058:r,35059:n,35060:n,35061:n,35062:m,35063:m,35064:m,35066:m,35067:m,35068:m,35069:m,35070:m,35071:m,35072:m,35073:m,35074:m,35075:m,35076:m,35077:m,35078:m,35079:m,35080:m,35081:m,35082:m,35083:m,35084:m,35085:m,35086:m,35087:m,35088:m,35089:m,35090:r,35091:r,35092:r,35093:r,35094:r,35095:n,35096:r,35097:r,35098:r,35099:r,36001:n,36002:n,36005:r,36101:b,36102:h,36103:h,36104:h,36105:h,36106:h,36107:h,36108:u,36109:h,36201:h,36202:h,36203:m,36204:r,36205:n,36206:n,36207:m,36208:m,36209:m,36210:m,36211:m,36212:m,36213:m,36214:r,36216:y,36217:m,36218:m,36219:m,36220:m,36221:m,36222:m,36223:m,36224:m,36225:m,36226:m,36227:m,36228:m,36229:m,36230:m},broad:{}},precisionMode:k,options:{createMarketBuyOrderRequiresPrice:!0,fetchMarkets:["spot","futures","swap","option"],defaultType:"spot",auth:{time:"public",currencies:"private",instruments:"public",rate:"public","{instrument_id}/constituents":"public"}},commonCurrencies:{AE:"AET",HOT:"Hydro Protocol",HSR:"HC",MAG:"Maggie",YOYO:"YOYOW",WIN:"WinToken"}})}async fetchTime(e={}){const t=await this.generalGetTime(e);return this.parse8601(this.safeString(t,"iso"))}async fetchMarkets(e={}){const t=this.safeValue(this.options,"fetchMarkets");let i=[];for(let s=0;s<t.length;s++){const r=await this.fetchMarketsByType(t[s],e);i=this.arrayConcat(i,r)}return i}parseMarkets(e){const t=[];for(let i=0;i<e.length;i++)t.push(this.parseMarket(e[i]));return t}parseMarket(e){const t=this.safeString(e,"instrument_id");let i="spot",s=!0,r=!1,a=!1,o=!1,n=this.safeString(e,"base_currency"),d=this.safeString(e,"quote_currency");if(void 0!==this.safeFloat(e,"contract_val"))if("option_type"in e){i="option",s=!1,o=!0;const t=this.safeString(e,"underlying").split("-");n=this.safeString(t,0),d=this.safeString(t,1)}else{i="swap",s=!1,a=!0,void 0!==this.safeString(e,"alias")&&(a=!1,r=!0,i="futures",n=this.safeString(e,"underlying_index"))}const c=this.safeCurrencyCode(n),h=this.safeCurrencyCode(d),l=s?c+"/"+h:t,u=this.safeFloat2(e,"lot_size","trade_increment"),f={amount:this.safeFloat(e,"size_increment",u),price:this.safeFloat(e,"tick_size")},p=this.safeFloat2(e,"min_size","base_min_size");let m=this.safeFloat(e,"tick_size");void 0!==f.price&&(m=Math.pow(10,-f.price));let y=void 0;void 0!==p&&void 0!==m&&(y=p*m);const b=this.safeValue2(this.fees,i,"trading",{});return this.extend(b,{id:t,symbol:l,base:c,quote:h,baseId:n,quoteId:d,info:e,type:i,spot:s,futures:r,swap:a,option:o,active:!0,precision:f,limits:{amount:{min:p,max:void 0},price:{min:m,max:void 0},cost:{min:y,max:void 0}}})}async fetchMarketsByType(e,t={}){if("option"===e){const e=await this.optionGetUnderlying(t);let i=[];for(let t=0;t<e.length;t++){const s=await this.optionGetInstrumentsUnderlying({underlying:e[t]});i=this.arrayConcat(i,s)}return this.parseMarkets(i)}if("spot"===e||"futures"===e||"swap"===e){const i=e+"GetInstruments",s=await this[i](t);return this.parseMarkets(s)}throw new g(this.id+" fetchMarketsByType does not support market type "+e)}async fetchCurrencies(e={}){const t=await this.accountGetCurrencies(e),i={};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"currency"),a=this.safeCurrencyCode(r),o=8,n=this.safeString(e,"name"),d=this.safeInteger(e,"can_deposit"),c=this.safeInteger(e,"can_withdraw"),h=d&&c;i[a]={id:r,code:a,info:e,type:void 0,name:n,active:h,fee:void 0,precision:o,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(e,"min_withdrawal"),max:void 0}}}}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e);let r=s.type+"GetInstrumentsInstrumentId";r+="swap"===s.type?"Depth":"Book";const a={instrument_id:s.id};void 0!==t&&(a.size=t);const o=await this[r](this.extend(a,i)),n=this.parse8601(this.safeString(o,"timestamp"));return this.parseOrderBook(o,n)}parseTicker(e,t){const i=this.parse8601(this.safeString(e,"timestamp"));let s=void 0;const r=this.safeString(e,"instrument_id");if(r in this.markets_by_id)s=(t=this.markets_by_id[r]).symbol;else if(void 0!==r){const e=r.split("-");if(2===e.length){const[t,i]=e;s=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(i)}else s=r}void 0===s&&void 0!==t&&(s=t.symbol);const a=this.safeFloat(e,"last"),o=this.safeFloat(e,"open_24h");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high_24h"),low:this.safeFloat(e,"low_24h"),bid:this.safeFloat(e,"best_bid"),bidVolume:this.safeFloat(e,"best_bid_size"),ask:this.safeFloat(e,"best_ask"),askVolume:this.safeFloat(e,"best_ask_size"),vwap:void 0,open:o,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"base_volume_24h"),quoteVolume:this.safeFloat(e,"quote_volume_24h"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s=i.type+"GetInstrumentsInstrumentIdTicker",r={instrument_id:i.id},a=await this[s](this.extend(r,t));return this.parseTicker(a)}async fetchTickersByType(e,t,i={}){await this.loadMarkets();const s=e+"GetInstrumentsTicker",r=await this[s](i),a={};for(let o=0;o<r.length;o++){const e=this.parseTicker(r[o]);a[e.symbol]=e}return a}async fetchTickers(e,t={}){const i=this.safeString2(this.options,"fetchTickers","defaultType"),s=this.safeString(t,"type",i);return await this.fetchTickersByType(s,e,this.omit(t,"type"))}parseTrade(e,t){let i=void 0;const s=this.safeString(e,"instrument_id");let r=void 0,a=void 0;if(s in this.markets_by_id)i=(t=this.markets_by_id[s]).symbol,r=t.base,a=t.quote;else if(void 0!==s){const e=s.split("-");if(2===e.length){const[t,s]=e;r=this.safeCurrencyCode(t),a=this.safeCurrencyCode(s),i=r+"/"+a}else i=s}void 0===i&&void 0!==t&&(i=t.symbol,r=t.base,a=t.quote);const o=this.parse8601(this.safeString2(e,"timestamp","created_at")),n=this.safeFloat(e,"price");let d=this.safeFloat2(e,"size","qty");d=this.safeFloat(e,"order_qty",d);let c=this.safeString2(e,"exec_type","liquidity");"M"===c?c="maker":"T"===c&&(c="taker");const h=this.safeString(e,"side");let l=void 0;void 0!==d&&void 0!==n&&(l=d*n);const u=this.safeFloat(e,"fee");let f=void 0;if(void 0!==u){f={cost:-u,currency:"buy"===h?r:a}}const p=this.safeString(e,"order_id");return{info:e,timestamp:o,datetime:this.iso8601(o),symbol:i,id:this.safeString2(e,"trade_id","ledger_id"),order:p,type:void 0,takerOrMaker:c,side:h,price:n,amount:d,cost:l,fee:f}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a=r.type+"GetInstrumentsInstrumentIdTrades";(void 0===i||i>100)&&(i=100);const o={instrument_id:r.id,limit:i},n=await this[a](this.extend(o,s));return this.parseTrades(n,r,t,i)}parseOHLCV(e,t,i="1m",s,r){if(Array.isArray(e)){const t=e.length>6?6:5;let i=e[0];return"string"===typeof i&&(i=this.parse8601(i)),[i,parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[t])]}return[this.parse8601(this.safeString(e,"time")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o=a.type+"GetInstrumentsInstrumentIdCandles",n={instrument_id:a.id,granularity:this.timeframes[t]};void 0!==i&&(n.start=this.iso8601(i));const d=await this[o](this.extend(n,r));return this.parseOHLCVs(d,a,t,i,s)}parseAccountBalance(e){const t={info:e};for(let i=0;i<e.length;i++){const s=e[i],r=this.safeString(s,"currency"),a=this.safeCurrencyCode(r),o=this.account();o.total=this.safeFloat(s,"balance"),o.used=this.safeFloat(s,"hold"),o.free=this.safeFloat(s,"available"),t[a]=o}return this.parseBalance(t)}parseMarginBalance(e){const t={info:e};for(let i=0;i<e.length;i++){const s=e[i],r=this.safeString(s,"instrument_id"),a=this.safeValue(this.markets_by_id,r);let o=void 0;if(void 0===a){const[e,t]=r.split("-");o=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}else o=a.symbol;const n=this.omit(s,["instrument_id","liquidation_price","product_id","risk_rate","margin_ratio","maint_margin_ratio","tiers"]),d=Object.keys(n),c={};for(let e=0;e<d.length;e++){const t=d[e],i=s[t];if(!(t.indexOf(":")>=0))throw new g(this.id+" margin balance response format has changed!");{const e=t.split(":")[1],s=this.safeCurrencyCode(e),r=this.account();r.total=this.safeFloat(i,"balance"),r.used=this.safeFloat(i,"hold"),r.free=this.safeFloat(i,"available"),c[s]=r}}t[o]=this.parseBalance(c)}return t}parseFuturesBalance(e){const t={info:e},i=this.safeValue(e,"info",{}),s=Object.keys(i);for(let r=0;r<s.length;r++){const e=s[r],a=this.safeCurrencyCode(e),o=this.safeValue(i,e,{}),n=this.account();n.total=this.safeFloat(o,"equity"),n.free=this.safeFloat(o,"total_avail_balance"),t[a]=n}return this.parseBalance(t)}parseSwapBalance(e){const t={info:e},i=this.safeValue(e,"info",[]);for(let s=0;s<i.length;s++){const e=i[s],r=this.safeString(e,"instrument_id");let a=r;r in this.markets_by_id&&(a=this.markets_by_id[r].symbol);const o=this.account();o.total=this.safeFloat(e,"equity"),o.free=this.safeFloat(e,"total_avail_balance"),t[a]=o}return this.parseBalance(t)}async fetchBalance(e={}){const t=this.safeString2(this.options,"fetchBalance","defaultType"),i=this.safeString(e,"type",t);if(void 0===i)throw new o(this.id+" fetchBalance requires a type parameter (one of 'account', 'spot', 'margin', 'futures', 'swap')");await this.loadMarkets();const s=i+"Get"+("account"===i?"Wallet":"Accounts"),r=this.omit(e,"type"),a=await this[s](r);return this.parseBalanceByType(i,a)}parseBalanceByType(e,t){if("account"===e||"spot"===e)return this.parseAccountBalance(t);if("margin"===e)return this.parseMarginBalance(t);if("futures"===e)return this.parseFuturesBalance(t);if("swap"===e)return this.parseSwapBalance(t);throw new g(this.id+" fetchBalance does not support the '"+e+"' type (the type must be one of 'account', 'spot', 'margin', 'futures', 'swap')")}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e);let n={instrument_id:o.id},d=void 0;if(o.futures||o.swap){const i=o.futures?this.numberToString(s):this.amountToPrecision(e,s);n=this.extend(n,{type:t,size:i,price:this.priceToPrecision(e,r)}),o.futures&&(n.leverage="10"),d=o.type+"PostOrder"}else{const c=this.safeString(a,"margin_trading","1");if(n=this.extend(n,{side:i,type:t,margin_trading:c}),"limit"===t)n.price=this.priceToPrecision(e,r),n.size=this.amountToPrecision(e,s);else if("market"===t)if("buy"===i){let e=this.safeFloat(a,"notional");if(this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){if(void 0!==r)void 0===e&&(e=s*r);else if(void 0===e)throw new m(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument or in the 'notional' extra parameter (the exchange-specific behaviour)")}else e=void 0===e?s:e;const t=o.precision.price;n.notional=this.decimalToPrecision(e,_,t,this.precisionMode)}else n.size=this.amountToPrecision(e,s);d="2"===c?"marginPostOrders":"spotPostOrders"}const c=await this[d](this.extend(n,a)),h=this.milliseconds();return{info:c,id:this.safeString(c,"order_id"),timestamp:h,datetime:this.iso8601(h),lastTradeTimestamp:void 0,status:void 0,symbol:e,type:t,side:i,price:r,amount:s,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0}}async cancelOrder(e,t,i={}){if(void 0===t)throw new o(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t);let r=s.type+"PostCancelOrder";const a={instrument_id:s.id};s.futures||s.swap?r+="InstrumentId":r+="s";const n=this.safeString(i,"client_oid");void 0!==n?(r+="ClientOid",a.client_oid=n):(r+="OrderId",a.order_id=e);const d=this.omit(i,"type"),c=await this[r](this.extend(a,d)),h="result"in c?c:this.safeValue(c,s.id,{});return this.parseOrder(h,s)}parseOrderStatus(e){return this.safeString({"-2":"failed","-1":"canceled",0:"open",1:"open",2:"closed",3:"open",4:"canceled"},e,e)}parseOrderSide(e){return this.safeString({1:"buy",2:"sell",3:"sell",4:"buy"},e,e)}parseOrder(e,t){const i=this.safeString(e,"order_id"),s=this.parse8601(this.safeString(e,"timestamp"));let r=this.safeString(e,"side"),a=this.safeString(e,"type");"buy"!==r&&"sell"!==r&&(r=this.parseOrderSide(a)),"limit"!==a&&"market"!==a&&(a="pnl"in e?"futures":"swap");let o=void 0;const n=this.safeString(e,"instrument_id");o=n in this.markets_by_id?(t=this.markets_by_id[n]).symbol:n,void 0!==t&&void 0===o&&(o=t.symbol);let d=this.safeFloat(e,"size");const c=this.safeFloat2(e,"filled_size","filled_qty");let h=void 0;void 0!==d&&void 0!==c&&(d=Math.max(d,c),h=Math.max(0,d-c)),"market"===a&&(h=0);let l=this.safeFloat2(e,"filled_notional","funds");const u=this.safeFloat(e,"price");let f=this.safeFloat(e,"price_avg");void 0===l?void 0!==c&&void 0!==f&&(l=f*c):void 0===f&&void 0!==c&&c>0&&(f=l/c);const p=this.parseOrderStatus(this.safeString(e,"state")),m=this.safeFloat(e,"fee");let y=void 0;if(void 0!==m){y={cost:m,currency:void 0}}return{info:e,id:i,clientOrderId:this.safeString(e,"client_oid"),timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:o,type:a,side:r,price:u,average:f,cost:l,amount:d,filled:c,remaining:h,status:p,fee:y}}async fetchOrder(e,t,i={}){if(void 0===t)throw new o(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),r=this.safeString2(this.options,"fetchOrder","defaultType",s.type),a=this.safeString(i,"type",r);if(void 0===a)throw new o(this.id+" fetchOrder requires a type parameter (one of 'spot', 'margin', 'futures', 'swap').");let n=a+"GetOrders"+(s.futures||s.swap?"InstrumentId":"");const d={instrument_id:s.id},c=this.safeString(i,"client_oid");void 0!==c?(n+="ClientOid",d.client_oid=c):(n+="OrderId",d.order_id=e);const h=this.omit(i,"type"),l=await this[n](this.extend(d,h));return this.parseOrder(l)}async fetchOrdersByState(e,t,i,s,r={}){if(void 0===t)throw new o(this.id+" fetchOrdersByState requires a symbol argument");await this.loadMarkets();const a=this.market(t),n=a.type,d={instrument_id:a.id,state:e};let c=n+"GetOrders";(a.futures||a.swap)&&(c+="InstrumentId");const h=this.omit(r,"type"),l=await this[c](this.extend(d,h));let u=void 0;if("swap"===a.type||"futures"===a.type)u=this.safeValue(l,"order_info",[]);else{u=l;const e=l.length;if(e<1)return[];if(e>1){void 0!==this.safeValue(l[1],"before")&&(u=l[0])}}return this.parseOrders(u,a,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByState("6",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByState("7",e,t,i,s)}parseDepositAddresses(e){const t=[];for(let i=0;i<e.length;i++)t.push(this.parseDepositAddress(e[i]));return t}parseDepositAddress(e,t){const i=this.safeString(e,"address");let s=this.safeString2(e,"tag","payment_id");s=this.safeString(e,"memo",s);const r=this.safeString(e,"currency"),a=this.safeCurrencyCode(r);return this.checkAddress(i),{currency:a,address:i,tag:s,info:e}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.accountGetDepositAddress(this.extend(i,t)),r=this.parseDepositAddresses(s);if(r.length<1)throw new c(this.id+" fetchDepositAddress cannot return nonexistent addresses, you should create withdrawal addresses with the exchange website first");return r[0]}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const o=this.currency(e);s&&(i=i+":"+s);const n=this.safeString(a,"fee");if(void 0===n)throw new r(this.id+" withdraw() requires a `fee` string parameter, network transaction fee must be \u2265 0. Withdrawals to OKCoin or OKEx are fee-free, please set '0'. Withdrawing to external digital asset address requires network transaction fee.");const d={currency:o.id,to_address:i,destination:"4",amount:this.numberToString(t),fee:n};"password"in a?d.trade_pwd=a.password:"trade_pwd"in a?d.trade_pwd=a.trade_pwd:this.password&&(d.trade_pwd=this.password);const c=this.omit(a,["fee","password","trade_pwd"]);if(!("trade_pwd"in d))throw new r(this.id+" withdraw() requires this.password set on the exchange instance or a password / trade_pwd parameter");const h=await this.accountPostWithdrawal(this.extend(d,c));return{info:h,id:this.safeString(h,"withdrawal_id")}}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r={};let a="accountGetDepositHistory",o=void 0;void 0!==e&&(o=this.currency(e),r.code=o.code,a+="Currency");const n=await this[a](this.extend(r,s));return this.parseTransactions(n,o,t,i,s)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};let a="accountGetWithdrawalHistory",o=void 0;void 0!==e&&(o=this.currency(e),r.code=o.code,a+="Currency");const n=await this[a](this.extend(r,s));return this.parseTransactions(n,o,t,i,s)}parseTransactionStatus(e){return this.safeString({"-3":"pending","-2":"pending","-1":"failed",0:"pending",1:"pending",2:"ok",3:"pending",4:"pending",5:"pending"},e,e)}parseTransaction(e,t){let i=void 0,s=void 0,r=void 0;const a=this.safeString(e,"withdrawal_id"),o=this.safeString(e,"from"),n=this.safeString(e,"to");void 0!==a?(i="withdrawal",s=a,r=n):(s=this.safeString(e,"payment_id"),i="deposit",r=n);const d=this.safeString(e,"currency"),c=this.safeCurrencyCode(d),h=this.safeFloat(e,"amount"),l=this.parseTransactionStatus(this.safeString(e,"status")),u=this.safeString(e,"txid"),f=this.parse8601(this.safeString(e,"timestamp"));let p=void 0;if("deposit"===i)p=0;else if(void 0!==d){const t=this.safeString(e,"fee");if(void 0!==t){const e=d.toLowerCase(),i=t.replace(e,"");p=parseFloat(i)}}return{info:e,id:s,currency:c,amount:h,addressFrom:o,addressTo:n,address:r,tagFrom:void 0,tagTo:void 0,tag:void 0,status:l,type:i,updated:void 0,txid:u,timestamp:f,datetime:this.iso8601(f),fee:{currency:c,cost:p}}}async fetchOrderTrades(e,t,i,s,r={}){if(void 0===t)throw new o(this.id+" fetchOrderTrades requires a symbol argument");await this.loadMarkets();const a=this.market(t);(void 0===s||s>100)&&(s=100);const n={instrument_id:a.id,order_id:e,limit:s},d=this.safeString2(this.options,"fetchMyTrades","defaultType"),c=this.safeString(r,"type",d),h=this.omit(r,"type"),l=c+"GetFills",u=await this[l](this.extend(n,h));return this.parseTrades(u,a,i,s)}async fetchLedger(e,t,i,s={}){await this.loadMarkets();const r=this.safeString2(this.options,"fetchLedger","defaultType"),a=this.safeString(s,"type",r),n=this.omit(s,"type"),d="account"===a?"":"Accounts";let c="";const h={};void 0!==i&&(h.limit=i);let l=void 0;if("spot"===a||"futures"===a){if(void 0===e)throw new o(this.id+" fetchLedger requires a currency code argument for '"+a+"' markets");c="Currency",l=this.currency(e),h.currency=l.id}else if("margin"===a||"swap"===a){if(void 0===e)throw new o(this.id+" fetchLedger requires a code argument (a market symbol) for '"+a+"' markets");c="InstrumentId";const t=this.market(e);l=this.currency(t.base),h.instrument_id=t.id}else{if("account"!==a)throw new g(this.id+" fetchLedger does not support the '"+a+"' type (the type must be one of 'account', 'spot', 'margin', 'futures', 'swap')");void 0!==e&&(l=this.currency(e),h.currency=l.id)}const u=a+"Get"+d+c+"Ledger",f=await this[u](this.extend(h,n)),p=Array.isArray(f[0]),m="margin"===a&&p?f[0]:f;return this.parseLedger(m,l,t,i)}parseLedgerEntryType(e){return this.safeString({transfer:"transfer",trade:"trade",rebate:"rebate",match:"trade",fee:"fee",settlement:"trade",liquidation:"trade",funding:"fee",margin:"margin"},e,e)}parseLedgerEntry(e,t){const i=this.safeString(e,"ledger_id"),s=this.safeValue(e,"details",{}),r=this.safeString(s,"order_id"),a=this.parseLedgerEntryType(this.safeString(e,"type")),o=this.safeCurrencyCode(this.safeString(e,"currency"),t),n=this.safeFloat(e,"amount"),d=this.parse8601(this.safeString(e,"timestamp")),c={cost:this.safeFloat(e,"fee"),currency:o};return{info:e,id:i,account:void 0,referenceId:r,referenceAccount:void 0,type:a,currency:o,amount:n,before:void 0,after:this.safeFloat(e,"balance"),status:"ok",timestamp:d,datetime:this.iso8601(d),fee:c}}sign(e,t="public",i="GET",s={},r,a){const o=Array.isArray(s);let n="/api/"+t+"/"+this.version+"/";n+=o?e:this.implodeParams(e,s);const d=o?s:this.omit(s,this.extractParams(e));let c=this.implodeParams(this.urls.api.rest,{hostname:this.hostname})+n;const h=this.getPathAuthenticationType(e);if("public"===h)Object.keys(d).length&&(c+="?"+this.urlencode(d));else if("private"===h){this.checkRequiredCredentials();const e=this.iso8601(this.milliseconds());r={"OK-ACCESS-KEY":this.apiKey,"OK-ACCESS-PASSPHRASE":this.password,"OK-ACCESS-TIMESTAMP":e};let t=e+i+n;if("GET"===i){if(Object.keys(d).length){const e="?"+this.urlencode(d);c+=e,t+=e}}else(o||Object.keys(d).length)&&(t+=a=this.json(d)),r["Content-Type"]="application/json";const s=this.hmac(this.encode(t),this.encode(this.secret),"sha256","base64");r["OK-ACCESS-SIGN"]=this.decode(s)}return{url:c,method:i,body:a,headers:r}}getPathAuthenticationType(e){if("underlying"===e)return"public";const t=this.safeValue(this.options,"auth",{}),i=this.findBroadlyMatchedKey(t,e);return this.safeString(t,i,"private")}handleErrors(e,t,i,s,a,o,n,d,c){const h=this.id+" "+o;if(503===e)throw new r(h);if(!n)return;const l=this.safeString(n,"message"),u=this.safeString2(n,"code","error_code");if(void 0!==l&&(this.throwExactlyMatchedException(this.exceptions.exact,l,h),this.throwBroadlyMatchedException(this.exceptions.broad,l,h)),this.throwExactlyMatchedException(this.exceptions.exact,u,h),void 0!==l)throw new r(h)}}},oWik:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coingi",name:"Coingi",rateLimit:1e3,countries:["PA","BG","CN","US"],has:{CORS:!1,fetchTickers:!0},urls:{referral:"https://www.coingi.com/?r=XTPPMC",logo:"https://user-images.githubusercontent.com/1294454/28619707-5c9232a8-7212-11e7-86d6-98fe5d15cc6e.jpg",api:{www:"https://coingi.com",current:"https://api.coingi.com",user:"https://api.coingi.com"},www:"https://coingi.com",doc:"https://coingi.docs.apiary.io"},api:{www:{get:[""]},current:{get:["order-book/{pair}/{askCount}/{bidCount}/{depth}","transactions/{pair}/{maxCount}","24hour-rolling-aggregation"]},user:{post:["balance","add-order","cancel-order","orders","transactions","create-crypto-withdrawal"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001,LTC:.01,DOGE:2,PPC:.02,VTC:.2,NMC:2,DASH:.002,USD:10,EUR:10},deposit:{BTC:0,LTC:0,DOGE:0,PPC:0,VTC:0,NMC:0,DASH:0,USD:5,EUR:1}}}})}async fetchMarkets(e={}){const t=(await this.wwwGet(e)).split('do=currencyPairSelector-selectCurrencyPair" class="active">')[1].split('<div class="currency-pair-label">'),i=[];for(let s=1;s<t.length;s++){let e=t[s].split("</div>")[0];e=e.replace("/","-"),e=e.toLowerCase();const[r,a]=e.split("-");let o=r.toUpperCase(),n=a.toUpperCase();o=this.safeCurrencyCode(o),n=this.safeCurrencyCode(n);const d=o+"/"+n,c={amount:8,price:8};i.push({id:e,symbol:d,base:o,quote:n,baseId:r,quoteId:a,info:e,active:!0,precision:c,limits:{amount:{min:Math.pow(10,-c.amount),max:Math.pow(10,c.amount)},price:{min:Math.pow(10,-c.price),max:void 0},cost:{min:0,max:void 0}}})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=[],i=Object.keys(this.currencies);for(let o=0;o<i.length;o++){const e=i[o];t.push(e.toLowerCase())}const s={currencies:t.join(",")},r=await this.userPostBalance(this.extend(s,e)),a={info:r};for(let o=0;o<r.length;o++){const e=r[o],t=this.safeString(e.currency,"name"),i=this.safeCurrencyCode(t),s=this.account();s.free=this.safeFloat(e,"available");const n=this.safeFloat(e,"blocked"),d=this.safeFloat(e,"inOrders"),c=this.safeFloat(e,"withdrawing");s.used=this.sum(n,d,c),a[i]=s}return this.parseBalance(a)}async fetchOrderBook(e,t=512,i={}){await this.loadMarkets();const s={pair:this.market(e).id,depth:32,askCount:t,bidCount:t},r=await this.currentGetOrderBookPairAskCountBidCountDepth(this.extend(s,i));return this.parseOrderBook(r,void 0,"bids","asks","price","baseAmount")}parseTicker(e,t){const i=this.milliseconds();let s=void 0;return void 0!==t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"highestBid"),bidVolume:void 0,ask:this.safeFloat(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:void 0,close:void 0,last:void 0,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"baseVolume"),quoteVolume:this.safeFloat(e,"counterVolume"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.currentGet24hourRollingAggregation(t),s={};for(let r=0;r<i.length;r++){const e=i[r],t=e.currencyPair.base.toUpperCase()+"/"+e.currencyPair.counter.toUpperCase();let a=void 0;t in this.markets&&(a=this.markets[t]),s[t]=this.parseTicker(e,a)}return s}async fetchTicker(e,t={}){await this.loadMarkets();const i=await this.fetchTickers(void 0,t);if(e in i)return i[e];throw new r(this.id+" return did not contain "+e)}parseTrade(e,t){const i=this.safeFloat(e,"price"),s=this.safeFloat(e,"amount");let r=void 0;void 0!==i&&void 0!==s&&(r=i*s);const a=this.safeInteger(e,"timestamp"),o=this.safeString(e,"id"),n=this.safeString(e,"currencyPair");n in this.markets_by_id&&(t=this.markets_by_id[n]);let d=void 0;return void 0!==t&&(d=t.symbol),{id:o,info:e,timestamp:a,datetime:this.iso8601(a),symbol:d,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:i,amount:s,cost:r,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pair:r.id,maxCount:128},o=await this.currentGetTransactionsPairMaxCount(this.extend(a,s));return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o={currencyPair:this.marketId(e),volume:s,price:r,orderType:"buy"===i?0:1},n=await this.userPostAddOrder(this.extend(o,a));return{info:n,id:n.result}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e};return await this.userPostCancelOrder(this.extend(s,i))}sign(e,t="current",i="GET",s={},r,a){let o=this.urls.api[t];"www"!==t&&(o+="/"+t+"/"+this.implodeParams(e,s));const n=this.omit(s,this.extractParams(e));if("current"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else if("user"===t){this.checkRequiredCredentials();const e=this.nonce(),t=this.extend({token:this.apiKey,nonce:e},n),i=e.toString()+"$"+this.apiKey;t.signature=this.hmac(this.encode(i),this.encode(this.secret)),a=this.json(t),r={"Content-Type":"application/json"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="current",i="GET",s={},a,o){const n=await this.fetch2(e,t,i,s,a,o);if("string"!==typeof n&&"errors"in n)throw new r(this.id+" "+this.json(n));return n}}},ohDc:function(e,t,i){"use strict";var s=i("+un8"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],n=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,i,d,c,h,l,u){var f,p,m,y,b,v,g,w,k,_=u.bits,T=0,O=0,x=0,S=0,C=0,I=0,E=0,M=0,A=0,F=0,B=null,P=0,q=new s.Buf16(16),L=new s.Buf16(16),D=null,V=0;for(T=0;T<=15;T++)q[T]=0;for(O=0;O<d;O++)q[t[i+O]]++;for(C=_,S=15;S>=1&&0===q[S];S--);if(C>S&&(C=S),0===S)return c[h++]=20971520,c[h++]=20971520,u.bits=1,0;for(x=1;x<S&&0===q[x];x++);for(C<x&&(C=x),M=1,T=1;T<=15;T++)if(M<<=1,(M-=q[T])<0)return-1;if(M>0&&(0===e||1!==S))return-1;for(L[1]=0,T=1;T<15;T++)L[T+1]=L[T]+q[T];for(O=0;O<d;O++)0!==t[i+O]&&(l[L[t[i+O]]++]=O);if(0===e?(B=D=l,v=19):1===e?(B=r,P-=257,D=a,V-=257,v=256):(B=o,D=n,v=-1),F=0,O=0,T=x,b=h,I=C,E=0,m=-1,y=(A=1<<C)-1,1===e&&A>852||2===e&&A>592)return 1;for(;;){g=T-E,l[O]<v?(w=0,k=l[O]):l[O]>v?(w=D[V+l[O]],k=B[P+l[O]]):(w=96,k=0),f=1<<T-E,x=p=1<<I;do{c[b+(F>>E)+(p-=f)]=g<<24|w<<16|k|0}while(0!==p);for(f=1<<T-1;F&f;)f>>=1;if(0!==f?(F&=f-1,F+=f):F=0,O++,0===--q[T]){if(T===S)break;T=t[i+l[O]]}if(T>C&&(F&y)!==m){for(0===E&&(E=C),b+=x,M=1<<(I=T-E);I+E<S&&!((M-=q[I+E])<=0);)I++,M<<=1;if(A+=1<<I,1===e&&A>852||2===e&&A>592)return 1;c[m=F&y]=C<<24|I<<16|b-h|0}}return 0!==F&&(c[b+F]=T-E<<24|64<<16|0),u.bits=C,0}},otB0:function(e,t,i){"use strict";const s=i("OjXq"),{InsufficientFunds:r,ExchangeError:a,InvalidNonce:o,InvalidOrder:n,ArgumentsRequired:d}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinfloor",name:"coinfloor",rateLimit:1e3,countries:["UK"],has:{CORS:!1,fetchOpenOrders:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28246081-623fc164-6a1c-11e7-913f-bac0d5576c90.jpg",api:"https://webapi.coinfloor.co.uk/bist",www:"https://www.coinfloor.co.uk",doc:["https://github.com/coinfloor/api","https://www.coinfloor.co.uk/api"]},requiredCredentials:{apiKey:!0,secret:!1,password:!0,uid:!0},api:{public:{get:["{id}/ticker/","{id}/order_book/","{id}/transactions/"]},private:{post:["{id}/balance/","{id}/user_transactions/","{id}/open_orders/","{symbol}/cancel_order/","{id}/buy/","{id}/sell/","{id}/buy_market/","{id}/sell_market/","{id}/estimate_sell_market/","{id}/estimate_buy_market/"]}},markets:{"BTC/GBP":{id:"XBT/GBP",symbol:"BTC/GBP",base:"BTC",quote:"GBP",baseId:"XBT",quoteId:"GBP",precision:{price:0,amount:4}},"BTC/EUR":{id:"XBT/EUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"XBT",quoteId:"EUR",precision:{price:0,amount:4}}},exceptions:{exact:{"You have insufficient funds.":r,"Tonce is out of sequence.":o}}})}async fetchBalance(e={}){await this.loadMarkets();let t=void 0,i=e;void 0!==this.safeString(e,"symbol")&&(t=this.market(e.symbol),i=this.omit(e,"symbol"));const s=this.safeString(e,"id");if(s in this.markets_by_id&&(t=this.markets_by_id[s]),void 0===t)throw new d(this.id+" fetchBalance requires a symbol param");const r={id:t.id},a=await this.privatePostIdBalance(this.extend(r,i)),o={info:a},n=t.base,c=t.quote,h=this.safeStringLower(t,"baseId"),l=this.safeStringLower(t,"quoteId");return o[n]={free:this.safeFloat(a,h+"_available"),used:this.safeFloat(a,h+"_reserved"),total:this.safeFloat(a,h+"_balance")},o[c]={free:this.safeFloat(a,l+"_available"),used:this.safeFloat(a,l+"_reserved"),total:this.safeFloat(a,l+"_balance")},this.parseBalance(o)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={id:this.marketId(e)},r=await this.publicGetIdOrderBook(this.extend(s,i));return this.parseOrderBook(r)}parseTicker(e,t){const i=this.milliseconds();let s=void 0;void 0!==t&&(s=t.symbol);const r=this.safeFloat(e,"vwap"),a=this.safeFloat(e,"volume");let o=void 0;void 0!==r&&(o=a*r);const n=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:r,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:a,quoteVolume:o,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={id:i.id},r=await this.publicGetIdTicker(this.extend(s,t));return this.parseTicker(r,i)}parseTrade(e,t){const i=this.safeTimestamp(e,"date"),s=this.safeString(e,"tid"),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount");let o=void 0;void 0!==r&&void 0!==a&&(o=r*a);let n=void 0;return void 0!==t&&(n=t.symbol),{info:e,id:s,order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:n,type:void 0,side:void 0,takerOrMaker:void 0,price:r,amount:a,cost:o,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={id:r.id},o=await this.publicGetIdTransactions(this.extend(a,s));return this.parseTrades(o,r,t,i)}async fetchLedger(e,t,i,s={}){await this.loadMarkets();let r=void 0;if(void 0!==e&&(r=this.market(e),void 0===r))throw new d(this.id+" fetchTransactions requires a code argument (a market symbol)");const a={id:r.id,limit:i},o=await this.privatePostIdUserTransactions(this.extend(a,s));return this.parseLedger(o,void 0,t,void 0)}parseLedgerEntryStatus(e){return this.safeString({completed:"ok"},e,e)}parseLedgerEntryType(e){return this.safeString({0:"transaction",1:"transaction",2:"trade"},e,e)}parseLedgerEntry(e,t){const i=Object.keys(e);let s=void 0,r=void 0,a=void 0,o=void 0;for(let m=0;m<i.length;m++){const t=i[m];if(t.indexOf("_")>0){const i=t.split("_");if(2===i.length){const t=this.safeFloat(e,i[0]),n=this.safeFloat(e,i[1]);void 0!==t&&void 0!==n&&(s=i[0],r=i[1],a=t,o=n)}}}const n=this.safeCurrencyCode(s),d=this.safeCurrencyCode(r),c=this.parseLedgerEntryType(this.safeString(e,"type")),h=this.safeString(e,"id"),l=this.parse8601(this.safeString(e,"datetime"));let u=void 0;const f=this.safeFloat(e,"fee"),p={id:void 0,timestamp:l,datetime:this.iso8601(l),amount:void 0,direction:void 0,currency:void 0,type:c,referenceId:h,referenceAccount:void 0,before:void 0,after:void 0,status:"ok",fee:u,info:e};if("trade"===c)return void 0!==f&&(u={cost:f,currency:d}),[this.extend(p,{currency:n,amount:Math.abs(a),direction:a>0?"in":"out"}),this.extend(p,{currency:d,amount:Math.abs(o),direction:o>0?"in":"out",fee:u})];{const e=0===a?o:a,t=0===a?d:n,i=e>0?"in":"out";return void 0!==f&&(u={cost:f,currency:t}),this.extend(p,{currency:t,amount:Math.abs(e),direction:i,fee:u})}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o={id:this.marketId(e)};let n="privatePostId"+this.capitalize(i);return"market"===t?(o.quantity=s,n+="Market"):(o.price=r,o.amount=s),await this[n](this.extend(o,a))}async cancelOrder(e,t,i={}){if(void 0===t)throw new d(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();const s={symbol:this.market(t).id,id:e},r=await this.privatePostSymbolCancelOrder(s);if("false"===r)throw new n(this.id+" cancel was rejected");return r}parseOrder(e,t){const i=this.parse8601(this.safeString(e,"datetime")),s=this.safeFloat(e,"price"),r=this.safeFloat(e,"amount");let a=void 0;void 0!==s&&void 0!==r&&(a=s*r);let o=void 0;const n=this.safeString(e,"status");0===e.type?o="buy":1===e.type&&(o="sell");let d=void 0;return void 0!==t&&(d=t.symbol),{info:e,id:this.safeString(e,"id"),clientOrderId:void 0,datetime:this.iso8601(i),timestamp:i,lastTradeTimestamp:void 0,status:n,symbol:d,type:"limit",side:o,price:s,amount:r,filled:void 0,remaining:void 0,cost:a,fee:void 0}}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new d(this.id+" fetchOpenOrders requires a symbol param");await this.loadMarkets();const r=this.market(e),a={id:r.id},o=await this.privatePostIdOpenOrders(this.extend(a,s));return this.parseOrders(o,r,t,i,{status:"open"})}handleErrors(e,t,i,s,r,o,n,d,c){if(e<400)return;if(void 0===n)return;const h=this.safeString(n,"error_msg"),l=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,h,l),new a(l)}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();const e=this.nonce();a=this.urlencode(this.extend({nonce:e},n));const t=this.uid+"/"+this.apiKey+":"+this.password;r={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+this.decode(this.stringToBase64(this.encode(t)))}}return{url:o,method:i,body:a,headers:r}}}},p0dA:function(e,t,i){"use strict";const s=i("OjXq"),{BadSymbol:r,ExchangeError:a,NotSupported:o}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitstamp1",name:"Bitstamp",countries:["GB"],rateLimit:1e3,version:"v1",has:{CORS:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27786377-8c8ab57e-5fe9-11e7-8ea4-2b05b6bcceec.jpg",api:"https://www.bitstamp.net/api",www:"https://www.bitstamp.net",doc:"https://www.bitstamp.net/api"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["ticker","ticker_hour","order_book","transactions","eur_usd"]},private:{post:["balance","user_transactions","open_orders","order_status","cancel_order","cancel_all_orders","buy","sell","bitcoin_deposit_address","unconfirmed_btc","ripple_withdrawal","ripple_address","withdrawal_requests","bitcoin_withdrawal"]}},markets:{"BTC/USD":{id:"btcusd",symbol:"BTC/USD",base:"BTC",quote:"USD",baseId:"btc",quoteId:"usd",maker:.0025,taker:.0025},"BTC/EUR":{id:"btceur",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"btc",quoteId:"eur",maker:.0025,taker:.0025},"EUR/USD":{id:"eurusd",symbol:"EUR/USD",base:"EUR",quote:"USD",baseId:"eur",quoteId:"usd",maker:.0025,taker:.0025},"XRP/USD":{id:"xrpusd",symbol:"XRP/USD",base:"XRP",quote:"USD",baseId:"xrp",quoteId:"usd",maker:.0025,taker:.0025},"XRP/EUR":{id:"xrpeur",symbol:"XRP/EUR",base:"XRP",quote:"EUR",baseId:"xrp",quoteId:"eur",maker:.0025,taker:.0025},"XRP/BTC":{id:"xrpbtc",symbol:"XRP/BTC",base:"XRP",quote:"BTC",baseId:"xrp",quoteId:"btc",maker:.0025,taker:.0025},"LTC/USD":{id:"ltcusd",symbol:"LTC/USD",base:"LTC",quote:"USD",baseId:"ltc",quoteId:"usd",maker:.0025,taker:.0025},"LTC/EUR":{id:"ltceur",symbol:"LTC/EUR",base:"LTC",quote:"EUR",baseId:"ltc",quoteId:"eur",maker:.0025,taker:.0025},"LTC/BTC":{id:"ltcbtc",symbol:"LTC/BTC",base:"LTC",quote:"BTC",baseId:"ltc",quoteId:"btc",maker:.0025,taker:.0025},"ETH/USD":{id:"ethusd",symbol:"ETH/USD",base:"ETH",quote:"USD",baseId:"eth",quoteId:"usd",maker:.0025,taker:.0025},"ETH/EUR":{id:"etheur",symbol:"ETH/EUR",base:"ETH",quote:"EUR",baseId:"eth",quoteId:"eur",maker:.0025,taker:.0025},"ETH/BTC":{id:"ethbtc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",baseId:"eth",quoteId:"btc",maker:.0025,taker:.0025}}})}async fetchOrderBook(e,t,i={}){if("BTC/USD"!==e)throw new a(this.id+" "+this.version+" fetchOrderBook doesn't support "+e+", use it for BTC/USD only");await this.loadMarkets();const s=await this.publicGetOrderBook(i),r=this.safeTimestamp(s,"timestamp");return this.parseOrderBook(s,r)}async fetchTicker(e,t={}){if("BTC/USD"!==e)throw new a(this.id+" "+this.version+" fetchTicker doesn't support "+e+", use it for BTC/USD only");await this.loadMarkets();const i=await this.publicGetTicker(t),s=this.safeTimestamp(i,"timestamp"),r=this.safeFloat(i,"vwap"),o=this.safeFloat(i,"volume");let n=void 0;void 0!==o&&void 0!==r&&(n=o*r);const d=this.safeFloat(i,"last");return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(i,"high"),low:this.safeFloat(i,"low"),bid:this.safeFloat(i,"bid"),bidVolume:void 0,ask:this.safeFloat(i,"ask"),askVolume:void 0,vwap:r,open:this.safeFloat(i,"open"),close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:o,quoteVolume:n,info:i}}parseTrade(e,t){const i=this.safeTimestamp2(e,"date","datetime"),s=0===e.type?"buy":"sell",r=this.safeString(e,"order_id");"currency_pair"in e&&e.currency_pair in this.markets_by_id&&(t=this.markets_by_id[e.currency_pair]);const a=this.safeString(e,"tid"),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount");let d=void 0;void 0!==o&&void 0!==n&&(d=o*n);let c=void 0;return void 0!==t&&(c=t.symbol),{id:a,info:e,timestamp:i,datetime:this.iso8601(i),symbol:c,order:r,type:void 0,side:s,takerOrMaker:void 0,price:o,amount:n,cost:d,fee:void 0}}async fetchTrades(e,t,i,s={}){if("BTC/USD"!==e)throw new r(this.id+" "+this.version+" fetchTrades doesn't support "+e+", use it for BTC/USD only");await this.loadMarkets();const a=this.market(e),o=await this.publicGetTransactions(this.extend({time:"minute"},s));return this.parseTrades(o,a,t,i)}async fetchBalance(e={}){const t=await this.privatePostBalance(e),i={info:t},s=Object.keys(this.currencies);for(let r=0;r<s.length;r++){const e=s[r],a=this.currency(e).id,o=this.account();o.free=this.safeFloat(t,a+"_available"),o.used=this.safeFloat(t,a+"_reserved"),o.total=this.safeFloat(t,a+"_balance"),i[e]=o}return this.parseBalance(i)}async createOrder(e,t,i,s,r,o={}){if("limit"!==t)throw new a(this.id+" "+this.version+" accepts limit orders only");if("BTC/USD"!==e)throw new a(this.id+" v1 supports BTC/USD orders only");await this.loadMarkets();const n="privatePost"+this.capitalize(i),d={amount:s,price:r},c=await this[n](this.extend(d,o));return{info:c,id:this.safeString(c,"id")}}async cancelOrder(e,t,i={}){return await this.privatePostCancelOrder({id:e})}parseOrderStatus(e){return this.safeString({"In Queue":"open",Open:"open",Finished:"closed",Canceled:"canceled"},e,e)}async fetchOrderStatus(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privatePostOrderStatus(this.extend(s,i));return this.parseOrderStatus(r)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=void 0;void 0!==e&&(r=this.market(e));const a={id:r?r.id:"all"},o=await this.privatePostOpenOrdersId(this.extend(a,s));return this.parseTrades(o,r,t,i)}async fetchOrder(e,t,i={}){throw new o(this.id+" fetchOrder is not implemented yet")}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();const e=this.nonce().toString(),t=e+this.uid+this.apiKey,i=this.encode(this.hmac(this.encode(t),this.encode(this.secret)));n=this.extend({key:this.apiKey,signature:i.toUpperCase(),nonce:e},n),a=this.urlencode(n),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},r,o){const n=await this.fetch2(e,t,i,s,r,o);if("status"in n&&"error"===n.status)throw new a(this.id+" "+this.json(n));return n}}},p23d:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ArgumentsRequired:a,OrderNotFound:o}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitflyer",name:"bitFlyer",countries:["JP"],version:"v1",rateLimit:1e3,has:{CORS:!1,withdraw:!0,fetchMyTrades:!0,fetchOrders:!0,fetchOrder:"emulated",fetchOpenOrders:"emulated",fetchClosedOrders:"emulated"},urls:{logo:"https://user-images.githubusercontent.com/1294454/28051642-56154182-660e-11e7-9b0d-6042d1e6edd8.jpg",api:"https://api.bitflyer.jp",www:"https://bitflyer.jp",doc:"https://lightning.bitflyer.com/docs?lang=en"},api:{public:{get:["getmarkets/usa","getmarkets/eu","getmarkets","getboard","getticker","getexecutions","gethealth","getboardstate","getchats"]},private:{get:["getpermissions","getbalance","getbalancehistory","getcollateral","getcollateralhistory","getcollateralaccounts","getaddresses","getcoinins","getcoinouts","getbankaccounts","getdeposits","getwithdrawals","getchildorders","getparentorders","getparentorder","getexecutions","getpositions","gettradingcommission"],post:["sendcoin","withdraw","sendchildorder","cancelchildorder","sendparentorder","cancelparentorder","cancelallchildorders"]}},fees:{trading:{maker:.002,taker:.002},"BTC/JPY":{maker:.0015,taker:.0015}}})}async fetchMarkets(e={}){const t=await this.publicGetGetmarkets(e),i=await this.publicGetGetmarketsUsa(e),s=await this.publicGetGetmarketsEu(e);let r=this.arrayConcat(t,i);r=this.arrayConcat(r,s);const a=[];for(let o=0;o<r.length;o++){const e=r[o],t=this.safeString(e,"product_code"),i=t.split("_");let s=void 0,n=void 0,d=void 0,c=void 0;const h=i.length;1===h?(s=t.slice(0,3),n=t.slice(3,6)):2===h?(s=i[0],n=i[1]):(s=i[1],n=i[2]),d=this.safeCurrencyCode(s),c=this.safeCurrencyCode(n);const l=2===h?d+"/"+c:t,u=this.safeValue(this.fees,l,this.fees.trading);let f=this.safeValue(u,"maker",this.fees.trading.maker),p=this.safeValue(u,"taker",this.fees.trading.taker),m=!0,y=!1,b="spot";("alias"in e||"FX"===i[0])&&(b="future",y=!0,m=!1,f=0,p=0),a.push({id:t,symbol:l,base:d,quote:c,baseId:s,quoteId:n,maker:f,taker:p,type:b,spot:m,future:y,info:e})}return a}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetGetbalance(e),i={info:t};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"currency_code"),a=this.safeCurrencyCode(r),o=this.account();o.total=this.safeFloat(e,"amount"),o.free=this.safeFloat(e,"available"),i[a]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={product_code:this.marketId(e)},r=await this.publicGetGetboard(this.extend(s,i));return this.parseOrderBook(r,void 0,"bids","asks","price","size")}async fetchTicker(e,t={}){await this.loadMarkets();const i={product_code:this.marketId(e)},s=await this.publicGetGetticker(this.extend(i,t)),r=this.parse8601(this.safeString(s,"timestamp")),a=this.safeFloat(s,"ltp");return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:void 0,low:void 0,bid:this.safeFloat(s,"best_bid"),bidVolume:void 0,ask:this.safeFloat(s,"best_ask"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(s,"volume_by_product"),quoteVolume:void 0,info:s}}parseTrade(e,t){let i=this.safeStringLower(e,"side");void 0!==i&&i.length<1&&(i=void 0);let s=void 0;if(void 0!==i){const t=i+"_child_order_acceptance_id";t in e&&(s=e[t])}void 0===s&&(s=this.safeString(e,"child_order_acceptance_id"));const r=this.parse8601(this.safeString(e,"exec_date")),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"size");let n=void 0;void 0!==o&&void 0!==a&&(n=a*o);const d=this.safeString(e,"id");let c=void 0;return void 0!==t&&(c=t.symbol),{id:d,info:e,timestamp:r,datetime:this.iso8601(r),symbol:c,order:s,type:void 0,side:i,takerOrMaker:void 0,price:a,amount:o,cost:n,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={product_code:r.id},o=await this.publicGetGetexecutions(this.extend(a,s));return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o={product_code:this.marketId(e),child_order_type:t.toUpperCase(),side:i.toUpperCase(),price:r,size:s},n=await this.privatePostSendchildorder(this.extend(o,a));return{info:n,id:this.safeString(n,"child_order_acceptance_id")}}async cancelOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" cancelOrder() requires a `symbol` argument");await this.loadMarkets();const s={product_code:this.marketId(t),child_order_acceptance_id:e};return await this.privatePostCancelchildorder(this.extend(s,i))}parseOrderStatus(e){return this.safeString({ACTIVE:"open",COMPLETED:"closed",CANCELED:"canceled",EXPIRED:"canceled",REJECTED:"canceled"},e,e)}parseOrder(e,t){const i=this.parse8601(this.safeString(e,"child_order_date")),s=this.safeFloat(e,"size"),r=this.safeFloat(e,"outstanding_size"),a=this.safeFloat(e,"executed_size"),o=this.safeFloat(e,"price"),n=o*a,d=this.parseOrderStatus(this.safeString(e,"child_order_state")),c=this.safeStringLower(e,"child_order_type"),h=this.safeStringLower(e,"side");let l=void 0;if(void 0===t){const i=this.safeString(e,"product_code");i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(l=t.symbol);let u=void 0;const f=this.safeFloat(e,"total_commission");return void 0!==f&&(u={cost:f,currency:void 0,rate:void 0}),{id:this.safeString(e,"child_order_acceptance_id"),clientOrderId:void 0,info:e,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:d,symbol:l,type:c,side:h,price:o,cost:n,amount:s,filled:a,remaining:r,fee:u}}async fetchOrders(e,t,i=100,s={}){if(void 0===e)throw new a(this.id+" fetchOrders() requires a `symbol` argument");await this.loadMarkets();const r=this.market(e),o={product_code:r.id,count:i},n=await this.privateGetGetchildorders(this.extend(o,s));let d=this.parseOrders(n,r,t,i);return void 0!==e&&(d=this.filterBy(d,"symbol",e)),d}async fetchOpenOrders(e,t,i=100,s={}){return await this.fetchOrders(e,t,i,this.extend({child_order_state:"ACTIVE"},s))}async fetchClosedOrders(e,t,i=100,s={}){return await this.fetchOrders(e,t,i,this.extend({child_order_state:"COMPLETED"},s))}async fetchOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" fetchOrder() requires a `symbol` argument");const s=await this.fetchOrders(t),r=this.indexBy(s,"id");if(e in r)return r[e];throw new o(this.id+" No order found with id "+e)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades requires a `symbol` argument");await this.loadMarkets();const r=this.market(e),o={product_code:r.id};void 0!==i&&(o.count=i);const n=await this.privateGetGetexecutions(this.extend(o,s));return this.parseTrades(n,r,t,i)}async withdraw(e,t,i,s,a={}){if(this.checkAddress(i),await this.loadMarkets(),"JPY"!==e&&"USD"!==e&&"EUR"!==e)throw new r(this.id+" allows withdrawing JPY, USD, EUR only, "+e+" is not supported");const o={currency_code:this.currency(e).id,amount:t},n=await this.privatePostWithdraw(this.extend(o,a));return{info:n,id:this.safeString(n,"message_id")}}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.version+"/";"private"===t&&(o+="me/"),o+=e,"GET"===i&&Object.keys(s).length&&(o+="?"+this.urlencode(s));const n=this.urls.api+o;if("private"===t){this.checkRequiredCredentials();const e=this.nonce().toString();let t=[e,i,o].join("");Object.keys(s).length&&"GET"!==i&&(t+=a=this.json(s)),r={"ACCESS-KEY":this.apiKey,"ACCESS-TIMESTAMP":e,"ACCESS-SIGN":this.hmac(this.encode(t),this.encode(this.secret)),"Content-Type":"application/json"}}return{url:n,method:i,body:a,headers:r}}}},p5Bl:function(e,t,i){"use strict";const s=i("oAua");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"okcoin",name:"OKCoin",countries:["CN","US"],hostname:"okcoin.com",pro:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766791-89ffb502-5ee5-11e7-8a5b-c5950b68ac65.jpg",www:"https://www.okcoin.com",doc:"https://www.okcoin.com/docs/en/",fees:"https://www.okcoin.com/coin-fees",referral:"https://www.okcoin.com/account/register?flag=activity&channelId=600001513"},fees:{trading:{taker:.002,maker:.001}},options:{fetchMarkets:["spot"]}})}}},p8kp:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"lakebtc",name:"LakeBTC",countries:["US"],version:"api_v2",has:{CORS:!0,createMarketOrder:!1,fetchTickers:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28074120-72b7c38a-6660-11e7-92d9-d9027502281d.jpg",api:"https://api.lakebtc.com",www:"https://www.lakebtc.com",doc:["https://www.lakebtc.com/s/api_v2","https://www.lakebtc.com/s/api"]},api:{public:{get:["bcorderbook","bctrades","ticker"]},private:{post:["buyOrder","cancelOrders","getAccountInfo","getExternalAccounts","getOrders","getTrades","openOrders","sellOrder"]}},fees:{trading:{maker:.0015,taker:.002}}})}async fetchMarkets(e={}){const t=await this.publicGetTicker(e),i=[],s=Object.keys(t);for(let r=0;r<s.length;r++){const e=s[r],a=t[e],o=e.slice(0,3),n=e.slice(3,6),d=o.toUpperCase(),c=n.toUpperCase(),h=d+"/"+c;i.push({id:e,symbol:h,base:d,quote:c,baseId:o,quoteId:n,info:a})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGetAccountInfo(e),i=this.safeValue(t,"balance",{}),s={info:t},r=Object.keys(i);for(let a=0;a<r.length;a++){const e=r[a],t=this.safeCurrencyCode(e),o=this.account();o.total=this.safeFloat(i,e),s[t]=o}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)},r=await this.publicGetBcorderbook(this.extend(s,i));return this.parseOrderBook(r)}parseTicker(e,t){const i=this.milliseconds();let s=void 0;void 0!==t&&(s=t.symbol);const r=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t),s=Object.keys(i),r={};for(let a=0;a<s.length;a++){let e=s[a];const t=i[e];let o=void 0;e in this.markets_by_id&&(o=this.markets_by_id[e],e=o.symbol),r[e]=this.parseTicker(t,o)}return r}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s=await this.publicGetTicker(t);return this.parseTicker(s[i.id],i)}parseTrade(e,t){const i=this.safeTimestamp(e,"date"),s=this.safeString(e,"tid"),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount");let o=void 0;void 0!==r&&void 0!==a&&(o=r*a);let n=void 0;return void 0!==t&&(n=t.symbol),{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:n,order:void 0,type:void 0,side:void 0,takerOrMaker:void 0,price:r,amount:a,cost:o,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id},o=await this.publicGetBctrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,a,o={}){if(await this.loadMarkets(),"market"===t)throw new r(this.id+" allows limit orders only");const n="privatePost"+this.capitalize(i)+"Order",d={params:[a,s,this.market(e).id]},c=await this[n](this.extend(d,o));return{info:c,id:this.safeString(c,"id")}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={params:[e]};return await this.privatePostCancelOrder(this.extend(s,i))}nonce(){return this.microseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version;if("public"===t)o+="/"+e,Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();const t=this.nonce();let o="";if("params"in s){o=s.params.join(",")}const n=this.urlencode({tonce:t,accesskey:this.apiKey,requestmethod:i.toLowerCase(),id:t,method:e,params:o});a=this.json({method:e,params:o,id:t});const d=this.hmac(this.encode(n),this.encode(this.secret),"sha1"),c=this.encode(this.apiKey+":"+d);r={"Json-Rpc-Tonce":t.toString(),Authorization:"Basic "+this.decode(this.stringToBase64(c)),"Content-Type":"application/json"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){const n=await this.fetch2(e,t,i,s,a,o);if("error"in n)throw new r(this.id+" "+this.json(n));return n}}},qB9Q:function(e,t,i){"use strict";var s=i("LE+o"),r=i("3NQs"),a=i("tk5I"),o=r.inherits,n=s.base,d=r.utils.assert;function c(e){this.twisted=1!==(0|e.a),this.mOneA=this.twisted&&-1===(0|e.a),this.extended=this.mOneA,n.call(this,"edwards",e),this.a=new a(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new a(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new a(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),d(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1===(0|e.c)}function h(e,t,i,s,r){n.BasePoint.call(this,e,"projective"),null===t&&null===i&&null===s?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new a(t,16),this.y=new a(i,16),this.z=s?new a(s,16):this.curve.one,this.t=r&&new a(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(c,n),e.exports=c,c.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},c.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},c.prototype.jpoint=function(e,t,i,s){return this.point(e,t,i,s)},c.prototype.pointFromX=function(e,t){(e=new a(e,16)).red||(e=e.toRed(this.red));var i=e.redSqr(),s=this.c2.redSub(this.a.redMul(i)),r=this.one.redSub(this.c2.redMul(this.d).redMul(i)),o=s.redMul(r.redInvm()),n=o.redSqrt();if(0!==n.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");var d=n.fromRed().isOdd();return(t&&!d||!t&&d)&&(n=n.redNeg()),this.point(e,n)},c.prototype.pointFromY=function(e,t){(e=new a(e,16)).red||(e=e.toRed(this.red));var i=e.redSqr(),s=i.redSub(this.one),r=i.redMul(this.d).redAdd(this.one),o=s.redMul(r.redInvm());if(0===o.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var n=o.redSqrt();if(0!==n.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");return n.isOdd()!==t&&(n=n.redNeg()),this.point(n,e)},c.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),i=e.y.redSqr(),s=t.redMul(this.a).redAdd(i),r=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(i)));return 0===s.cmp(r)},o(h,n.BasePoint),c.prototype.pointFromJSON=function(e){return h.fromJSON(this,e)},c.prototype.point=function(e,t,i,s){return new h(this,e,t,i,s)},h.fromJSON=function(e,t){return new h(e,t[0],t[1],t[2])},h.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},h.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)},h.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var s=this.curve._mulA(e),r=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),a=s.redAdd(t),o=a.redSub(i),n=s.redSub(t),d=r.redMul(o),c=a.redMul(n),h=r.redMul(n),l=o.redMul(a);return this.curve.point(d,c,l,h)},h.prototype._projDbl=function(){var e,t,i,s=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),a=this.y.redSqr();if(this.curve.twisted){var o=(c=this.curve._mulA(r)).redAdd(a);if(this.zOne)e=s.redSub(r).redSub(a).redMul(o.redSub(this.curve.two)),t=o.redMul(c.redSub(a)),i=o.redSqr().redSub(o).redSub(o);else{var n=this.z.redSqr(),d=o.redSub(n).redISub(n);e=s.redSub(r).redISub(a).redMul(d),t=o.redMul(c.redSub(a)),i=o.redMul(d)}}else{var c=r.redAdd(a);n=this.curve._mulC(this.c.redMul(this.z)).redSqr(),d=c.redSub(n).redSub(n);e=this.curve._mulC(s.redISub(c)).redMul(d),t=this.curve._mulC(c).redMul(r.redISub(a)),i=c.redMul(d)}return this.curve.point(e,t,i)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},h.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),i=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),s=this.t.redMul(this.curve.dd).redMul(e.t),r=this.z.redMul(e.z.redAdd(e.z)),a=i.redSub(t),o=r.redSub(s),n=r.redAdd(s),d=i.redAdd(t),c=a.redMul(o),h=n.redMul(d),l=a.redMul(d),u=o.redMul(n);return this.curve.point(c,h,u,l)},h.prototype._projAdd=function(e){var t,i,s=this.z.redMul(e.z),r=s.redSqr(),a=this.x.redMul(e.x),o=this.y.redMul(e.y),n=this.curve.d.redMul(a).redMul(o),d=r.redSub(n),c=r.redAdd(n),h=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(a).redISub(o),l=s.redMul(d).redMul(h);return this.curve.twisted?(t=s.redMul(c).redMul(o.redSub(this.curve._mulA(a))),i=d.redMul(c)):(t=s.redMul(c).redMul(o.redSub(a)),i=this.curve._mulC(d).redMul(c)),this.curve.point(l,t,i)},h.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},h.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},h.prototype.mulAdd=function(e,t,i){return this.curve._wnafMulAdd(1,[this,t],[e,i],2,!1)},h.prototype.jmulAdd=function(e,t,i){return this.curve._wnafMulAdd(1,[this,t],[e,i],2,!0)},h.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},h.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},h.prototype.getX=function(){return this.normalize(),this.x.fromRed()},h.prototype.getY=function(){return this.normalize(),this.y.fromRed()},h.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},h.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var i=e.clone(),s=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(s),0===this.x.cmp(t))return!0}return!1},h.prototype.toP=h.prototype.normalize,h.prototype.mixedAdd=h.prototype.add},qBa0:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ArgumentsRequired:a,InvalidOrder:o,OrderNotFound:n,RateLimitExceeded:d}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinmate",name:"CoinMate",countries:["GB","CZ","EU"],rateLimit:1e3,has:{CORS:!0,fetchBalance:!0,fetchOrders:!0,fetchOrder:!0,fetchMyTrades:!0,fetchTransactions:!0,fetchOpenOrders:!0,createOrder:!0,cancelOrder:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27811229-c1efb510-606c-11e7-9a36-84ba2ce412d8.jpg",api:"https://coinmate.io/api",www:"https://coinmate.io",fees:"https://coinmate.io/fees",doc:["https://coinmate.docs.apiary.io","https://coinmate.io/developers"],referral:"https://coinmate.io?referral=YTFkM1RsOWFObVpmY1ZjMGREQmpTRnBsWjJJNVp3PT0"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["orderBook","ticker","transactions","tradingPairs"]},private:{post:["balances","bitcoinCashWithdrawal","bitcoinCashDepositAddresses","bitcoinDepositAddresses","bitcoinWithdrawal","bitcoinWithdrawalFees","buyInstant","buyLimit","cancelOrder","cancelOrderWithInfo","createVoucher","dashDepositAddresses","dashWithdrawal","ethereumWithdrawal","ethereumDepositAddresses","litecoinWithdrawal","litecoinDepositAddresses","openOrders","order","orderHistory","orderById","pusherAuth","redeemVoucher","replaceByBuyLimit","replaceByBuyInstant","replaceBySellLimit","replaceBySellInstant","rippleDepositAddresses","rippleWithdrawal","sellInstant","sellLimit","transactionHistory","traderFees","tradeHistory","transfer","transferHistory","unconfirmedBitcoinDeposits","unconfirmedBitcoinCashDeposits","unconfirmedDashDeposits","unconfirmedEthereumDeposits","unconfirmedLitecoinDeposits","unconfirmedRippleDeposits"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:.0012,taker:.0025,tiers:{taker:[[0,.0025],[1e4,.0023],[1e5,.0021],[25e4,.002],[5e5,.0015],[1e6,.0013],[3e6,.001],[15e6,5e-4]],maker:[[0,.0012],[1e4,.0011],[1e6,.001],[25e4,8e-4],[5e5,5e-4],[1e6,3e-4],[3e6,2e-4],[15e6,0]]}},promotional:{trading:{maker:5e-4,taker:.0015,tiers:{taker:[[0,.0015],[1e4,.14/100],[1e5,.0013],[25e4,.0012],[5e5,.0011],[1e6,.001],[3e6,8e-4],[15e6,5e-4]],maker:[[0,5e-4],[1e4,4e-4],[1e6,3e-4],[25e4,2e-4],[5e5,0],[1e6,0],[3e6,0],[15e6,0]]}}}},options:{promotionalMarkets:["ETH/EUR","ETH/CZK","ETH/BTC","XRP/EUR","XRP/CZK","XRP/BTC","DASH/EUR","DASH/CZK","DASH/BTC","BCH/EUR","BCH/CZK","BCH/BTC"]},exceptions:{exact:{"No order with given ID":n},broad:{"Incorrect order ID":o,"Minimum Order Size ":o,"TOO MANY REQUESTS":d}}})}async fetchMarkets(e={}){const t=await this.publicGetTradingPairs(e),i=this.safeValue(t,"data"),s=[];for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"name"),a=this.safeString(e,"firstCurrency"),o=this.safeString(e,"secondCurrency"),n=this.safeCurrencyCode(a),d=this.safeCurrencyCode(o),c=n+"/"+d,h=this.safeValue(this.options,"promotionalMarkets",[]);let l=this.safeValue(this.fees,"trading");if(this.inArray(c,h)){const e=this.safeValue(this.fees,"promotional",{});l=this.safeValue(e,"trading",l)}s.push({id:t,symbol:c,base:n,quote:d,baseId:a,quoteId:o,active:void 0,maker:l.maker,taker:l.taker,info:e,precision:{price:this.safeInteger(e,"priceDecimals"),amount:this.safeInteger(e,"lotDecimals")},limits:{amount:{min:this.safeFloat(e,"minAmount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}})}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostBalances(e),i=this.safeValue(t,"data"),s={info:t},r=Object.keys(i);for(let a=0;a<r.length;a++){const e=r[a],t=this.safeCurrencyCode(e),o=this.safeValue(i,e),n=this.account();n.free=this.safeFloat(o,"available"),n.used=this.safeFloat(o,"reserved"),n.total=this.safeFloat(o,"balance"),s[t]=n}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={currencyPair:this.marketId(e),groupByPriceLimit:"False"},r=(await this.publicGetOrderBook(this.extend(s,i))).data,a=this.safeTimestamp(r,"timestamp");return this.parseOrderBook(r,a,"bids","asks","price","amount")}async fetchTicker(e,t={}){await this.loadMarkets();const i={currencyPair:this.marketId(e)},s=await this.publicGetTicker(this.extend(i,t)),r=this.safeValue(s,"data"),a=this.safeTimestamp(r,"timestamp"),o=this.safeFloat(r,"last");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(r,"high"),low:this.safeFloat(r,"low"),bid:this.safeFloat(r,"bid"),bidVolume:void 0,ask:this.safeFloat(r,"ask"),vwap:void 0,askVolume:void 0,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(r,"amount"),quoteVolume:void 0,info:r}}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const r={limit:1e3};void 0!==i&&(r.limit=i),void 0!==t&&(r.timestampFrom=t),void 0!==e&&(r.currency=this.currencyId(e));const a=(await this.privatePostTransferHistory(this.extend(r,s))).data;return this.parseTransactions(a,void 0,t,i)}parseTransactionStatus(e){return this.safeString({COMPLETED:"ok"},e,e)}parseTransaction(e,t){const i=this.safeInteger(e,"timestamp"),s=this.safeFloat(e,"amount"),r=this.safeFloat(e,"fee"),a=this.safeString(e,"txid"),o=this.safeString(e,"destination"),n=this.safeString(e,"destinationTag"),d=this.safeString(e,"amountCurrency"),c=this.safeCurrencyCode(d,t),h=this.safeStringLower(e,"transferType"),l=this.parseTransactionStatus(this.safeString(e,"transferStatus"));return{id:this.safeString(e,"transactionId"),timestamp:i,datetime:this.iso8601(i),currency:c,amount:s,type:h,txid:a,address:o,tag:n,status:l,fee:{cost:r,currency:t},info:e}}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets(),void 0===i&&(i=1e3);const r={limit:i};if(void 0!==e){const t=this.market(e);r.currencyPair=t.id}void 0!==t&&(r.timestampFrom=t);const a=(await this.privatePostTradeHistory(this.extend(r,s))).data;return this.parseTrades(a,void 0,t,i)}parseTrade(e,t){let i=void 0;const s=this.safeString(e,"currencyPair");let r=void 0;if(void 0!==s)if(s in this.markets_by_id[s])r=(t=this.markets_by_id[s]).quote;else{const[e,t]=s.split("_"),a=this.safeCurrencyCode(e);r=this.safeCurrencyCode(t),i=a+"/"+r}void 0===i&&void 0!==t&&(i=t.symbol);const a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount");let n=void 0;void 0!==o&&void 0!==a&&(n=a*o);const d=this.safeStringLower2(e,"type","tradeType"),c=this.safeStringLower(e,"orderType"),h=this.safeString(e,"orderId"),l=this.safeString(e,"transactionId"),u=this.safeInteger2(e,"timestamp","createdTimestamp");let f=void 0;const p=this.safeFloat(e,"fee");void 0!==p&&(f={cost:p,currency:r});let m=this.safeString(e,"feeType");return m="MAKER"===m?"maker":"taker",{id:l,info:e,timestamp:u,datetime:this.iso8601(u),symbol:i,type:c,side:d,order:h,takerOrMaker:m,price:a,amount:o,cost:n,fee:f}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={currencyPair:r.id,minutesIntoHistory:10},o=await this.publicGetTransactions(this.extend(a,s)),n=this.safeValue(o,"data",[]);return this.parseTrades(n,r,t,i)}async fetchOpenOrders(e,t,i,s={}){const r=await this.privatePostOpenOrders(this.extend({},s));return this.parseOrders(r.data,void 0,t,i,{status:"open"})}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchOrders requires a symbol argument");await this.loadMarkets();const r=this.market(e),o={currencyPair:r.id};void 0!==i&&(o.limit=i);const n=await this.privatePostOrderHistory(this.extend(o,s));return this.parseOrders(n.data,r,t,i)}parseOrderStatus(e){return this.safeString({FILLED:"closed",CANCELLED:"canceled",OPEN:"open"},e,e)}parseOrderType(e){return this.safeString({LIMIT:"limit",MARKET:"market"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeInteger(e,"timestamp"),r=this.safeStringLower(e,"type"),a=this.safeFloat(e,"price"),o=this.safeFloat2(e,"originalAmount","amount"),n=this.safeFloat(e,"remainingAmount",o),d=this.parseOrderStatus(this.safeString(e,"status")),c=this.parseOrderType(this.safeString(e,"orderTradeType"));let h=void 0,l=void 0;void 0!==o&&void 0!==n&&(h=o-n,void 0!==a&&(l=h*a));const u=this.safeFloat(e,"avgPrice");let f=void 0;const p=this.safeString(e,"currencyPair");if(void 0!==p)if(p in this.markets_by_id)t=this.markets_by_id[p];else{const[e,t]=p.split("_");f=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}return void 0===f&&void 0!==t&&(f=t.symbol),{id:i,clientOrderId:this.safeString(e,"clientOrderId"),timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:f,type:c,side:r,price:a,amount:o,cost:l,average:u,filled:h,remaining:n,status:d,trades:void 0,info:e}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o="privatePost"+this.capitalize(i);const n={currencyPair:this.marketId(e)};"market"===t?("buy"===i?n.total=this.amountToPrecision(e,s):n.amount=this.amountToPrecision(e,s),o+="Instant"):(n.amount=this.amountToPrecision(e,s),n.price=this.priceToPrecision(e,r),o+=this.capitalize(t));const d=await this[o](this.extend(n,a));return{info:d,id:this.safeString(d,"data")}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e};let r=void 0;t&&(r=this.market(t));const a=await this.privatePostOrderById(this.extend(s,i)),o=this.safeValue(a,"data");return this.parseOrder(o,r)}async cancelOrder(e,t,i={}){const s={orderId:e};return{info:await this.privatePostCancelOrderWithInfo(this.extend(s,i))}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+e;if("public"===t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();const e=this.nonce().toString(),t=e+this.uid+this.apiKey,i=this.hmac(this.encode(t),this.encode(this.secret));a=this.urlencode(this.extend({clientId:this.uid,nonce:e,publicKey:this.apiKey,signature:i.toUpperCase()},s)),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,c){if(void 0!==n&&"error"in n&&n.error){const e=this.safeString(n,"errorMessage"),t=this.id+" "+e;throw this.throwExactlyMatchedException(this.exceptions.exact,e,t),this.throwBroadlyMatchedException(this.exceptions.broad,e,t),new r(this.id+" "+this.json(n))}if(e>400){if(o){const e=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,o,e),this.throwBroadlyMatchedException(this.exceptions.broad,o,e),new r(e)}throw new r(this.id+" "+o)}}}},r14B:function(e,t,i){(function(t){var s=i("vrtS"),r=i("JxtV")._,a=i("gkJv"),o=i("VBY1");e.exports=function(){var e={browser:["md5","ripemd160","sha1","sha256","sha512"]},i="pkcs1",n="pkcs1",d={private:"pkcs1-private-pem","private-der":"pkcs1-private-der",public:"pkcs8-public-pem","public-der":"pkcs8-public-der"};function c(e,a,o){if(!(this instanceof c))return new c(e,a,o);r.isObject(a)&&(o=a,a=void 0),this.$options={signingScheme:n,signingSchemeOptions:{hash:"sha256",saltLength:null},encryptionScheme:i,encryptionSchemeOptions:{hash:"sha1",label:null},environment:"browser",rsaUtils:this},this.keyPair=new s.Key,this.$cache={},t.isBuffer(e)||r.isString(e)?this.importKey(e,a):r.isObject(e)&&this.generateKeyPair(e.b,e.e),this.setOptions(o)}return c.prototype.setOptions=function(t){if((t=t||{}).environment&&(this.$options.environment=t.environment),t.signingScheme){if(r.isString(t.signingScheme)){var s=t.signingScheme.toLowerCase().split("-");1==s.length?e.node.indexOf(s[0])>-1?(this.$options.signingSchemeOptions={hash:s[0]},this.$options.signingScheme=n):(this.$options.signingScheme=s[0],this.$options.signingSchemeOptions={hash:null}):(this.$options.signingSchemeOptions={hash:s[1]},this.$options.signingScheme=s[0])}else r.isObject(t.signingScheme)&&(this.$options.signingScheme=t.signingScheme.scheme||n,this.$options.signingSchemeOptions=r.omit(t.signingScheme,"scheme"));if(!a.isSignature(this.$options.signingScheme))throw Error("Unsupported signing scheme");if(this.$options.signingSchemeOptions.hash&&-1===e[this.$options.environment].indexOf(this.$options.signingSchemeOptions.hash))throw Error("Unsupported hashing algorithm for "+this.$options.environment+" environment")}if(t.encryptionScheme){if(r.isString(t.encryptionScheme)?(this.$options.encryptionScheme=t.encryptionScheme.toLowerCase(),this.$options.encryptionSchemeOptions={}):r.isObject(t.encryptionScheme)&&(this.$options.encryptionScheme=t.encryptionScheme.scheme||i,this.$options.encryptionSchemeOptions=r.omit(t.encryptionScheme,"scheme")),!a.isEncryption(this.$options.encryptionScheme))throw Error("Unsupported encryption scheme");if(this.$options.encryptionSchemeOptions.hash&&-1===e[this.$options.environment].indexOf(this.$options.encryptionSchemeOptions.hash))throw Error("Unsupported hashing algorithm for "+this.$options.environment+" environment")}this.keyPair.setOptions(this.$options)},c.prototype.importKey=function(e,t){if(!e)throw Error("Empty key given");if(t&&(t=d[t]||t),!o.detectAndImport(this.keyPair,e,t)&&void 0===t)throw Error("Key format must be specified");return this.$cache={},this},c.prototype.isPrivate=function(){return this.keyPair.isPrivate()},c.prototype.isPublic=function(e){return this.keyPair.isPublic(e)},c.prototype.isEmpty=function(e){return!(this.keyPair.n||this.keyPair.e||this.keyPair.d)},c.prototype.sign=function(e,t,i){if(!this.isPrivate())throw Error("This is not private key");var s=this.keyPair.sign(this.$getDataForEncrypt(e,i));return t&&"buffer"!=t&&(s=s.toString(t)),s},c.prototype.$getDataForEncrypt=function(e,i){if(r.isString(e)||r.isNumber(e))return t.from(""+e,i||"utf8");if(t.isBuffer(e))return e;if(r.isObject(e))return t.from(JSON.stringify(e));throw Error("Unexpected data type")},c}()}).call(this,i("zkTx").Buffer)},r4FO:function(e,t){"function"===typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}},r6xz:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,BadRequest:a,AuthenticationError:o,InvalidOrder:n,InsufficientFunds:d,OrderNotFound:c}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"adara",name:"Adara",countries:["MT"],version:"v1",rateLimit:1e3,certified:!1,has:{CORS:!1,fetchCurrencies:!0,fetchOrderBooks:!1,createMarketOrder:!1,fetchDepositAddress:!1,fetchClosedOrders:!0,fetchMyTrades:!1,fetchOHLCV:!1,fetchOrder:!0,fetchOpenOrders:!0,fetchTickers:!0,withdraw:!1,fetchDeposits:!1,fetchWithdrawals:!1,fetchTransactions:!1},requiredCredentials:{apiKey:!0,secret:!0,token:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/49189583-0466a780-f380-11e8-9248-57a631aad2d6.jpg",api:"https://api.adara.io",www:"https://adara.io",doc:"https://api.adara.io/v1",fees:"https://adara.io/fees"},api:{public:{get:["currencies","limits","market","marketDepth","marketInfo","orderBook","quote/","quote/{id}","symbols","trade"],post:["confirmContactEmail","restorePassword","user"]},private:{get:["balance","order","order/{id}","currencyBalance","apiKey","user/{id}"],post:["order","recovery","user","apiKey","contact"],patch:["order/{id}","user/{id}","customer"],delete:["apiKey"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.001},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},exceptions:{exact:{"Insufficient funds":d,"Amount is too small":n,"operation has invalid value":n,"closed order can't be changed":n,"Order is not found":c,AUTH:o,"You are not authorized":o,"Bad Request":a,500:r},broad:{}}})}async fetchMarkets(e={}){const t=await this.publicGetSymbols(this.extend({include:"from,to"},e)),i=this.safeValue(t,"included",[]),s=this.groupBy(i,"type"),r=this.safeValue(s,"currency",[]),a=this.indexBy(r,"id"),o=[],n=t.data;for(let d=0;d<n.length;d++){const e=n[d],t=this.safeString(e,"id"),i=this.safeValue(e,"attributes",{}),s=this.safeValue(e,"relationships",{}),r=this.safeValue(s,"from",{}),c=this.safeValue(s,"to",{}),h=this.safeValue(r,"data",{}),l=this.safeValue(c,"data",{}),u=this.safeString(h,"id"),f=this.safeString(l,"id"),p=this.commonCurrencyCode(u),m=this.commonCurrencyCode(f),y=this.safeValue(a,u,{}),b=this.safeValue(y,"attributes",{}),v=p+"/"+m,g={amount:this.safeInteger(b,"accuracy",8),price:this.safeInteger(i,"digits",8)},w=this.safeValue(i,"allowTrade"),k=this.safeFloat(i,"makerFee"),_=this.safeFloat(i,"takerFee");o.push({info:e,id:t,symbol:v,base:p,quote:m,baseId:u,quoteId:f,active:w,maker:k,taker:_,precision:g,limits:{amount:{min:Math.pow(10,-g.amount),max:void 0},price:{min:Math.pow(10,-g.price),max:void 0},cost:{min:void 0,max:void 0}}})}return o}async fetchCurrencies(e={}){const t=(await this.publicGetCurrencies(e)).data,i={};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"id"),a=this.safeValue(e,"attributes",{}),o=this.commonCurrencyCode(r),n=this.safeInteger(a,"accuracy"),d=this.safeFloat(a,"withdrawFee"),c=this.safeValue(a,"active"),h=this.safeValue(a,"allowDeposit"),l=this.safeValue(a,"allowWithdraw");i[o]={id:r,code:o,info:e,name:this.safeString(a,"name"),active:c&&h&&l,fee:d,precision:n,limits:{amount:{min:Math.pow(10,-n),max:Math.pow(10,n)},price:{min:Math.pow(10,-n),max:Math.pow(10,n)},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(a,"withdrawMinAmount"),max:Math.pow(10,n)}}}}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalance(e),i={info:t},s=this.safeValue(t,"data");if(void 0!==s)for(let r=0;r<s.length;r++){const e=s[r],t=this.safeValue(e,"attributes",{}),a=this.safeValue(e,"relationships",{}),o=this.safeValue(a,"currency",{}),n=this.safeValue(o,"data"),d=this.safeString(n,"id"),c=this.commonCurrencyCode(d),h=this.account();h.total=this.safeFloat(t,"totalBalance"),h.used=this.safeFloat(t,"onOrders"),i[c]=h}return this.parseBalance(i)}getSymbolFromMarketId(e,t){if(void 0===e)return;if(void 0!==(t=this.safeValue(this.markets_by_id,e,t)))return t.symbol;const[i,s]=e.split("-");return this.commonCurrencyCode(i)+"/"+this.commonCurrencyCode(s)}parseOrderBook(e,t,i="bids",s="asks",a="price",o="amount"){const n=[],d=[];e.length>0&&(t=this.safeInteger(e[0].attributes,"serializedAt"));for(let c=0;c<e.length;c++){const i=e[c],s=this.safeValue(i,"attributes",{}),h=this.safeInteger(s,"serializedAt");t=Math.max(t,h);const l=this.safeString(i,"id");if(l.indexOf("OBID")>=0)n.push(this.parseBidAsk(i.attributes,a,o));else{if(!(l.indexOf("OSID")>=0))throw new r(this.id+" parseOrderBook encountered an unrecognized bidask format: "+this.json(i));d.push(this.parseBidAsk(i.attributes,a,o))}}return{bids:this.sortBy(n,0,!0),asks:this.sortBy(d,0),timestamp:t,datetime:this.iso8601(t),nonce:void 0}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={};r["filters[symbol]"]=s.id;const a=await this.publicGetOrderBook(this.extend(r,i));return this.parseOrderBook(a.data,void 0,"bids","asks","price","amount")}parseTicker(e,t){const i=this.getSymbolFromMarketId(this.safeString(e,"id"),t),s=this.safeValue(e,"attributes",{}),r=this.safeInteger(s,"serializedAt"),a=this.safeFloat(s,"currentPrice"),o=this.safeFloat(s,"change");let n=void 0;void 0!==o&&void 0!==a&&(n=a-o);const d=this.safeFloat(s,"percentChange");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:n,close:a,last:a,previousClose:void 0,change:o,percentage:d,average:void 0,baseVolume:this.safeFloat(e,"baseVolume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetQuote(t),s=this.safeValue(i,"data",[]),r={};for(let a=0;a<s.length;a++){const e=this.parseTicker(s[a]);r[e.symbol]=e}return r}async fetchTicker(e,t={}){await this.loadMarkets();const i={id:this.market(e).id},s=await this.publicGetQuoteId(this.extend(i,t));return this.parseTicker(s.data)}parseTrade(e,t){const i=this.safeString(e,"id","uuid"),s=this.safeValue(e,"attributes",{}),r=this.safeValue(e,"relationships",{}),a=this.safeValue(r,"symbol",{}),o=this.safeValue(a,"data",{}),n=this.safeString(o,"id");let d=void 0,c=void 0;if(void 0!==(t=this.safeValue(this.markets_by_id,n,t)))d=t.symbol,c=t.quote;else if(void 0!==n){const e=n.length-3,t=n.slice(0,e),i=n.slice(e),s=this.commonCurrencyCode(t),r=this.commonCurrencyCode(i);d=s+"/"+r,c=r}const h=this.parse8601(this.safeString(s,"createdAt")),l=this.safeString(s,"operation"),u=this.safeFloat(s,"price"),f=this.safeFloat(s,"amount");let p=this.safeFloat(s,"total");void 0===p&&void 0!==f&&void 0!==u&&(p=parseFloat(this.costToPrecision(d,u*f)));const m=this.safeFloat(s,"fee");let y=void 0;return void 0!==m&&(y={cost:m,currency:c}),{id:i,info:e,order:void 0,timestamp:h,datetime:this.iso8601(h),symbol:d,type:void 0,side:l,takerOrMaker:void 0,price:u,amount:f,cost:p,fee:y}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=void 0;void 0!==e&&(r=this.market(e));const a=await this.publicGetTrade(this.extend({},s));return this.parseTrades(a.data,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),n={data:{type:"order",attributes:{amount:parseFloat(this.amountToPrecision(e,s)),operation:i,orderType:t,price:parseFloat(this.priceToPrecision(e,r))},relationships:{symbol:{data:{id:o.id,type:"symbol"}}}},included:[{id:o.id,type:"symbol"}]},d=await this.privatePostOrder(this.extend(n,a));return this.parseOrder(d.data)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e,data:{attributes:{status:"canceled"}}},r=await this.privatePatchOrderId(this.extend(s,i));return this.parseOrder(r.data)}parseOrderStatus(e){return this.safeString({open:"open",closed:"closed",canceled:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeValue(e,"attributes",{}),r=this.safeValue(e,"relationships",{}),a=this.safeValue(r,"symbol",{}),o=this.safeValue(a,"data",{}),n=this.safeValue(r,"trades",{}),d=this.safeValue(n,"data"),c=this.safeString(o,"id");let h=void 0,l=void 0;if(void 0!==(t=this.safeValue(this.markets_by_id,c,t)))l=t.symbol,h=t.quote;else if(void 0!==c){const e=c.length-3,t=c.slice(0,e),i=c.slice(e),s=this.commonCurrencyCode(t),r=this.commonCurrencyCode(i);l=s+"/"+r,h=r}const u=this.parse8601(this.safeString(s,"timeOpen")),f=this.safeString(s,"operation"),p=this.safeString(s,"orderType"),m=this.parseOrderStatus(this.safeString(s,"status")),y=this.parse8601(this.safeString(s,"timeClose")),b=this.safeFloat(s,"price"),v=this.safeFloat(s,"amount"),g=this.safeFloat(s,"filled");let w=void 0;void 0!==v&&void 0!==g&&(w=Math.max(0,v-g));let k=void 0;const _=this.safeFloat(s,"averagePrice");void 0===k&&void 0!==_&&void 0!==g&&(k=parseFloat(this.costToPrecision(l,_*g)));let T=void 0;const O=this.safeFloat(s,"fee");void 0!==O&&(T={currency:h,cost:O});let x=void 0;if(void 0!==d){d.length>0&&(x=this.parseTrades(d,t))}return{info:e,id:i,clientOrderId:void 0,timestamp:u,datetime:this.iso8601(u),lastTradeTimestamp:y,symbol:l,type:p,side:f,price:b,cost:k,average:_,amount:v,filled:g,remaining:w,status:m,fee:T,trades:x}}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r={include:"trades"};let a=void 0;if(void 0!==e){a=this.market(e),r["filters[symbol]"]=a.id}const o=await this.privateGetOrder(this.extend(r,s));return this.parseOrdersResponse(o,a,t,i)}async fetchOpenOrders(e,t,i,s={}){const r={"filters[status][]":"open"};return await this.fetchOrders(e,t,i,this.extend(r,s))}async fetchClosedOrders(e,t,i,s={}){const r={"filters[status][]":"closed"};return await this.fetchOrders(e,t,i,this.extend(r,s))}parseOrdersResponse(e,t,i,s){const r=this.safeValue(e,"included",[]),a=this.groupBy(r,"type"),o=this.safeValue(a,"trade",[]),n=this.parseTrades(o,t),d=this.indexBy(n,"id"),c=this.parseOrders(this.safeValue(e,"data",[]),t,i,s),h=[];for(let l=0;l<c.length;l++){const e=c[l],t=[],i=this.safeValue(e,"fee",{}),s=this.safeString(i,"currency");if(void 0!==e.trades)for(let r=0;r<e.trades.length;r++){const i=e.trades[r].id;i in d&&t.push(this.deepExtend(d[i],{order:e.id,type:e.type,symbol:e.symbol,fee:{currency:s}}))}t.length>0&&(e.trades=t),h.push(e)}return h}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e,include:"trades"},r=await this.privateGetOrderId(this.extend(s,i)),a=this.safeValue(r,"data");r.data=[],r.data.push(a);const o=this.parseOrdersResponse(r),n=this.indexBy(o,"id");if(e in n)return n[e];throw new c(this.id+" fetchOrder could not find order id "+e.toString())}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.implodeParams(e,s),n=this.urls.api+"/"+this.version+o;const d=this.omit(s,this.extractParams(e));if("GET"===i&&Object.keys(d).length&&(n+="?"+this.urlencode(d)),"private"===t){const e=this.nonce();let t=this.sum(e,this.safeInteger(this.options,"expiredAt",1e4));if(t=t.toString(),"POST"!==i&&"PATCH"!==i||(o=a=this.json(d)),this.token)r={Cookie:"token="+this.token};else{this.checkRequiredCredentials();const e=i+o+"expiredAt="+t,s=this.hmac(this.encode(e),this.encode(this.secret),"sha512","base64");r={"X-ADX-EXPIRE":t,"X-ADX-APIKEY":this.apiKey,"X-ADX-SIGNATURE":s}}"GET"!==i&&(r["Content-Type"]="application/json")}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,c){if(void 0===n)return;const h=this.safeValue(n,"errors",[]);if(h.length>0){const e=h[0],t=this.safeString(e,"code"),i=this.safeString(e,"status"),s=this.safeString(e,"title"),a=this.safeString(e,"detail"),d=this.id+" "+this.json(n);throw this.throwExactlyMatchedException(this.exceptions.exact,t,d),this.throwExactlyMatchedException(this.exceptions.exact,i,d),this.throwExactlyMatchedException(this.exceptions.exact,s,d),this.throwExactlyMatchedException(this.exceptions.exact,a,d),this.throwBroadlyMatchedException(this.exceptions.broad,o,d),new r(d)}}}},rBLd:function(e,t,i){"use strict";const s=i("OjXq"),{ArgumentsRequired:r}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coss",name:"COSS",countries:["SG","NL"],rateLimit:1e3,version:"v1",certified:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/50328158-22e53c00-0503-11e9-825c-c5cfd79bfa74.jpg",api:{trade:"https://trade.coss.io/c/api/v1",engine:"https://engine.coss.io/api/v1",public:"https://trade.coss.io/c/api/v1",web:"https://trade.coss.io/c",exchange:"https://exchange.coss.io/api"},www:"https://www.coss.io",doc:"https://api.coss.io/v1/spec",referral:"https://www.coss.io/c/reg?r=OWCMHQVW2Q"},has:{fetchTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchMarkets:!0,fetchCurrencies:!0,fetchBalance:!0,fetchOrderBook:!0,fetchOrder:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchClosedOrders:!0,fetchOpenOrders:!0,fetchOHLCV:!0,createOrder:!0,cancelOrder:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","12h":"12h","1d":"1d","1w":"1w"},api:{exchange:{get:["getmarketsummaries"]},public:{get:["market-price","exchange-info"]},web:{get:["coins/getinfo/all","order/symbols","coins/get_base_list"]},engine:{get:["dp","ht","cs"]},trade:{get:["ping","time","account/balances","account/details"],post:["order/add","order/details","order/list/open","order/list/completed","order/list/all","order/trade-detail"],delete:["order/cancel"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.0025,maker:0},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},commonCurrencies:{COS:"COSS",COSS:"COSS.io"}})}async fetchMarkets(e={}){const t=await this.publicGetExchangeInfo(e),i=[],s=this.safeValue(t,"symbols",[]),r=this.safeValue(t,"base_currencies",[]),a=this.indexBy(r,"currency_code"),o=this.safeValue(t,"coins",[]),n=this.indexBy(o,"currency_code");for(let d=0;d<s.length;d++){const e=s[d],t=e.symbol,[r,o]=t.split("_"),c=this.safeCurrencyCode(r),h=this.safeCurrencyCode(o),l=c+"/"+h,u={amount:this.safeInteger(e,"amount_limit_decimal"),price:this.safeInteger(e,"price_limit_decimal")},f=this.safeValue(e,"allow_trading",!1),p=this.safeValue(a,r,{}),m=this.safeFloat(p,"minimum_total_order"),y=this.safeValue(n,r,{}),b=Math.pow(10,-u.amount),v=this.safeFloat(y,"minimum_order_amount",b);i.push({symbol:l,id:t,baseId:r,quoteId:o,base:c,quote:h,active:f,precision:u,limits:{amount:{min:v,max:void 0},price:{min:void 0,max:void 0},cost:{min:m,max:void 0}},info:e})}return i}async fetchCurrencies(e={}){const t=await this.webGetCoinsGetinfoAll(e),i={};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"currency_code"),a=this.safeCurrencyCode(r),o=this.safeString(e,"name"),n=this.safeValue(e,"allow_buy"),d=this.safeValue(e,"allow_sell"),c=this.safeValue(e,"allow_withdrawn"),h=this.safeValue(e,"allow_deposit"),l=n&&d&&c&&h,u=this.safeFloat(e,"withdrawn_fee"),f=this.safeString(e,"token_type"),p=this.safeString(e,"decimal_format");let m=8;if(void 0!==p){const e=p.split(".");e.length>1&&e[1].length>1&&(m=e[1].length)}i[a]={id:r,code:a,info:e,name:o,active:l,fee:u,precision:m,type:f,limits:{amount:{min:this.safeFloat(e,"minimum_order_amount"),max:void 0},withdraw:{min:this.safeFloat(e,"minimum_withdrawn_amount"),max:void 0}}}}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.tradeGetAccountBalances(e),i={};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"currency_code"),a=this.safeCurrencyCode(r),o=this.safeFloat(e,"total"),n=this.safeFloat(e,"in_order"),d=this.safeFloat(e,"available");i[a]={total:o,used:n,free:d}}return this.parseBalance(i)}parseOHLCV(e,t,i="1m",s,r){return[parseInt(e[0]),parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[5])]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={symbol:a.id,tt:this.timeframes[t]},n=await this.engineGetCs(this.extend(o,r));return this.parseOHLCVs(n.series,a,t,i,s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)},r=await this.engineGetDp(this.extend(s,i)),a=this.safeInteger(r,"time");return this.parseOrderBook(r,a)}parseTicker(e,t){const i=this.parse8601(this.safeString(e,"TimeStamp"));let s=void 0,r=this.safeString(e,"MarketName");if(void 0!==r&&(r=r.replace("-","_")),void 0===(t=this.safeValue(this.markets_by_id,r,t))&&void 0!==r){const[e,t]=r.split("_");s=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}void 0!==t&&(s=t.symbol);const a=this.safeFloat(e,"PrevDay"),o=this.safeFloat(e,"Last");let n=void 0,d=void 0;return void 0!==o&&void 0!==a&&(n=o-a,a>0&&(d=n/a*100)),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"High"),low:this.safeFloat(e,"Low"),bid:this.safeFloat(e,"Bid"),bidVolume:void 0,ask:this.safeFloat(e,"Ask"),askVolume:void 0,vwap:void 0,open:a,close:o,last:o,previousClose:void 0,change:n,percentage:d,average:void 0,baseVolume:this.safeFloat(e,"Volume"),quoteVolume:this.safeFloat(e,"BaseVolume"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.exchangeGetGetmarketsummaries(t),s=this.safeValue(i,"result",[]),r={};for(let a=0;a<s.length;a++){const e=this.parseTicker(s[a]);r[e.symbol]=e}return r}async fetchTicker(e,t={}){return(await this.fetchTickers([e],t))[e]}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id},o=await this.engineGetHt(this.extend(a,s));return this.parseTrades(o.history,r,t,i)}parseTradeFee(e){if(void 0===e)return e;const t=e.split(" "),i=t.length,s=t[0];let r=void 0;return i>1&&(r=this.safeCurrencyCode(t[1])),{cost:s,currency:r}}parseTrade(e,t){const i=this.safeString(e,"id"),s=this.safeInteger(e,"time"),r=this.safeString(e,"order_id"),a=this.safeStringLower(e,"order_side");let o=void 0;const n=this.safeString(e,"symbol");if(void 0!==n){if(void 0===(t=this.safeValue(this.markets_by_id,n,t))){const[e,t]=n.split("_");o=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}}else void 0!==t&&(o=t.symbol);let d=void 0;const c=this.safeFloat(e,"price"),h=this.safeFloat2(e,"qty","quantity");void 0!==h&&void 0!==c&&(d=c*h);const l={id:i,info:e,timestamp:s,datetime:this.iso8601(s),symbol:o,order:r,type:void 0,side:a,takerOrMaker:void 0,price:c,amount:h,cost:d,fee:void 0},u=this.parseTradeFee(this.safeString(e,"fee"));if(void 0!==u){const t=this.parseTradeFee(this.safeString(e,"additional_fee"));void 0===t?l.fee=u:l.fees=[u,t]}return l}async fetchOrdersByType(e,t,i,s,a={}){if(void 0===t)throw new r(this.id+" fetchOrders requires a symbol argument");await this.loadMarkets();const o=this.market(t),n={symbol:o.id};void 0!==s&&(n.limit=s);const d="tradePostOrderList"+e,c=await this[d](this.extend(n,a));let h=void 0;return h=Array.isArray(c)?c:this.safeValue(c,"list",[]),this.parseOrders(h,o,i,s)}async fetchOrders(e,t,i,s={}){return await this.fetchOrdersByType("All",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByType("Completed",e,t,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByType("Open",e,t,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},r=await this.tradePostOrderDetails(this.extend(s,i));return this.parseOrder(r)}async fetchOrderTrades(e,t,i,s,r={}){await this.loadMarkets();let a=void 0;void 0!==t&&(a=this.market(t));const o={order_id:e},n=await this.tradePostOrderTradeDetail(this.extend(o,r));return this.parseTrades(n,a,i,s)}parseOrderStatus(e){if(void 0===e)return e;return this.safeString({OPEN:"open",CANCELLED:"canceled",FILLED:"closed",PARTIAL_FILL:"closed",CANCELLING:"open"},e.toUpperCase(),e)}parseOrder(e,t){const i=this.safeString(e,"order_id");let s=void 0,r=this.safeString(e,"order_symbol");if(void 0===r)void 0!==t&&(s=t.symbol);else if(r=r.toUpperCase(),r=r.replace("-","_"),void 0===(t=this.safeValue(this.markets_by_id,r,t))){const[e,t]=r.split("_");s=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}else s=t.symbol;const a=this.safeInteger(e,"createTime"),o=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeFloat(e,"order_price"),d=this.safeFloat(e,"executed"),c=this.safeString(e,"type"),h=this.safeFloat(e,"order_size");let l=void 0;void 0!==h&&void 0!==d&&(l=h-d);const u=this.safeFloat(e,"avg"),f=this.safeStringLower(e,"order_side"),p=this.safeFloat(e,"total");return{info:e,id:i,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:s,type:c,side:f,price:n,amount:h,cost:p,average:u,filled:d,remaining:l,status:o,fee:void 0,trades:void 0}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),n={order_symbol:o.id,order_size:this.amountToPrecision(e,s),order_side:i.toUpperCase(),type:t};void 0!==r&&(n.order_price=this.priceToPrecision(e,r));const d=await this.tradePostOrderAdd(this.extend(n,a));return this.parseOrder(d,o)}async cancelOrder(e,t,i={}){if(void 0===t)throw new r(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();const s={order_id:e,order_symbol:this.market(t).id},a=await this.tradeDeleteOrderCancel(this.extend(s,i));return this.parseOrder(a)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/"+e;if("trade"===t){this.checkRequiredCredentials();const e=this.nonce(),t=this.extend({timestamp:e},s);let n=void 0;"GET"===i?(n=this.urlencode(t),o+="?"+n):(n=this.json(t),a=n),r={Signature:this.hmac(this.encode(n),this.encode(this.secret)),Authorization:this.apiKey,"X-Requested-With":"XMLHttpRequest"}}else Object.keys(s).length&&(o+="?"+this.urlencode(s));return{url:o,method:i,body:a,headers:r}}}},rSxa:function(e,t,i){"use strict";const s=i("uS8B");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"chilebit",name:"ChileBit",countries:["CL"],has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27991414-1298f0d8-647f-11e7-9c40-d56409266336.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://chilebit.net",doc:"https://blinktrade.com/docs"},options:{brokerId:"9"}})}}},rpo2:function(e,t,i){"use strict";const s=i("tXvY");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"topq",countries:["SG"],name:"TOP.Q",hostname:"topliq.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/74596147-50247000-505c-11ea-9224-4fd347cfbb49.jpg",api:"https://www.{hostname}",www:"https://www.topliq.com",doc:"https://github.com/topq-exchange/api_docs_en/wiki/REST_api_reference",fees:"https://www.topliq.com/feesRate"}})}}},ruwT:function(e,t,i){"use strict";const s=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];t.p1600=function(e){for(let t=0;t<24;++t){const i=e[0]^e[10]^e[20]^e[30]^e[40],r=e[1]^e[11]^e[21]^e[31]^e[41],a=e[2]^e[12]^e[22]^e[32]^e[42],o=e[3]^e[13]^e[23]^e[33]^e[43],n=e[4]^e[14]^e[24]^e[34]^e[44],d=e[5]^e[15]^e[25]^e[35]^e[45],c=e[6]^e[16]^e[26]^e[36]^e[46],h=e[7]^e[17]^e[27]^e[37]^e[47],l=e[8]^e[18]^e[28]^e[38]^e[48],u=e[9]^e[19]^e[29]^e[39]^e[49];let f=l^(a<<1|o>>>31),p=u^(o<<1|a>>>31);const m=e[0]^f,y=e[1]^p,b=e[10]^f,v=e[11]^p,g=e[20]^f,w=e[21]^p,k=e[30]^f,_=e[31]^p,T=e[40]^f,O=e[41]^p;f=i^(n<<1|d>>>31),p=r^(d<<1|n>>>31);const x=e[2]^f,S=e[3]^p,C=e[12]^f,I=e[13]^p,E=e[22]^f,M=e[23]^p,A=e[32]^f,F=e[33]^p,B=e[42]^f,P=e[43]^p;f=a^(c<<1|h>>>31),p=o^(h<<1|c>>>31);const q=e[4]^f,L=e[5]^p,D=e[14]^f,V=e[15]^p,R=e[24]^f,G=e[25]^p,N=e[34]^f,H=e[35]^p,U=e[44]^f,j=e[45]^p;f=n^(l<<1|u>>>31),p=d^(u<<1|l>>>31);const K=e[6]^f,z=e[7]^p,X=e[16]^f,W=e[17]^p,Y=e[26]^f,Z=e[27]^p,J=e[36]^f,Q=e[37]^p,$=e[46]^f,ee=e[47]^p;f=c^(i<<1|r>>>31),p=h^(r<<1|i>>>31);const te=e[8]^f,ie=e[9]^p,se=e[18]^f,re=e[19]^p,ae=e[28]^f,oe=e[29]^p,ne=e[38]^f,de=e[39]^p,ce=e[48]^f,he=e[49]^p,le=m,ue=y,fe=v<<4|b>>>28,pe=b<<4|v>>>28,me=g<<3|w>>>29,ye=w<<3|g>>>29,be=_<<9|k>>>23,ve=k<<9|_>>>23,ge=T<<18|O>>>14,we=O<<18|T>>>14,ke=x<<1|S>>>31,_e=S<<1|x>>>31,Te=I<<12|C>>>20,Oe=C<<12|I>>>20,xe=E<<10|M>>>22,Se=M<<10|E>>>22,Ce=F<<13|A>>>19,Ie=A<<13|F>>>19,Ee=B<<2|P>>>30,Me=P<<2|B>>>30,Ae=L<<30|q>>>2,Fe=q<<30|L>>>2,Be=D<<6|V>>>26,Pe=V<<6|D>>>26,qe=G<<11|R>>>21,Le=R<<11|G>>>21,De=N<<15|H>>>17,Ve=H<<15|N>>>17,Re=j<<29|U>>>3,Ge=U<<29|j>>>3,Ne=K<<28|z>>>4,He=z<<28|K>>>4,Ue=W<<23|X>>>9,je=X<<23|W>>>9,Ke=Y<<25|Z>>>7,ze=Z<<25|Y>>>7,Xe=J<<21|Q>>>11,We=Q<<21|J>>>11,Ye=ee<<24|$>>>8,Ze=$<<24|ee>>>8,Je=te<<27|ie>>>5,Qe=ie<<27|te>>>5,$e=se<<20|re>>>12,et=re<<20|se>>>12,tt=oe<<7|ae>>>25,it=ae<<7|oe>>>25,st=ne<<8|de>>>24,rt=de<<8|ne>>>24,at=ce<<14|he>>>18,ot=he<<14|ce>>>18;e[0]=le^~Te&qe,e[1]=ue^~Oe&Le,e[10]=Ne^~$e&me,e[11]=He^~et&ye,e[20]=ke^~Be&Ke,e[21]=_e^~Pe&ze,e[30]=Je^~fe&xe,e[31]=Qe^~pe&Se,e[40]=Ae^~Ue&tt,e[41]=Fe^~je&it,e[2]=Te^~qe&Xe,e[3]=Oe^~Le&We,e[12]=$e^~me&Ce,e[13]=et^~ye&Ie,e[22]=Be^~Ke&st,e[23]=Pe^~ze&rt,e[32]=fe^~xe&De,e[33]=pe^~Se&Ve,e[42]=Ue^~tt&be,e[43]=je^~it&ve,e[4]=qe^~Xe&at,e[5]=Le^~We&ot,e[14]=me^~Ce&Re,e[15]=ye^~Ie&Ge,e[24]=Ke^~st&ge,e[25]=ze^~rt&we,e[34]=xe^~De&Ye,e[35]=Se^~Ve&Ze,e[44]=tt^~be&Ee,e[45]=it^~ve&Me,e[6]=Xe^~at&le,e[7]=We^~ot&ue,e[16]=Ce^~Re&Ne,e[17]=Ie^~Ge&He,e[26]=st^~ge&ke,e[27]=rt^~we&_e,e[36]=De^~Ye&Je,e[37]=Ve^~Ze&Qe,e[46]=be^~Ee&Ae,e[47]=ve^~Me&Fe,e[8]=at^~le&Te,e[9]=ot^~ue&Oe,e[18]=Re^~Ne&$e,e[19]=Ge^~He&et,e[28]=ge^~ke&Be,e[29]=we^~_e&Pe,e[38]=Ye^~Je&fe,e[39]=Ze^~Qe&pe,e[48]=Ee^~Ae&Ue,e[49]=Me^~Fe&je,e[0]^=s[2*t],e[1]^=s[2*t+1]}}},rwG2:function(e,t,i){"use strict";const s={ROUND:0,TRUNCATE:1,ROUND_UP:2,ROUND_DOWN:3,DECIMAL_PLACES:0,SIGNIFICANT_DIGITS:1,TICK_SIZE:2,NO_PADDING:0,PAD_WITH_ZERO:1};function r(e){if("string"===typeof e)return e;if(Math.abs(e)<1){const t=e.toString(),i=parseInt(t.split("e-")[1]),s="-"===t[0];i&&(e*=Math.pow(10,i-1),e=(s?"-":"")+"0."+new Array(i).join("0")+e.toString().substring(s?3:2))}else{let t=parseInt(e.toString().split("+")[1]);t>20&&(t-=20,e/=Math.pow(10,t),e+=new Array(t+1).join("0"))}return e.toString()}const a=[],o=(e,t=0)=>{if(e=r(e),t>0){const i=a[t]||(a[t]=new RegExp("([-]*\\d+\\.\\d{"+t+"})(\\d)")),[,s]=e.toString().match(i)||[null,e];return s.toString()}return parseInt(e).toString()};function n(e){const t=e.replace(/0+$/g,"").split(".");return t.length>1?t[1].length:0}const d=(e,t,i,s=0,a=0)=>{if(i<0){if(2===s)throw new Error("TICK_SIZE cant be used with negative numPrecisionDigits");const r=Math.pow(10,-i);if(0===t)return(r*d(e/r,t,0,s,a)).toString();if(1===t)return(e-e%r).toString()}if(2===s){const s=n(d(i,0,100,0,0)),r=e%i;return 0!==n(d(r/i,0,Math.max(s,8),0,0))&&(0===t?e>0?r>=i/2?e=e-r+i:e-=r:e=r>=i/2?Number(e)-r:Number(e)-r-i:1===t&&(e-=r)),d(e,0,s,0,a)}const o=r(e),c="-"===o[0],h=c?1:0,l=o.length;for(var u=0;u<l&&"."!==o[u];u++);const f=u<o.length,p=new Uint8Array(l-h+(f?0:1));p[0]=48;let m=p.length,y=-1,b=-1;for(var v=1,g=h;g<l;g++,v++){const e=o.charCodeAt(g);if(46===e)m=v--;else{if(e<48||e>57)throw new Error(`${o}: invalid number (contains an illegal character '${o[v-1]}')`);p[v]=e,48!==e&&y<0&&(y=v)}}y<0&&(y=1);let w=0===s?m:y,k=w+i;b=-1;let _=!0,T=c;for(let r=p.length-1,n=0;r>=0;r--){let e=p[r];if(0!==r){if(e+=n,r>=w+i){e=0===t&&e>=53&&!(53===e&&n)?58:48}e>57?(e=48,n=1):n=0}else n&&(e=49);p[r]=e,48!==e&&(_=!1,y=r,b=b<0?r+1:b)}1===s&&(w=y,k=w+i),_&&(T=!1);const O=y>=m||_?m-1:y,x=b<m?m:b,S=T?1:0,C=S+(m-O),I=Math.max(x-m,0),E=x-O,M=0===a?E:k-O,A=Math.max(M-E,0),F=C+1+I,B=F+A,P=I+A===0,q=new Uint8Array(C+(P?0:1)+I+A);for(T&&(q[0]=45),v=S,g=O;v<C;v++,g++)q[v]=p[g];for(P||(q[C]=46),v=C+1,g=m;v<F;v++,g++)q[v]=p[g];for(v=F;v<B;v++)q[v]=48;return String.fromCharCode(...q)};e.exports={toWei:function(e,t=18){if(void 0===e)return e;const i=parseFloat(e).toExponential(),[s,a]=i.split("e"),o=parseInt(a)+t;return r(Math.floor(parseFloat(s+"e"+o)))},fromWei:function(e,t=18){if(void 0===e)return e;const i=Math.floor(e).toExponential(),[s,r]=i.split("e"),a=parseInt(r)-t;return parseFloat(s+"e"+a)},numberToString:r,precisionFromString:n,decimalToPrecision:d,truncate_to_string:o,truncate:(e,t=0)=>parseFloat(o(e,t)),precisionConstants:s,ROUND:0,TRUNCATE:1,ROUND_UP:2,ROUND_DOWN:3,DECIMAL_PLACES:0,SIGNIFICANT_DIGITS:1,TICK_SIZE:2,NO_PADDING:0,PAD_WITH_ZERO:1}},sGFv:function(e,t,i){"use strict";const s=i("F33t"),{ArgumentsRequired:r}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"kuna",name:"Kuna",countries:["UA"],rateLimit:1e3,version:"v2",has:{CORS:!1,fetchTickers:!0,fetchOHLCV:!1,fetchOpenOrders:!0,fetchMyTrades:!0,withdraw:!1},urls:{referral:"https://kuna.io?r=kunaid-gvfihe8az7o4",logo:"https://user-images.githubusercontent.com/1294454/31697638-912824fa-b3c1-11e7-8c36-cf9606eb94ac.jpg",api:"https://kuna.io",www:"https://kuna.io",doc:"https://kuna.io/documents/api",fees:"https://kuna.io/documents/api"},fees:{trading:{taker:.0025,maker:.0025},funding:{withdraw:{UAH:"1%",BTC:.001,BCH:.001,ETH:.01,WAVES:.01,GOL:0,GBG:0},deposit:{}}}})}async fetchMarkets(e={}){const t=["btc","eth","eurs","rub","uah","usd","usdt"],i={UAH:0},s=[],r=await this.publicGetTickers(e),a=Object.keys(r);for(let o=0;o<a.length;o++){const e=a[o];for(let r=0;r<t.length;r++){const a=t[r],o=e.indexOf(a),n=e.slice(o);if(o>0&&n===a){const t=e.replace(a,""),r=this.safeCurrencyCode(t),o=this.safeCurrencyCode(a),n=r+"/"+o,d={amount:6,price:this.safeInteger(i,o,6)};s.push({id:e,symbol:n,base:r,quote:o,baseId:t,quoteId:a,precision:d,limits:{amount:{min:Math.pow(10,-d.amount),max:Math.pow(10,d.amount)},price:{min:Math.pow(10,-d.price),max:Math.pow(10,d.price)},cost:{min:void 0,max:void 0}}});break}}}return s}async fetchL3OrderBook(e,t,i={}){return await this.fetchOrderBook(e,t,i)}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchOpenOrders requires a symbol argument");await this.loadMarkets();const a=this.market(e),o={market:a.id},n=await this.privateGetOrders(this.extend(o,s));return this.parseOrders(n,a,t,i)}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"created_at"));let s=void 0;t&&(s=t.symbol);let r=this.safeString2(e,"side","trend");if(void 0!==r){const e={ask:"sell",bid:"buy"};r=this.safeString(e,r)}const a=this.safeFloat(e,"price"),o=this.safeFloat(e,"volume"),n=this.safeFloat(e,"funds"),d=this.safeString(e,"order_id");return{id:this.safeString(e,"id"),info:e,timestamp:i,datetime:this.iso8601(i),symbol:s,type:void 0,side:r,order:d,takerOrMaker:void 0,price:a,amount:o,cost:n,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market:r.id},o=await this.publicGetTrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchOpenOrders requires a symbol argument");await this.loadMarkets();const a=this.market(e),o={market:a.id},n=await this.privateGetTradesMy(this.extend(o,s));return this.parseTrades(n,a,t,i)}}},sLEj:function(e,t,i){"use strict";const s=i("6IP2"),{BadSymbol:r,PermissionDenied:a,ExchangeError:o,ExchangeNotAvailable:n,OrderNotFound:d,InsufficientFunds:c,InvalidOrder:h,RequestTimeout:l,AuthenticationError:u}=i("ucJe"),{TRUNCATE:f,DECIMAL_PLACES:p}=i("rwG2");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"hitbtc2",name:"HitBTC",countries:["HK"],rateLimit:1500,version:"2",has:{createDepositAddress:!0,fetchDepositAddress:!0,CORS:!1,editOrder:!0,fetchCurrencies:!0,fetchOHLCV:!0,fetchTickers:!0,fetchOrder:!0,fetchOrders:!1,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,withdraw:!0,fetchOrderTrades:!1,fetchDeposits:!1,fetchWithdrawals:!1,fetchTransactions:!0,fetchTradingFee:!0},timeframes:{"1m":"M1","3m":"M3","5m":"M5","15m":"M15","30m":"M30","1h":"H1","4h":"H4","1d":"D1","1w":"D7","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766555-8eaec20e-5edc-11e7-9c5b-6dc69fc42f5e.jpg",api:{public:"https://api.hitbtc.com",private:"https://api.hitbtc.com"},www:"https://hitbtc.com",referral:"https://hitbtc.com/?ref_id=5a5d39a65d466",doc:["https://api.hitbtc.com","https://github.com/hitbtc-com/hitbtc-api/blob/master/APIv2.md"],fees:["https://hitbtc.com/fees-and-limits","https://support.hitbtc.com/hc/en-us/articles/115005148605-Fees-and-limits"]},api:{public:{get:["symbol","symbol/{symbol}","currency","currency/{currency}","ticker","ticker/{symbol}","trades/{symbol}","orderbook/{symbol}","candles/{symbol}"]},private:{get:["order","order/{clientOrderId}","trading/balance","trading/fee/all","trading/fee/{symbol}","history/trades","history/order","history/order/{id}/trades","account/balance","account/transactions","account/transactions/{id}","account/crypto/address/{currency}"],post:["order","account/crypto/withdraw","account/crypto/address/{currency}","account/transfer"],put:["order/{clientOrderId}","account/crypto/withdraw/{id}"],delete:["order","order/{clientOrderId}","account/crypto/withdraw/{id}"],patch:["order/{clientOrderId}"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.002},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001,BCC:.0018,ETH:.00958,BCH:.0018,USDT:100,DASH:.03,BTG:5e-4,XRP:.509,LTC:.003,ZEC:1e-4,XMR:.09,"1ST":.84,ADX:5.7,AE:6.7,AEON:.01006,AIR:565,AMM:14,AMP:342,ANT:6.7,ARDR:1,ARN:18.5,ART:26,ATB:4e-4,ATL:27,ATM:504,ATS:860,AVT:1.9,BAS:113,BCN:.1,BET:124,BKB:46,BMC:32,BMT:100,BNT:2.57,BQX:4.7,BTCA:351.21,BTM:40,BTX:.04,BUS:.004,CAPP:97,CCT:6,CDT:100,CDX:30,CFI:61,CL:13.85,CLD:.88,CND:574,CNX:.04,COSS:65,CPAY:5.487,CSNO:16,CTR:15,CTX:146,CVC:8.46,DATA:12.949,DBIX:.0168,DCN:1280,DCT:.02,DDF:342,DENT:1e3,DGB:.4,DGD:.01,DICE:.32,DLT:.26,DNT:.21,DOGE:2,DOV:34,DRPU:24,DRT:240,DSH:.017,EBET:84,EBTC:20,EBTCOLD:6.6,ECAT:14,EDG:2,EDO:2.9,EKO:1136.36,ELE:.00172,ELM:.004,EMC:.03,MGO:14,ENJ:163,EOS:1.5,ERO:34,ETBS:15,ETC:.002,ETP:.004,EVX:5.4,EXN:456,FCN:5e-6,FRD:65,FUEL:123.00105,FUN:202.9598309,FYN:1.849,FYP:66.13,GAME:.004,GNO:.0034,GUP:4,GVT:1.2,HSR:.04,HAC:144,HDG:7,HGT:1082,HPC:.4,HVN:120,ICN:.55,ICO:34,ICOS:.35,IND:76,INDI:790,ITS:15.0012,IXT:11,KBR:143,KICK:112,KMD:4,LA:41,LEND:388,LAT:1.44,LIFE:13e3,LRC:27,LSK:.3,LOC:11.076,LUN:.34,MAID:5,MANA:143,MCAP:5.44,MIPS:43,MNE:1.33,MSP:121,MCO:.357,MTH:92,MYB:3.9,NDC:165,NEBL:.04,NET:3.96,NTO:998,NGC:2.368,NXC:13.39,NXT:3,OAX:15,ODN:.004,OMG:2,OPT:335,ORME:2.8,OTN:.57,PAY:3.1,PIX:96,PLBT:.33,PLR:114,PLU:.87,POE:784,POLL:3.5,PPT:2,PRE:32,PRG:39,PRO:41,PRS:60,PTOY:.5,QAU:63,QCN:.03,QTUM:.04,QVT:64,REP:.02,RKC:15,RLC:1.21,RVT:14,SC:30,SAN:2.24,SBD:.03,SCL:2.6,SISA:1640,SKIN:407,SWFTC:352.94,SMART:.4,SMS:.0375,SNC:36,SNGLS:4,SNM:48,SNT:233,STAR:.144,STORM:153.19,STEEM:.01,STRAT:.01,SPF:14.4,STU:14,STX:11,SUB:17,SUR:3,SWT:.51,TAAS:.91,TBT:2.37,TFL:15,TIME:.03,TIX:7.1,TKN:1,TGT:173,TKR:84,TNT:90,TRST:1.6,TRX:270,UET:480,UGT:15,UTT:3,VEN:14,VERI:.037,VIB:50,VIBE:145,VOISE:618,WEALTH:.0168,WINGS:2.4,WTC:.75,WRC:48,XAUR:3.23,XDN:.01,XEM:15,XUC:.9,YOYOW:140,ZAP:24,ZRX:23,ZSC:191},deposit:{BTC:0,ETH:0,BCH:0,USDT:0,BTG:0,LTC:0,ZEC:0,XMR:0,"1ST":0,ADX:0,AE:0,AEON:0,AIR:0,AMP:0,ANT:0,ARDR:0,ARN:0,ART:0,ATB:0,ATL:0,ATM:0,ATS:0,AVT:0,BAS:0,BCN:0,BET:0,BKB:0,BMC:0,BMT:0,BNT:0,BQX:0,BTM:0,BTX:0,BUS:0,CCT:0,CDT:0,CDX:0,CFI:0,CLD:0,CND:0,CNX:0,COSS:0,CSNO:0,CTR:0,CTX:0,CVC:0,DBIX:0,DCN:0,DCT:0,DDF:0,DENT:0,DGB:0,DGD:0,DICE:0,DLT:0,DNT:0,DOGE:0,DOV:0,DRPU:0,DRT:0,DSH:0,EBET:0,EBTC:0,EBTCOLD:0,ECAT:0,EDG:0,EDO:0,ELE:0,ELM:0,EMC:0,EMGO:0,ENJ:0,EOS:0,ERO:0,ETBS:0,ETC:0,ETP:0,EVX:0,EXN:0,FRD:0,FUEL:0,FUN:0,FYN:0,FYP:0,GNO:0,GUP:0,GVT:0,HAC:0,HDG:0,HGT:0,HPC:0,HVN:0,ICN:0,ICO:0,ICOS:0,IND:0,INDI:0,ITS:0,IXT:0,KBR:0,KICK:0,LA:0,LAT:0,LIFE:0,LRC:0,LSK:0,LUN:0,MAID:0,MANA:0,MCAP:0,MIPS:0,MNE:0,MSP:0,MTH:0,MYB:0,NDC:0,NEBL:0,NET:0,NTO:0,NXC:0,NXT:0,OAX:0,ODN:0,OMG:0,OPT:0,ORME:0,OTN:0,PAY:0,PIX:0,PLBT:0,PLR:0,PLU:0,POE:0,POLL:0,PPT:0,PRE:0,PRG:0,PRO:0,PRS:0,PTOY:0,QAU:0,QCN:0,QTUM:0,QVT:0,REP:0,RKC:0,RVT:0,SAN:0,SBD:0,SCL:0,SISA:0,SKIN:0,SMART:0,SMS:0,SNC:0,SNGLS:0,SNM:0,SNT:0,STEEM:0,STRAT:0,STU:0,STX:0,SUB:0,SUR:0,SWT:0,TAAS:0,TBT:0,TFL:0,TIME:0,TIX:0,TKN:0,TKR:0,TNT:0,TRST:0,TRX:0,UET:0,UGT:0,VEN:0,VERI:0,VIB:0,VIBE:0,VOISE:0,WEALTH:0,WINGS:0,WTC:0,XAUR:0,XDN:0,XEM:0,XUC:0,YOYOW:0,ZAP:0,ZRX:0,ZSC:0}}},options:{defaultTimeInForce:"FOK"},exceptions:{504:l,1002:u,1003:a,2010:h,2001:r,2011:h,2020:h,20002:d,20001:c}})}feeToPrecision(e,t){return this.decimalToPrecision(t,f,8,p)}async fetchMarkets(e={}){const t=await this.publicGetSymbol(e),i=[];for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"id"),a=this.safeString(e,"baseCurrency"),o=this.safeString(e,"quoteCurrency"),n=this.safeCurrencyCode(a),d=this.safeCurrencyCode(o),c=n+"/"+d,h=this.safeFloat(e,"quantityIncrement"),l=this.safeFloat(e,"tickSize"),u={price:this.precisionFromString(e.tickSize),amount:-1*parseInt(Math.log10(h))},f=this.safeFloat(e,"takeLiquidityRate"),p=this.safeFloat(e,"provideLiquidityRate");i.push(this.extend(this.fees.trading,{info:e,id:r,symbol:c,base:n,quote:d,baseId:a,quoteId:o,active:!0,taker:f,maker:p,precision:u,limits:{amount:{min:h,max:void 0},price:{min:l,max:void 0},cost:{min:h*l,max:void 0}}}))}return i}async fetchCurrencies(e={}){const t=await this.publicGetCurrency(e),i={};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"id"),a=8,o=this.safeCurrencyCode(r),n=this.safeValue(e,"payinEnabled"),d=this.safeValue(e,"payoutEnabled"),c=this.safeValue(e,"transferEnabled");let h=n&&d&&c;"disabled"in e&&e.disabled&&(h=!1);let l="fiat";"crypto"in e&&e.crypto&&(l="crypto");const u=this.safeString(e,"fullName");i[o]={id:r,code:o,type:l,payin:n,payout:d,transfer:c,info:e,name:u,active:h,fee:this.safeFloat(e,"payoutFee"),precision:a,limits:{amount:{min:Math.pow(10,-a),max:Math.pow(10,a)},price:{min:Math.pow(10,-a),max:Math.pow(10,a)},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:Math.pow(10,a)}}}}return i}async fetchTradingFee(e,t={}){await this.loadMarkets();const i=this.market(e),s=this.extend({symbol:i.id},this.omit(t,"symbol")),r=await this.privateGetTradingFeeSymbol(s);return{info:r,maker:this.safeFloat(r,"provideLiquidityRate"),taker:this.safeFloat(r,"takeLiquidityRate")}}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeString(e,"type","trading"),i="privateGet"+this.capitalize(t)+"Balance",s=this.omit(e,"type"),r=await this[i](s),a={info:r};for(let o=0;o<r.length;o++){const e=r[o],t=this.safeString(e,"currency"),i=this.safeCurrencyCode(t),s=this.account();s.free=this.safeFloat(e,"available"),s.used=this.safeFloat(e,"reserved"),a[i]=s}return this.parseBalance(a)}parseOHLCV(e,t,i="1d",s,r){return[this.parse8601(e.timestamp),parseFloat(e.open),parseFloat(e.max),parseFloat(e.min),parseFloat(e.close),parseFloat(e.volume)]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={symbol:a.id,period:this.timeframes[t]};void 0!==i&&(o.from=this.iso8601(i)),void 0!==s&&(o.limit=s);const n=await this.publicGetCandlesSymbol(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)};void 0!==t&&(s.limit=t);const r=await this.publicGetOrderbookSymbol(this.extend(s,i));return this.parseOrderBook(r,void 0,"bid","ask","price","size")}parseTicker(e,t){const i=this.parse8601(e.timestamp);let s=void 0;void 0!==t&&(s=t.symbol);const r=this.safeFloat(e,"volume"),a=this.safeFloat(e,"volumeQuote"),o=this.safeFloat(e,"open"),n=this.safeFloat(e,"last");let d=void 0,c=void 0,h=void 0;void 0!==n&&void 0!==o&&(d=n-o,h=this.sum(n,o)/2,o>0&&(c=d/o*100));let l=void 0;return void 0!==a&&void 0!==r&&r>0&&(l=a/r),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:l,open:o,close:n,last:n,previousClose:void 0,change:d,percentage:c,average:h,baseVolume:r,quoteVolume:a,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t),s={};for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"symbol");if(void 0!==t)if(t in this.markets_by_id){const i=this.markets_by_id[t];s[i.symbol]=this.parseTicker(e,i)}else s[t]=this.parseTicker(e)}return s}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetTickerSymbol(this.extend(s,t));if("message"in r)throw new o(this.id+" "+r.message);return this.parseTicker(r,i)}parseTrade(e,t){const i=this.parse8601(e.timestamp);let s=void 0;const r=this.safeString(e,"symbol");void 0!==r&&(s=r in this.markets_by_id?(t=this.markets_by_id[r]).symbol:r),void 0===s&&void 0!==t&&(s=t.symbol);let a=void 0;const o=this.safeFloat(e,"fee");if(void 0!==o){a={cost:o,currency:t?t.quote:void 0}}const n=this.safeString(e,"clientOrderId"),d=this.safeFloat(e,"price"),c=this.safeFloat(e,"quantity"),h=d*c,l=this.safeString(e,"side");return{info:e,id:this.safeString(e,"id"),order:n,timestamp:i,datetime:this.iso8601(i),symbol:s,type:void 0,side:l,takerOrMaker:void 0,price:d,amount:c,cost:h,fee:a}}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==e&&(r=this.currency(e),a.asset=r.id),void 0!==t&&(a.startTime=t);const o=await this.privateGetAccountTransactions(this.extend(a,s));return this.parseTransactions(o,r,t,i)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.parse8601(this.safeString(e,"createdAt")),r=this.parse8601(this.safeString(e,"updatedAt")),a=this.safeString(e,"currency"),o=this.safeCurrencyCode(a,t),n=this.parseTransactionStatus(this.safeString(e,"status")),d=this.safeFloat(e,"amount"),c=this.safeString(e,"address"),h=this.safeString(e,"hash");let l=void 0;const u=this.safeFloat(e,"fee");void 0!==u&&(l={cost:u,currency:o});const f=this.parseTransactionType(this.safeString(e,"type"));return{info:e,id:i,txid:h,timestamp:s,datetime:this.iso8601(s),address:c,tag:void 0,type:f,amount:d,currency:o,status:n,updated:r,fee:l}}parseTransactionStatus(e){return this.safeString({pending:"pending",failed:"failed",success:"ok"},e,e)}parseTransactionType(e){return this.safeString({payin:"deposit",payout:"withdrawal",withdraw:"withdrawal"},e,e)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==i&&(a.limit=i),void 0!==t&&(a.sort="ASC",a.from=this.iso8601(t));const o=await this.publicGetTradesSymbol(this.extend(a,s));return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e);let n=this.uuid().split("-").join("");n=n.slice(0,32),s=parseFloat(s);const d={clientOrderId:n,symbol:o.id,side:i,quantity:this.amountToPrecision(e,s),type:t};"limit"===t?d.price=this.priceToPrecision(e,r):d.timeInForce=this.options.defaultTimeInForce;const c=await this.privatePostOrder(this.extend(d,a)),l=this.parseOrder(c);if("rejected"===l.status)throw new h(this.id+" order was rejected by the exchange "+this.json(l));const u=l.id;return this.orders[u]=l,l}async editOrder(e,t,i,s,r,a,o={}){await this.loadMarkets();let n=this.uuid().split("-").join("");n=n.slice(0,32);const d={clientOrderId:e,requestClientId:n};void 0!==r&&(d.quantity=this.amountToPrecision(t,r)),void 0!==a&&(d.price=this.priceToPrecision(t,a));const c=await this.privatePatchOrderClientOrderId(this.extend(d,o)),h=this.parseOrder(c);return this.orders[h.id]=h,h}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={clientOrderId:e},r=await this.privateDeleteOrderClientOrderId(this.extend(s,i));return this.parseOrder(r)}parseOrderStatus(e){return this.safeString({new:"open",suspended:"open",partiallyFilled:"open",filled:"closed",canceled:"canceled",expired:"failed"},e,e)}parseOrder(e,t){const i=this.parse8601(this.safeString(e,"createdAt")),s=this.parse8601(this.safeString(e,"updatedAt")),r=this.safeString(e,"symbol");let a=void 0;void 0!==r&&(a=r in this.markets_by_id?(t=this.markets_by_id[r]).symbol:r),void 0===a&&void 0!==t&&(a=t.id);const o=this.safeFloat(e,"quantity"),n=this.safeFloat(e,"cumQuantity"),d=this.parseOrderStatus(this.safeString(e,"status")),c=this.safeString(e,"clientOrderId"),h=c;let l=this.safeFloat(e,"price");void 0===l&&c in this.orders&&(l=this.orders[c].price);let u=void 0,f=void 0;void 0!==o&&void 0!==n&&(u=o-n,void 0!==l&&(f=n*l));const p=this.safeString(e,"type"),m=this.safeString(e,"side");let y=this.safeValue(e,"tradesReport"),b=void 0,v=void 0;if(void 0!==y){y=this.parseTrades(y,t);let e=void 0;const i=y.length;let s=0;for(let t=0;t<i;t++){void 0===e&&(e=0),s=this.sum(s,y[t].cost);const i=this.safeValue(y[t],"fee",{}),r=this.safeFloat(i,"cost");void 0!==r&&(e=this.sum(e,r))}f=s,void 0!==n&&n>0&&(v=f/n,"market"===p&&void 0===l&&(l=v)),void 0!==e&&(b={cost:e,currency:t.quote})}return{id:c,clientOrderId:h,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:s,status:d,symbol:a,type:p,side:m,price:l,average:v,amount:o,cost:f,filled:n,remaining:u,fee:b,trades:y,info:e}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={clientOrderId:e},r=await this.privateGetHistoryOrder(this.extend(s,i));if(r.length>0)return this.parseOrder(r[0]);throw new d(this.id+" order "+e+" not found")}async fetchOpenOrder(e,t,i={}){await this.loadMarkets();const s={clientOrderId:e},r=await this.privateGetOrderClientOrderId(this.extend(s,i));return this.parseOrder(r)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==e&&(r=this.market(e),a.symbol=r.id);const o=await this.privateGetOrder(this.extend(a,s));return this.parseOrders(o,r,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==e&&(r=this.market(e),a.symbol=r.id),void 0!==i&&(a.limit=i),void 0!==t&&(a.from=this.iso8601(t));const o=await this.privateGetHistoryOrder(this.extend(a,s)),n=this.parseOrders(o,r),d=[];for(let c=0;c<n.length;c++){const e=n[c],t=e.status;"closed"!==t&&"canceled"!==t||d.push(e)}return this.filterBySinceLimit(d,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.market(e),r.symbol=a.id),void 0!==t&&(r.from=this.iso8601(t)),void 0!==i&&(r.limit=i);const o=await this.privateGetHistoryTrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}async fetchOrderTrades(e,t,i,s,r={}){await this.loadMarkets();let a=void 0;void 0!==t&&(a=this.market(t));const o={id:e},n=await this.privateGetHistoryOrderIdTrades(this.extend(o,r));if(n.length>0)return this.parseTrades(n,a,i,s);throw new d(this.id+" order "+e+" not found, "+this.id+'.fetchOrderTrades() requires an exchange-specific order id, you need to grab it from order["info"]["id"]')}async createDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currency:i.id},r=await this.privatePostAccountCryptoAddressCurrency(this.extend(s,t)),a=this.safeString(r,"address");return this.checkAddress(a),{currency:i,address:a,tag:this.safeString(r,"paymentId"),info:r}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currency:i.id},r=await this.privateGetAccountCryptoAddressCurrency(this.extend(s,t)),a=this.safeString(r,"address");this.checkAddress(a);const o=this.safeString(r,"paymentId");return{currency:i.code,address:a,tag:o,info:r}}async withdraw(e,t,i,s,r={}){await this.loadMarkets(),this.checkAddress(i);const a={currency:this.currency(e).id,amount:parseFloat(t),address:i};s&&(a.paymentId=s);const o=await this.privatePostAccountCryptoWithdraw(this.extend(a,r));return{info:o,id:o.id}}sign(e,t="public",i="GET",s={},r,a){let o="/api/"+this.version+"/";const n=this.omit(s,this.extractParams(e));if("public"===t)o+=t+"/"+this.implodeParams(e,s),Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials(),o+=this.implodeParams(e,s),"GET"===i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):Object.keys(n).length&&(a=this.json(n));const t=this.encode(this.apiKey+":"+this.secret),d=this.stringToBase64(t);r={Authorization:"Basic "+this.decode(d),"Content-Type":"application/json"}}return o=this.urls.api[t]+o,{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,d,c,l){if(void 0!==d&&e>=400){const t=this.id+" "+a;if(503===e||504===e)throw new n(t);if(429===e)return;if("{"===a[0]&&"error"in d){const e=this.safeString(d.error,"code");if(this.throwExactlyMatchedException(this.exceptions,e,t),"Duplicate clientOrderId"===this.safeString(d.error,"message"))throw new h(t)}throw new o(t)}}}},sOO9:function(e,t,i){(function(e){var s=i("ANQQ"),r=i("3mKH"),a=i("1hwd"),o=i("HrKg"),n=i("ly6l"),d=t;d.request=function(t,i){t="string"===typeof t?n.parse(t):a(t);var r=-1===e.location.protocol.search(/^https?:$/)?"http:":"",o=t.protocol||r,d=t.hostname||t.host,c=t.port,h=t.path||"/";d&&-1!==d.indexOf(":")&&(d="["+d+"]"),t.url=(d?o+"//"+d:"")+(c?":"+c:"")+h,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var l=new s(t);return i&&l.on("response",i),l},d.get=function(e,t){var i=d.request(e,t);return i.end(),i},d.ClientRequest=s,d.IncomingMessage=r.IncomingMessage,d.Agent=function(){},d.Agent.defaultMaxSockets=4,d.globalAgent=new d.Agent,d.STATUS_CODES=o,d.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,i("pCvA"))},sOjj:function(e,t,i){"use strict";const s=i("aE5k"),r=i("YB7M");e.exports=function(e){const t=s(e),i=r(e);return function(e,s){switch("string"===typeof e?e.toLowerCase():e){case"keccak224":return new t(1152,448,null,224,s);case"keccak256":return new t(1088,512,null,256,s);case"keccak384":return new t(832,768,null,384,s);case"keccak512":return new t(576,1024,null,512,s);case"sha3-224":return new t(1152,448,6,224,s);case"sha3-256":return new t(1088,512,6,256,s);case"sha3-384":return new t(832,768,6,384,s);case"sha3-512":return new t(576,1024,6,512,s);case"shake128":return new i(1344,256,31,s);case"shake256":return new i(1088,512,31,s);default:throw new Error("Invald algorithm: "+e)}}}},sqcK:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ArgumentsRequired:a,AuthenticationError:o,OrderNotFound:n,InsufficientFunds:d,PermissionDenied:c,BadRequest:h,RateLimitExceeded:l,InvalidOrder:u}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bigone",name:"BigONE",countries:["CN"],version:"v3",rateLimit:1200,has:{cancelAllOrders:!0,createMarketOrder:!1,fetchDepositAddress:!0,fetchDeposits:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchTickers:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"min1","5m":"min5","15m":"min15","30m":"min30","1h":"hour1","3h":"hour3","4h":"hour4","6h":"hour6","12h":"hour12","1d":"day1","1w":"week1","1M":"month1"},hostname:"big.one",urls:{logo:"https://user-images.githubusercontent.com/1294454/69354403-1d532180-0c91-11ea-88ed-44c06cefdf87.jpg",api:{public:"https://{hostname}/api/v3",private:"https://{hostname}/api/v3/viewer"},www:"https://big.one",doc:"https://open.big.one/docs/api.html",fees:"https://bigone.zendesk.com/hc/en-us/articles/115001933374-BigONE-Fee-Policy",referral:"https://b1.run/users/new?code=D3LLBVFT"},api:{public:{get:["ping","asset_pairs","asset_pairs/{asset_pair_name}/depth","asset_pairs/{asset_pair_name}/trades","asset_pairs/{asset_pair_name}/ticker","asset_pairs/{asset_pair_name}/candles","asset_pairs/tickers"]},private:{get:["accounts","assets/{asset_symbol}/address","orders","orders/{id}","orders/multi","trades","withdrawals","deposits"],post:["orders","orders/{id}/cancel","orders/cancel","withdrawals"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:.001,ETH:.005,EOS:.01,ZEC:.003,LTC:.01,QTUM:.01,ETC:.01,GAS:0,BTS:1,GXS:.1,BITCNY:19}}},exceptions:{exact:{10001:h,10005:r,"Amount's scale must greater than AssetPair's base scale":u,10007:h,10011:r,10013:n,10014:d,10403:c,10429:l,40004:o,40103:o,40104:o,40301:c,40302:r,40601:r,40602:r,40603:d,40120:u,40121:u},broad:{}},commonCurrencies:{ONE:"BigONE Token"}})}async fetchMarkets(e={}){const t=await this.publicGetAssetPairs(e),i=this.safeValue(t,"data",[]),s=[];for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"name"),a=this.safeString(e,"id"),o=this.safeValue(e,"base_asset",{}),n=this.safeValue(e,"quote_asset",{}),d=this.safeString(o,"symbol"),c=this.safeString(n,"symbol"),h=this.safeCurrencyCode(d),l=this.safeCurrencyCode(c),u=h+"/"+l,f={amount:this.safeInteger(e,"base_scale"),price:this.safeInteger(e,"quote_scale")},p=this.safeInteger(e,"min_quote_value"),m={id:t,uuid:a,symbol:u,base:h,quote:l,baseId:d,quoteId:c,active:!0,precision:f,limits:{amount:{min:Math.pow(10,-f.amount),max:void 0},price:{min:Math.pow(10,-f.price),max:void 0},cost:{min:p,max:void 0}},info:e};s.push(m)}return s}async loadMarkets(e=!1,t={}){const i=await super.loadMarkets(e,t);let s=this.safeValue(this.options,"marketsByUuid");if(void 0===s||e){s={};for(let e=0;e<this.symbols.length;e++){const t=this.symbols[e],i=this.markets[t];s[this.safeString(i,"uuid")]=i}this.options.marketsByUuid=s}return i}parseTicker(e,t){let i=void 0;if(void 0===t){const s=this.safeString(e,"asset_pair_name");if(void 0!==s)if(s in this.markets_by_id)t=this.markets_by_id[s];else{const[e,t]=s.split("-");i=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}}void 0===i&&void 0!==t&&(i=t.symbol);const s=this.milliseconds(),r=this.safeFloat(e,"close"),a=this.safeValue(e,"bid",{}),o=this.safeValue(e,"ask",{});return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(a,"price"),bidVolume:this.safeFloat(a,"quantity"),ask:this.safeFloat(o,"price"),askVolume:this.safeFloat(o,"quantity"),vwap:void 0,open:this.safeFloat(e,"open"),close:r,last:r,previousClose:void 0,change:this.safeFloat(e,"daily_change"),percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={asset_pair_name:i.id},r=await this.publicGetAssetPairsAssetPairNameTicker(this.extend(s,t)),a=this.safeValue(r,"data",{});return this.parseTicker(a,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i={};if(void 0!==e){const t=this.marketIds(e);i.pair_names=t.join(",")}const s=await this.publicGetAssetPairsTickers(this.extend(i,t)),r=this.safeValue(s,"data",[]),a={};for(let o=0;o<r.length;o++){const e=this.parseTicker(r[o]);a[e.symbol]=e}return a}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={asset_pair_name:this.market(e).id};void 0!==t&&(s.limit=t);const r=await this.publicGetAssetPairsAssetPairNameDepth(this.extend(s,i)),a=this.safeValue(r,"data",{});return this.parseOrderBook(a,void 0,"bids","asks","price","quantity")}parseTrade(e,t){const i=this.parse8601(this.safeString2(e,"created_at","inserted_at")),s=this.safeFloat(e,"price"),r=this.safeFloat(e,"amount"),a=this.safeString(e,"asset_pair_name");let o=void 0;if(void 0!==a)if(a in this.markets_by_id)t=this.markets_by_id[a];else{const[e,t]=a.split("-");o=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}void 0===o&&void 0!==t&&(o=t.symbol);let n=void 0;void 0!==r&&void 0!==s&&(n=this.costToPrecision(o,s*r));let d=this.safeString(e,"side");const c=this.safeString(e,"taker_side");let h=void 0;void 0!==c&&void 0!==d&&"SELF_TRADING"!==d&&(h=c===d?"taker":"maker"),void 0===d?d="ASK"===c?"sell":"buy":"BID"===d?d="buy":"ASK"===d&&(d="sell");const l=this.safeString(e,"maker_order_id"),u=this.safeString(e,"taker_order_id");let f=void 0;void 0!==l?f=void 0!==u?[l,u]:l:void 0!==u&&(f=u);const p={id:this.safeString(e,"id"),timestamp:i,datetime:this.iso8601(i),symbol:o,order:f,type:"limit",side:d,takerOrMaker:h,price:s,amount:r,cost:parseFloat(n),info:e};let m=void 0,y=void 0;void 0!==t&&void 0!==h?"buy"===d?"maker"===h?(m=t.base,y=t.quote):(m=t.quote,y=t.base):"maker"===h?(m=t.quote,y=t.base):(m=t.base,y=t.quote):"SELF_TRADING"===d&&("BID"===c?(m=t.quote,y=t.base):"ASK"===c&&(m=t.base,y=t.quote));const b=this.safeFloat(e,"maker_fee"),v=this.safeFloat(e,"taker_fee");return void 0!==b?void 0!==v?p.fees=[{cost:b,currency:m},{cost:v,currency:y}]:p.fee={cost:b,currency:m}:p.fee=void 0!==v?{cost:v,currency:y}:void 0,p}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={asset_pair_name:r.id},o=await this.publicGetAssetPairsAssetPairNameTrades(this.extend(a,s)),n=this.safeValue(o,"data",[]);return this.parseTrades(n,r,t,i)}parseOHLCV(e,t,i="1m",s,r){return[this.parse8601(this.safeString(e,"time")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e);void 0===s&&(s=100);const o={asset_pair_name:a.id,period:this.timeframes[t],limit:s};if(void 0!==i){const e=this.sum(i,s*this.parseTimeframe(t)*1e3);o.time=this.iso8601(e)}const n=await this.publicGetAssetPairsAssetPairNameCandles(this.extend(o,r)),d=this.safeValue(n,"data",[]);return this.parseOHLCVs(d,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccounts(e),i={info:t},s=this.safeValue(t,"data",[]);for(let r=0;r<s.length;r++){const e=s[r],t=this.safeString(e,"asset_symbol"),a=this.safeCurrencyCode(t),o=this.account();o.total=this.safeFloat(e,"balance"),o.used=this.safeFloat(e,"locked_balance"),i[a]=o}return this.parseBalance(i)}parseOrder(e,t){const i=this.safeString(e,"id");let s=void 0;if(void 0===t){const i=this.safeString(e,"asset_pair_name");if(void 0!==i)if(i in this.markets_by_id)t=this.markets_by_id[i];else{const[e,t]=i.split("-");s=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}}void 0===s&&void 0!==t&&(s=t.symbol);const r=this.parse8601(this.safeString(e,"created_at")),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount"),n=this.safeFloat(e,"filled_amount");let d=void 0;void 0!==o&&void 0!==n&&(d=Math.max(0,o-n));const c=this.parseOrderStatus(this.safeString(e,"state"));let h=this.safeString(e,"side");h="BID"===h?"buy":"sell";let l=void 0;void 0!==n&&void 0!==a&&(l=n*a);const u=this.parse8601(this.safeString(e,"updated_at")),f=this.safeFloat(e,"avg_deal_price");return{info:e,id:i,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:u,symbol:s,type:void 0,side:h,price:a,amount:o,cost:l,average:f,filled:n,remaining:d,status:c,fee:void 0,trades:void 0}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e);i="buy"===i?"BID":"ASK";const n={asset_pair_name:o.id,side:i,amount:this.amountToPrecision(e,s),price:this.priceToPrecision(e,r)},d=await this.privatePostOrders(this.extend(n,a)),c=this.safeValue(d,"data");return this.parseOrder(c,o)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privatePostOrdersIdCancel(this.extend(s,i)),a=this.safeValue(r,"data");return this.parseOrder(a)}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={asset_pair_name:this.market(e).id};return await this.privatePostOrdersCancel(this.extend(i,t))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privateGetOrdersId(this.extend(s,i)),a=this.safeValue(r,"data",{});return this.parseOrder(a)}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),o={asset_pair_name:r.id};void 0!==i&&(o.limit=i);const n=await this.privateGetOrders(this.extend(o,s)),d=this.safeValue(n,"data",[]);return this.parseOrders(d,r,t,i)}async fetchMyTrades(e,t,i,s={}){if(await this.loadMarkets(),void 0===e)throw new a(this.id+" fetchMyTrades() requires a symbol argument");const r=this.market(e),o={asset_pair_name:r.id};void 0!==i&&(o.limit=i);const n=await this.privateGetTrades(this.extend(o,s)),d=this.safeValue(n,"data",[]);return this.parseTrades(d,r,t,i)}parseOrderStatus(e){return this.safeString({PENDING:"open",FILLED:"closed",CANCELLED:"canceled"},e)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({state:"PENDING"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({state:"FILLED"},s))}nonce(){return 1e3*this.microseconds()}sign(e,t="public",i="GET",s={},r,a){const o=this.omit(s,this.extractParams(e));let n=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+"/"+this.implodeParams(e,s);if("public"===t)Object.keys(o).length&&(n+="?"+this.urlencode(o));else{this.checkRequiredCredentials();const e=this.nonce().toString(),t={type:"OpenAPIV2",sub:this.apiKey,nonce:e};r={Authorization:"Bearer "+this.jwt(t,this.encode(this.secret))},"GET"===i?Object.keys(o).length&&(n+="?"+this.urlencode(o)):"POST"===i&&(r["Content-Type"]="application/json",a=this.json(o))}return{url:n,method:i,body:a,headers:r}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={asset_symbol:this.currency(e).id},s=await this.privateGetAssetsAssetSymbolAddress(this.extend(i,t)),a=this.safeValue(s,"data",[]);if(a.length<1)throw new r(this.id+"fetchDepositAddress() returned empty address response");const o=a[0],n=this.safeString(o,"value"),d=this.safeString(o,"memo");return this.checkAddress(n),{currency:e,address:n,tag:d,info:s}}parseTransactionStatus(e){return this.safeString({WITHHOLD:"ok",UNCONFIRMED:"pending",CONFIRMED:"ok"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"asset_symbol"),s=this.safeCurrencyCode(i),r=this.safeInteger(e,"id"),a=this.safeFloat(e,"amount"),o=this.parseTransactionStatus(this.safeString(e,"state")),n=this.parse8601(this.safeString(e,"inserted_at")),d=this.parse8601(this.safeString2(e,"updated_at","completed_at")),c=this.safeString(e,"txid"),h=this.safeString(e,"target_address"),l=this.safeString(e,"memo"),u="customer_id"in e?"deposit":"withdrawal";return{info:e,id:r,txid:c,timestamp:n,datetime:this.iso8601(n),addressFrom:void 0,address:void 0,addressTo:h,tagFrom:void 0,tag:l,tagTo:void 0,type:u,amount:a,currency:s,status:o,updated:d,fee:void 0}}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.currency(e),r.asset_symbol=a.id),void 0!==i&&(r.limit=i);const o=await this.privateGetDeposits(this.extend(r,s)),n=this.safeValue(o,"data",[]);return this.parseTransactions(n,e,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.currency(e),r.asset_symbol=a.id),void 0!==i&&(r.limit=i);const o=await this.privateGetWithdrawals(this.extend(r,s)),n=this.safeValue(o,"data",[]);return this.parseTransactions(n,e,t,i)}async withdraw(e,t,i,s,a={}){await this.loadMarkets();const o=this.currency(e),n={symbol:o.id,target_address:i,amount:this.currencyToPrecision(e,t)};void 0!==s&&(n.memo=s);const d=await this.privatePostWithdrawals(this.extend(n,a)),c=this.safeValue(d,"data",[]);if(c.length<1)throw new r(this.id+" withdraw() returned an empty response");const h=c[0];return this.parseTransaction(h,o)}handleErrors(e,t,i,s,a,o,n,d,c){if(void 0===n)return;const h=this.safeString(n,"code"),l=this.safeString(n,"message");if("0"!==h){const e=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,l,e),this.throwExactlyMatchedException(this.exceptions.exact,h,e),this.throwBroadlyMatchedException(this.exceptions.broad,l,e),new r(e)}}}},srjw:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,AuthenticationError:a,ArgumentsRequired:o,BadRequest:n,InvalidOrder:d,InsufficientFunds:c,OrderNotFound:h,PermissionDenied:l}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"oceanex",name:"OceanEx",countries:["US"],version:"v1",rateLimit:3e3,urls:{logo:"https://user-images.githubusercontent.com/1294454/58385970-794e2d80-8001-11e9-889c-0567cd79b78e.jpg",api:"https://api.oceanex.pro",www:"https://www.oceanex.pro.com",doc:"https://api.oceanex.pro/doc/v1",referral:"https://oceanex.pro/signup?referral=VE24QX"},has:{fetchMarkets:!0,fetchCurrencies:!1,fetchTicker:!0,fetchTickers:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchTrades:!0,fetchTradingLimits:!1,fetchTradingFees:!1,fetchAllTradingFees:!0,fetchFundingFees:!1,fetchTime:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchBalance:!0,createMarketOrder:!0,createOrder:!0,cancelOrder:!0,cancelOrders:!0,cancelAllOrders:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","12h":"12h","1d":"1d","1w":"1w"},api:{public:{get:["markets","tickers/{pair}","tickers_multi","order_book","order_book/multi","fees/trading","trades","timestamp"]},private:{get:["key","members/me","orders","orders/filter"],post:["orders","orders/multi","order/delete","order/delete/multi","orders/clear"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.001}},commonCurrencies:{PLA:"Plair"},exceptions:{codes:{"-1":n,"-2":n,1001:n,1004:o,1006:a,1008:a,1010:a,1011:l,2001:a,2002:d,2004:h,9003:l},exact:{"market does not have a valid value":n,"side does not have a valid value":n,"Account::AccountError: Cannot lock funds":c,"The account does not exist":a}}})}async fetchMarkets(e={}){const t=await this.publicGetMarkets(this.extend({show_details:!0},e)),i=[],s=this.safeValue(t,"data");for(let r=0;r<s.length;r++){const e=s[r],t=this.safeValue(e,"id"),a=this.safeValue(e,"name");let[o,n]=a.split("/");const d=this.safeCurrencyCode(o),c=this.safeCurrencyCode(n);o=o.toLowerCase(),n=n.toLowerCase();const h=d+"/"+c;i.push({id:t,symbol:h,base:d,quote:c,baseId:o,quoteId:n,active:!0,info:e,precision:{amount:this.safeValue(e,"amount_precision"),price:this.safeValue(e,"price_precision"),base:this.safeValue(e,"ask_precision"),quote:this.safeValue(e,"bid_precision")},limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeValue(e,"minimum_trading_amount"),max:void 0}}})}return i}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={pair:i.id},r=await this.publicGetTickersPair(this.extend(s,t)),a=this.safeValue(r,"data",{});return this.parseTicker(a,i)}async fetchTickers(e,t={}){await this.loadMarkets(),void 0===e&&(e=this.symbols);const i={markets:this.marketIds(e)},s=await this.publicGetTickersMulti(this.extend(i,t)),r=this.safeValue(s,"data"),a={};for(let o=0;o<r.length;o++){const e=r[o],t=this.safeString(e,"market"),i=this.markets_by_id[t];a[i.symbol]=this.parseTicker(e,i)}return a}parseTicker(e,t){const i=this.safeValue(e,"ticker",{}),s=this.safeTimestamp(e,"at");return{symbol:t.symbol,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(i,"high"),low:this.safeFloat(i,"low"),bid:this.safeFloat(i,"buy"),bidVolume:void 0,ask:this.safeFloat(i,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:this.safeFloat(i,"last"),last:this.safeFloat(i,"last"),previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(i,"volume"),quoteVolume:void 0,info:i}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.market(e).id};void 0!==t&&(s.limit=t);const r=await this.publicGetOrderBook(this.extend(s,i)),a=this.safeValue(r,"data",{}),o=this.safeTimestamp(a,"timestamp");return this.parseOrderBook(a,o)}async fetchOrderBooks(e,t,i={}){await this.loadMarkets(),void 0===e&&(e=this.symbols);const s={markets:this.marketIds(e)};void 0!==t&&(s.limit=t);const r=await this.publicGetOrderBookMulti(this.extend(s,i)),a=this.safeValue(r,"data",[]),o={};for(let n=0;n<a.length;n++){const e=a[n],t=this.safeString(e,"market"),i=this.markets_by_id[t].symbol,s=this.safeTimestamp(e,"timestamp");o[i]=this.parseOrderBook(e,s)}return o}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market:r.id};void 0!==i&&(a.limit=i);const o=await this.publicGetTrades(this.extend(a,s)),n=this.safeValue(o,"data");return this.parseTrades(n,r,t,i)}parseTrade(e,t){let i=this.safeValue(e,"side");"bid"===i?i="buy":"ask"===i&&(i="sell");let s=void 0;const r=this.safeValue(e,"market");void 0!==r&&(s=r in this.markets_by_id?(t=this.markets_by_id[r]).symbol:r),void 0===s&&void 0!==t&&(s=t.symbol);let a=this.safeTimestamp(e,"created_on");return void 0===a&&(a=this.parse8601(this.safeString(e,"created_at"))),{info:e,timestamp:a,datetime:this.iso8601(a),symbol:s,id:this.safeString(e,"id"),order:void 0,type:"limit",takerOrMaker:void 0,side:i,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"volume"),cost:void 0,fee:void 0}}async fetchTime(e={}){const t=await this.publicGetTimestamp(e);return this.safeTimestamp(t,"data")}async fetchAllTradingFees(e={}){const t=await this.publicGetFeesTrading(e),i=this.safeValue(t,"data"),s={};for(let r=0;r<i.length;r++){const e=i[r],t=this.safeValue(e,"ask_fee",{}),a=this.safeValue(e,"bid_fee",{}),o=this.safeString(e,"market");let n=o;o in this.markets_by_id&&(n=this.markets_by_id[o].symbol),s[n]={info:e,symbol:n,maker:this.safeFloat(t,"value"),taker:this.safeFloat(a,"value")}}return s}async fetchKey(e={}){const t=await this.privateGetKey(e);return this.safeValue(t,"data")}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetMembersMe(e),i=this.safeValue(t,"data"),s=this.safeValue(i,"accounts"),r={info:t};for(let a=0;a<s.length;a++){const e=s[a],t=this.safeValue(e,"currency"),i=this.safeCurrencyCode(t),o=this.account();o.free=this.safeFloat(e,"balance"),o.used=this.safeFloat(e,"locked"),r[i]=o}return this.parseBalance(r)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),n={market:o.id,side:i,ord_type:t,volume:this.amountToPrecision(e,s)};"limit"===t&&(n.price=this.priceToPrecision(e,r));const d=await this.privatePostOrders(this.extend(n,a)),c=this.safeValue(d,"data");return this.parseOrder(c,o)}async fetchOrder(e,t,i={}){let s=e;Array.isArray(e)||(s=[e]),await this.loadMarkets();let r=void 0;void 0!==t&&(r=this.market(t));const a={ids:s},o=await this.privateGetOrders(this.extend(a,i)),n=this.safeValue(o,"data"),d=n.length;if(void 0===n)throw new h(this.id+" could not found matching order");if(Array.isArray(e))return this.parseOrders(n,r);if(0===d)throw new h(this.id+" could not found matching order");return this.parseOrder(n[0],r)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({states:["wait"]},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({states:["done","cancel"]},s))}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchOrders requires a `symbol` argument");await this.loadMarkets();const r=this.market(e),a=this.safeValue(s,"states",["wait","done","cancel"]),n=this.omit(s,"states"),d={market:r.id,states:a,need_price:"True"};void 0!==i&&(d.limit=i);const c=await this.privateGetOrdersFilter(this.extend(d,n)),h=this.safeValue(c,"data",[]);let l=[];for(let o=0;o<h.length;o++){const e=this.safeValue(h[o],"orders",[]),s=this.parseOrderStatus(this.safeValue(h[o],"state")),a=this.parseOrders(e,r,t,i,{status:s});l=this.arrayConcat(l,a)}return l}parseOrder(e,t){const i=this.parseOrderStatus(this.safeValue(e,"state")),s=this.safeValue2(e,"market","market_id");let r=void 0;void 0!==s&&(r=s in this.markets_by_id?(t=this.markets_by_id[s]).symbol:s),void 0===r&&void 0!==t&&(r=t.symbol);let a=this.safeTimestamp(e,"created_on");return void 0===a&&(a=this.parse8601(this.safeString(e,"created_at"))),{info:e,id:this.safeString(e,"id"),clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:r,type:this.safeValue(e,"ord_type"),side:this.safeValue(e,"side"),price:this.safeFloat(e,"price"),average:this.safeFloat(e,"avg_price"),amount:this.safeFloat(e,"volume"),remaining:this.safeFloat(e,"remaining_volume"),filled:this.safeFloat(e,"executed_volume"),status:i,cost:void 0,trades:void 0,fee:void 0}}parseOrderStatus(e){return this.safeString({wait:"open",done:"closed",cancel:"canceled"},e,e)}async createOrders(e,t,i={}){await this.loadMarkets();const s={market:this.market(e).id,orders:t},r=(await this.privatePostOrdersMulti(this.extend(s,i))).data;return this.parseOrders(r)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s=await this.privatePostOrderDelete(this.extend({id:e},i)),r=this.safeValue(s,"data");return this.parseOrder(r)}async cancelOrders(e,t,i={}){await this.loadMarkets();const s=await this.privatePostOrderDeleteMulti(this.extend({ids:e},i)),r=this.safeValue(s,"data");return this.parseOrders(r)}async cancelAllOrders(e,t={}){await this.loadMarkets();const i=await this.privatePostOrdersClear(t),s=this.safeValue(i,"data");return this.parseOrders(s)}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("public"===t)if("tickers_multi"===e||"order_book/multi"===e){let e="?";const t=this.safeValue(s,"markets");for(let s=0;s<t.length;s++)e+="markets[]="+t[s]+"&";const i=this.safeValue(s,"limit");void 0!==i&&(e+="limit="+i),o+=e}else Object.keys(n).length&&(o+="?"+this.urlencode(n));else if("private"===t){this.checkRequiredCredentials();const e={uid:this.apiKey,data:n};o+="?user_jwt="+this.jwt(e,this.encode(this.secret),"RS256")}return{url:o,method:i,body:a,headers:{"Content-Type":"application/json"}}}handleErrors(e,t,i,s,a,o,n,d,c){if(void 0===n)return;const h=this.safeString(n,"code"),l=this.safeString(n,"message");if(void 0!==h&&"0"!==h){const e=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.codes,h,e),this.throwExactlyMatchedException(this.exceptions.exact,l,e),new r(n)}}}},svUv:function(e,t,i){"use strict";const s=i("uS8B");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"surbitcoin",name:"SurBitcoin",countries:["VE"],has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27991511-f0a50194-6481-11e7-99b5-8f02932424cc.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://surbitcoin.com",doc:"https://blinktrade.com/docs"},options:{brokerId:"1"}})}}},tXvY:function(e,t,i){"use strict";const s=i("OjXq"),{RateLimitExceeded:r,BadSymbol:a,OrderNotFound:o,ExchangeError:n,AuthenticationError:d,ArgumentsRequired:c,ExchangeNotAvailable:h}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bw",name:"BW",countries:["CN"],rateLimit:1500,version:"v1",has:{cancelAllOrders:!1,cancelOrder:!0,cancelOrders:!1,CORS:!1,createDepositAddress:!1,createLimitOrder:!0,createMarketOrder:!1,createOrder:!0,deposit:!1,editOrder:!1,fetchBalance:!0,fetchBidsAsks:!1,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!1,fetchL2OrderBook:!1,fetchLedger:!1,fetchMarkets:!0,fetchMyTrades:!1,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderBooks:!1,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!1,fetchTradingFees:!1,fetchTradingLimits:!1,fetchTransactions:!1,fetchWithdrawals:!0,privateAPI:!1,publicAPI:!1,withdraw:!1},timeframes:{"1m":"1M","5m":"5M","15m":"15M","30m":"30M","1h":"1H","1w":"1W"},hostname:"bw.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/69436317-31128c80-0d52-11ea-91d1-eb7bb5818812.jpg",api:"https://www.{hostname}",www:"https://www.bw.com",doc:"https://github.com/bw-exchange/api_docs_en/wiki",fees:"https://www.bw.com/feesRate"},requiredCredentials:{apiKey:!0,secret:!0},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002},funding:{}},exceptions:{exact:{999:d,1e3:h,2012:o,5017:a,10001:r}},api:{public:{get:["api/data/v1/klines","api/data/v1/ticker","api/data/v1/tickers","api/data/v1/trades","api/data/v1/entrusts","exchange/config/controller/website/marketcontroller/getByWebId","exchange/config/controller/website/currencycontroller/getCurrencyList"]},private:{get:["exchange/entrust/controller/website/EntrustController/getEntrustById","exchange/entrust/controller/website/EntrustController/getUserEntrustRecordFromCacheWithPage","exchange/entrust/controller/website/EntrustController/getUserEntrustList","exchange/fund/controller/website/fundwebsitecontroller/getwithdrawaddress","exchange/fund/controller/website/fundwebsitecontroller/getpayoutcoinrecord","exchange/entrust/controller/website/EntrustController/getUserEntrustList"],post:["exchange/fund/controller/website/fundcontroller/getPayinAddress","exchange/fund/controller/website/fundcontroller/getPayinCoinRecord","exchange/fund/controller/website/fundcontroller/findbypage","exchange/entrust/controller/website/EntrustController/addEntrust","exchange/entrust/controller/website/EntrustController/cancelEntrust"]}}})}async fetchMarkets(e={}){const t=await this.publicGetExchangeConfigControllerWebsiteMarketcontrollerGetByWebId(e),i=this.safeValue(t,"datas",[]),s=[];for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"marketId"),a=parseInt(t),o=this.safeStringUpper(e,"name");let[n,d]=o.split("_");n=this.safeCurrencyCode(n),d=this.safeCurrencyCode(d);const c=this.safeString(e,"sellerCurrencyId"),h=this.safeString(e,"buyerCurrencyId"),l=parseInt(c),u=parseInt(h),f=n+"/"+d,p=1===this.safeInteger(e,"state"),m=this.safeFloat(e,"defaultFee");s.push({id:t,active:p,numericId:a,symbol:f,base:n,quote:d,baseId:c,quoteId:h,baseNumericId:l,quoteNumericId:u,maker:m,taker:m,info:e,precision:{amount:this.safeInteger(e,"amountDecimal"),price:this.safeInteger(e,"priceDecimal")},limits:{amount:{min:this.safeFloat(e,"minAmount"),max:void 0},price:{min:0,max:void 0},cost:{min:0,max:void 0}}})}return s}async fetchCurrencies(e={}){const t=await this.publicGetExchangeConfigControllerWebsiteCurrencycontrollerGetCurrencyList(e),i=this.safeValue(t,"datas",[]),s={};for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"currencyId"),a=this.safeCurrencyCode(this.safeStringUpper(e,"name")),o=1===this.safeInteger(e,"state");s[a]={id:t,code:a,info:e,name:a,active:o,fee:this.safeFloat(e,"drawFee"),precision:void 0,limits:{amount:{min:this.safeFloat(e,"limitAmount",0),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:this.safeFloat(e,"onceDrawLimit")}}}}return s}parseTicker(e,t){let i=void 0;const s=this.safeString(e,0);s in this.markets_by_id&&(t=this.markets_by_id[s]),i=void 0!==t?t.symbol:s;const r=this.milliseconds(),a=parseFloat(this.safeValue(e,1)),o=this.safeValue(e,"bid",{}),n=this.safeValue(e,"ask",{});return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:parseFloat(this.safeValue(e,2)),low:parseFloat(this.safeValue(e,3)),bid:parseFloat(this.safeValue(e,7)),bidVolume:this.safeFloat(o,"quantity"),ask:parseFloat(this.safeValue(e,8)),askVolume:this.safeFloat(n,"quantity"),vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:parseFloat(this.safeValue(e,5)),percentage:void 0,average:void 0,baseVolume:parseFloat(this.safeValue(e,4)),quoteVolume:parseFloat(this.safeValue(e,9)),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={marketId:i.id},r=await this.publicGetApiDataV1Ticker(this.extend(s,t)),a=this.safeValue(r,"datas",[]);return this.parseTicker(a,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetApiDataV1Tickers(t),s=this.safeValue(i,"datas",[]),r={};for(let a=0;a<s.length;a++){const t=this.parseTicker(s[a]),i=t.symbol;(void 0===e||this.inArray(i,e))&&(r[i]=t)}return r}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={marketId:this.market(e).id};void 0!==t&&(s.dataSize=t);const r=await this.publicGetApiDataV1Entrusts(this.extend(s,i)),a=this.safeValue(r,"datas",[]),o=this.safeTimestamp(a,"timestamp");return this.parseOrderBook(a,o)}parseTrade(e,t){const i=this.safeTimestamp(e,2),s=this.safeFloat(e,5),r=this.safeFloat(e,6),a=this.safeString(e,1);let o=void 0;if(void 0!==a)if(a in this.markets_by_id)t=this.markets_by_id[a];else{const t=this.safeString(e,3),[i,s]=t.split("_");o=this.safeCurrencyCode(i)+"/"+this.safeCurrencyCode(s)}void 0===o&&void 0!==t&&(o=t.symbol);let n=void 0;void 0!==r&&void 0!==s&&(n=this.costToPrecision(o,s*r));const d="ask"===this.safeString(e,4)?"sell":"buy";return{id:void 0,timestamp:i,datetime:this.iso8601(i),symbol:o,order:void 0,type:"limit",side:d,takerOrMaker:void 0,price:s,amount:r,cost:parseFloat(n),fee:void 0,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={marketId:r.id};void 0!==i&&(a.dataSize=i);const o=await this.publicGetApiDataV1Trades(this.extend(a,s)),n=this.safeValue(o,"datas",[]);return this.parseTrades(n,r,t,i)}parseOHLCV(e,t,i="1m",s,r){return[this.safeTimestamp(e,3),this.safeFloat(e,4),this.safeFloat(e,5),this.safeFloat(e,6),this.safeFloat(e,7),this.safeFloat(e,8)]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={marketId:a.id,type:this.timeframes[t],dataSize:500};void 0!==s&&(o.dataSize=s);const n=await this.publicGetApiDataV1Klines(this.extend(o,r)),d=this.safeValue(n,"datas",[]),c=this.parseOHLCVs(d,a,t,i,s);return this.sortBy(c,0)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostExchangeFundControllerWebsiteFundcontrollerFindbypage(e),i=this.safeValue(t,"datas",{}),s=this.safeValue(i,"list",[]),r={info:t};for(let a=0;a<s.length;a++){const e=s[a],t=this.safeString(e,"currencyTypeId"),i=this.safeCurrencyCode(t),o=this.account();o.free=this.safeFloat(e,"amount"),o.used=this.safeFloat(e,"freeze"),r[i]=o}return this.parseBalance(r)}async createOrder(e,t,i,s,r,a={}){if(void 0===r)throw new n(this.id+" allows limit orders only");await this.loadMarkets();const o=this.market(e),d={amount:this.amountToPrecision(e,s),price:this.priceToPrecision(e,r),type:"buy"===i?1:0,rangeType:0,marketId:o.id},c=await this.privatePostExchangeEntrustControllerWebsiteEntrustControllerAddEntrust(this.extend(d,a)),h=this.safeValue(c,"datas");return{id:this.safeString(h,"entrustId"),info:c,timestamp:void 0,datetime:void 0,lastTradeTimestamp:void 0,symbol:e,type:t,side:i,price:r,amount:s,cost:void 0,average:void 0,filled:void 0,remaining:void 0,status:"open",fee:void 0,trades:void 0}}parseOrderStatus(e){return this.safeString({"-3":"canceled","-2":"canceled","-1":"canceled",0:"open",1:"canceled",2:"closed",3:"open",4:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"marketId");i in this.markets_by_id&&(t=this.markets_by_id[i]);const s=this.safeInteger(e,"createTime");let r=this.safeString(e,"type");"0"===r?r="sell":"1"===r&&(r="buy");const a=this.safeFloat(e,"amount"),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"completeAmount");let d=this.safeFloat2(e,"availabelAmount","availableAmount"),c=this.safeFloat(e,"totalMoney");void 0!==n&&(void 0!==a&&void 0===d&&(d=a-n),void 0===c&&void 0!==o&&(c*=n));const h=this.parseOrderStatus(this.safeString(e,"status"));return{info:e,id:this.safeString(e,"entrustId"),clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:this.safeString(t,"symbol"),type:"limit",side:r,price:o,amount:a,cost:c,average:void 0,filled:n,remaining:d,status:h,fee:void 0,trades:void 0}}async fetchOrder(e,t,i={}){if(void 0===t)throw new c(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={marketId:s.id,entrustId:e},a=await this.privateGetExchangeEntrustControllerWebsiteEntrustControllerGetEntrustById(this.extend(r,i)),o=this.safeValue(a,"datas",{});return this.parseOrder(o,s)}async cancelOrder(e,t,i={}){if(void 0===t)throw new c(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();const s={marketId:this.market(t).id,entrustId:e};return{info:await this.privatePostExchangeEntrustControllerWebsiteEntrustControllerCancelEntrust(this.extend(s,i)),id:e}}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new c(this.id+" fetchOpenOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),a={marketId:r.id};void 0!==i&&(a.pageSize=i);const o=await this.privateGetExchangeEntrustControllerWebsiteEntrustControllerGetUserEntrustRecordFromCacheWithPage(this.extend(a,s)),n=this.safeValue(o,"datas",{}),d=this.safeValue(n,"entrustList",[]);return this.parseOrders(d,r,t,i)}async fetchClosedOrders(e,t,i,s={}){if(void 0===e)throw new c(this.id+" fetchClosedOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),a={marketId:r.id};void 0!==i&&(a.pageSize=i),void 0!==t&&(a.startDateTime=t);const o=await this.privateGetExchangeEntrustControllerWebsiteEntrustControllerGetUserEntrustList(this.extend(a,s)),n=this.safeValue(o,"datas",{}),d=this.safeValue(n,"entrustList",[]);return this.parseOrders(d,r,t,i)}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new c(this.id+" fetchOpenOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),a={marketId:r.id};void 0!==t&&(a.startDateTime=t),void 0!==i&&(a.pageSize=i);const o=await this.privateGetExchangeEntrustControllerWebsiteEntrustControllerGetUserEntrustList(this.extend(a,s)),n=this.safeValue(o,"datas",{}),d=this.safeValue(n,"entrustList",[]);return this.parseOrders(d,r,t,i)}sign(e,t="public",i="GET",s={},r,a){let o=this.implodeParams(this.urls.api,{hostname:this.hostname})+"/"+e;if("GET"===i?Object.keys(s).length&&(o+="?"+this.urlencode(s)):a=this.json(s),"private"===t){const e=this.milliseconds().toString();let t="";if("GET"===i){const e=this.keysort(s),i=Object.keys(e);for(let s=0;s<i.length;s++){const r=i[s];t+=r+e[r].toString()}}else t=a;const o=this.apiKey+e+t+this.secret,n=this.hash(this.encode(o),"md5");r||(r={}),r.Apiid=this.apiKey,r.Timestamp=e,r.Sign=n}return{url:o,method:i,body:a,headers:r}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currencyTypeName:this.currency(e).name},s=await this.privatePostExchangeFundControllerWebsiteFundcontrollerGetPayinAddress(this.extend(i,t)),r=this.safeValue(s,"datas",{}),a=this.safeString(r,"address"),o=this.safeString(r,"memo");return this.checkAddress(a),{currency:e,address:this.checkAddress(a),tag:o,info:s}}parseTransactionStatus(e){return this.safeString({"-1":"canceled",0:"pending",1:"ok"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"depositId","withdrawalId"),s=this.safeString2(e,"depositAddress","withdrawalAddress"),r=this.safeString2(e,"currencyId","currencyTypeId");let a=void 0;r in this.currencies_by_id&&(t=this.currencies_by_id[r]),void 0===a&&void 0!==t&&(a=t.code);const o="depositId"in e?"deposit":"withdrawal",n=this.safeFloat2(e,"actuallyAmount","amount"),d=this.parseTransactionStatus(this.safeString2(e,"verifyStatus","state")),c=this.safeInteger(e,"createTime"),h=this.safeString(e,"txId");let l=void 0;const u=this.safeFloat(e,"fees");return void 0!==u&&(l={cost:u,currency:a}),{info:e,id:i,txid:h,timestamp:c,datetime:this.iso8601(c),addressFrom:void 0,address:s,addressTo:void 0,tagFrom:void 0,tag:void 0,tagTo:void 0,type:o,amount:n,currency:a,status:d,updated:void 0,fee:l}}async fetchDeposits(e,t,i,s={}){if(void 0===e)throw new c(this.id+" fetchDeposits() requires a currency code argument");await this.loadMarkets();const r={currencyTypeName:this.currency(e).name};void 0!==i&&(r.pageSize=i);const a=await this.privatePostExchangeFundControllerWebsiteFundcontrollerGetPayinCoinRecord(this.extend(r,s)),o=this.safeValue(a,"datas",{}),n=this.safeValue(o,"list",[]);return this.parseTransactions(n,e,t,i)}async fetchWithdrawals(e,t,i,s={}){if(void 0===e)throw new c(this.id+" fetchWithdrawals() requires a currency code argument");await this.loadMarkets();const r={currencyId:this.currency(e).id};void 0!==i&&(r.pageSize=i);const a=await this.privateGetExchangeFundControllerWebsiteFundwebsitecontrollerGetpayoutcoinrecord(this.extend(r,s)),o=this.safeValue(a,"datas",{}),n=this.safeValue(o,"list",[]);return this.parseTransactions(n,e,t,i)}handleErrors(e,t,i,s,r,a,o,d,c){if(!o)return;const h=this.safeValue(o,"resMsg"),l=this.safeString(h,"code");if("1"!==l){const e=this.id+" "+this.json(o);throw this.throwExactlyMatchedException(this.exceptions.exact,l,e),new n(e)}}}},tb2N:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,InsufficientFunds:a,OrderNotFound:o}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"tidebit",name:"TideBit",countries:["HK"],rateLimit:1e3,version:"v2",has:{fetchDepositAddress:!0,CORS:!1,fetchTickers:!0,fetchOHLCV:!0,withdraw:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","4h":"240","12h":"720","1d":"1440","3d":"4320","1w":"10080"},urls:{logo:"https://user-images.githubusercontent.com/1294454/39034921-e3acf016-4480-11e8-9945-a6086a1082fe.jpg",api:"https://www.tidebit.com",www:"https://www.tidebit.com",doc:["https://www.tidebit.com/documents/api/guide","https://www.tidebit.com/swagger/#/default"],referral:"http://bit.ly/2IX0LrM"},api:{public:{get:["markets","tickers","tickers/{market}","timestamp","trades","trades/{market}","order_book","order","k_with_pending_trades","k","depth"],post:[]},private:{get:["addresses/{address}","deposits/history","deposits/get_deposit","deposits/deposit_address","historys/orders","historys/vouchers","historys/accounts","historys/snapshots","linkage/get_status","members/me","order","orders","partners/orders/{id}/trades","referral_commissions/get_undeposited","referral_commissions/get_graph_data","trades/my","withdraws/bind_account_list","withdraws/get_withdraw_account","withdraws/fetch_bind_info"],post:["deposits/deposit_cash","favorite_markets/update","order/delete","orders","orders/multi","orders/clear","referral_commissions/deposit","withdraws/apply","withdraws/bind_bank","withdraws/bind_address"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.003,taker:.003},funding:{tierBased:!1,percentage:!0,withdraw:{}}},exceptions:{2002:a,2003:o}})}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privateGetDepositAddress(this.extend(i,t));if("success"in s&&s.success){const t=this.safeString(s,"address"),i=this.safeString(s,"addressTag");return{currency:e,address:this.checkAddress(t),tag:i,info:s}}}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=[];for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"id"),a=this.safeString(e,"name"),[o,n]=a.split("/"),d=this.safeCurrencyCode(o),c=this.safeCurrencyCode(n);i.push({id:r,symbol:a,base:d,quote:c,baseId:o,quoteId:n,info:e})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetMembersMe(e),i=this.safeValue(t,"accounts"),s={info:i};for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"currency"),a=this.safeCurrencyCode(t),o=this.account();o.free=this.safeFloat(e,"balance"),o.used=this.safeFloat(e,"locked"),s[a]=o}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={market:s.id};void 0!==t&&(r.limit=t),r.market=s.id;const a=await this.publicGetDepth(this.extend(r,i)),o=this.safeTimestamp(a,"timestamp");return this.parseOrderBook(a,o)}parseTicker(e,t){const i=this.safeTimestamp(e,"at");e=this.safeValue(e,"ticker",{});let s=void 0;void 0!==t&&(s=t.symbol);const r=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),ask:this.safeFloat(e,"sell"),bidVolume:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,change:void 0,percentage:void 0,previousClose:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(t),s=Object.keys(i),r={};for(let a=0;a<s.length;a++){const e=s[a];let t=void 0,o=e;if(e in this.markets_by_id)t=this.markets_by_id[e],o=t.symbol;else{const t=e.slice(0,3),i=e.slice(3,6);o=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(i)}const n=i[e];r[o]=this.parseTicker(n,t)}return r}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},r=await this.publicGetTickersMarket(this.extend(s,t));return this.parseTicker(r,i)}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"created_at")),s=this.safeString(e,"id"),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"volume"),o=this.safeFloat(e,"funds");let n=void 0;return void 0!==t&&(n=t.symbol),{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:n,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:r,amount:a,cost:o,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market:r.id},o=await this.publicGetTrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}parseOHLCV(e,t,i="1m",s,r){return[1e3*e[0],e[1],e[2],e[3],e[4],e[5]]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e);void 0===s&&(s=30);const o={market:a.id,period:this.timeframes[t],limit:s};o.timestamp=void 0!==i?parseInt(i/1e3):18e5;const n=await this.publicGetK(this.extend(o,r));return"null"===n?[]:this.parseOHLCVs(n,a,t,i,s)}parseOrderStatus(e){return this.safeString({done:"closed",wait:"open",cancel:"canceled"},e,e)}parseOrder(e,t){let i=void 0;if(void 0!==t)i=t.symbol;else{const t=e.market;i=this.markets_by_id[t].symbol}const s=this.parse8601(this.safeString(e,"created_at")),r=this.parseOrderStatus(this.safeString(e,"state")),a=this.safeString(e,"id"),o=this.safeString(e,"ord_type"),n=this.safeString(e,"side"),d=this.safeFloat(e,"price"),c=this.safeFloat(e,"volume"),h=this.safeFloat(e,"executed_volume"),l=this.safeFloat(e,"remaining_volume");let u=void 0;return void 0!==d&&void 0!==h&&(u=d*h),{id:a,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,status:r,symbol:i,type:o,side:n,price:d,amount:c,filled:h,remaining:l,cost:u,trades:void 0,fee:void 0,info:e}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o={market:this.marketId(e),side:i,volume:s.toString(),ord_type:t};"limit"===t&&(o.price=r.toString());const n=await this.privatePostOrders(this.extend(o,a)),d=this.markets_by_id[n.market];return this.parseOrder(n,d)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privatePostOrderDelete(this.extend(s,i)),a=this.parseOrder(r),n=this.safeString(a,"status");if("closed"===n||"canceled"===n)throw new o(this.id+" "+this.json(a));return a}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();const o=this.currency(e),n=this.safeString(a,"id");if(void 0===n)throw new r(this.id+" withdraw() requires an extra `id` param (withdraw account id according to withdraws/bind_account_list endpoint");const d={id:n,currency_type:"coin",currency:o.id,body:t};return void 0!==s&&(d.memo=s),{info:await this.privatePostWithdrawsApply(this.extend(d,a)),id:void 0}}nonce(){return this.milliseconds()}encodeParams(e){return this.urlencode(this.keysort(e))}sign(e,t="public",i="GET",s={},r,a){const o="/api/"+this.version+"/"+this.implodeParams(e,s)+".json",n=this.omit(s,this.extractParams(e));let d=this.urls.api+o;if("public"===t)Object.keys(n).length&&(d+="?"+this.urlencode(n));else{this.checkRequiredCredentials();const e=this.nonce().toString(),t=this.keysort(this.extend({access_key:this.apiKey,tonce:e},s)),n=this.urlencode(t),c=i+"|"+o+"|"+n,h=n+"&signature="+this.hmac(this.encode(c),this.encode(this.secret));"GET"===i?d+="?"+h:(a=h,r={"Content-Type":"application/x-www-form-urlencoded"})}return{url:d,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,c){if(400===e||void 0===n){const e=this.id+" "+o;if(void 0===n)throw new r(e);const t=this.safeValue(n,"error",{}),i=this.safeString(t,"code");this.throwExactlyMatchedException(this.exceptions,i,e)}}}},tk5I:function(e,t,i){(function(e){!function(e,t){"use strict";function s(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}function a(e,t,i){if(a.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(i=t,t=10),this._init(e||0,t||10,i||"be"))}var o;"object"===typeof e?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;try{o=i("zkTx").Buffer}catch(S){}function n(e,t,i){for(var r=0,a=Math.min(e.length,i),o=0,n=t;n<a;n++){var d,c=e.charCodeAt(n)-48;r<<=4,r|=d=c>=49&&c<=54?c-49+10:c>=17&&c<=22?c-17+10:c,o|=d}return s(!(240&o),"Invalid character in "+e),r}function d(e,t,i,r){for(var a=0,o=0,n=Math.min(e.length,i),d=t;d<n;d++){var c=e.charCodeAt(d)-48;a*=r,o=c>=49?c-49+10:c>=17?c-17+10:c,s(c>=0&&o<r,"Invalid character"),a+=o}return a}function c(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}a.isBN=function(e){return e instanceof a||null!==e&&"object"===typeof e&&e.constructor.wordSize===a.wordSize&&Array.isArray(e.words)},a.max=function(e,t){return e.cmp(t)>0?e:t},a.min=function(e,t){return e.cmp(t)<0?e:t},a.prototype._init=function(e,t,i){if("number"===typeof e)return this._initNumber(e,t,i);if("object"===typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),s(t===(0|t)&&t>=2&&t<=36);var r=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&r++,16===t?this._parseHex(e,r):this._parseBase(e,t,r),"-"===e[0]&&(this.negative=1),this._strip(),"le"===i&&this._initArray(this.toArray(),t,i)},a.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(s(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},a.prototype._initArray=function(e,t,i){if(s("number"===typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var a,o,n=0;if("be"===i)for(r=e.length-1,a=0;r>=0;r-=3)o=e[r]|e[r-1]<<8|e[r-2]<<16,this.words[a]|=o<<n&67108863,this.words[a+1]=o>>>26-n&67108863,(n+=24)>=26&&(n-=26,a++);else if("le"===i)for(r=0,a=0;r<e.length;r+=3)o=e[r]|e[r+1]<<8|e[r+2]<<16,this.words[a]|=o<<n&67108863,this.words[a+1]=o>>>26-n&67108863,(n+=24)>=26&&(n-=26,a++);return this._strip()},a.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,r,a=0;for(i=e.length-6,s=0;i>=t;i-=6)r=n(e,i,i+6),this.words[s]|=r<<a&67108863,this.words[s+1]|=r>>>26-a&4194303,(a+=24)>=26&&(a-=26,s++);i+6!==t&&(r=n(e,t,i+6),this.words[s]|=r<<a&67108863,this.words[s+1]|=r>>>26-a&4194303),this._strip()},a.prototype._parseBase=function(e,t,i){this.words=[0],this.length=1;for(var s=0,r=1;r<=67108863;r*=t)s++;s--,r=r/t|0;for(var a=e.length-i,o=a%s,n=Math.min(a,a-o)+i,c=0,h=i;h<n;h+=s)c=d(e,h,h+s,t),this.imuln(r),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==o){var l=1;for(c=d(e,h,e.length,t),h=0;h<o;h++)l*=t;this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},a.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype._move=function(e){e.words=this.words,e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype.clone=function(){var e=new a(null);return this.copy(e),e},a.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!==typeof Symbol&&"function"===typeof Symbol.for?a.prototype[Symbol.for("nodejs.util.inspect.custom")]=c:a.prototype.inspect=c;var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],u=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(e,t){var i;if(t=0|t||1,16===(e=e||10)||"hex"===e){i="";for(var r=0,a=0,o=0;o<this.length;o++){var n=this.words[o],d=(16777215&(n<<r|a)).toString(16);i=0!==(a=n>>>24-r&16777215)||o!==this.length-1?h[6-d.length]+d+i:d+i,(r+=2)>=26&&(r-=26,o--)}for(0!==a&&(i=a.toString(16)+i);i.length%t!==0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var c=l[e],f=u[e];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modrn(f).toString(e);i=(p=p.idivn(f)).isZero()?m+i:h[c-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%t!==0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}s(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},a.prototype.toJSON=function(){return this.toString(16,2)},o&&(a.prototype.toBuffer=function(e,t){return this.toArrayLike(o,e,t)}),a.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function f(e,t,i){i.negative=t.negative^e.negative;var s=e.length+t.length|0;i.length=s,s=s-1|0;var r=0|e.words[0],a=0|t.words[0],o=r*a,n=67108863&o,d=o/67108864|0;i.words[0]=n;for(var c=1;c<s;c++){for(var h=d>>>26,l=67108863&d,u=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=u;f++){var p=c-f|0;h+=(o=(r=0|e.words[p])*(a=0|t.words[f])+l)/67108864|0,l=67108863&o}i.words[c]=0|l,d=0|h}return 0!==d?i.words[c]=0|d:i.length--,i._strip()}a.prototype.toArrayLike=function(e,t,i){this._strip();var r=this.byteLength(),a=i||Math.max(1,r);s(r<=a,"byte array longer than desired length"),s(a>0,"Requested array length <= 0");var o=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,a);return this["_toArrayLike"+("le"===t?"LE":"BE")](o,r),o},a.prototype._toArrayLikeLE=function(e,t){for(var i=0,s=0,r=0,a=0;r<this.length;r++){var o=this.words[r]<<a|s;e[i++]=255&o,i<e.length&&(e[i++]=o>>8&255),i<e.length&&(e[i++]=o>>16&255),6===a?(i<e.length&&(e[i++]=o>>24&255),s=0,a=0):(s=o>>>24,a+=2)}if(i<e.length)for(e[i++]=s;i<e.length;)e[i++]=0},a.prototype._toArrayLikeBE=function(e,t){for(var i=e.length-1,s=0,r=0,a=0;r<this.length;r++){var o=this.words[r]<<a|s;e[i--]=255&o,i>=0&&(e[i--]=o>>8&255),i>=0&&(e[i--]=o>>16&255),6===a?(i>=0&&(e[i--]=o>>24&255),s=0,a=0):(s=o>>>24,a+=2)}if(i>=0)for(e[i--]=s;i>=0;)e[i--]=0},Math.clz32?a.prototype._countBits=function(e){return 32-Math.clz32(e)}:a.prototype._countBits=function(e){var t=e,i=0;return t>=4096&&(i+=13,t>>>=13),t>=64&&(i+=7,t>>>=7),t>=8&&(i+=4,t>>>=4),t>=2&&(i+=2,t>>>=2),i+t},a.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,i=0;return 0===(8191&t)&&(i+=13,t>>>=13),0===(127&t)&&(i+=7,t>>>=7),0===(15&t)&&(i+=4,t>>>=4),0===(3&t)&&(i+=2,t>>>=2),0===(1&t)&&i++,i},a.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var i=this._zeroBits(this.words[t]);if(e+=i,26!==i)break}return e},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},a.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},a.prototype.ior=function(e){return s(0===(this.negative|e.negative)),this.iuor(e)},a.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},a.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},a.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]&e.words[i];return this.length=t.length,this._strip()},a.prototype.iand=function(e){return s(0===(this.negative|e.negative)),this.iuand(e)},a.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},a.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},a.prototype.iuxor=function(e){var t,i;this.length>e.length?(t=this,i=e):(t=e,i=this);for(var s=0;s<i.length;s++)this.words[s]=t.words[s]^i.words[s];if(this!==t)for(;s<t.length;s++)this.words[s]=t.words[s];return this.length=t.length,this._strip()},a.prototype.ixor=function(e){return s(0===(this.negative|e.negative)),this.iuxor(e)},a.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},a.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},a.prototype.inotn=function(e){s("number"===typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var r=0;r<t;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this._strip()},a.prototype.notn=function(e){return this.clone().inotn(e)},a.prototype.setn=function(e,t){s("number"===typeof e&&e>=0);var i=e/26|0,r=e%26;return this._expand(i+1),this.words[i]=t?this.words[i]|1<<r:this.words[i]&~(1<<r),this._strip()},a.prototype.iadd=function(e){var t,i,s;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(i=this,s=e):(i=e,s=this);for(var r=0,a=0;a<s.length;a++)t=(0|i.words[a])+(0|s.words[a])+r,this.words[a]=67108863&t,r=t>>>26;for(;0!==r&&a<i.length;a++)t=(0|i.words[a])+r,this.words[a]=67108863&t,r=t>>>26;if(this.length=i.length,0!==r)this.words[this.length]=r,this.length++;else if(i!==this)for(;a<i.length;a++)this.words[a]=i.words[a];return this},a.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},a.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var i,s,r=this.cmp(e);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(i=this,s=e):(i=e,s=this);for(var a=0,o=0;o<s.length;o++)a=(t=(0|i.words[o])-(0|s.words[o])+a)>>26,this.words[o]=67108863&t;for(;0!==a&&o<i.length;o++)a=(t=(0|i.words[o])+a)>>26,this.words[o]=67108863&t;if(0===a&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,i){var s,r,a,o=e.words,n=t.words,d=i.words,c=0,h=0|o[0],l=8191&h,u=h>>>13,f=0|o[1],p=8191&f,m=f>>>13,y=0|o[2],b=8191&y,v=y>>>13,g=0|o[3],w=8191&g,k=g>>>13,_=0|o[4],T=8191&_,O=_>>>13,x=0|o[5],S=8191&x,C=x>>>13,I=0|o[6],E=8191&I,M=I>>>13,A=0|o[7],F=8191&A,B=A>>>13,P=0|o[8],q=8191&P,L=P>>>13,D=0|o[9],V=8191&D,R=D>>>13,G=0|n[0],N=8191&G,H=G>>>13,U=0|n[1],j=8191&U,K=U>>>13,z=0|n[2],X=8191&z,W=z>>>13,Y=0|n[3],Z=8191&Y,J=Y>>>13,Q=0|n[4],$=8191&Q,ee=Q>>>13,te=0|n[5],ie=8191&te,se=te>>>13,re=0|n[6],ae=8191&re,oe=re>>>13,ne=0|n[7],de=8191&ne,ce=ne>>>13,he=0|n[8],le=8191&he,ue=he>>>13,fe=0|n[9],pe=8191&fe,me=fe>>>13;i.negative=e.negative^t.negative,i.length=19;var ye=(c+(s=Math.imul(l,N))|0)+((8191&(r=(r=Math.imul(l,H))+Math.imul(u,N)|0))<<13)|0;c=((a=Math.imul(u,H))+(r>>>13)|0)+(ye>>>26)|0,ye&=67108863,s=Math.imul(p,N),r=(r=Math.imul(p,H))+Math.imul(m,N)|0,a=Math.imul(m,H);var be=(c+(s=s+Math.imul(l,j)|0)|0)+((8191&(r=(r=r+Math.imul(l,K)|0)+Math.imul(u,j)|0))<<13)|0;c=((a=a+Math.imul(u,K)|0)+(r>>>13)|0)+(be>>>26)|0,be&=67108863,s=Math.imul(b,N),r=(r=Math.imul(b,H))+Math.imul(v,N)|0,a=Math.imul(v,H),s=s+Math.imul(p,j)|0,r=(r=r+Math.imul(p,K)|0)+Math.imul(m,j)|0,a=a+Math.imul(m,K)|0;var ve=(c+(s=s+Math.imul(l,X)|0)|0)+((8191&(r=(r=r+Math.imul(l,W)|0)+Math.imul(u,X)|0))<<13)|0;c=((a=a+Math.imul(u,W)|0)+(r>>>13)|0)+(ve>>>26)|0,ve&=67108863,s=Math.imul(w,N),r=(r=Math.imul(w,H))+Math.imul(k,N)|0,a=Math.imul(k,H),s=s+Math.imul(b,j)|0,r=(r=r+Math.imul(b,K)|0)+Math.imul(v,j)|0,a=a+Math.imul(v,K)|0,s=s+Math.imul(p,X)|0,r=(r=r+Math.imul(p,W)|0)+Math.imul(m,X)|0,a=a+Math.imul(m,W)|0;var ge=(c+(s=s+Math.imul(l,Z)|0)|0)+((8191&(r=(r=r+Math.imul(l,J)|0)+Math.imul(u,Z)|0))<<13)|0;c=((a=a+Math.imul(u,J)|0)+(r>>>13)|0)+(ge>>>26)|0,ge&=67108863,s=Math.imul(T,N),r=(r=Math.imul(T,H))+Math.imul(O,N)|0,a=Math.imul(O,H),s=s+Math.imul(w,j)|0,r=(r=r+Math.imul(w,K)|0)+Math.imul(k,j)|0,a=a+Math.imul(k,K)|0,s=s+Math.imul(b,X)|0,r=(r=r+Math.imul(b,W)|0)+Math.imul(v,X)|0,a=a+Math.imul(v,W)|0,s=s+Math.imul(p,Z)|0,r=(r=r+Math.imul(p,J)|0)+Math.imul(m,Z)|0,a=a+Math.imul(m,J)|0;var we=(c+(s=s+Math.imul(l,$)|0)|0)+((8191&(r=(r=r+Math.imul(l,ee)|0)+Math.imul(u,$)|0))<<13)|0;c=((a=a+Math.imul(u,ee)|0)+(r>>>13)|0)+(we>>>26)|0,we&=67108863,s=Math.imul(S,N),r=(r=Math.imul(S,H))+Math.imul(C,N)|0,a=Math.imul(C,H),s=s+Math.imul(T,j)|0,r=(r=r+Math.imul(T,K)|0)+Math.imul(O,j)|0,a=a+Math.imul(O,K)|0,s=s+Math.imul(w,X)|0,r=(r=r+Math.imul(w,W)|0)+Math.imul(k,X)|0,a=a+Math.imul(k,W)|0,s=s+Math.imul(b,Z)|0,r=(r=r+Math.imul(b,J)|0)+Math.imul(v,Z)|0,a=a+Math.imul(v,J)|0,s=s+Math.imul(p,$)|0,r=(r=r+Math.imul(p,ee)|0)+Math.imul(m,$)|0,a=a+Math.imul(m,ee)|0;var ke=(c+(s=s+Math.imul(l,ie)|0)|0)+((8191&(r=(r=r+Math.imul(l,se)|0)+Math.imul(u,ie)|0))<<13)|0;c=((a=a+Math.imul(u,se)|0)+(r>>>13)|0)+(ke>>>26)|0,ke&=67108863,s=Math.imul(E,N),r=(r=Math.imul(E,H))+Math.imul(M,N)|0,a=Math.imul(M,H),s=s+Math.imul(S,j)|0,r=(r=r+Math.imul(S,K)|0)+Math.imul(C,j)|0,a=a+Math.imul(C,K)|0,s=s+Math.imul(T,X)|0,r=(r=r+Math.imul(T,W)|0)+Math.imul(O,X)|0,a=a+Math.imul(O,W)|0,s=s+Math.imul(w,Z)|0,r=(r=r+Math.imul(w,J)|0)+Math.imul(k,Z)|0,a=a+Math.imul(k,J)|0,s=s+Math.imul(b,$)|0,r=(r=r+Math.imul(b,ee)|0)+Math.imul(v,$)|0,a=a+Math.imul(v,ee)|0,s=s+Math.imul(p,ie)|0,r=(r=r+Math.imul(p,se)|0)+Math.imul(m,ie)|0,a=a+Math.imul(m,se)|0;var _e=(c+(s=s+Math.imul(l,ae)|0)|0)+((8191&(r=(r=r+Math.imul(l,oe)|0)+Math.imul(u,ae)|0))<<13)|0;c=((a=a+Math.imul(u,oe)|0)+(r>>>13)|0)+(_e>>>26)|0,_e&=67108863,s=Math.imul(F,N),r=(r=Math.imul(F,H))+Math.imul(B,N)|0,a=Math.imul(B,H),s=s+Math.imul(E,j)|0,r=(r=r+Math.imul(E,K)|0)+Math.imul(M,j)|0,a=a+Math.imul(M,K)|0,s=s+Math.imul(S,X)|0,r=(r=r+Math.imul(S,W)|0)+Math.imul(C,X)|0,a=a+Math.imul(C,W)|0,s=s+Math.imul(T,Z)|0,r=(r=r+Math.imul(T,J)|0)+Math.imul(O,Z)|0,a=a+Math.imul(O,J)|0,s=s+Math.imul(w,$)|0,r=(r=r+Math.imul(w,ee)|0)+Math.imul(k,$)|0,a=a+Math.imul(k,ee)|0,s=s+Math.imul(b,ie)|0,r=(r=r+Math.imul(b,se)|0)+Math.imul(v,ie)|0,a=a+Math.imul(v,se)|0,s=s+Math.imul(p,ae)|0,r=(r=r+Math.imul(p,oe)|0)+Math.imul(m,ae)|0,a=a+Math.imul(m,oe)|0;var Te=(c+(s=s+Math.imul(l,de)|0)|0)+((8191&(r=(r=r+Math.imul(l,ce)|0)+Math.imul(u,de)|0))<<13)|0;c=((a=a+Math.imul(u,ce)|0)+(r>>>13)|0)+(Te>>>26)|0,Te&=67108863,s=Math.imul(q,N),r=(r=Math.imul(q,H))+Math.imul(L,N)|0,a=Math.imul(L,H),s=s+Math.imul(F,j)|0,r=(r=r+Math.imul(F,K)|0)+Math.imul(B,j)|0,a=a+Math.imul(B,K)|0,s=s+Math.imul(E,X)|0,r=(r=r+Math.imul(E,W)|0)+Math.imul(M,X)|0,a=a+Math.imul(M,W)|0,s=s+Math.imul(S,Z)|0,r=(r=r+Math.imul(S,J)|0)+Math.imul(C,Z)|0,a=a+Math.imul(C,J)|0,s=s+Math.imul(T,$)|0,r=(r=r+Math.imul(T,ee)|0)+Math.imul(O,$)|0,a=a+Math.imul(O,ee)|0,s=s+Math.imul(w,ie)|0,r=(r=r+Math.imul(w,se)|0)+Math.imul(k,ie)|0,a=a+Math.imul(k,se)|0,s=s+Math.imul(b,ae)|0,r=(r=r+Math.imul(b,oe)|0)+Math.imul(v,ae)|0,a=a+Math.imul(v,oe)|0,s=s+Math.imul(p,de)|0,r=(r=r+Math.imul(p,ce)|0)+Math.imul(m,de)|0,a=a+Math.imul(m,ce)|0;var Oe=(c+(s=s+Math.imul(l,le)|0)|0)+((8191&(r=(r=r+Math.imul(l,ue)|0)+Math.imul(u,le)|0))<<13)|0;c=((a=a+Math.imul(u,ue)|0)+(r>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,s=Math.imul(V,N),r=(r=Math.imul(V,H))+Math.imul(R,N)|0,a=Math.imul(R,H),s=s+Math.imul(q,j)|0,r=(r=r+Math.imul(q,K)|0)+Math.imul(L,j)|0,a=a+Math.imul(L,K)|0,s=s+Math.imul(F,X)|0,r=(r=r+Math.imul(F,W)|0)+Math.imul(B,X)|0,a=a+Math.imul(B,W)|0,s=s+Math.imul(E,Z)|0,r=(r=r+Math.imul(E,J)|0)+Math.imul(M,Z)|0,a=a+Math.imul(M,J)|0,s=s+Math.imul(S,$)|0,r=(r=r+Math.imul(S,ee)|0)+Math.imul(C,$)|0,a=a+Math.imul(C,ee)|0,s=s+Math.imul(T,ie)|0,r=(r=r+Math.imul(T,se)|0)+Math.imul(O,ie)|0,a=a+Math.imul(O,se)|0,s=s+Math.imul(w,ae)|0,r=(r=r+Math.imul(w,oe)|0)+Math.imul(k,ae)|0,a=a+Math.imul(k,oe)|0,s=s+Math.imul(b,de)|0,r=(r=r+Math.imul(b,ce)|0)+Math.imul(v,de)|0,a=a+Math.imul(v,ce)|0,s=s+Math.imul(p,le)|0,r=(r=r+Math.imul(p,ue)|0)+Math.imul(m,le)|0,a=a+Math.imul(m,ue)|0;var xe=(c+(s=s+Math.imul(l,pe)|0)|0)+((8191&(r=(r=r+Math.imul(l,me)|0)+Math.imul(u,pe)|0))<<13)|0;c=((a=a+Math.imul(u,me)|0)+(r>>>13)|0)+(xe>>>26)|0,xe&=67108863,s=Math.imul(V,j),r=(r=Math.imul(V,K))+Math.imul(R,j)|0,a=Math.imul(R,K),s=s+Math.imul(q,X)|0,r=(r=r+Math.imul(q,W)|0)+Math.imul(L,X)|0,a=a+Math.imul(L,W)|0,s=s+Math.imul(F,Z)|0,r=(r=r+Math.imul(F,J)|0)+Math.imul(B,Z)|0,a=a+Math.imul(B,J)|0,s=s+Math.imul(E,$)|0,r=(r=r+Math.imul(E,ee)|0)+Math.imul(M,$)|0,a=a+Math.imul(M,ee)|0,s=s+Math.imul(S,ie)|0,r=(r=r+Math.imul(S,se)|0)+Math.imul(C,ie)|0,a=a+Math.imul(C,se)|0,s=s+Math.imul(T,ae)|0,r=(r=r+Math.imul(T,oe)|0)+Math.imul(O,ae)|0,a=a+Math.imul(O,oe)|0,s=s+Math.imul(w,de)|0,r=(r=r+Math.imul(w,ce)|0)+Math.imul(k,de)|0,a=a+Math.imul(k,ce)|0,s=s+Math.imul(b,le)|0,r=(r=r+Math.imul(b,ue)|0)+Math.imul(v,le)|0,a=a+Math.imul(v,ue)|0;var Se=(c+(s=s+Math.imul(p,pe)|0)|0)+((8191&(r=(r=r+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((a=a+Math.imul(m,me)|0)+(r>>>13)|0)+(Se>>>26)|0,Se&=67108863,s=Math.imul(V,X),r=(r=Math.imul(V,W))+Math.imul(R,X)|0,a=Math.imul(R,W),s=s+Math.imul(q,Z)|0,r=(r=r+Math.imul(q,J)|0)+Math.imul(L,Z)|0,a=a+Math.imul(L,J)|0,s=s+Math.imul(F,$)|0,r=(r=r+Math.imul(F,ee)|0)+Math.imul(B,$)|0,a=a+Math.imul(B,ee)|0,s=s+Math.imul(E,ie)|0,r=(r=r+Math.imul(E,se)|0)+Math.imul(M,ie)|0,a=a+Math.imul(M,se)|0,s=s+Math.imul(S,ae)|0,r=(r=r+Math.imul(S,oe)|0)+Math.imul(C,ae)|0,a=a+Math.imul(C,oe)|0,s=s+Math.imul(T,de)|0,r=(r=r+Math.imul(T,ce)|0)+Math.imul(O,de)|0,a=a+Math.imul(O,ce)|0,s=s+Math.imul(w,le)|0,r=(r=r+Math.imul(w,ue)|0)+Math.imul(k,le)|0,a=a+Math.imul(k,ue)|0;var Ce=(c+(s=s+Math.imul(b,pe)|0)|0)+((8191&(r=(r=r+Math.imul(b,me)|0)+Math.imul(v,pe)|0))<<13)|0;c=((a=a+Math.imul(v,me)|0)+(r>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,s=Math.imul(V,Z),r=(r=Math.imul(V,J))+Math.imul(R,Z)|0,a=Math.imul(R,J),s=s+Math.imul(q,$)|0,r=(r=r+Math.imul(q,ee)|0)+Math.imul(L,$)|0,a=a+Math.imul(L,ee)|0,s=s+Math.imul(F,ie)|0,r=(r=r+Math.imul(F,se)|0)+Math.imul(B,ie)|0,a=a+Math.imul(B,se)|0,s=s+Math.imul(E,ae)|0,r=(r=r+Math.imul(E,oe)|0)+Math.imul(M,ae)|0,a=a+Math.imul(M,oe)|0,s=s+Math.imul(S,de)|0,r=(r=r+Math.imul(S,ce)|0)+Math.imul(C,de)|0,a=a+Math.imul(C,ce)|0,s=s+Math.imul(T,le)|0,r=(r=r+Math.imul(T,ue)|0)+Math.imul(O,le)|0,a=a+Math.imul(O,ue)|0;var Ie=(c+(s=s+Math.imul(w,pe)|0)|0)+((8191&(r=(r=r+Math.imul(w,me)|0)+Math.imul(k,pe)|0))<<13)|0;c=((a=a+Math.imul(k,me)|0)+(r>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,s=Math.imul(V,$),r=(r=Math.imul(V,ee))+Math.imul(R,$)|0,a=Math.imul(R,ee),s=s+Math.imul(q,ie)|0,r=(r=r+Math.imul(q,se)|0)+Math.imul(L,ie)|0,a=a+Math.imul(L,se)|0,s=s+Math.imul(F,ae)|0,r=(r=r+Math.imul(F,oe)|0)+Math.imul(B,ae)|0,a=a+Math.imul(B,oe)|0,s=s+Math.imul(E,de)|0,r=(r=r+Math.imul(E,ce)|0)+Math.imul(M,de)|0,a=a+Math.imul(M,ce)|0,s=s+Math.imul(S,le)|0,r=(r=r+Math.imul(S,ue)|0)+Math.imul(C,le)|0,a=a+Math.imul(C,ue)|0;var Ee=(c+(s=s+Math.imul(T,pe)|0)|0)+((8191&(r=(r=r+Math.imul(T,me)|0)+Math.imul(O,pe)|0))<<13)|0;c=((a=a+Math.imul(O,me)|0)+(r>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,s=Math.imul(V,ie),r=(r=Math.imul(V,se))+Math.imul(R,ie)|0,a=Math.imul(R,se),s=s+Math.imul(q,ae)|0,r=(r=r+Math.imul(q,oe)|0)+Math.imul(L,ae)|0,a=a+Math.imul(L,oe)|0,s=s+Math.imul(F,de)|0,r=(r=r+Math.imul(F,ce)|0)+Math.imul(B,de)|0,a=a+Math.imul(B,ce)|0,s=s+Math.imul(E,le)|0,r=(r=r+Math.imul(E,ue)|0)+Math.imul(M,le)|0,a=a+Math.imul(M,ue)|0;var Me=(c+(s=s+Math.imul(S,pe)|0)|0)+((8191&(r=(r=r+Math.imul(S,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((a=a+Math.imul(C,me)|0)+(r>>>13)|0)+(Me>>>26)|0,Me&=67108863,s=Math.imul(V,ae),r=(r=Math.imul(V,oe))+Math.imul(R,ae)|0,a=Math.imul(R,oe),s=s+Math.imul(q,de)|0,r=(r=r+Math.imul(q,ce)|0)+Math.imul(L,de)|0,a=a+Math.imul(L,ce)|0,s=s+Math.imul(F,le)|0,r=(r=r+Math.imul(F,ue)|0)+Math.imul(B,le)|0,a=a+Math.imul(B,ue)|0;var Ae=(c+(s=s+Math.imul(E,pe)|0)|0)+((8191&(r=(r=r+Math.imul(E,me)|0)+Math.imul(M,pe)|0))<<13)|0;c=((a=a+Math.imul(M,me)|0)+(r>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,s=Math.imul(V,de),r=(r=Math.imul(V,ce))+Math.imul(R,de)|0,a=Math.imul(R,ce),s=s+Math.imul(q,le)|0,r=(r=r+Math.imul(q,ue)|0)+Math.imul(L,le)|0,a=a+Math.imul(L,ue)|0;var Fe=(c+(s=s+Math.imul(F,pe)|0)|0)+((8191&(r=(r=r+Math.imul(F,me)|0)+Math.imul(B,pe)|0))<<13)|0;c=((a=a+Math.imul(B,me)|0)+(r>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,s=Math.imul(V,le),r=(r=Math.imul(V,ue))+Math.imul(R,le)|0,a=Math.imul(R,ue);var Be=(c+(s=s+Math.imul(q,pe)|0)|0)+((8191&(r=(r=r+Math.imul(q,me)|0)+Math.imul(L,pe)|0))<<13)|0;c=((a=a+Math.imul(L,me)|0)+(r>>>13)|0)+(Be>>>26)|0,Be&=67108863;var Pe=(c+(s=Math.imul(V,pe))|0)+((8191&(r=(r=Math.imul(V,me))+Math.imul(R,pe)|0))<<13)|0;return c=((a=Math.imul(R,me))+(r>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,d[0]=ye,d[1]=be,d[2]=ve,d[3]=ge,d[4]=we,d[5]=ke,d[6]=_e,d[7]=Te,d[8]=Oe,d[9]=xe,d[10]=Se,d[11]=Ce,d[12]=Ie,d[13]=Ee,d[14]=Me,d[15]=Ae,d[16]=Fe,d[17]=Be,d[18]=Pe,0!==c&&(d[19]=c,i.length++),i};function m(e,t,i){i.negative=t.negative^e.negative,i.length=e.length+t.length;for(var s=0,r=0,a=0;a<i.length-1;a++){var o=r;r=0;for(var n=67108863&s,d=Math.min(a,t.length-1),c=Math.max(0,a-e.length+1);c<=d;c++){var h=a-c,l=(0|e.words[h])*(0|t.words[c]),u=67108863&l;n=67108863&(u=u+n|0),r+=(o=(o=o+(l/67108864|0)|0)+(u>>>26)|0)>>>26,o&=67108863}i.words[a]=n,s=o,o=r}return 0!==s?i.words[a]=s:i.length--,i._strip()}function y(e,t,i){return m(e,t,i)}function b(e,t){this.x=e,this.y=t}Math.imul||(p=f),a.prototype.mulTo=function(e,t){var i=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):i<63?f(this,e,t):i<1024?m(this,e,t):y(this,e,t)},b.prototype.makeRBT=function(e){for(var t=new Array(e),i=a.prototype._countBits(e)-1,s=0;s<e;s++)t[s]=this.revBin(s,i,e);return t},b.prototype.revBin=function(e,t,i){if(0===e||e===i-1)return e;for(var s=0,r=0;r<t;r++)s|=(1&e)<<t-r-1,e>>=1;return s},b.prototype.permute=function(e,t,i,s,r,a){for(var o=0;o<a;o++)s[o]=t[e[o]],r[o]=i[e[o]]},b.prototype.transform=function(e,t,i,s,r,a){this.permute(a,e,t,i,s,r);for(var o=1;o<r;o<<=1)for(var n=o<<1,d=Math.cos(2*Math.PI/n),c=Math.sin(2*Math.PI/n),h=0;h<r;h+=n)for(var l=d,u=c,f=0;f<o;f++){var p=i[h+f],m=s[h+f],y=i[h+f+o],b=s[h+f+o],v=l*y-u*b;b=l*b+u*y,y=v,i[h+f]=p+y,s[h+f]=m+b,i[h+f+o]=p-y,s[h+f+o]=m-b,f!==n&&(v=d*l-c*u,u=d*u+c*l,l=v)}},b.prototype.guessLen13b=function(e,t){var i=1|Math.max(t,e),s=1&i,r=0;for(i=i/2|0;i;i>>>=1)r++;return 1<<r+1+s},b.prototype.conjugate=function(e,t,i){if(!(i<=1))for(var s=0;s<i/2;s++){var r=e[s];e[s]=e[i-s-1],e[i-s-1]=r,r=t[s],t[s]=-t[i-s-1],t[i-s-1]=-r}},b.prototype.normalize13b=function(e,t){for(var i=0,s=0;s<t/2;s++){var r=8192*Math.round(e[2*s+1]/t)+Math.round(e[2*s]/t)+i;e[s]=67108863&r,i=r<67108864?0:r/67108864|0}return e},b.prototype.convert13b=function(e,t,i,r){for(var a=0,o=0;o<t;o++)a+=0|e[o],i[2*o]=8191&a,a>>>=13,i[2*o+1]=8191&a,a>>>=13;for(o=2*t;o<r;++o)i[o]=0;s(0===a),s(0===(-8192&a))},b.prototype.stub=function(e){for(var t=new Array(e),i=0;i<e;i++)t[i]=0;return t},b.prototype.mulp=function(e,t,i){var s=2*this.guessLen13b(e.length,t.length),r=this.makeRBT(s),a=this.stub(s),o=new Array(s),n=new Array(s),d=new Array(s),c=new Array(s),h=new Array(s),l=new Array(s),u=i.words;u.length=s,this.convert13b(e.words,e.length,o,s),this.convert13b(t.words,t.length,c,s),this.transform(o,a,n,d,s,r),this.transform(c,a,h,l,s,r);for(var f=0;f<s;f++){var p=n[f]*h[f]-d[f]*l[f];d[f]=n[f]*l[f]+d[f]*h[f],n[f]=p}return this.conjugate(n,d,s),this.transform(n,d,u,a,s,r),this.conjugate(u,a,s),this.normalize13b(u,s),i.negative=e.negative^t.negative,i.length=e.length+t.length,i._strip()},a.prototype.mul=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},a.prototype.mulf=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),y(this,e,t)},a.prototype.imul=function(e){return this.clone().mulTo(e,this)},a.prototype.imuln=function(e){var t=e<0;t&&(e=-e),s("number"===typeof e),s(e<67108864);for(var i=0,r=0;r<this.length;r++){var a=(0|this.words[r])*e,o=(67108863&a)+(67108863&i);i>>=26,i+=a/67108864|0,i+=o>>>26,this.words[r]=67108863&o}return 0!==i&&(this.words[r]=i,this.length++),t?this.ineg():this},a.prototype.muln=function(e){return this.clone().imuln(e)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),i=0;i<t.length;i++){var s=i/26|0,r=i%26;t[i]=e.words[s]>>>r&1}return t}(e);if(0===t.length)return new a(1);for(var i=this,s=0;s<t.length&&0===t[s];s++,i=i.sqr());if(++s<t.length)for(var r=i.sqr();s<t.length;s++,r=r.sqr())0!==t[s]&&(i=i.mul(r));return i},a.prototype.iushln=function(e){s("number"===typeof e&&e>=0);var t,i=e%26,r=(e-i)/26,a=67108863>>>26-i<<26-i;if(0!==i){var o=0;for(t=0;t<this.length;t++){var n=this.words[t]&a,d=(0|this.words[t])-n<<i;this.words[t]=d|o,o=n>>>26-i}o&&(this.words[t]=o,this.length++)}if(0!==r){for(t=this.length-1;t>=0;t--)this.words[t+r]=this.words[t];for(t=0;t<r;t++)this.words[t]=0;this.length+=r}return this._strip()},a.prototype.ishln=function(e){return s(0===this.negative),this.iushln(e)},a.prototype.iushrn=function(e,t,i){var r;s("number"===typeof e&&e>=0),r=t?(t-t%26)/26:0;var a=e%26,o=Math.min((e-a)/26,this.length),n=67108863^67108863>>>a<<a,d=i;if(r-=o,r=Math.max(0,r),d){for(var c=0;c<o;c++)d.words[c]=this.words[c];d.length=o}if(0===o);else if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var h=0;for(c=this.length-1;c>=0&&(0!==h||c>=r);c--){var l=0|this.words[c];this.words[c]=h<<26-a|l>>>a,h=l&n}return d&&0!==h&&(d.words[d.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(e,t,i){return s(0===this.negative),this.iushrn(e,t,i)},a.prototype.shln=function(e){return this.clone().ishln(e)},a.prototype.ushln=function(e){return this.clone().iushln(e)},a.prototype.shrn=function(e){return this.clone().ishrn(e)},a.prototype.ushrn=function(e){return this.clone().iushrn(e)},a.prototype.testn=function(e){s("number"===typeof e&&e>=0);var t=e%26,i=(e-t)/26,r=1<<t;return!(this.length<=i)&&!!(this.words[i]&r)},a.prototype.imaskn=function(e){s("number"===typeof e&&e>=0);var t=e%26,i=(e-t)/26;if(s(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==t&&i++,this.length=Math.min(i,this.length),0!==t){var r=67108863^67108863>>>t<<t;this.words[this.length-1]&=r}return this._strip()},a.prototype.maskn=function(e){return this.clone().imaskn(e)},a.prototype.iaddn=function(e){return s("number"===typeof e),s(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},a.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},a.prototype.isubn=function(e){if(s("number"===typeof e),s(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},a.prototype.addn=function(e){return this.clone().iaddn(e)},a.prototype.subn=function(e){return this.clone().isubn(e)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(e,t,i){var r,a,o=e.length+i;this._expand(o);var n=0;for(r=0;r<e.length;r++){a=(0|this.words[r+i])+n;var d=(0|e.words[r])*t;n=((a-=67108863&d)>>26)-(d/67108864|0),this.words[r+i]=67108863&a}for(;r<this.length-i;r++)n=(a=(0|this.words[r+i])+n)>>26,this.words[r+i]=67108863&a;if(0===n)return this._strip();for(s(-1===n),n=0,r=0;r<this.length;r++)n=(a=-(0|this.words[r])+n)>>26,this.words[r]=67108863&a;return this.negative=1,this._strip()},a.prototype._wordDiv=function(e,t){var i=(this.length,e.length),s=this.clone(),r=e,o=0|r.words[r.length-1];0!==(i=26-this._countBits(o))&&(r=r.ushln(i),s.iushln(i),o=0|r.words[r.length-1]);var n,d=s.length-r.length;if("mod"!==t){(n=new a(null)).length=d+1,n.words=new Array(n.length);for(var c=0;c<n.length;c++)n.words[c]=0}var h=s.clone()._ishlnsubmul(r,1,d);0===h.negative&&(s=h,n&&(n.words[d]=1));for(var l=d-1;l>=0;l--){var u=67108864*(0|s.words[r.length+l])+(0|s.words[r.length+l-1]);for(u=Math.min(u/o|0,67108863),s._ishlnsubmul(r,u,l);0!==s.negative;)u--,s.negative=0,s._ishlnsubmul(r,1,l),s.isZero()||(s.negative^=1);n&&(n.words[l]=u)}return n&&n._strip(),s._strip(),"div"!==t&&0!==i&&s.iushrn(i),{div:n||null,mod:s}},a.prototype.divmod=function(e,t,i){return s(!e.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===e.negative?(n=this.neg().divmod(e,t),"mod"!==t&&(r=n.div.neg()),"div"!==t&&(o=n.mod.neg(),i&&0!==o.negative&&o.iadd(e)),{div:r,mod:o}):0===this.negative&&0!==e.negative?(n=this.divmod(e.neg(),t),"mod"!==t&&(r=n.div.neg()),{div:r,mod:n.mod}):0!==(this.negative&e.negative)?(n=this.neg().divmod(e.neg(),t),"div"!==t&&(o=n.mod.neg(),i&&0!==o.negative&&o.isub(e)),{div:n.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new a(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new a(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new a(this.modrn(e.words[0]))}:this._wordDiv(e,t);var r,o,n},a.prototype.div=function(e){return this.divmod(e,"div",!1).div},a.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},a.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},a.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var i=0!==t.div.negative?t.mod.isub(e):t.mod,s=e.ushrn(1),r=e.andln(1),a=i.cmp(s);return a<0||1===r&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},a.prototype.modrn=function(e){var t=e<0;t&&(e=-e),s(e<=67108863);for(var i=(1<<26)%e,r=0,a=this.length-1;a>=0;a--)r=(i*r+(0|this.words[a]))%e;return t?-r:r},a.prototype.modn=function(e){return this.modrn(e)},a.prototype.idivn=function(e){var t=e<0;t&&(e=-e),s(e<=67108863);for(var i=0,r=this.length-1;r>=0;r--){var a=(0|this.words[r])+67108864*i;this.words[r]=a/e|0,i=a%e}return this._strip(),t?this.ineg():this},a.prototype.divn=function(e){return this.clone().idivn(e)},a.prototype.egcd=function(e){s(0===e.negative),s(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r=new a(1),o=new a(0),n=new a(0),d=new a(1),c=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++c;for(var h=i.clone(),l=t.clone();!t.isZero();){for(var u=0,f=1;0===(t.words[0]&f)&&u<26;++u,f<<=1);if(u>0)for(t.iushrn(u);u-- >0;)(r.isOdd()||o.isOdd())&&(r.iadd(h),o.isub(l)),r.iushrn(1),o.iushrn(1);for(var p=0,m=1;0===(i.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(n.isOdd()||d.isOdd())&&(n.iadd(h),d.isub(l)),n.iushrn(1),d.iushrn(1);t.cmp(i)>=0?(t.isub(i),r.isub(n),o.isub(d)):(i.isub(t),n.isub(r),d.isub(o))}return{a:n,b:d,gcd:i.iushln(c)}},a.prototype._invmp=function(e){s(0===e.negative),s(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r,o=new a(1),n=new a(0),d=i.clone();t.cmpn(1)>0&&i.cmpn(1)>0;){for(var c=0,h=1;0===(t.words[0]&h)&&c<26;++c,h<<=1);if(c>0)for(t.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(d),o.iushrn(1);for(var l=0,u=1;0===(i.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(i.iushrn(l);l-- >0;)n.isOdd()&&n.iadd(d),n.iushrn(1);t.cmp(i)>=0?(t.isub(i),o.isub(n)):(i.isub(t),n.isub(o))}return(r=0===t.cmpn(1)?o:n).cmpn(0)<0&&r.iadd(e),r},a.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),i=e.clone();t.negative=0,i.negative=0;for(var s=0;t.isEven()&&i.isEven();s++)t.iushrn(1),i.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;i.isEven();)i.iushrn(1);var r=t.cmp(i);if(r<0){var a=t;t=i,i=a}else if(0===r||0===i.cmpn(1))break;t.isub(i)}return i.iushln(s)},a.prototype.invm=function(e){return this.egcd(e).a.umod(e)},a.prototype.isEven=function(){return 0===(1&this.words[0])},a.prototype.isOdd=function(){return 1===(1&this.words[0])},a.prototype.andln=function(e){return this.words[0]&e},a.prototype.bincn=function(e){s("number"===typeof e);var t=e%26,i=(e-t)/26,r=1<<t;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var a=r,o=i;0!==a&&o<this.length;o++){var n=0|this.words[o];a=(n+=a)>>>26,n&=67108863,this.words[o]=n}return 0!==a&&(this.words[o]=a,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this._strip(),this.length>1)t=1;else{i&&(e=-e),s(e<=67108863,"Number is too big");var r=0|this.words[0];t=r===e?0:r<e?-1:1}return 0!==this.negative?0|-t:t},a.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},a.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,i=this.length-1;i>=0;i--){var s=0|this.words[i],r=0|e.words[i];if(s!==r){s<r?t=-1:s>r&&(t=1);break}}return t},a.prototype.gtn=function(e){return 1===this.cmpn(e)},a.prototype.gt=function(e){return 1===this.cmp(e)},a.prototype.gten=function(e){return this.cmpn(e)>=0},a.prototype.gte=function(e){return this.cmp(e)>=0},a.prototype.ltn=function(e){return-1===this.cmpn(e)},a.prototype.lt=function(e){return-1===this.cmp(e)},a.prototype.lten=function(e){return this.cmpn(e)<=0},a.prototype.lte=function(e){return this.cmp(e)<=0},a.prototype.eqn=function(e){return 0===this.cmpn(e)},a.prototype.eq=function(e){return 0===this.cmp(e)},a.red=function(e){return new O(e)},a.prototype.toRed=function(e){return s(!this.red,"Already a number in reduction context"),s(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},a.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(e){return this.red=e,this},a.prototype.forceRed=function(e){return s(!this.red,"Already a number in reduction context"),this._forceRed(e)},a.prototype.redAdd=function(e){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},a.prototype.redIAdd=function(e){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},a.prototype.redSub=function(e){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},a.prototype.redISub=function(e){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},a.prototype.redShl=function(e){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},a.prototype.redMul=function(e){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},a.prototype.redIMul=function(e){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},a.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(e){return s(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var v={k256:null,p224:null,p192:null,p25519:null};function g(e,t){this.name=e,this.p=new a(t,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function w(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function k(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function T(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function O(e){if("string"===typeof e){var t=a._prime(e);this.m=t.p,this.prime=t}else s(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function x(e){O.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var e=new a(null);return e.words=new Array(Math.ceil(this.n/13)),e},g.prototype.ireduce=function(e){var t,i=e;do{this.split(i,this.tmp),t=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(t>this.n);var s=t<this.n?-1:i.ucmp(this.p);return 0===s?(i.words[0]=0,i.length=1):s>0?i.isub(this.p):i._strip(),i},g.prototype.split=function(e,t){e.iushrn(this.n,0,t)},g.prototype.imulK=function(e){return e.imul(this.k)},r(w,g),w.prototype.split=function(e,t){for(var i=Math.min(e.length,9),s=0;s<i;s++)t.words[s]=e.words[s];if(t.length=i,e.length<=9)return e.words[0]=0,void(e.length=1);var r=e.words[9];for(t.words[t.length++]=4194303&r,s=10;s<e.length;s++){var a=0|e.words[s];e.words[s-10]=(4194303&a)<<4|r>>>22,r=a}r>>>=22,e.words[s-10]=r,0===r&&e.length>10?e.length-=10:e.length-=9},w.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,i=0;i<e.length;i++){var s=0|e.words[i];t+=977*s,e.words[i]=67108863&t,t=64*s+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(k,g),r(_,g),r(T,g),T.prototype.imulK=function(e){for(var t=0,i=0;i<e.length;i++){var s=19*(0|e.words[i])+t,r=67108863&s;s>>>=26,e.words[i]=r,t=s}return 0!==t&&(e.words[e.length++]=t),e},a._prime=function(e){if(v[e])return v[e];var t;if("k256"===e)t=new w;else if("p224"===e)t=new k;else if("p192"===e)t=new _;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new T}return v[e]=t,t},O.prototype._verify1=function(e){s(0===e.negative,"red works only with positives"),s(e.red,"red works only with red numbers")},O.prototype._verify2=function(e,t){s(0===(e.negative|t.negative),"red works only with positives"),s(e.red&&e.red===t.red,"red works only with red numbers")},O.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(e.umod(this.m)._forceRed(this)._move(e),e)},O.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},O.prototype.add=function(e,t){this._verify2(e,t);var i=e.add(t);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},O.prototype.iadd=function(e,t){this._verify2(e,t);var i=e.iadd(t);return i.cmp(this.m)>=0&&i.isub(this.m),i},O.prototype.sub=function(e,t){this._verify2(e,t);var i=e.sub(t);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},O.prototype.isub=function(e,t){this._verify2(e,t);var i=e.isub(t);return i.cmpn(0)<0&&i.iadd(this.m),i},O.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},O.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},O.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},O.prototype.isqr=function(e){return this.imul(e,e.clone())},O.prototype.sqr=function(e){return this.mul(e,e)},O.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(s(t%2===1),3===t){var i=this.m.add(new a(1)).iushrn(2);return this.pow(e,i)}for(var r=this.m.subn(1),o=0;!r.isZero()&&0===r.andln(1);)o++,r.iushrn(1);s(!r.isZero());var n=new a(1).toRed(this),d=n.redNeg(),c=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new a(2*h*h).toRed(this);0!==this.pow(h,c).cmp(d);)h.redIAdd(d);for(var l=this.pow(h,r),u=this.pow(e,r.addn(1).iushrn(1)),f=this.pow(e,r),p=o;0!==f.cmp(n);){for(var m=f,y=0;0!==m.cmp(n);y++)m=m.redSqr();s(y<p);var b=this.pow(l,new a(1).iushln(p-y-1));u=u.redMul(b),l=b.redSqr(),f=f.redMul(l),p=y}return u},O.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},O.prototype.pow=function(e,t){if(t.isZero())return new a(1).toRed(this);if(0===t.cmpn(1))return e.clone();var i=new Array(16);i[0]=new a(1).toRed(this),i[1]=e;for(var s=2;s<i.length;s++)i[s]=this.mul(i[s-1],e);var r=i[0],o=0,n=0,d=t.bitLength()%26;for(0===d&&(d=26),s=t.length-1;s>=0;s--){for(var c=t.words[s],h=d-1;h>=0;h--){var l=c>>h&1;r!==i[0]&&(r=this.sqr(r)),0!==l||0!==o?(o<<=1,o|=l,(4===++n||0===s&&0===h)&&(r=this.mul(r,i[o]),n=0,o=0)):n=0}d=26}return r},O.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},O.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},a.mont=function(e){return new x(e)},r(x,O),x.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},x.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},x.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var i=e.imul(t),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(s).iushrn(this.shift),a=r;return r.cmp(this.m)>=0?a=r.isub(this.m):r.cmpn(0)<0&&(a=r.iadd(this.m)),a._forceRed(this)},x.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new a(0)._forceRed(this);var i=e.mul(t),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(s).iushrn(this.shift),o=r;return r.cmp(this.m)>=0?o=r.isub(this.m):r.cmpn(0)<0&&(o=r.iadd(this.m)),o._forceRed(this)},x.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,i("RoC8")(e))},twX1:function(e,t){e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},uH1V:function(e,t,i){var s=i("ciOl"),r=i("YrLq"),a=i("uIec");for(var o in e.exports={Reader:a},r)r.hasOwnProperty(o)&&(e.exports[o]=r[o]);for(var n in s)s.hasOwnProperty(n)&&(e.exports[n]=s[n])},uIec:function(e,t,i){(function(t){var s=i("ZERR"),r=i("YrLq"),a=i("ciOl").newInvalidAsn1Error;function o(e){if(!e||!t.isBuffer(e))throw new TypeError("data must be a node Buffer");this._buf=e,this._size=e.length,this._len=0,this._offset=0}Object.defineProperty(o.prototype,"length",{enumerable:!0,get:function(){return this._len}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){return this._offset}}),Object.defineProperty(o.prototype,"remain",{get:function(){return this._size-this._offset}}),Object.defineProperty(o.prototype,"buffer",{get:function(){return this._buf.slice(this._offset)}}),o.prototype.readByte=function(e){if(this._size-this._offset<1)return null;var t=255&this._buf[this._offset];return e||(this._offset+=1),t},o.prototype.peek=function(){return this.readByte(!0)},o.prototype.readLength=function(e){if(void 0===e&&(e=this._offset),e>=this._size)return null;var t=255&this._buf[e++];if(null===t)return null;if(128===(128&t)){if(0===(t&=127))throw a("Indefinite length not supported");if(t>4)throw a("encoding too long");if(this._size-e<t)return null;this._len=0;for(var i=0;i<t;i++)this._len=(this._len<<8)+(255&this._buf[e++])}else this._len=t;return e},o.prototype.readSequence=function(e){var t=this.peek();if(null===t)return null;if(void 0!==e&&e!==t)throw a("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var i=this.readLength(this._offset+1);return null===i?null:(this._offset=i,t)},o.prototype.readInt=function(){return this._readTag(r.Integer)},o.prototype.readBoolean=function(){return 0!==this._readTag(r.Boolean)},o.prototype.readEnumeration=function(){return this._readTag(r.Enumeration)},o.prototype.readString=function(e,i){e||(e=r.OctetString);var s=this.peek();if(null===s)return null;if(s!==e)throw a("Expected 0x"+e.toString(16)+": got 0x"+s.toString(16));var o=this.readLength(this._offset+1);if(null===o)return null;if(this.length>this._size-o)return null;if(this._offset=o,0===this.length)return i?t.alloc(0):"";var n=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,i?n:n.toString("utf8")},o.prototype.readOID=function(e){e||(e=r.OID);var t=this.readString(e,!0);if(null===t)return null;for(var i=[],s=0,a=0;a<t.length;a++){var o=255&t[a];s<<=7,s+=127&o,0===(128&o)&&(i.push(s),s=0)}return s=i.shift(),i.unshift(s%40),i.unshift(s/40>>0),i.join(".")},o.prototype._readTag=function(e){s.ok(void 0!==e);var t=this.peek();if(null===t)return null;if(t!==e)throw a("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var i=this.readLength(this._offset+1);if(null===i)return null;if(this.length>4)throw a("Integer too long: "+this.length);if(this.length>this._size-i)return null;this._offset=i;for(var r=this._buf[this._offset],o=0,n=0;n<this.length;n++)o<<=8,o|=255&this._buf[this._offset++];return 128===(128&r)&&4!==n&&(o-=1<<8*n),o>>0},e.exports=o}).call(this,i("zkTx").Buffer)},uS8B:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"foxbit",name:"FoxBit",countries:["BR"],has:{CORS:!1,createMarketOrder:!1},rateLimit:1e3,version:"v1",urls:{logo:"https://user-images.githubusercontent.com/1294454/27991413-11b40d42-647f-11e7-91ee-78ced874dd09.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://foxbit.com.br/exchange",doc:"https://foxbit.com.br/api/"},comment:"Blinktrade API",api:{public:{get:["{currency}/ticker","{currency}/orderbook","{currency}/trades"]},private:{post:["D","F","U2","U4","U6","U18","U24","U26","U30","U34","U70"]}},markets:{"BTC/VEF":{id:"BTCVEF",symbol:"BTC/VEF",base:"BTC",quote:"VEF",brokerId:1,broker:"SurBitcoin"},"BTC/VND":{id:"BTCVND",symbol:"BTC/VND",base:"BTC",quote:"VND",brokerId:3,broker:"VBTC"},"BTC/BRL":{id:"BTCBRL",symbol:"BTC/BRL",base:"BTC",quote:"BRL",brokerId:4,broker:"FoxBit"},"BTC/PKR":{id:"BTCPKR",symbol:"BTC/PKR",base:"BTC",quote:"PKR",brokerId:8,broker:"UrduBit"},"BTC/CLP":{id:"BTCCLP",symbol:"BTC/CLP",base:"BTC",quote:"CLP",brokerId:9,broker:"ChileBit"}},options:{brokerId:"4"}})}async fetchBalance(e={}){await this.loadMarkets();const t={BalanceReqID:this.nonce()},i=await this.privatePostU2(this.extend(t,e)),s=this.safeValue(i.Responses,this.options.brokerId),r={info:i};if(void 0!==s){const e=Object.keys(this.currencies_by_id);for(let t=0;t<e.length;t++){const i=e[t],a=this.safeCurrencyCode(i);if(i in s){const e=this.account();let t=this.safeFloat(s,i+"_locked");void 0!==t&&(t*=1e-8);let o=this.safeFloat(s,i);void 0!==o&&(o*=1e-8),e.used=t,e.total=o,r[a]=e}}}return this.parseBalance(r)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={currency:s.quote,crypto_currency:s.base},a=await this.publicGetCurrencyOrderbook(this.extend(r,i));return this.parseOrderBook(a)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={currency:i.quote,crypto_currency:i.base},r=await this.publicGetCurrencyTicker(this.extend(s,t)),a=this.milliseconds(),o="vol_"+i.quote.toLowerCase(),n=this.safeFloat(r,"last");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(r,"high"),low:this.safeFloat(r,"low"),bid:this.safeFloat(r,"buy"),bidVolume:void 0,ask:this.safeFloat(r,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(r,"vol"),quoteVolume:this.safeFloat(r,o),info:r}}parseTrade(e,t){const i=this.safeTimestamp(e,"date"),s=this.safeString(e,"tid");let r=void 0;void 0!==t&&(r=t.symbol);const a=this.safeString(e,"side"),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount");let d=void 0;return void 0!==o&&void 0!==n&&(d=n*o),{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:r,type:void 0,side:a,order:void 0,takerOrMaker:void 0,price:o,amount:n,cost:d,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={currency:r.quote,crypto_currency:r.base},o=await this.publicGetCurrencyTrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,a,o={}){if(await this.loadMarkets(),"market"===t)throw new r(this.id+" allows limit orders only");const n=this.market(e),d="buy"===i?"1":"2",c={ClOrdID:this.nonce(),Symbol:n.id,Side:d,OrdType:"2",Price:a,OrderQty:s,BrokerID:n.brokerId},h=await this.privatePostD(this.extend(c,o));return{info:h,id:this.indexBy(h.Responses,"MsgType")[8].OrderID}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostF(this.extend({ClOrdID:e},i))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();const t=this.nonce().toString(),i=this.extend({MsgType:e},n);a=this.json(i),r={APIKey:this.apiKey,Nonce:t,Signature:this.hmac(this.encode(t),this.encode(this.secret)),"Content-Type":"application/json"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){const n=await this.fetch2(e,t,i,s,a,o);if("Status"in n&&200!==n.Status)throw new r(this.id+" "+this.json(n));return n}}},ubNZ:function(e,t,i){"use strict";const s=i("OjXq"),{BadSymbol:r,ExchangeError:a,ExchangeNotAvailable:o,AuthenticationError:n,InvalidOrder:d,InsufficientFunds:c,OrderNotFound:h,DDoSProtection:l,PermissionDenied:u,AddressPending:f,OnMaintenance:p}=i("ucJe"),{TRUNCATE:m,DECIMAL_PLACES:y}=i("rwG2");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bittrex",name:"Bittrex",countries:["US"],version:"v1.1",rateLimit:1500,certified:!0,pro:!0,has:{CORS:!1,createMarketOrder:!0,fetchDepositAddress:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchMyTrades:"emulated",fetchOHLCV:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchTickers:!0,withdraw:!0,fetchDeposits:!0,fetchWithdrawals:!0,fetchTransactions:!1},timeframes:{"1m":"oneMin","5m":"fiveMin","30m":"thirtyMin","1h":"hour","1d":"day"},hostname:"bittrex.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/27766352-cf0b3c26-5ed5-11e7-82b7-f3826b7a97d8.jpg",api:{public:"https://{hostname}/api",account:"https://{hostname}/api",market:"https://{hostname}/api",v2:"https://{hostname}/api/v2.0/pub",v3:"https://api.bittrex.com/v3",v3public:"https://api.bittrex.com/v3"},www:"https://bittrex.com",doc:["https://bittrex.github.io/api/","https://bittrex.github.io/api/v3","https://www.npmjs.com/package/bittrex-node"],fees:["https://bittrex.zendesk.com/hc/en-us/articles/115003684371-BITTREX-SERVICE-FEES-AND-WITHDRAWAL-LIMITATIONS","https://bittrex.zendesk.com/hc/en-us/articles/115000199651-What-fees-does-Bittrex-charge-"],referral:"https://bittrex.com/Account/Register?referralCode=1ZE-G0G-M3B"},api:{v3:{get:["account","addresses","addresses/{currencySymbol}","balances","balances/{currencySymbol}","currencies","currencies/{symbol}","deposits/open","deposits/closed","deposits/ByTxId/{txId}","deposits/{depositId}","orders/closed","orders/open","orders/{orderId}","ping","subaccounts/{subaccountId}","subaccounts","withdrawals/open","withdrawals/closed","withdrawals/ByTxId/{txId}","withdrawals/{withdrawalId}"],post:["addresses","orders","subaccounts","withdrawals"],delete:["orders/{orderId}","withdrawals/{withdrawalId}"]},v3public:{get:["markets","markets/summaries","markets/{marketSymbol}","markets/{marketSymbol}/summary","markets/{marketSymbol}/orderbook","markets/{marketSymbol}/trades","markets/{marketSymbol}/ticker","markets/{marketSymbol}/candles"]},v2:{get:["currencies/GetBTCPrice","currencies/GetWalletHealth","general/GetLatestAlert","market/GetTicks","market/GetLatestTick","Markets/GetMarketSummaries","market/GetLatestTick"]},public:{get:["currencies","markethistory","markets","marketsummaries","marketsummary","orderbook","ticker"]},account:{get:["balance","balances","depositaddress","deposithistory","order","orders","orderhistory","withdrawalhistory","withdraw"]},market:{get:["buylimit","buymarket","cancel","openorders","selllimit","sellmarket"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.0025,taker:.0025},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:5e-4,LTC:.01,DOGE:2,VTC:.02,PPC:.02,FTC:.2,RDD:2,NXT:2,DASH:.05,POT:.002,BLK:.02,EMC2:.2,XMY:.2,GLD:2e-4,SLR:.2,GRS:.2},deposit:{BTC:0,LTC:0,DOGE:0,VTC:0,PPC:0,FTC:0,RDD:0,NXT:0,DASH:0,POT:0,BLK:0,EMC2:0,XMY:0,GLD:0,SLR:0,GRS:0}}},exceptions:{exact:{APISIGN_NOT_PROVIDED:n,INVALID_SIGNATURE:n,INVALID_CURRENCY:a,INVALID_PERMISSION:n,INSUFFICIENT_FUNDS:c,INVALID_CEILING_MARKET_BUY:d,INVALID_FIAT_ACCOUNT:d,INVALID_ORDER_TYPE:d,QUANTITY_NOT_PROVIDED:d,MIN_TRADE_REQUIREMENT_NOT_MET:d,ORDER_NOT_OPEN:h,INVALID_ORDER:d,UUID_INVALID:h,RATE_NOT_PROVIDED:d,INVALID_MARKET:r,WHITELIST_VIOLATION_IP:u,DUST_TRADE_DISALLOWED_MIN_VALUE:d,RESTRICTED_MARKET:r,"We are down for scheduled maintenance, but we\u2019ll be back up shortly.":p},broad:{throttled:l,problem:o}},options:{parseOrderStatus:!1,hasAlreadyAuthenticatedSuccessfully:!1,symbolSeparator:"-",tag:{NXT:!0,CRYPTO_NOTE_PAYMENTID:!0,BITSHAREX:!0,RIPPLE:!0,NEM:!0,STELLAR:!0,STEEM:!0},subaccountId:void 0,fetchClosedOrdersMethod:"fetch_closed_orders_v3",fetchClosedOrdersFilterBySince:!0},commonCurrencies:{BITS:"SWIFT"}})}costToPrecision(e,t){return this.decimalToPrecision(t,m,this.markets[e].precision.price,y)}feeToPrecision(e,t){return this.decimalToPrecision(t,m,this.markets[e].precision.price,y)}async fetchMarkets(e={}){const t=await this.v3publicGetMarkets(e),i=[];for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"baseCurrencySymbol"),a=this.safeString(e,"quoteCurrencySymbol"),o=a+this.options.symbolSeparator+r,n=this.safeCurrencyCode(r),d=this.safeCurrencyCode(a),c=n+"/"+d,h={amount:8,price:this.safeInteger(e,"precision",8)},l="ONLINE"===this.safeString(e,"status");i.push({id:o,symbol:c,base:n,quote:d,baseId:r,quoteId:a,active:l,info:e,precision:h,limits:{amount:{min:this.safeFloat(e,"minTradeSize"),max:void 0},price:{min:Math.pow(10,-h.price),max:void 0}}})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.accountGetBalances(e),i=this.safeValue(t,"result"),s={info:i},r=this.indexBy(i,"Currency"),a=Object.keys(r);for(let o=0;o<a.length;o++){const e=a[o],t=this.safeCurrencyCode(e),i=this.account(),n=r[e];i.free=this.safeFloat(n,"Available"),i.total=this.safeFloat(n,"Balance"),s[t]=i}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.marketId(e),type:"both"},r=await this.publicGetOrderbook(this.extend(s,i));let a=r.result;return"type"in i&&("buy"===i.type?a={buy:r.result,sell:[]}:"sell"===i.type&&(a={buy:[],sell:r.result})),this.parseOrderBook(a,void 0,"buy","sell","Rate","Quantity")}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i=this.safeValue(t,"result",[]),s={};for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"Currency"),a=this.safeCurrencyCode(t),o=8,n=this.safeValue(e,"BaseAddress"),d=this.safeFloat(e,"TxFee");s[a]={id:t,code:a,address:n,info:e,type:this.safeString(e,"CoinType"),name:this.safeString(e,"CurrencyLong"),active:this.safeValue(e,"IsActive"),fee:d,precision:o,limits:{amount:{min:Math.pow(10,-o),max:void 0},price:{min:Math.pow(10,-o),max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:d,max:void 0}}}}return s}parseTicker(e,t){const i=this.parse8601(this.safeString(e,"TimeStamp"));let s=void 0;const r=this.safeString(e,"MarketName");void 0!==r&&(r in this.markets_by_id?t=this.markets_by_id[r]:s=this.parseSymbol(r)),void 0===s&&void 0!==t&&(s=t.symbol);const a=this.safeFloat(e,"PrevDay"),o=this.safeFloat(e,"Last");let n=void 0,d=void 0;return void 0!==o&&void 0!==a&&(n=o-a,a>0&&(d=n/a*100)),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"High"),low:this.safeFloat(e,"Low"),bid:this.safeFloat(e,"Bid"),bidVolume:void 0,ask:this.safeFloat(e,"Ask"),askVolume:void 0,vwap:void 0,open:a,close:o,last:o,previousClose:void 0,change:n,percentage:d,average:void 0,baseVolume:this.safeFloat(e,"Volume"),quoteVolume:this.safeFloat(e,"BaseVolume"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetMarketsummaries(t),s=this.safeValue(i,"result"),r=[];for(let a=0;a<s.length;a++){const e=this.parseTicker(s[a]);r.push(e)}return this.filterByArray(r,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},r=(await this.publicGetMarketsummary(this.extend(s,t))).result[0];return this.parseTicker(r,i)}parseTrade(e,t){const i=this.parse8601(e.TimeStamp+"+00:00");let s=void 0;"BUY"===e.OrderType?s="buy":"SELL"===e.OrderType&&(s="sell");const r=this.safeString2(e,"Id","ID");let a=void 0;void 0!==t&&(a=t.symbol);let o=void 0;const n=this.safeFloat(e,"Price"),d=this.safeFloat(e,"Quantity");return void 0!==d&&void 0!==n&&(o=n*d),{info:e,timestamp:i,datetime:this.iso8601(i),symbol:a,id:r,order:void 0,type:"limit",takerOrMaker:void 0,side:s,price:n,amount:d,cost:o,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),o={market:r.id},n=await this.publicGetMarkethistory(this.extend(o,s));if("result"in n&&void 0!==n.result)return this.parseTrades(n.result,r,t,i);throw new a(this.id+" fetchTrades() returned undefined response")}parseOHLCV(e,t,i="1d",s,r){return[this.parse8601(e.T+"+00:00"),e.O,e.H,e.L,e.C,e.V]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={tickInterval:this.timeframes[t],marketName:a.id},n=await this.v2GetMarketGetTicks(this.extend(o,r));if("result"in n&&n.result)return this.parseOHLCVs(n.result,a,t,i,s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.market(e),r.market=a.id);const o=await this.marketGetOpenorders(this.extend(r,s)),n=this.safeValue(o,"result",[]),d=this.parseOrders(n,a,t,i);return this.filterBySymbol(d,e)}async createOrder(e,t,i,s,r,a={}){const o=t.toUpperCase(),n="MARKET"===o||"CEILING_LIMIT"===o||"CEILING_MARKET"===o?"create_order_v3":"create_order_v1",d=this.safeValue(this.options,"createOrderMethod",n);return await this[d](e,t,i,s,r,a)}async createOrderV3(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),n=t.toUpperCase(),d={marketSymbol:o.baseId+"-"+o.quoteId,direction:i.toUpperCase(),type:n};"CEILING_LIMIT"===n||"CEILING_MARKET"===n?(d.ceiling=this.priceToPrecision(e,r),d.timeInForce="IMMEDIATE_OR_CANCEL"):(d.quantity=this.amountToPrecision(e,s),"LIMIT"===n?(d.limit=this.priceToPrecision(e,r),d.timeInForce="GOOD_TIL_CANCELLED"):d.timeInForce="IMMEDIATE_OR_CANCEL");const c=await this.v3PostOrders(this.extend(d,a));return this.parseOrderV3(c,o)}async createOrderV1(e,t,i,s,r,o={}){if("limit"!==t)throw new a(this.id+" allows limit orders only");await this.loadMarkets();const n=this.market(e),d="marketGet"+this.capitalize(i)+t,c={market:n.id,quantity:this.amountToPrecision(e,s),rate:this.priceToPrecision(e,r)},h=await this[d](this.extend(c,o)),l=this.getOrderIdField();return{info:h,id:this.safeString(h.result,l),symbol:e,type:t,side:i,status:"open"}}getOrderIdField(){return"uuid"}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={};s[this.getOrderIdField()]=e;const r=await this.marketGetCancel(this.extend(s,i)),a=this.safeValue(r,"result",{});return this.extend(this.parseOrder(a),{id:e,info:r,status:"canceled"})}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.currency(e),r.currency=a.id);const o=await this.accountGetDeposithistory(this.extend(r,s));return this.parseTransactions(o.result,a,void 0,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.currency(e),r.currency=a.id);const o=await this.accountGetWithdrawalhistory(this.extend(r,s));return this.parseTransactions(o.result,a,t,i)}parseTransaction(e,t){const i=this.safeString2(e,"Id","PaymentUuid"),s=this.safeFloat(e,"Amount"),r=this.safeString2(e,"CryptoAddress","Address"),a=this.safeString(e,"TxId"),o=this.parse8601(this.safeString(e,"LastUpdated")),n=this.parse8601(this.safeString(e,"Opened")),d=n||o,c=void 0===n?"deposit":"withdrawal",h=this.safeString(e,"Currency"),l=this.safeCurrencyCode(h,t);let u="pending";if("deposit"===c)u="ok";else{const t=this.safeValue(e,"Authorized",!1),i=this.safeValue(e,"PendingPayment",!1),s=this.safeValue(e,"Canceled",!1);this.safeValue(e,"InvalidAddress",!1)?u="failed":s?u="canceled":i?u="pending":t&&void 0!==a&&(u="ok")}let f=this.safeFloat(e,"TxCost");return void 0===f&&"deposit"===c&&(f=0),{info:e,id:i,currency:l,amount:s,address:r,tag:void 0,status:u,type:c,updated:o,txid:a,timestamp:d,datetime:this.iso8601(d),fee:{currency:l,cost:f}}}parseSymbol(e){const[t,i]=e.split(this.options.symbolSeparator);return this.safeCurrencyCode(i)+"/"+this.safeCurrencyCode(t)}parseOrder(e,t){return"marketSymbol"in e?this.parseOrderV3(e,t):this.parseOrderV2(e,t)}parseOrders(e,t,i,s,r={}){return this.options.fetchClosedOrdersFilterBySince?super.parseOrders(e,t,i,s,r):super.parseOrders(e,t,void 0,s,r)}parseOrderStatus(e){return this.safeString({CLOSED:"closed",OPEN:"open",CANCELLED:"canceled",CANCELED:"canceled"},e,e)}parseOrderV3(e,t){const i=this.safeString(e,"marketSymbol");let s=void 0,r=void 0;if(void 0!==i){const[e,t]=i.split("-"),a=this.safeCurrencyCode(e),o=this.safeCurrencyCode(t);s=a+"/"+o,r=o}const a=this.safeStringLower(e,"direction"),o=this.safeString(e,"createdAt"),n=this.safeString(e,"updatedAt"),d=this.safeString(e,"closedAt");let c=void 0;void 0!==d?c=this.parse8601(d):n&&(c=this.parse8601(n));const h=this.parse8601(o),l=this.safeStringLower(e,"type"),u=this.safeFloat(e,"quantity"),f=this.safeFloat(e,"limit"),p=this.safeFloat(e,"fillQuantity"),m=this.safeFloat(e,"commission"),y=this.safeFloat(e,"proceeds"),b=this.safeStringLower(e,"status");let v=void 0,g=void 0;return void 0!==p&&(void 0!==y&&(p>0?v=y/p:0===y&&(v=0)),void 0!==u&&(g=u-p)),{id:this.safeString(e,"id"),clientOrderId:void 0,timestamp:h,datetime:this.iso8601(h),lastTradeTimestamp:c,symbol:s,type:l,side:a,price:f,cost:y,average:v,amount:u,filled:p,remaining:g,status:b,fee:{cost:m,currency:r},info:e}}parseOrderV2(e,t){let i=this.safeString2(e,"OrderType","Type");const s="LIMIT_SELL"===i||"SELL"===i;("LIMIT_BUY"===i||"BUY"===i)&&(i="buy"),s&&(i="sell");let r=void 0;"Opened"in e&&e.Opened&&(r="open"),"Closed"in e&&e.Closed&&(r="closed"),"CancelInitiated"in e&&e.CancelInitiated&&(r="canceled"),"Status"in e&&this.options.parseOrderStatus&&(r=this.parseOrderStatus(this.safeString(e,"Status")));let a=void 0;if("Exchange"in e){const i=this.safeString(e,"Exchange");void 0!==i&&(a=i in this.markets_by_id?(t=this.markets_by_id[i]).symbol:this.parseSymbol(i))}else void 0!==t&&(a=t.symbol);let o=void 0;const n=this.safeString(e,"Opened");void 0!==n&&(o=this.parse8601(n+"+00:00"));const d=this.safeString(e,"Created");void 0!==d&&(o=this.parse8601(d+"+00:00"));let c=void 0;const h=this.safeString(e,"TimeStamp");void 0!==h&&(c=this.parse8601(h+"+00:00"));const l=this.safeString(e,"Closed");void 0!==l&&(c=this.parse8601(l+"+00:00")),void 0===o&&(o=c);let u=void 0;const f=this.safeFloat2(e,"Commission","CommissionPaid");if(void 0!==f)if(u={cost:f},void 0!==t)u.currency=t.quote;else if(void 0!==a){const e=a.split("/")[1];u.currency=this.safeCurrencyCode(e)}let p=this.safeFloat(e,"Limit"),m=this.safeFloat(e,"Price");const y=this.safeFloat(e,"Quantity"),b=this.safeFloat(e,"QuantityRemaining");let v=void 0;void 0!==y&&void 0!==b&&(v=y-b,"closed"===r&&b>0&&(r="canceled")),m||p&&v&&(m=p*v),p||m&&v&&(p=m/v);const g=this.safeFloat(e,"PricePerUnit");return{info:e,id:this.safeString2(e,"OrderUuid","OrderId"),clientOrderId:void 0,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:c,symbol:a,type:"limit",side:i,price:p,cost:m,average:g,amount:y,filled:v,remaining:b,status:r,fee:u}}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=void 0;try{const t=this.getOrderIdField(),r={};r[t]=e,s=await this.accountGetOrder(this.extend(r,i))}catch(r){if(this.last_json_response){if("UUID_INVALID"===this.safeString(this.last_json_response,"message"))throw new h(this.id+" fetchOrder() error: "+this.last_http_response)}throw r}if(!s.result)throw new h(this.id+" order "+e+" not found");return this.parseOrder(s.result)}orderToTrade(e){const t=this.safeInteger2(e,"lastTradeTimestamp","timestamp");return{id:this.safeString(e,"id"),side:this.safeString(e,"side"),order:this.safeString(e,"id"),type:this.safeString(e,"type"),price:this.safeFloat(e,"average"),amount:this.safeFloat(e,"filled"),cost:this.safeFloat(e,"cost"),symbol:this.safeString(e,"symbol"),timestamp:t,datetime:this.iso8601(t),fee:this.safeValue(e,"fee"),info:e}}ordersToTrades(e){const t=[];for(let i=0;i<e.length;i++)t.push(this.orderToTrade(e[i]));return t}async fetchMyTrades(e,t,i,s={}){const r=await this.fetchClosedOrders(e,t,i,s);return this.ordersToTrades(r)}async fetchClosedOrders(e,t,i,s={}){const r=this.safeString(this.options,"fetchClosedOrdersMethod","fetch_closed_orders_v3");return await this[r](e,t,i,s)}async fetchClosedOrdersV2(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.market(e),r.market=a.id);const o=await this.accountGetOrderhistory(this.extend(r,s)),n=this.safeValue(o,"result",[]),d=this.parseOrders(n,a,t,i);return void 0!==e?this.filterBySymbol(d,e):d}async fetchClosedOrdersV3(e,t,i,s={}){await this.loadMarkets();const r={};void 0!==i&&(r.pageSize=i),void 0!==t&&(r.startDate=this.ymdhms(t,"T")+"Z");let a=void 0;void 0!==e&&(a=this.market(e),r.marketSymbol=a.base+"-"+a.quote);const o=await this.v3GetOrdersClosed(this.extend(r,s)),n=this.parseOrders(o,a,t,i);return void 0!==e?this.filterBySymbol(n,e):n}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currency:i.id},r=await this.accountGetDepositaddress(this.extend(s,t));let a=this.safeString(r.result,"Address");const o=this.safeString(r,"message");if(!a||"ADDRESS_GENERATING"===o)throw new f(this.id+" the address for "+e+" is being generated (pending, not ready yet, retry again later)");let n=void 0;return i.type in this.options.tag&&(n=a,a=i.address),this.checkAddress(a),{currency:e,address:a,tag:n,info:r}}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a={currency:this.currency(e).id,quantity:t,address:i};void 0!==s&&(a.paymentid=s);const o=await this.accountGetWithdraw(this.extend(a,r)),n=this.safeValue(o,"result",{});return{info:o,id:this.safeString(n,"uuid")}}sign(e,t="public",i="GET",s={},r,a){let o=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+"/";if("v2"!==t&&"v3"!==t&&"v3public"!==t&&(o+=this.version+"/"),"public"===t)o+=t+"/"+i.toLowerCase()+e,Object.keys(s).length&&(o+="?"+this.urlencode(s));else if("v3public"===t)o+=e,Object.keys(s).length&&(o+="?"+this.urlencode(s));else if("v2"===t)o+=e,Object.keys(s).length&&(o+="?"+this.urlencode(s));else if("v3"===t){o+=e;let t="";"POST"===i?t=a=this.json(s):Object.keys(s).length&&(o+="?"+this.rawencode(s));const n=this.hash(this.encode(t),"sha512","hex"),d=this.milliseconds().toString();let c=d+o+i+n;const h=this.safeValue(this.options,"subaccountId");void 0!==h&&(c+=h);const l=this.hmac(this.encode(c),this.encode(this.secret),"sha512");r={"Api-Key":this.apiKey,"Api-Timestamp":d,"Api-Content-Hash":n,"Api-Signature":l},void 0!==h&&(r["Api-Subaccount-Id"]=h),"POST"===i&&(r["Content-Type"]="application/json")}else{this.checkRequiredCredentials(),o+=t+"/",("account"===t&&"withdraw"!==e||"openorders"===e)&&(o+=i.toLowerCase());const a={apikey:this.apiKey},n=this.safeValue(this.options,"disableNonce");void 0!==n&&n||(a.nonce=this.nonce()),o+=e+"?"+this.urlencode(this.extend(a,s)),r={apisign:this.hmac(this.encode(o),this.encode(this.secret),"sha512")}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,o,d,c,u){if(void 0!==d&&"{"===o[0]){const e=this.id+" "+o;let t=this.safeValue(d,"success");if(void 0===t){const t=this.safeString(d,"code");return void(void 0!==t&&(this.throwExactlyMatchedException(this.exceptions.exact,t,e),void 0!==t&&this.throwBroadlyMatchedException(this.exceptions.broad,t,e)))}if("string"===typeof t&&(t="true"===t),!t){const t=this.safeString(d,"message");if("APIKEY_INVALID"===t)throw this.options.hasAlreadyAuthenticatedSuccessfully?new l(e):new n(e);if("INVALID_ORDER"===t){const e="cancel";if(i.indexOf(e)>=0){const e=i.split("?");if(e.length>1){const t=e[1].split("&"),i=t.length;let s=void 0;for(let e=0;e<i;e++){const i=t[e].split("=");if("uuid"===i[0]){s=i[1];break}}throw new h(void 0!==s?this.id+" cancelOrder "+s+" "+this.json(d):this.id+" cancelOrder "+this.json(d))}}}throw this.throwExactlyMatchedException(this.exceptions.exact,t,e),void 0!==t&&this.throwBroadlyMatchedException(this.exceptions.broad,t,e),new a(e)}}}async request(e,t="public",i="GET",s={},r,a){const o=await this.fetch2(e,t,i,s,r,a);return"account"!==t&&"market"!==t||(this.options.hasAlreadyAuthenticatedSuccessfully=!0),o}}},ucJe:function(e,t,i){"use strict";const s=i("hawN");e.exports=function e(t,i,s={}){for(const[r,a]of Object.entries(i)){const i=Object.assign(s,{[r]:class extends t{constructor(e){super(e),this.constructor=i,this.__proto__=i.prototype,this.name=r,this.message=e}}})[r];e(i,a,s)}return s}(Error,s)},uyLk:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ArgumentsRequired:a}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"luno",name:"luno",countries:["GB","SG","ZA"],rateLimit:1e3,version:"1",has:{CORS:!1,fetchTickers:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchTradingFee:!0,fetchTradingFees:!0},urls:{referral:"https://www.luno.com/invite/44893A",logo:"https://user-images.githubusercontent.com/1294454/27766607-8c1a69d8-5ede-11e7-930c-540b5eb9be24.jpg",api:"https://api.mybitx.com/api",www:"https://www.luno.com",doc:["https://www.luno.com/en/api","https://npmjs.org/package/bitx","https://github.com/bausmeier/node-bitx"]},api:{public:{get:["orderbook","orderbook_top","ticker","tickers","trades"]},private:{get:["accounts/{id}/pending","accounts/{id}/transactions","balance","fee_info","funding_address","listorders","listtrades","orders/{id}","quotes/{id}","withdrawals","withdrawals/{id}"],post:["accounts","postorder","marketorder","stoporder","funding_address","withdrawals","send","quotes","oauth2/grant"],put:["quotes/{id}"],delete:["quotes/{id}","withdrawals/{id}"]}}})}async fetchMarkets(e={}){const t=await this.publicGetTickers(e),i=[];for(let s=0;s<t.tickers.length;s++){const e=t.tickers[s],r=e.pair,a=r.slice(0,3),o=r.slice(3,6),n=this.safeCurrencyCode(a),d=this.safeCurrencyCode(o),c=n+"/"+d;i.push({id:r,symbol:c,base:n,quote:d,baseId:a,quoteId:o,info:e})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalance(e),i=this.safeValue(t,"balance",[]),s={info:t};for(let r=0;r<i.length;r++){const e=i[r],t=this.safeString(e,"asset"),a=this.safeCurrencyCode(t),o=this.safeFloat(e,"reserved"),n=this.safeFloat(e,"unconfirmed"),d=this.safeFloat(e,"balance"),c=this.account();c.used=this.sum(o,n),c.total=this.sum(d,n),s[a]=c}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s="publicGetOrderbook";void 0!==t&&t<=100&&(s+="Top");const r={pair:this.marketId(e)},a=await this[s](this.extend(r,i)),o=this.safeInteger(a,"timestamp");return this.parseOrderBook(a,o,"bids","asks","price","volume")}parseOrder(e,t){const i=this.safeInteger(e,"creation_timestamp"),s="PENDING"===e.state?"open":"closed",r="ASK"===e.type?"sell":"buy",a=this.safeString(e,"pair");let o=void 0;a in this.markets_by_id&&(t=this.markets_by_id[a]),void 0!==t&&(o=t.symbol);const n=this.safeFloat(e,"limit_price"),d=this.safeFloat(e,"limit_volume"),c=this.safeFloat(e,"fee_counter"),h=this.safeFloat(e,"fee_base"),l=this.safeFloat(e,"base"),u=this.safeFloat(e,"counter");let f=void 0;void 0!==d&&void 0!==l&&(f=Math.max(0,d-l));const p={currency:void 0};return c?(p.cost=c,void 0!==t&&(p.currency=t.quote)):(p.cost=h,void 0!==t&&(p.currency=t.base)),{id:this.safeString(e,"order_id"),clientOrderId:void 0,datetime:this.iso8601(i),timestamp:i,lastTradeTimestamp:void 0,status:s,symbol:o,type:void 0,side:r,price:n,amount:d,filled:l,cost:u,remaining:f,trades:void 0,fee:p,info:e}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privateGetOrdersId(this.extend(s,i));return this.parseOrder(r)}async fetchOrdersByState(e,t,i,s,r={}){await this.loadMarkets();const a={};let o=void 0;void 0!==e&&(a.state=e),void 0!==t&&(o=this.market(t),a.pair=o.id);const n=await this.privateGetListorders(this.extend(a,r)),d=this.safeValue(n,"orders",[]);return this.parseOrders(d,o,i,s)}async fetchOrders(e,t,i,s={}){return await this.fetchOrdersByState(void 0,e,t,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByState("PENDING",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByState("COMPLETE",e,t,i,s)}parseTicker(e,t){const i=this.safeInteger(e,"timestamp");let s=void 0;t&&(s=t.symbol);const r=this.safeFloat(e,"last_trade");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"rolling_24_hour_volume"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(t),s=this.indexBy(i.tickers,"pair"),r=Object.keys(s),a={};for(let o=0;o<r.length;o++){const e=r[o],t=this.markets_by_id[e],i=t.symbol,n=s[e];a[i]=this.parseTicker(n,t)}return a}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={pair:i.id},r=await this.publicGetTicker(this.extend(s,t));return this.parseTicker(r,i)}parseTrade(e,t){const i=this.safeString(e,"order_id");let s=void 0,r=void 0;void 0!==i?(r="ASK"===e.type?"sell":"buy",s="sell"===r&&e.is_buy?"maker":"buy"!==r||e.is_buy?"taker":"maker"):r=e.is_buy?"buy":"sell";const a=this.safeFloat(e,"fee_base"),o=this.safeFloat(e,"fee_counter");let n=void 0,d=void 0;void 0!==a?0!==a&&(n=t.base,d=a):void 0!==o&&0!==o&&(n=t.quote,d=o);const c=this.safeInteger(e,"timestamp");return{info:e,id:void 0,timestamp:c,datetime:this.iso8601(c),symbol:t.symbol,order:i,type:void 0,side:r,takerOrMaker:s,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"volume"),cost:this.safeFloat(e,"counter"),fee:{cost:d,currency:n}}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pair:r.id};void 0!==t&&(a.since=t);const o=await this.publicGetTrades(this.extend(a,s)),n=this.safeValue(o,"trades",[]);return this.parseTrades(n,r,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const r=this.market(e),o={pair:r.id};void 0!==t&&(o.since=t),void 0!==i&&(o.limit=i);const n=await this.privateGetListtrades(this.extend(o,s)),d=this.safeValue(n,"trades",[]);return this.parseTrades(d,r,t,i)}async fetchTradingFees(e={}){await this.loadMarkets();const t=await this.privateGetFeeInfo(e);return{info:t,maker:this.safeFloat(t,"maker_fee"),taker:this.safeFloat(t,"taker_fee")}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o="privatePost";const n={pair:this.marketId(e)};"market"===t?(o+="Marketorder",n.type=i.toUpperCase(),"buy"===i?n.counter_volume=s:n.base_volume=s):(o+="Postorder",n.volume=s,n.price=r,n.type="buy"===i?"BID":"ASK");const d=await this[o](this.extend(n,a));return{info:d,id:d.order_id}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e};return await this.privatePostStoporder(this.extend(s,i))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if(Object.keys(n).length&&(o+="?"+this.urlencode(n)),"private"===t){this.checkRequiredCredentials();let e=this.encode(this.apiKey+":"+this.secret);e=this.stringToBase64(e),r={Authorization:"Basic "+this.decode(e)}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){const n=await this.fetch2(e,t,i,s,a,o);if("error"in n)throw new r(this.id+" "+this.json(n));return n}}},"v+hw":function(e,t,i){"use strict";const{ROUND_UP:s,ROUND_DOWN:r}=i("rwG2"),{NotSupported:a}=i("ucJe"),o=e=>{const t=e.slice(0,-1),i=e.slice(-1);let s=void 0;if("y"===i)s=31536e3;else if("M"===i)s=2592e3;else if("w"===i)s=604800;else if("d"===i)s=86400;else if("h"===i)s=3600;else if("m"===i)s=60;else{if("s"!==i)throw new a("timeframe unit "+i+" is not supported");s=1}return t*s};e.exports={aggregate(e){const t={};for(let i=0;i<e.length;i++){const[s,r]=e[i];r>0&&(t[s]=(t[s]||0)+r)}return Object.keys(t).map(e=>[parseFloat(e),parseFloat(t[e])])},parseTimeframe:o,roundTimeframe:(e,t,i=r)=>{const a=1e3*o(e);return t-t%a+(i===s?a:0)},buildOHLCVC:(e,t="1m",i=-1/0,s=1/0)=>{const r=1e3*o(t),a=[],[n,,d,c,h,l,u]=[0,1,2,3,4,5,6],f=Math.min(e.length-1,s);for(let o=0;o<=f;o++){const t=e[o];if(t.timestamp<i)continue;const s=Math.floor(t.timestamp/r)*r,f=a.length-1;-1===f||s>=a[f][n]+r?a.push([s,t.price,t.price,t.price,t.price,t.amount,1]):(a[f][d]=Math.max(a[f][d],t.price),a[f][c]=Math.min(a[f][c],t.price),a[f][h]=t.price,a[f][l]+=t.amount,a[f][u]++)}return a},ROUND_UP:s,ROUND_DOWN:r,implodeParams:(e,t)=>{if(!Array.isArray(t)){const i=Object.keys(t);for(let s=0;s<i.length;s++){const r=i[s];Array.isArray(t[r])||(e=e.replace("{"+r+"}",t[r]))}}return e},extractParams:e=>{const t=/{([\w-]+)}/g,i=[];let s=t.exec(e);for(;s;)i.push(s[1]),s=t.exec(e);return i}}},vY55:function(e,t,i){i("JxtV")._,i("JxtV");e.exports={privateExport:function(e,t){return{n:e.n.toBuffer(),e:e.e,d:e.d.toBuffer(),p:e.p.toBuffer(),q:e.q.toBuffer(),dmp1:e.dmp1.toBuffer(),dmq1:e.dmq1.toBuffer(),coeff:e.coeff.toBuffer()}},privateImport:function(e,t,i){if(!(t.n&&t.e&&t.d&&t.p&&t.q&&t.dmp1&&t.dmq1&&t.coeff))throw Error("Invalid key data");e.setPrivate(t.n,t.e,t.d,t.p,t.q,t.dmp1,t.dmq1,t.coeff)},publicExport:function(e,t){return{n:e.n.toBuffer(),e:e.e}},publicImport:function(e,t,i){if(!t.n||!t.e)throw Error("Invalid key data");e.setPublic(t.n,t.e)},autoImport:function(t,i){return!(!i.n||!i.e)&&(i.d&&i.p&&i.q&&i.dmp1&&i.dmq1&&i.coeff?(e.exports.privateImport(t,i),!0):(e.exports.publicImport(t,i),!0))}}},vb3U:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var s=i("8kJ5");function r(e,t){if("00"===e.slice(0,2))throw new Error("invalid RLP: extra zeros");return parseInt(e,t)}function a(t,i){if(t<56)return e.from([t+i]);var s=n(t),r=n(i+55+s.length/2);return e.from(r+s,"hex")}function o(e){return"0x"===e.slice(0,2)}function n(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");var t=e.toString(16);return t.length%2?"0"+t:t}function d(t){if(!e.isBuffer(t)){if("string"===typeof t)return o(t)?e.from((i="string"!==typeof(r=t)?r:o(r)?r.slice(2):r).length%2?"0"+i:i,"hex"):e.from(t);if("number"===typeof t)return t?function(t){var i=n(t);return e.from(i,"hex")}(t):e.from([]);if(null===t||void 0===t)return e.from([]);if(t instanceof Uint8Array)return e.from(t);if(s.isBN(t))return e.from(t.toArray());throw new Error("invalid type")}var i,r;return t}t.encode=function t(i){if(Array.isArray(i)){for(var s=[],r=0;r<i.length;r++)s.push(t(i[r]));var o=e.concat(s);return e.concat([a(o.length,192),o])}var n=d(i);return 1===n.length&&n[0]<128?n:e.concat([a(n.length,128),n])},t.decode=function(t,i){if(void 0===i&&(i=!1),!t||0===t.length)return e.from([]);var s=function t(i){var s,a,o,n,d,c=[],h=i[0];if(h<=127)return{data:i.slice(0,1),remainder:i.slice(1)};if(h<=183){if(s=h-127,o=128===h?e.from([]):i.slice(1,s),2===s&&o[0]<128)throw new Error("invalid rlp encoding: byte must be less 0x80");return{data:o,remainder:i.slice(s)}}if(h<=191){if(a=h-182,s=r(i.slice(1,a).toString("hex"),16),(o=i.slice(a,s+a)).length<s)throw new Error("invalid RLP");return{data:o,remainder:i.slice(s+a)}}if(h<=247){for(s=h-191,n=i.slice(1,s);n.length;)d=t(n),c.push(d.data),n=d.remainder;return{data:c,remainder:i.slice(s)}}a=h-246,s=r(i.slice(1,a).toString("hex"),16);var l=a+s;if(l>i.length)throw new Error("invalid rlp: total length is larger than the data");if(0===(n=i.slice(a,l)).length)throw new Error("invalid rlp, List has a invalid length");for(;n.length;)d=t(n),c.push(d.data),n=d.remainder;return{data:c,remainder:i.slice(l)}}(d(t));if(i)return s;if(0!==s.remainder.length)throw new Error("invalid remainder");return s.data},t.getLength=function(t){if(!t||0===t.length)return e.from([]);var i=d(t),s=i[0];if(s<=127)return i.length;if(s<=183)return s-127;if(s<=191)return s-182;if(s<=247)return s-191;var a=s-246;return a+r(i.slice(1,a).toString("hex"),16)}}).call(this,i("zkTx").Buffer)},vrtS:function(e,t,i){var s=i("JxtV")._,r=i("Te/i"),a=i("JxtV"),o=i("gkJv");e.exports.Key=function(){function e(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return e.prototype.setOptions=function(e){var t=o[e.signingScheme],i=o[e.encryptionScheme];t===i?this.signingScheme=this.encryptionScheme=i.makeScheme(this,e):(this.encryptionScheme=i.makeScheme(this,e),this.signingScheme=t.makeScheme(this,e))},e.prototype.setPrivate=function(e,t,i,o,n,d,c,h){if(!(e&&t&&i&&e.length>0&&(s.isNumber(t)||t.length>0)&&i.length>0))throw Error("Invalid RSA private key");this.n=new r(e),this.e=s.isNumber(t)?t:a.get32IntFromBuffer(t,0),this.d=new r(i),o&&n&&d&&c&&h&&(this.p=new r(o),this.q=new r(n),this.dmp1=new r(d),this.dmq1=new r(c),this.coeff=new r(h)),this.$$recalculateCache()},e.prototype.$doPrivate=function(e){if(this.p||this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),i=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(i)<0;)t=t.add(this.p);return t.subtract(i).multiply(this.coeff).mod(this.p).multiply(this.q).add(i)},e.prototype.sign=function(e){return this.signingScheme.sign.apply(this.signingScheme,arguments)},e.prototype.isPrivate=function(){return this.n&&this.e&&this.d||!1},Object.defineProperty(e.prototype,"keySize",{get:function(){return this.cache.keyBitLength}}),Object.defineProperty(e.prototype,"encryptedDataLength",{get:function(){return this.cache.keyByteLength}}),Object.defineProperty(e.prototype,"maxMessageLength",{get:function(){return this.encryptionScheme.maxMessageLength()}}),e.prototype.$$recalculateCache=function(){this.cache=this.cache||{},this.cache.keyBitLength=this.n.bitLength(),this.cache.keyByteLength=this.cache.keyBitLength+6>>3},e}()},w7gO:function(e,t,i){var s=i("sOO9"),r=i("ly6l"),a=e.exports;for(var o in s)s.hasOwnProperty(o)&&(a[o]=s[o]);function n(e){if("string"===typeof e&&(e=r.parse(e)),e.protocol||(e.protocol="https:"),"https:"!==e.protocol)throw new Error('Protocol "'+e.protocol+'" not supported. Expected "https:"');return e}a.request=function(e,t){return e=n(e),s.request.call(this,e,t)},a.get=function(e,t){return e=n(e),s.get.call(this,e,t)}},wIgF:function(e,t,i){"use strict";const s=i("OjXq"),{BadSymbol:r,ExchangeNotAvailable:a,ArgumentsRequired:o,PermissionDenied:n,AuthenticationError:d,ExchangeError:c,OrderNotFound:h,DDoSProtection:l,InvalidNonce:u,InsufficientFunds:f,CancelPending:p,InvalidOrder:m,InvalidAddress:y,NotSupported:b}=i("ucJe"),{TRUNCATE:v,DECIMAL_PLACES:g}=i("rwG2");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"kraken",name:"Kraken",countries:["US"],version:"0",rateLimit:3e3,certified:!0,pro:!0,has:{createDepositAddress:!0,fetchDepositAddress:!0,fetchTradingFee:!0,fetchTradingFees:!0,CORS:!1,fetchCurrencies:!0,fetchTickers:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchWithdrawals:!0,fetchDeposits:!0,withdraw:!0,fetchLedgerEntry:!0,fetchLedger:!0},marketsByAltname:{},timeframes:{"1m":1,"5m":5,"15m":15,"30m":30,"1h":60,"4h":240,"1d":1440,"1w":10080,"2w":21600},urls:{logo:"https://user-images.githubusercontent.com/51840849/76173629-fc67fb00-61b1-11ea-84fe-f2de582f58a3.jpg",api:{public:"https://api.kraken.com",private:"https://api.kraken.com",zendesk:"https://support.kraken.com/hc/en-us/articles"},www:"https://www.kraken.com",doc:"https://www.kraken.com/features/api",fees:"https://www.kraken.com/en-us/features/fee-schedule"},fees:{trading:{tierBased:!0,percentage:!0,taker:.0026,maker:.0016,tiers:{taker:[[0,.0026],[5e4,.0024],[1e5,.0022],[25e4,.002],[5e5,.0018],[1e6,.0016],[25e5,.0014],[5e6,.0012],[1e7,1e-4]],maker:[[0,.0016],[5e4,.0014],[1e5,.0012],[25e4,.001],[5e5,8e-4],[1e6,6e-4],[25e5,4e-4],[5e6,2e-4],[1e7,0]]}},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001,ETH:.005,XRP:.02,XLM:2e-5,LTC:.02,DOGE:2,ZEC:1e-4,ICN:.02,REP:.01,ETC:.005,MLN:.003,XMR:.05,DASH:.005,GNO:.01,EOS:.5,BCH:.001,XTZ:.05,USD:5,EUR:5,CAD:10,JPY:300},deposit:{BTC:0,ETH:0,XRP:0,XLM:0,LTC:0,DOGE:0,ZEC:0,ICN:0,REP:0,ETC:0,MLN:0,XMR:0,DASH:0,GNO:0,EOS:0,BCH:0,XTZ:.05,USD:5,EUR:0,CAD:5,JPY:0}}},api:{zendesk:{get:["205893708-What-is-the-minimum-order-size-","201396777-What-are-the-deposit-fees-","201893608-What-are-the-withdrawal-fees-"]},public:{get:["Assets","AssetPairs","Depth","OHLC","Spread","Ticker","Time","Trades"]},private:{post:["AddOrder","AddExport","Balance","CancelOrder","ClosedOrders","DepositAddresses","DepositMethods","DepositStatus","ExportStatus","GetWebSocketsToken","Ledgers","OpenOrders","OpenPositions","QueryLedgers","QueryOrders","QueryTrades","RetrieveExport","RemoveExport","TradeBalance","TradesHistory","TradeVolume","Withdraw","WithdrawCancel","WithdrawInfo","WithdrawStatus"]}},commonCurrencies:{XBT:"BTC",XDG:"DOGE"},options:{cacheDepositMethodsOnFetchDepositAddress:!0,depositMethods:{},delistedMarketsById:{},inactiveCurrencies:["CAD","USD","JPY","GBP"]},exceptions:{"EQuery:Invalid asset pair":r,"EAPI:Invalid key":d,"EFunding:Unknown withdraw key":c,"EFunding:Invalid amount":f,"EService:Unavailable":a,"EDatabase:Internal error":a,"EService:Busy":a,"EQuery:Unknown asset":c,"EAPI:Rate limit exceeded":l,"EOrder:Rate limit exceeded":l,"EGeneral:Internal error":a,"EGeneral:Temporary lockout":l,"EGeneral:Permission denied":n}})}costToPrecision(e,t){return this.decimalToPrecision(t,v,this.markets[e].precision.price,g)}feeToPrecision(e,t){return this.decimalToPrecision(t,v,this.markets[e].precision.amount,g)}async fetchMinOrderAmounts(){const e=(await this.zendeskGet205893708WhatIsTheMinimumOrderSize()).split('<td class="wysiwyg-text-align-right">');if(e.length<3)throw new b(this.id+" fetchMinOrderAmounts HTML page markup has changed: https://support.kraken.com/hc/en-us/articles/205893708-What-is-the-minimum-order-size-");const t={};for(let i=2;i<e.length;i++){const s=e[i].split("</td>")[0];if("To Be Announced"!==s){const e=s.split(" ");if(2===e.length){const i=parseFloat(e[0]);t[this.safeCurrencyCode(e[1])]=i}}}return t}async fetchMarkets(e={}){const t=await this.publicGetAssetPairs(e),i=await this.fetchMinOrderAmounts(),s=Object.keys(t.result);let r=[];for(let a=0;a<s.length;a++){const e=s[a],o=t.result[e],n=o.base,d=o.quote,c=this.safeCurrencyCode(n),h=this.safeCurrencyCode(d),l=e.indexOf(".d")>=0,u=l?o.altname:c+"/"+h;let f=void 0;"fees_maker"in o&&(f=parseFloat(o.fees_maker[0][1])/100);const p={amount:o.lot_decimals,price:o.pair_decimals};let m=Math.pow(10,-p.amount);c in i&&(m=i[c]),r.push({id:e,symbol:u,base:c,quote:h,baseId:n,quoteId:d,darkpool:l,info:o,altname:o.altname,maker:f,taker:parseFloat(o.fees[0][1])/100,active:!0,precision:p,limits:{amount:{min:m,max:Math.pow(10,p.amount)},price:{min:Math.pow(10,-p.price),max:void 0},cost:{min:0,max:void 0}}})}return r=this.appendInactiveMarkets(r),this.marketsByAltname=this.indexBy(r,"altname"),r}safeCurrencyCode(e,t){return e.length>3&&(0!==e.indexOf("X")&&0!==e.indexOf("Z")||(e=e.slice(1))),super.safeCurrencyCode(e,t)}appendInactiveMarkets(e){const t={amount:8,price:8},i={min:0,max:void 0},s={min:Math.pow(10,-t.price),max:void 0},r={darkpool:!1,info:void 0,maker:void 0,taker:void 0,active:!1,precision:t,limits:{amount:{min:Math.pow(10,-t.amount),max:Math.pow(10,t.amount)},price:s,cost:i}},a=[];for(let o=0;o<a.length;o++)e.push(this.extend(r,a[o]));return e}async fetchCurrencies(e={}){const t=await this.publicGetAssets(e),i=this.safeValue(t,"result"),s=Object.keys(i),r={};for(let a=0;a<s.length;a++){const e=s[a],t=i[e],o=this.safeCurrencyCode(this.safeString(t,"altname")),n=this.safeInteger(t,"decimals"),d=!this.inArray(o,this.options.inactiveCurrencies);r[o]={id:e,code:o,info:t,name:o,active:d,fee:void 0,precision:n,limits:{amount:{min:Math.pow(10,-n),max:Math.pow(10,n)},price:{min:Math.pow(10,-n),max:Math.pow(10,n)},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:Math.pow(10,n)}}}}return r}async fetchTradingFees(e={}){await this.loadMarkets(),this.checkRequiredCredentials();const t=await this.privatePostTradeVolume(e),i=this.safeFloat(t.result,"volume"),s=this.fees.trading.tiers;let r=s.taker[1],a=s.maker[1];for(let o=0;o<s.taker.length;o++)i>=s.taker[o][0]&&(r=s.taker[o][1]);for(let o=0;o<s.maker.length;o++)i>=s.maker[o][0]&&(a=s.maker[o][1]);return{info:t,maker:a,taker:r}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e);if(s.darkpool)throw new c(this.id+" does not provide an order book for darkpool symbol "+e);const r={pair:s.id};void 0!==t&&(r.count=t);const a=(await this.publicGetDepth(this.extend(r,i))).result[s.id];return this.parseOrderBook(a)}parseTicker(e,t){const i=this.milliseconds();let s=void 0;t&&(s=t.symbol);const r=parseFloat(e.v[1]),a=parseFloat(e.p[1]);let o=void 0;void 0!==r&&void 0!==a&&(o=r*a);const n=parseFloat(e.c[0]);return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:parseFloat(e.h[1]),low:parseFloat(e.l[1]),bid:parseFloat(e.b[0]),bidVolume:void 0,ask:parseFloat(e.a[0]),askVolume:void 0,vwap:a,open:this.safeFloat(e,"o"),close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:r,quoteVolume:o,info:e}}async fetchTickers(e,t={}){await this.loadMarkets(),e=void 0===e?this.symbols:e;const i=[];for(let n=0;n<this.symbols.length;n++){const e=this.symbols[n],t=this.markets[e];t.active&&!t.darkpool&&i.push(t.id)}const s={pair:i.join(",")},r=(await this.publicGetTicker(this.extend(s,t))).result,a=Object.keys(r),o={};for(let n=0;n<a.length;n++){const t=a[n],i=this.markets_by_id[t],s=i.symbol,d=r[t];this.inArray(s,e)&&(o[s]=this.parseTicker(d,i))}return o}async fetchTicker(e,t={}){if(await this.loadMarkets(),e.indexOf(".d")>=0)throw new c(this.id+" does not provide a ticker for darkpool symbol "+e);const i=this.market(e),s={pair:i.id},r=(await this.publicGetTicker(this.extend(s,t))).result[i.id];return this.parseTicker(r,i)}parseOHLCV(e,t,i="1m",s,r){return[1e3*e[0],parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[6])]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={pair:a.id,interval:this.timeframes[t]};void 0!==i&&(o.since=parseInt((i-1)/1e3));const n=(await this.publicGetOHLC(this.extend(o,r))).result[a.id];return this.parseOHLCVs(n,a,t,i,s)}parseLedgerEntryType(e){return this.safeString({trade:"trade",withdrawal:"transaction",deposit:"transaction",transfer:"transfer",margin:"margin"},e,e)}parseLedgerEntry(e,t){const i=this.safeString(e,"id");let s=void 0;const r=this.safeString(e,"refid"),a=this.parseLedgerEntryType(this.safeString(e,"type")),o=this.safeCurrencyCode(this.safeString(e,"asset"),t);let n=this.safeFloat(e,"amount");n<0?(s="out",n=Math.abs(n)):s="in";const d=this.safeFloat(e,"time");let c=void 0;void 0!==d&&(c=parseInt(1e3*d));const h={cost:this.safeFloat(e,"fee"),currency:o};return{info:e,id:i,direction:s,account:void 0,referenceId:r,referenceAccount:void 0,type:a,currency:o,amount:n,before:void 0,after:this.safeFloat(e,"balance"),status:"ok",timestamp:c,datetime:this.iso8601(c),fee:h}}async fetchLedger(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.currency(e),r.asset=a.id),void 0!==t&&(r.start=parseInt(t/1e3));const o=await this.privatePostLedgers(this.extend(r,s)),n=this.safeValue(o,"result",{}),d=this.safeValue(n,"ledger",{}),c=Object.keys(d),h=[];for(let l=0;l<c.length;l++){const e=c[l],t=d[e];t.id=e,h.push(t)}return this.parseLedger(h,a,t,i)}async fetchLedgerEntriesByIds(e,t,i={}){await this.loadMarkets(),e=e.join(",");const s=this.extend({id:e},i),r=(await this.privatePostQueryLedgers(s)).result,a=Object.keys(r),o=[];for(let n=0;n<a.length;n++){const e=a[n],t=r[e];t.id=e,o.push(t)}return this.parseLedger(o)}async fetchLedgerEntry(e,t,i={}){return(await this.fetchLedgerEntriesByIds([e],t,i))[0]}parseTrade(e,t){let i=void 0,s=void 0,r=void 0,a=void 0,o=void 0,n=void 0,d=void 0,c=void 0;const h=this.safeString(e,"pair"),l=this.findMarketByAltnameOrId(h);let u=void 0;if(void 0!==l?t=l:void 0!==h&&(t=this.getDelistedMarketById(h)),void 0!==t&&(u=t.symbol),Array.isArray(e)){i=this.safeTimestamp(e,2),s="s"===e[3]?"sell":"buy",r="l"===e[4]?"limit":"market",a=this.safeFloat(e,0),o=this.safeFloat(e,1),e.length>6&&(n=this.safeString(e,6))}else if("ordertxid"in e&&(d=e.ordertxid,n=this.safeString2(e,"id","postxid"),i=this.safeTimestamp(e,"time"),s=e.type,r=e.ordertype,a=this.safeFloat(e,"price"),o=this.safeFloat(e,"vol"),"fee"in e)){let i=void 0;t&&(i=t.quote),c={cost:this.safeFloat(e,"fee"),currency:i}}return{id:n,order:d,info:e,timestamp:i,datetime:this.iso8601(i),symbol:u,type:r,side:s,takerOrMaker:void 0,price:a,amount:o,cost:a*o,fee:c}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a=r.id,o={pair:a};if(void 0!==t&&(o.since=1e6*t,o.since=t.toString()+"000000"),void 0!==i&&1e3!==i){if(this.safeValue(this.options,"fetchTradesWarning",!0))throw new c(this.id+" fetchTrades() cannot serve "+i.toString()+" trades without breaking the pagination, see https://github.com/ccxt/ccxt/issues/5698 for more details. Set exchange.options['fetchTradesWarning'] to acknowledge this warning and silence it.")}const n=(await this.publicGetTrades(this.extend(o,s))).result,d=n[a],h=d.length;if(h<=0)return[];const l=d[h-1],u=this.safeString(n,"last");return l.push(u),this.parseTrades(d,r,t,i)}async fetchBalance(e={}){const t=await this.privatePostBalance(e),i=this.safeValue(t,"result",{}),s={info:i},r=Object.keys(i);for(let a=0;a<r.length;a++){const e=r[a],t=this.safeCurrencyCode(e),o=this.account();o.total=this.safeFloat(i,e),s[t]=o}return this.parseBalance(s)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o={pair:this.market(e).id,type:i,ordertype:t,volume:this.amountToPrecision(e,s)};("limit"===t||!("market"===t)&&void 0!==r)&&(o.price=this.priceToPrecision(e,r));const n=await this.privatePostAddOrder(this.extend(o,a));let d=this.safeValue(n.result,"txid");if(void 0!==d&&Array.isArray(d)){d=d.length>1?d:d[0]}return{id:d,clientOrderId:this.safeString(a,"userref"),info:n,timestamp:void 0,datetime:void 0,lastTradeTimestamp:void 0,symbol:e,type:t,side:i,price:r,amount:s,cost:void 0,average:void 0,filled:void 0,remaining:void 0,status:void 0,fee:void 0,trades:void 0}}findMarketByAltnameOrId(e){return e in this.marketsByAltname?this.marketsByAltname[e]:e in this.markets_by_id?this.markets_by_id[e]:void 0}getDelistedMarketById(e){if(void 0===e)return e;let t=this.safeValue(this.options.delistedMarketsById,e);if(void 0!==t)return t;let i=3,s=3,r=6;8===e.length?(i=4,s=4,r=8):7===e.length&&(i=4,s=4,r=7);const a=e.slice(0,i),o=e.slice(s,r),n=this.safeCurrencyCode(a),d=this.safeCurrencyCode(o);return t={symbol:n+"/"+d,base:n,quote:d,baseId:a,quoteId:o},this.options.delistedMarketsById[e]=t,t}parseOrderStatus(e){return this.safeString({pending:"open",open:"open",closed:"closed",canceled:"canceled",expired:"expired"},e,e)}parseOrder(e,t){const i=this.safeValue(e,"descr",{}),s=this.safeString(i,"type"),r=this.safeString(i,"ordertype"),a=this.safeString(i,"pair"),o=this.findMarketByAltnameOrId(a);let n=void 0;void 0!==o?t=o:void 0!==a&&(t=this.getDelistedMarketById(a));const d=this.safeTimestamp(e,"opentm"),c=this.safeFloat(e,"vol"),h=this.safeFloat(e,"vol_exec"),l=c-h;let u=void 0;const f=this.safeFloat(e,"cost");let p=this.safeFloat(i,"price");void 0!==p&&0!==p||(p=this.safeFloat(i,"price2")),void 0!==p&&0!==p||(p=this.safeFloat(e,"price",p));const m=this.safeFloat(e,"price");if(void 0!==t&&(n=t.symbol,"fee"in e)){const i=e.oflags;u={cost:this.safeFloat(e,"fee"),rate:void 0},i.indexOf("fciq")>=0?u.currency=t.quote:i.indexOf("fcib")>=0&&(u.currency=t.base)}const y=this.parseOrderStatus(this.safeString(e,"status"));return{id:this.safeString(e,"id"),clientOrderId:this.safeString(e,"userref"),info:e,timestamp:d,datetime:this.iso8601(d),lastTradeTimestamp:void 0,status:y,symbol:n,type:r,side:s,price:p,cost:f,amount:c,filled:h,average:m,remaining:l,fee:u}}parseOrders(e,t,i,s,r={}){const a=[],o=Object.keys(e);let n=void 0;void 0!==t&&(n=t.symbol);for(let d=0;d<o.length;d++){const i=o[d],s=this.extend({id:i},e[i]);a.push(this.extend(this.parseOrder(s,t),r))}return this.filterBySymbolSinceLimit(a,n,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s=await this.privatePostQueryOrders(this.extend({trades:!0,txid:e},i)),r=s.result,a=this.parseOrder(this.extend({id:e},r[e]));return this.extend({info:s},a)}async fetchOrdersByIds(e,t,i={}){await this.loadMarkets();const s=await this.privatePostQueryOrders(this.extend({trades:!0,txid:e.join(",")},i)),r=this.safeValue(s,"result",{}),a=[],o=Object.keys(r);for(let n=0;n<o.length;n++){const e=o[n],t=r[e],i=this.parseOrder(this.extend({id:e},t));a.push(i)}return a}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};void 0!==t&&(r.start=parseInt(t/1e3));const a=(await this.privatePostTradesHistory(this.extend(r,s))).result.trades,o=Object.keys(a);for(let d=0;d<o.length;d++)a[o[d]].id=o[d];const n=this.parseTrades(a,void 0,t,i);return void 0===e?n:this.filterBySymbol(n,e)}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=void 0;try{s=await this.privatePostCancelOrder(this.extend({txid:e},i))}catch(r){if(this.last_http_response&&this.last_http_response.indexOf("EOrder:Unknown order")>=0)throw new h(this.id+" cancelOrder() error "+this.last_http_response);throw r}return s}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r={};void 0!==t&&(r.start=parseInt(t/1e3));const a=await this.privatePostOpenOrders(this.extend(r,s)),o=this.parseOrders(a.result.open,void 0,t,i);return void 0===e?o:this.filterBySymbol(o,e)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const r={};void 0!==t&&(r.start=parseInt(t/1e3));const a=await this.privatePostClosedOrders(this.extend(r,s)),o=this.parseOrders(a.result.closed,void 0,t,i);return void 0===e?o:this.filterBySymbol(o,e)}async fetchDepositMethods(e,t={}){await this.loadMarkets();const i={asset:this.currency(e).id};return(await this.privatePostDepositMethods(this.extend(i,t))).result}parseTransactionStatus(e){return this.safeString({Initial:"pending",Pending:"pending",Success:"ok",Settled:"pending",Failure:"failed",Partial:"ok"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"refid"),s=this.safeString(e,"txid"),r=this.safeTimestamp(e,"time"),a=this.safeString(e,"asset"),o=this.safeCurrencyCode(a,t),n=this.safeString(e,"info"),d=this.safeFloat(e,"amount"),c=this.parseTransactionStatus(this.safeString(e,"status")),h=this.safeString(e,"type");let l=this.safeFloat(e,"fee");return void 0===l&&"deposit"===h&&(l=0),{info:e,id:i,currency:o,amount:d,address:n,tag:void 0,status:c,type:h,updated:void 0,txid:s,timestamp:r,datetime:this.iso8601(r),fee:{currency:o,cost:l}}}parseTransactionsByType(e,t,i,s,r){const a=[];for(let o=0;o<t.length;o++){const i=this.parseTransaction(this.extend({type:e},t[o]));a.push(i)}return this.filterByCurrencySinceLimit(a,i,s,r)}async fetchDeposits(e,t,i,s={}){if(await this.loadMarkets(),void 0===e)throw new o(this.id+" fetchDeposits requires a currency code argument");const r={asset:this.currency(e).id},a=await this.privatePostDepositStatus(this.extend(r,s));return this.parseTransactionsByType("deposit",a.result,e,t,i)}async fetchWithdrawals(e,t,i,s={}){if(await this.loadMarkets(),void 0===e)throw new o(this.id+" fetchWithdrawals requires a currency code argument");const r={asset:this.currency(e).id},a=await this.privatePostWithdrawStatus(this.extend(r,s));return this.parseTransactionsByType("withdrawal",a.result,e,t,i)}async createDepositAddress(e,t={}){const i=await this.fetchDepositAddress(e,this.extend({new:"true"},t)),s=this.safeString(i,"address");return this.checkAddress(s),{currency:e,address:s,info:i}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e);let s=this.safeString(t,"method");if(void 0===s){if(!this.options.cacheDepositMethodsOnFetchDepositAddress)throw new c(this.id+' fetchDepositAddress() requires an extra `method` parameter. Use fetchDepositMethods ("'+e+'") to get a list of available deposit methods or enable the exchange property .options["cacheDepositMethodsOnFetchDepositAddress"] = true');e in this.options.depositMethods||(this.options.depositMethods[e]=await this.fetchDepositMethods(e)),s=this.options.depositMethods[e][0].method}const r={asset:i.id,method:s},a=await this.privatePostDepositAddresses(this.extend(r,t)),o=a.result;if(o.length<1)throw new y(this.id+" privatePostDepositAddresses() returned no addresses");const n=this.safeString(o[0],"address"),d=this.safeString2(o[0],"tag","memo");return this.checkAddress(n),{currency:e,address:n,tag:d,info:a}}async withdraw(e,t,i,s,r={}){if(this.checkAddress(i),"key"in r){await this.loadMarkets();const i={asset:this.currency(e).id,amount:t},s=await this.privatePostWithdraw(this.extend(i,r));return{info:s,id:s.result}}throw new c(this.id+" withdraw requires a 'key' parameter (withdrawal key name, as set up on your account)")}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.version+"/"+t+"/"+e;if("public"===t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else if("private"===t){this.checkRequiredCredentials();const e=this.nonce().toString();a=this.urlencode(this.extend({nonce:e},s));const t=this.encode(e+a),i=this.hash(t,"sha256","binary"),n=this.stringToBinary(this.encode(o)),d=this.binaryConcat(n,i),c=this.base64ToBinary(this.secret),h=this.hmac(d,c,"sha512","base64");r={"API-Key":this.apiKey,"API-Sign":this.decode(h),"Content-Type":"application/x-www-form-urlencoded"}}else o="/"+e;return o=this.urls.api[t]+o,{url:o,method:i,body:a,headers:r}}nonce(){return this.milliseconds()}handleErrors(e,t,i,s,r,o,n,d,h){if(520===e)throw new a(this.id+" "+e.toString()+" "+t);if(o.indexOf("Invalid order")>=0)throw new m(this.id+" "+o);if(o.indexOf("Invalid nonce")>=0)throw new u(this.id+" "+o);if(o.indexOf("Insufficient funds")>=0)throw new f(this.id+" "+o);if(o.indexOf("Cancel pending")>=0)throw new p(this.id+" "+o);if(o.indexOf("Invalid arguments:volume")>=0)throw new m(this.id+" "+o);if("{"===o[0]&&"string"!==typeof n&&"error"in n){if(n.error.length){const e=this.id+" "+o;for(let t=0;t<n.error.length;t++){const i=n.error[t];this.throwExactlyMatchedException(this.exceptions,i,e)}throw new c(e)}}}}},wJrE:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,ArgumentsRequired:a,InvalidNonce:o,OrderNotFound:n,InvalidOrder:d,DDoSProtection:c,BadRequest:h,AuthenticationError:l}=i("ucJe"),{ROUND:u}=i("rwG2");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"latoken",name:"Latoken",countries:["KY"],version:"v1",rateLimit:2e3,certified:!1,userAgent:this.userAgents.chrome,has:{CORS:!1,publicAPI:!0,privateAPI:!0,cancelOrder:!0,cancelAllOrders:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchCanceledOrders:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!1,fetchOrdersByStatus:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/61511972-24c39f00-aa01-11e9-9f7c-471f1d6e5214.jpg",api:"https://api.latoken.com",www:"https://latoken.com",doc:["https://api.latoken.com"]},api:{public:{get:["ExchangeInfo/time","ExchangeInfo/limits","ExchangeInfo/pairs","ExchangeInfo/pairs/{currency}","ExchangeInfo/pair","ExchangeInfo/currencies","ExchangeInfo/currencies/{symbol}","MarketData/tickers","MarketData/ticker/{symbol}","MarketData/orderBook/{symbol}","MarketData/orderBook/{symbol}/{limit}","MarketData/trades/{symbol}","MarketData/trades/{symbol}/{limit}"]},private:{get:["Account/balances","Account/balances/{currency}","Order/status","Order/active","Order/get_order","Order/trades"],post:["Order/new","Order/test-order","Order/cancel","Order/cancel_all"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.001}},commonCurrencies:{MT:"Monarch",TSL:"Treasure SL"},options:{createOrderMethod:"private_post_order_new"},exceptions:{exact:{"Signature or ApiKey is not valid":l,"Request is out of time":o,"Symbol must be specified":h},broad:{"Request limit reached":c,Pair:h,"Price needs to be greater than":d,"Amount needs to be greater than":d,"The Symbol field is required":d,"OrderType is not valid":d,"Side is not valid":d,"Cancelable order whit":n,Order:n}}})}nonce(){return this.milliseconds()}async fetchTime(e={}){const t=await this.publicGetExchangeInfoTime(e);return this.safeInteger(t,"unixTimeMiliseconds")}async fetchMarkets(e={}){const t=await this.publicGetExchangeInfoPairs(e),i=[];for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"symbol"),a=this.safeString(e,"baseCurrency"),o=this.safeString(e,"quotedCurrency"),n=this.safeInteger(e,"pairId"),d=this.safeCurrencyCode(a),c=this.safeCurrencyCode(o),h=d+"/"+c,l={price:this.safeInteger(e,"pricePrecision"),amount:this.safeInteger(e,"amountPrecision")},u={amount:{min:this.safeFloat(e,"minQty"),max:void 0},price:{min:Math.pow(10,-l.price),max:void 0},cost:{min:void 0,max:void 0}};i.push({id:r,numericId:n,info:e,symbol:h,base:d,quote:c,baseId:a,quoteId:o,active:void 0,precision:l,limits:u})}return i}async fetchCurrencies(e={}){const t=await this.publicGetExchangeInfoCurrencies(e),i={};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"symbol"),a=this.safeInteger(e,"currencyId"),o=this.safeCurrencyCode(r),n=this.safeInteger(e,"precission"),d=this.safeFloat(e,"fee"),c=void 0;i[o]={id:r,numericId:a,code:o,info:e,name:o,active:c,fee:d,precision:n,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}}}return i}calculateFee(e,t,i,s,r,a="taker",o={}){const n=this.markets[e];let d="quote";const c=n[a];let h=s*c,l=n.precision.price;return"sell"===i?h*=r:(d="base",l=n.precision.amount),h=this.decimalToPrecision(h,u,l,this.precisionMode),{type:a,currency:n[d],rate:c,cost:parseFloat(h)}}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccountBalances(e),i={info:t};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"symbol"),a=this.safeCurrencyCode(r),o=this.safeFloat(e,"frozen"),n=this.safeFloat(e,"pending"),d=this.sum(o,n),c={free:this.safeFloat(e,"available"),used:d,total:this.safeFloat(e,"amount")};i[a]=c}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id,limit:10};void 0!==t&&(s.limit=t);const r=await this.publicGetMarketDataOrderBookSymbolLimit(this.extend(s,i));return this.parseOrderBook(r,void 0,"bids","asks","price","quantity")}parseTicker(e,t){let i=void 0;const s=this.safeString(e,"symbol");s in this.markets_by_id&&(t=this.markets_by_id[s]),void 0===i&&void 0!==t&&(i=t.symbol);const r=this.safeFloat(e,"open"),a=this.safeFloat(e,"close");let o=void 0;void 0!==r&&void 0!==a&&(o=a-r);const n=this.safeFloat(e,"priceChange"),d=this.nonce();return{symbol:i,timestamp:d,datetime:this.iso8601(d),low:this.safeFloat(e,"low"),high:this.safeFloat(e,"high"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:r,close:a,last:a,previousClose:void 0,change:o,percentage:n,average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(e,"volume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetMarketDataTickerSymbol(this.extend(s,t));return this.parseTicker(r,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetMarketDataTickers(t),s={};for(let r=0;r<i.length;r++){const t=this.parseTicker(i[r]),a=t.symbol;(void 0===e||this.inArray(a,e))&&(s[a]=t)}return s}parseTrade(e,t){let i=this.safeInteger2(e,"timestamp","time");void 0!==i&&i<12309408e5&&(i*=1e3);const s=this.safeFloat(e,"price"),r=this.safeFloat(e,"amount"),a=this.safeString(e,"side");let o=void 0;void 0!==r&&void 0!==s&&(o=r*s);let n=void 0;void 0!==t&&(n=t.symbol);const d=this.safeString(e,"id"),c=this.safeString(e,"orderId"),h=this.safeFloat(e,"commission");let l=void 0;return void 0!==h&&(l={cost:h,currency:void 0}),{info:e,timestamp:i,datetime:this.iso8601(i),symbol:n,id:d,order:c,type:void 0,takerOrMaker:void 0,side:a,price:s,amount:r,cost:o,fee:l}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==i&&(a.limit=i);const o=await this.publicGetMarketDataTradesSymbol(this.extend(a,s)),n=this.safeValue(o,"trades",[]);return this.parseTrades(n,r,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const r=this.market(e),o={symbol:r.id},n=await this.privateGetOrderTrades(this.extend(o,s)),d=this.safeValue(n,"trades",[]);return this.parseTrades(d,r,t,i)}parseOrderStatus(e){return this.safeString({active:"open",partiallyFilled:"open",filled:"closed",cancelled:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"orderId"),s=this.safeTimestamp(e,"timeCreated"),r=this.safeString(e,"symbol");let a=r;r in this.markets_by_id&&(t=this.markets_by_id[r]),void 0!==t&&(a=t.symbol);const o=this.safeString(e,"side"),n=this.safeString(e,"orderType"),d=this.safeFloat(e,"price"),c=this.safeFloat(e,"amount"),h=this.safeFloat(e,"executedAmount");let l=void 0;void 0!==c&&void 0!==h&&(l=c-h);const u=this.parseOrderStatus(this.safeString(e,"orderStatus"));let f=void 0;void 0!==h&&void 0!==d&&(f=h*d);const p=this.safeTimestamp(e,"timeFilled");let m=void 0;return void 0!==p&&p>0&&(m=p),{id:i,clientOrderId:this.safeString(e,"cliOrdId"),info:e,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:m,status:u,symbol:a,type:n,side:o,price:d,cost:f,amount:c,filled:h,average:void 0,remaining:l,fee:void 0}}async fetchOpenOrders(e,t,i,s={}){return this.fetchOrdersWithMethod("private_get_order_active",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return this.fetchOrdersByStatus("filled",e,t,i,s)}async fetchCanceledOrders(e,t,i,s={}){return this.fetchOrdersByStatus("cancelled",e,t,i,s)}async fetchOrdersByStatus(e,t,i,s,r={}){const a={status:e};return this.fetchOrdersWithMethod("private_get_order_status",t,i,s,this.extend(a,r))}async fetchOrdersWithMethod(e,t,i,s,r={}){if(void 0===t)throw new a(this.id+" fetchOrdersWithMethod requires a symbol argument");await this.loadMarkets();const o=this.market(t),n={symbol:o.id};void 0!==s&&(n.limit=s);const d=await this[e](this.extend(n,r));return this.parseOrders(d,o,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e},r=await this.privateGetOrderGetOrder(this.extend(s,i));return this.parseOrder(r)}async createOrder(e,t,i,s,a,o={}){if(await this.loadMarkets(),"limit"!==t)throw new r(this.id+" allows limit orders only");const n={symbol:this.marketId(e),side:i,price:this.priceToPrecision(e,a),amount:this.amountToPrecision(e,s),orderType:t},d=this.safeString(this.options,"createOrderMethod","private_post_order_new"),c=await this[d](this.extend(n,o));return this.parseOrder(c)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e},r=await this.privatePostOrderCancel(this.extend(s,i));return this.parseOrder(r)}async cancelAllOrders(e,t={}){if(void 0===e)throw new a(this.id+" cancelAllOrders requires a symbol argument");await this.loadMarkets();const i=this.marketId(e),s={symbol:i},r=await this.privatePostOrderCancelAll(this.extend(s,t)),o=[],n=this.safeValue(r,"cancelledOrders",[]);for(let a=0;a<n.length;a++){const e=this.parseOrder({symbol:i,orderId:n[a],orderStatus:"canceled"});o.push(e)}return o}sign(e,t="public",i="GET",s,r,a){let o="/api/"+this.version+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("private"===t){const e=this.nonce();n=this.extend({timestamp:e},n)}const d=this.urlencode(n);if(Object.keys(n).length&&(o+="?"+d),"private"===t){this.checkRequiredCredentials();const e=this.hmac(this.encode(o),this.encode(this.secret));r={"X-LA-KEY":this.apiKey,"X-LA-SIGNATURE":e},"POST"===i&&(r["Content-Type"]="application/x-www-form-urlencoded",a=d)}return{url:this.urls.api+o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n,d,c){if(!n)return;const h=this.safeString(n,"message"),l=this.id+" "+o;void 0!==h&&(this.throwExactlyMatchedException(this.exceptions.exact,h,l),this.throwBroadlyMatchedException(this.exceptions.broad,h,l));const u=this.safeValue(n,"error",{}),f=this.safeString(u,"message");if(void 0!==f)throw this.throwExactlyMatchedException(this.exceptions.exact,f,l),this.throwBroadlyMatchedException(this.exceptions.broad,f,l),new r(l)}}},wLqY:function(e,t,i){"use strict";const s=i("OjXq"),{AuthenticationError:r,ExchangeError:a,ArgumentsRequired:o,InvalidAddress:n,OrderNotFound:d,NotSupported:c,DDoSProtection:h,InsufficientFunds:l,InvalidOrder:u}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"gateio",name:"Gate.io",countries:["CN"],version:"2",rateLimit:1e3,pro:!0,has:{CORS:!1,createMarketOrder:!1,fetchTickers:!0,withdraw:!0,fetchDeposits:!0,fetchWithdrawals:!0,fetchTransactions:!0,createDepositAddress:!0,fetchDepositAddress:!0,fetchClosedOrders:!1,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrderTrades:!0,fetchOrders:!0,fetchOrder:!0,fetchMyTrades:!0},timeframes:{"1m":60,"5m":300,"10m":600,"15m":900,"30m":1800,"1h":3600,"2h":7200,"4h":14400,"6h":21600,"12h":43200,"1d":86400,"1w":604800},urls:{logo:"https://user-images.githubusercontent.com/1294454/31784029-0313c702-b509-11e7-9ccc-bc0da6a0e435.jpg",api:{public:"https://data.gate.io/api",private:"https://data.gate.io/api"},www:"https://gate.io/",doc:"https://gate.io/api2",fees:["https://gate.io/fee","https://support.gate.io/hc/en-us/articles/115003577673"],referral:"https://www.gate.io/signup/2436035"},api:{public:{get:["candlestick2/{id}","pairs","marketinfo","marketlist","coininfo","tickers","ticker/{id}","orderBook/{id}","trade/{id}","tradeHistory/{id}","tradeHistory/{id}/{tid}"]},private:{post:["balances","depositAddress","newAddress","depositsWithdrawals","buy","sell","cancelOrder","cancelAllOrders","getOrder","openOrders","tradeHistory","feelist","withdraw"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:.002,taker:.002}},exceptions:{exact:{4:h,5:r,6:r,7:c,8:c,9:c,15:h,16:d,17:d,20:u,21:l},errorCodeNames:{1:"Invalid request",2:"Invalid version",3:"Invalid request",4:"Too many attempts",5:"Invalid sign",6:"Invalid sign",7:"Currency is not supported",8:"Currency is not supported",9:"Currency is not supported",10:"Verified failed",11:"Obtaining address failed",12:"Empty params",13:"Internal error, please report to administrator",14:"Invalid user",15:"Cancel order too fast, please wait 1 min and try again",16:"Invalid order id or order is already closed",17:"Invalid orderid",18:"Invalid amount",19:"Not permitted or trade is disabled",20:"Your order size is too small",21:"You don't have enough fund"}},options:{fetchTradesMethod:"public_get_tradehistory_id",limits:{cost:{min:{BTC:1e-4,ETH:.001,USDT:1}}}},commonCurrencies:{BTCBEAR:"BEAR",BTCBULL:"BULL"}})}async fetchMarkets(e={}){const t=await this.publicGetMarketinfo(e),i=this.safeValue(t,"pairs");if(!i)throw new a(this.id+" fetchMarkets got an unrecognized response");const s=[];for(let r=0;r<i.length;r++){const e=i[r],t=Object.keys(e),a=this.safeString(t,0),o=e[a],n=a.split("_"),d=n.length;let c=n[0],h=n[1];d>2&&(c=n[0]+"_"+n[1],h=n[2]);const l=this.safeCurrencyCode(c),u=this.safeCurrencyCode(h),f=l+"/"+u,p={amount:8,price:o.decimal_places},m={min:o.min_amount,max:void 0},y={min:Math.pow(10,-o.decimal_places),max:void 0},b=m.min*y.min,v={amount:m,price:y,cost:{min:this.safeFloat(this.options.limits.cost.min,u,b),max:void 0}},g=!0;s.push({id:a,symbol:f,base:l,quote:u,baseId:c,quoteId:h,info:e,active:g,maker:o.fee/100,taker:o.fee/100,precision:p,limits:v})}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostBalances(e),i={info:t};let s=this.safeValue(t,"available",{});Array.isArray(s)&&(s={});const r=this.safeValue(t,"locked",{}),a=Object.keys(s);for(let o=0;o<a.length;o++){const e=a[o],t=this.safeCurrencyCode(e),n=this.account();n.free=this.safeFloat(s,e),n.used=this.safeFloat(r,e),i[t]=n}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={id:this.marketId(e)},r=await this.publicGetOrderBookId(this.extend(s,i));return this.parseOrderBook(r)}parseOHLCV(e,t,i="1m",s,r){return[parseInt(e[0]),parseFloat(e[5]),parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[2]),parseFloat(e[1])]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={id:a.id,group_sec:this.timeframes[t]};if(void 0!==s){const e=this.parseTimeframe(t),i=parseInt(e*s/3600);o.range_hour=Math.max(0,i-1)}const n=await this.publicGetCandlestick2Id(this.extend(o,r)),d=this.safeValue(n,"data",[]);return this.parseOHLCVs(d,a,t,i,s)}parseTicker(e,t){const i=this.milliseconds();let s=void 0;t&&(s=t.symbol);const r=this.safeFloat(e,"last"),a=this.safeFloat(e,"percentChange");let o=void 0,n=void 0,d=void 0;if(void 0!==r&&void 0!==a){const e=a/100;o=r/this.sum(1,e),n=r-o,d=this.sum(r,o)/2}return o=this.safeFloat(e,"open",o),n=this.safeFloat(e,"change",n),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat2(e,"high24hr","high"),low:this.safeFloat2(e,"low24hr","low"),bid:this.safeFloat(e,"highestBid"),bidVolume:void 0,ask:this.safeFloat(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:o,close:r,last:r,previousClose:void 0,change:n,percentage:a,average:d,baseVolume:this.safeFloat(e,"quoteVolume"),quoteVolume:this.safeFloat(e,"baseVolume"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(t),s={},r=Object.keys(i);for(let a=0;a<r.length;a++){const e=r[a],[t,o]=e.split("_");let n=t.toUpperCase(),d=o.toUpperCase();n=this.safeCurrencyCode(n),d=this.safeCurrencyCode(d);const c=n+"/"+d;let h=void 0;c in this.markets&&(h=this.markets[c]),e in this.markets_by_id&&(h=this.markets_by_id[e]),s[c]=this.parseTicker(i[e],h)}return s}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s=await this.publicGetTickerId(this.extend({id:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){let i=this.safeTimestamp2(e,"timestamp","time_unix");i=this.safeTimestamp(e,"time",i);const s=this.safeString2(e,"tradeID","id"),r=this.safeString2(e,"orderid","orderNumber"),a=this.safeFloat2(e,"rate","price"),o=this.safeFloat(e,"amount"),n=this.safeString(e,"type"),d=this.safeString(e,"role");let c=void 0;void 0!==a&&void 0!==o&&(c=a*o);let h=void 0;void 0!==t&&(h=t.symbol);let l=void 0,u=this.safeCurrencyCode(this.safeString(e,"fee_coin")),f=this.safeFloat(e,"point_fee");return void 0===f||0===f?(f=this.safeFloat(e,"gt_fee"),void 0===f||0===f?f=this.safeFloat(e,"fee"):u=this.safeCurrencyCode("GT")):u=this.safeCurrencyCode("POINT"),void 0!==f&&(l={cost:f,currency:u}),{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:h,order:r,type:void 0,side:n,takerOrMaker:d,price:a,amount:o,cost:c,fee:l}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={id:r.id},o=this.safeString(this.options,"fetchTradesMethod","public_get_tradehistory_id"),n=await this[o](this.extend(a,s));return this.parseTrades(n.data,r,t,i)}async fetchOrders(e,t,i,s={}){const r=await this.privatePostOpenOrders(s);return this.parseOrders(r.orders,void 0,t,i)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={orderNumber:e,currencyPair:this.marketId(t)},r=await this.privatePostGetOrder(this.extend(s,i));return this.parseOrder(r.order)}parseOrderStatus(e){return this.safeString({cancelled:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString2(e,"orderNumber","id");let s=void 0;const r=this.safeString(e,"currencyPair");r in this.markets_by_id&&(t=this.markets_by_id[r]),void 0!==t&&(s=t.symbol);const a=this.safeTimestamp2(e,"timestamp","ctime"),o=this.safeTimestamp(e,"mtime"),n=this.parseOrderStatus(this.safeString(e,"status"));let d=this.safeString(e,"type");"1"===d?d="sell":"2"===d&&(d="buy");const c=this.safeFloat2(e,"initialRate","price"),h=this.safeFloat(e,"filledRate"),l=this.safeFloat2(e,"initialAmount","amount"),u=this.safeFloat(e,"filledAmount"),f=this.safeFloat2(e,"leftAmount","left"),p=this.safeFloat(e,"feeValue"),m=this.safeString(e,"feeCurrency"),y=this.safeCurrencyCode(m);let b=this.safeFloat(e,"feePercentage");return void 0!==b&&(b/=100),{id:i,clientOrderId:void 0,datetime:this.iso8601(a),timestamp:a,lastTradeTimestamp:o,status:n,symbol:s,type:"limit",side:d,price:c,cost:void 0,amount:l,filled:u,remaining:f,average:h,trades:void 0,fee:{cost:p,currency:y,rate:b},info:e}}async createOrder(e,t,i,s,r,o={}){if("market"===t)throw new a(this.id+" allows limit orders only");await this.loadMarkets();const n="privatePost"+this.capitalize(i),d=this.market(e),c={currencyPair:d.id,rate:r,amount:s},h=await this[n](this.extend(c,o));return this.parseOrder(this.extend({status:"open",type:i,initialAmount:s},h),d)}async cancelOrder(e,t,i={}){if(void 0===t)throw new o(this.id+" cancelOrder requires symbol argument");await this.loadMarkets();const s={orderNumber:e,currencyPair:this.marketId(t)};return await this.privatePostCancelOrder(this.extend(s,i))}async queryDepositAddress(e,t,i={}){await this.loadMarkets();const s=this.currency(t);e="privatePost"+e+"Address";const r={currency:s.id},a=await this[e](this.extend(r,i));let o=this.safeString(a,"addr"),d=void 0;if(void 0!==o&&o.indexOf("address")>=0)throw new n(this.id+" queryDepositAddress "+o);if("XRP"===t){const e=o.split(" ");o=e[0],d=e[1]}return{currency:s,address:o,tag:d,info:a}}async createDepositAddress(e,t={}){return await this.queryDepositAddress("New",e,t)}async fetchDepositAddress(e,t={}){return await this.queryDepositAddress("Deposit",e,t)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;void 0!==e&&(r=this.market(e));const a=await this.privatePostOpenOrders(s);return this.parseOrders(a.orders,r,t,i)}async fetchOrderTrades(e,t,i,s,r={}){if(void 0===t)throw new o(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const a=this.market(t),n={currencyPair:a.id,orderNumber:e},d=await this.privatePostTradeHistory(this.extend(n,r));return this.parseTrades(d.trades,a,i,s)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchMyTrades requires symbol param");await this.loadMarkets();const r=this.market(e),a={currencyPair:r.id},n=await this.privatePostTradeHistory(this.extend(a,s));return this.parseTrades(n.trades,r,t,i)}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a={currency:this.currency(e).id,amount:t,address:i};return void 0!==s&&(a.address+=" "+s),{info:await this.privatePostWithdraw(this.extend(a,r)),id:void 0}}sign(e,t="public",i="GET",s={},r,a){const o="private"===t?t+"/":"";let n=this.urls.api[t]+this.version+"/1/"+o+this.implodeParams(e,s);const d=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(d).length&&(n+="?"+this.urlencode(d));else{this.checkRequiredCredentials();const e={nonce:this.nonce()};a=this.urlencode(this.extend(e,d));const t=this.hmac(this.encode(a),this.encode(this.secret),"sha512");r={Key:this.apiKey,Sign:t,"Content-Type":"application/x-www-form-urlencoded"}}return{url:n,method:i,body:a,headers:r}}async fetchTransactionsByType(e,t,i,s,r={}){await this.loadMarkets();const a={};void 0!==i&&(a.start=i);const o=await this.privatePostDepositsWithdrawals(this.extend(a,r));let n=void 0;if(void 0===e){const e=this.safeValue(o,"deposits",[]),t=this.safeValue(o,"withdraws",[]);n=this.arrayConcat(e,t)}else n=this.safeValue(o,e,[]);let d=void 0;return void 0!==t&&(d=this.currency(t)),this.parseTransactions(n,d,i,s)}async fetchTransactions(e,t,i,s={}){return await this.fetchTransactionsByType(void 0,e,t,i,s)}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactionsByType("deposits",e,t,i,s)}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactionsByType("withdraws",e,t,i,s)}parseTransaction(e,t){const i=this.safeString(e,"currency"),s=this.safeCurrencyCode(i,t),r=this.safeString(e,"id"),a=this.safeString(e,"txid"),o=this.safeFloat(e,"amount");let n=this.safeString(e,"address");"false"===n&&(n=void 0);const d=this.safeTimestamp(e,"timestamp");return{info:e,id:r,txid:a,currency:s,amount:o,address:n,tag:void 0,status:this.parseTransactionStatus(this.safeString(e,"status")),type:this.parseTransactionType(r[0]),timestamp:d,datetime:this.iso8601(d),fee:void 0}}parseTransactionStatus(e){return this.safeString({PEND:"pending",REQUEST:"pending",DMOVE:"pending",CANCEL:"failed",DONE:"ok"},e,e)}parseTransactionType(e){return this.safeString({d:"deposit",w:"withdrawal"},e,e)}handleErrors(e,t,i,s,r,a,o,n,d){if(void 0===o)return;if("false"!==this.safeString(o,"result",""))return;const c=this.safeString(o,"code"),h=this.safeString(o,"message",a);if(void 0!==c){const e=this.safeString(this.exceptions.errorCodeNames,c,h);this.throwExactlyMatchedException(this.exceptions.exact,c,e)}}}},xFKm:function(e,t){e.exports=function(e){if("string"!==typeof e)throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof e+", while checking isHexPrefixed.");return"0x"===e.slice(0,2)}},"xQh+":function(e,t,i){"use strict";var s=Object.prototype.hasOwnProperty,r=Array.isArray,a=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e,t){for(var i=t&&t.plainObjects?Object.create(null):{},s=0;s<e.length;++s)"undefined"!==typeof e[s]&&(i[s]=e[s]);return i};e.exports={arrayToObject:o,assign:function(e,t){return Object.keys(t).reduce((function(e,i){return e[i]=t[i],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],i=[],s=0;s<t.length;++s)for(var a=t[s],o=a.obj[a.prop],n=Object.keys(o),d=0;d<n.length;++d){var c=n[d],h=o[c];"object"===typeof h&&null!==h&&-1===i.indexOf(h)&&(t.push({obj:o,prop:c}),i.push(h))}return function(e){for(;e.length>1;){var t=e.pop(),i=t.obj[t.prop];if(r(i)){for(var s=[],a=0;a<i.length;++a)"undefined"!==typeof i[a]&&s.push(i[a]);t.obj[t.prop]=s}}}(t),e},decode:function(e,t,i){var s=e.replace(/\+/g," ");if("iso-8859-1"===i)return s.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(s)}catch(r){return s}},encode:function(e,t,i){if(0===e.length)return e;var s="string"===typeof e?e:String(e);if("iso-8859-1"===i)return escape(s).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var r="",o=0;o<s.length;++o){var n=s.charCodeAt(o);45===n||46===n||95===n||126===n||n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122?r+=s.charAt(o):n<128?r+=a[n]:n<2048?r+=a[192|n>>6]+a[128|63&n]:n<55296||n>=57344?r+=a[224|n>>12]+a[128|n>>6&63]+a[128|63&n]:(o+=1,n=65536+((1023&n)<<10|1023&s.charCodeAt(o)),r+=a[240|n>>18]+a[128|n>>12&63]+a[128|n>>6&63]+a[128|63&n])}return r},isBuffer:function(e){return!(!e||"object"!==typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,i,a){if(!i)return t;if("object"!==typeof i){if(r(t))t.push(i);else{if(!t||"object"!==typeof t)return[t,i];(a&&(a.plainObjects||a.allowPrototypes)||!s.call(Object.prototype,i))&&(t[i]=!0)}return t}if(!t||"object"!==typeof t)return[t].concat(i);var n=t;return r(t)&&!r(i)&&(n=o(t,a)),r(t)&&r(i)?(i.forEach((function(i,r){if(s.call(t,r)){var o=t[r];o&&"object"===typeof o&&i&&"object"===typeof i?t[r]=e(o,i,a):t.push(i)}else t[r]=i})),t):Object.keys(i).reduce((function(t,r){var o=i[r];return s.call(t,r)?t[r]=e(t[r],o,a):t[r]=o,t}),n)}}},xYmC:function(e,t,i){"use strict";const s=i("OjXq"),{ExchangeError:r,BadRequest:a,InvalidNonce:o,RequestTimeout:n,ExchangeNotAvailable:d,InsufficientFunds:c,OrderNotFound:h,InvalidOrder:l,DDoSProtection:u,AuthenticationError:f,BadSymbol:p}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"crex24",name:"CREX24",countries:["EE"],rateLimit:500,version:"v2",has:{cancelAllOrders:!0,CORS:!1,editOrder:!0,fetchBidsAsks:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!1,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchTickers:!0,fetchTradingFee:!1,fetchTradingFees:!1,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","1d":"1d","1w":"1w","1M":"1mo"},urls:{logo:"https://user-images.githubusercontent.com/1294454/47813922-6f12cc00-dd5d-11e8-97c6-70f957712d47.jpg",api:"https://api.crex24.com",www:"https://crex24.com",referral:"https://crex24.com/?refid=slxsjsjtil8xexl9hksr",doc:"https://docs.crex24.com/trade-api/v2",fees:"https://crex24.com/fees"},api:{public:{get:["currencies","instruments","tickers","recentTrades","orderBook","ohlcv"]},trading:{get:["orderStatus","orderTrades","activeOrders","orderHistory","tradeHistory","tradeFee","moneyTransferStatus"],post:["placeOrder","modifyOrder","cancelOrdersById","cancelOrdersByInstrument","cancelAllOrders"]},account:{get:["balance","depositAddress","moneyTransfers","moneyTransferStatus","previewWithdrawal"],post:["withdraw"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.001,maker:-1e-4},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},commonCurrencies:{YOYO:"YOYOW",BULL:"BuySell",BCC:"BCH"},options:{fetchOrdersMethod:"tradingGetOrderHistory",fetchClosedOrdersMethod:"tradingGetOrderHistory",fetchTickersMethod:"publicGetTicker24hr",defaultTimeInForce:"GTC",defaultLimitOrderType:"limit",hasAlreadyAuthenticatedSuccessfully:!1,warnOnFetchOpenOrdersWithoutSymbol:!0,parseOrderToPrecision:!1,newOrderRespType:"RESULT"},exceptions:{exact:{"Parameter 'filter' contains invalid value.":a,"Mandatory parameter 'instrument' is missing.":a,"The value of parameter 'till' must be greater than or equal to the value of parameter 'from'.":a,"Failed to verify request signature.":f,"Nonce error. Make sure that the value passed in the 'X-CREX24-API-NONCE' header is greater in each consecutive request than in the previous one for the corresponding API-Key provided in 'X-CREX24-API-KEY' header.":o,"Market orders are not supported by the instrument currently.":l,"Parameter 'instrument' contains invalid value.":p},broad:{"API Key":f,"Insufficient funds":c,"has been delisted.":p}}})}nonce(){return this.milliseconds()}async fetchMarkets(e={}){const t=await this.publicGetInstruments(e),i=[];for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"symbol"),a=this.safeString(e,"baseCurrency"),o=this.safeString(e,"quoteCurrency"),n=this.safeCurrencyCode(a),d=this.safeCurrencyCode(o),c=n+"/"+d,h=this.safeValue(e,"tickSize"),l=this.safeValue(e,"minPrice"),u=this.safeFloat(e,"minVolume"),f={amount:this.precisionFromString(this.numberToString(u)),price:this.precisionFromString(this.numberToString(h))},p="active"===e.state;i.push({id:r,symbol:c,base:n,quote:d,baseId:a,quoteId:o,info:e,active:p,precision:f,limits:{amount:{min:u,max:void 0},price:{min:l,max:void 0},cost:{min:void 0,max:void 0}}})}return i}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i={};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"symbol"),a=this.safeCurrencyCode(r),o=this.safeInteger(e,"withdrawalPrecision"),n=this.safeValue(e,"BaseAddress"),d=e.depositsAllowed&&e.withdrawalsAllowed&&!e.isDelisted,c=e.isFiat?"fiat":"crypto";i[a]={id:r,code:a,address:n,info:e,type:c,name:this.safeString(e,"name"),active:d,fee:this.safeFloat(e,"flatWithdrawalFee"),precision:o,limits:{amount:{min:Math.pow(10,-o),max:Math.pow(10,o)},price:{min:Math.pow(10,-o),max:Math.pow(10,o)},cost:{min:void 0,max:void 0},deposit:{min:this.safeFloat(e,"minDeposit"),max:void 0},withdraw:{min:this.safeFloat(e,"minWithdrawal"),max:this.safeFloat(e,"maxWithdrawal")}}}}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.accountGetBalance(this.extend({},e)),i={info:t};for(let s=0;s<t.length;s++){const e=t[s],r=this.safeString(e,"currency"),a=this.safeCurrencyCode(r),o=this.account();o.free=this.safeFloat(e,"available"),o.used=this.safeFloat(e,"reserved"),i[a]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={instrument:this.market(e).id};void 0!==t&&(s.limit=t);const r=await this.publicGetOrderBook(this.extend(s,i));return this.parseOrderBook(r,void 0,"buyLevels","sellLevels","price","volume")}parseTicker(e,t){const i=this.parse8601(this.safeString(e,"timestamp"));let s=void 0;const r=this.safeString(e,"instrument");if(void 0!==(t=this.safeValue(this.markets_by_id,r,t)))s=t.symbol;else if(void 0!==r){const[e,t]=r.split("-");s=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}const a=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:this.safeFloat(e,"percentChange"),average:void 0,baseVolume:this.safeFloat(e,"baseVolume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={instrument:i.id},a=await this.publicGetTickers(this.extend(s,t));if(a.length<1)throw new r(this.id+" fetchTicker could not load quotes for symbol "+e);return this.parseTicker(a[0],i)}async fetchTickers(e,t={}){await this.loadMarkets();const i={};if(void 0!==e){const t=this.marketIds(e);i.instrument=t.join(",")}const s=await this.publicGetTickers(this.extend(i,t));return this.parseTickers(s,e)}parseTickers(e,t){const i=[];for(let s=0;s<e.length;s++)i.push(this.parseTicker(e[s]));return this.filterByArray(i,"symbol",t)}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"timestamp")),s=this.safeFloat(e,"price"),r=this.safeFloat(e,"volume");let a=void 0;void 0!==s&&void 0!==r&&(a=r*s);const o=this.safeString(e,"id"),n=this.safeString(e,"side"),d=this.safeString(e,"orderId");let c=void 0;const h=this.safeString(e,"instrument");void 0!==(t=this.safeValue(this.markets_by_id,h,t))&&(c=t.symbol);let l=void 0;const u=this.safeString(e,"feeCurrency"),f=this.safeCurrencyCode(u),p=this.safeFloat(e,"fee");void 0!==p&&(l={cost:p,currency:f});return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:c,id:o,order:d,type:void 0,takerOrMaker:void 0,side:n,price:s,cost:a,amount:r,fee:l}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={instrument:r.id};void 0!==i&&(a.limit=i);const o=await this.publicGetRecentTrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}parseOHLCV(e,t,i="1m",s,r){const a=this.safeString(e,"timestamp");return[this.parse8601(a),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={granularity:this.timeframes[t],instrument:a.id};void 0!==s&&(o.limit=s);const n=await this.publicGetOhlcv(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}parseOrderStatus(e){const t={submitting:"open",unfilledActive:"open",partiallyFilledActive:"open",filled:"closed",partiallyFilledCancelled:"canceled",unfilledCancelled:"canceled"};return e in t?t[e]:e}parseOrder(e,t){const i=this.parseOrderStatus(this.safeString(e,"status"));let s=void 0;const r=this.safeString(e,"instrument");if(void 0!==r)if(r in this.markets_by_id)t=this.markets_by_id[r];else{const[e,t]=r.split("-");s=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}void 0===s&&void 0!==t&&(s=t.symbol);const a=this.parse8601(this.safeString(e,"timestamp"));let o=this.safeFloat(e,"price");const n=this.safeFloat(e,"volume"),d=this.safeFloat(e,"remainingVolume");let c=void 0;const h=this.parse8601(this.safeString(e,"lastUpdate"));let l=void 0;void 0!==d&&void 0!==n&&(c=n-d,this.options.parseOrderToPrecision&&(c=parseFloat(this.amountToPrecision(s,c))),c=Math.max(c,0),void 0!==o&&(l=o*c));const u=this.safeString(e,"id"),f=this.safeString(e,"type");"market"===f&&0===o&&void 0!==l&&void 0!==c&&l>0&&c>0&&(o=l/c);const p=this.safeString(e,"side");let m=void 0;return void 0!==l&&(c&&(m=l/c),this.options.parseOrderToPrecision&&(l=parseFloat(this.costToPrecision(s,l)))),{info:e,id:u,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:h,symbol:s,type:f,side:p,price:o,amount:n,cost:l,average:m,filled:c,remaining:d,status:i,fee:void 0,trades:void 0}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),n={instrument:o.id,volume:this.amountToPrecision(e,s),type:t,side:i};let d=!1,c=!1;if("limit"===t?d=!0:"stopLimit"===t&&(d=!0,c=!0),d){if(void 0===r)throw new l(this.id+" createOrder method requires a price argument for a "+t+" order");n.price=this.priceToPrecision(e,r)}if(c){const i=this.safeFloat(a,"stopPrice");if(void 0===i)throw new l(this.id+" createOrder method requires a stopPrice extra param for a "+t+" order");n.stopPrice=this.priceToPrecision(e,i)}const h=await this.tradingPostPlaceOrder(this.extend(n,a));return this.parseOrder(h,o)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.tradingGetOrderStatus(this.extend(s,i));if(r.length<1)throw new h(this.id+" fetchOrder could not fetch order id "+e);return this.parseOrder(r[0])}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r={};if(void 0!==t&&(r.from=this.ymdhms(t,"T")),void 0!==i&&(r.limit=i),void 0!==e){const t=this.market(e);r.instrument=t.id}const a=this.safeString(this.options,"fetchOrdersMethod","tradingGetOrderHistory"),o=await this[a](this.extend(r,s));return this.parseOrders(o)}async fetchOrdersByIds(e,t,i,s={}){await this.loadMarkets();const r={id:e.join(",")},a=await this.tradingGetOrderStatus(this.extend(r,s));return this.parseOrders(a,void 0,t,i)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==e&&(r=this.market(e),a.instrument=r.id);const o=await this.tradingGetActiveOrders(this.extend(a,s));return this.parseOrders(o,r,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==e&&(r=this.market(e),a.instrument=r.id),void 0!==t&&(a.from=this.ymdhms(t,"T")),void 0!==i&&(a.limit=i);const o=this.safeString(this.options,"fetchClosedOrdersMethod","tradingGetOrderHistory"),n=await this[o](this.extend(a,s));return this.parseOrders(n,r,t,i)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={ids:[parseInt(e)]},r=await this.tradingPostCancelOrdersById(this.extend(s,i));return this.parseOrder(r)}async cancelAllOrders(e,t={}){return await this.tradingPostCancelAllOrders(t)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==e&&(r=this.market(e),a.instrument=r.id),void 0!==t&&(a.from=this.ymdhms(t,"T")),void 0!==i&&(a.limit=i);const o=await this.tradingGetTradeHistory(this.extend(a,s));return this.parseTrades(o,r,t,i)}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==e&&(r=this.currency(e),a.currency=r.id),void 0!==t&&(a.from=this.ymd(t,"T"));const o=await this.accountGetMoneyTransfers(this.extend(a,s));return this.parseTransactions(o,r,t,i)}async fetchDeposits(e,t,i,s={}){return this.fetchTransactions(e,t,i,this.extend({type:"deposit"},s))}async fetchWithdrawals(e,t,i,s={}){return this.fetchTransactions(e,t,i,this.extend({type:"withdrawal"},s))}parseTransactionStatus(e){return this.safeString({pending:"pending",success:"ok",failed:"failed"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"address"),r=this.safeString(e,"paymentId"),a=this.safeValue(e,"txId"),o=this.safeString(e,"currency"),n=this.safeCurrencyCode(o,t),d=this.safeString(e,"type"),c=this.parse8601(this.safeString(e,"createdAt")),h=this.parse8601(this.safeString(e,"processedAt")),l=this.parseTransactionStatus(this.safeString(e,"status")),u=this.safeFloat(e,"amount"),f={cost:this.safeFloat(e,"fee"),currency:n};return{info:e,id:i,txid:a,timestamp:c,datetime:this.iso8601(c),address:s,tag:r,type:d,amount:u,currency:n,status:l,updated:h,fee:f}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.accountGetDepositAddress(this.extend(i,t)),r=this.safeString(s,"address"),a=this.safeString(s,"paymentId");return{currency:e,address:this.checkAddress(r),tag:a,info:s}}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a={currency:this.currency(e).id,address:i,amount:parseFloat(this.currencyToPrecision(e,t))};void 0!==s&&(a.paymentId=s);const o=await this.accountPostWithdraw(this.extend(a,r));return this.parseTransaction(o)}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.version+"/"+t+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));"GET"===i&&Object.keys(n).length&&(o+="?"+this.urlencode(n));const d=this.urls.api+o;if("trading"===t||"account"===t){this.checkRequiredCredentials();const e=this.nonce().toString(),t=this.base64ToBinary(this.secret);let n=o+e;r={"X-CREX24-API-KEY":this.apiKey,"X-CREX24-API-NONCE":e},"POST"===i&&(r["Content-Type"]="application/json",n+=a=this.json(s));const d=this.stringToBase64(this.hmac(this.encode(n),t,"sha512","binary"));r["X-CREX24-API-SIGN"]=this.decode(d)}return{url:d,method:i,body:a,headers:r}}handleErrors(e,t,i,s,o,c,h,l,p){if(!this.isJsonEncodedObject(c))return;if(e>=200&&e<300)return;const m=this.safeString(h,"errorDescription"),y=this.id+" "+c;if(this.throwExactlyMatchedException(this.exceptions.exact,m,y),this.throwBroadlyMatchedException(this.exceptions.broad,m,y),400===e)throw new a(y);if(401===e)throw new f(y);if(403===e)throw new f(y);if(429===e)throw new u(y);if(500===e)throw new r(y);if(503===e)throw new d(y);if(504===e)throw new n(y);throw new r(y)}}},z1Oi:function(e,t,i){"use strict";var s=i("eAlZ"),r=i("NCU5"),a=i("5EA2");function o(e,t){return void 0===e?t:(s.isBoolean(e,a.COMPRESSED_TYPE_INVALID),e)}e.exports=function(e){return{privateKeyVerify:function(t){return s.isBuffer(t,a.EC_PRIVATE_KEY_TYPE_INVALID),32===t.length&&e.privateKeyVerify(t)},privateKeyExport:function(t,i){s.isBuffer(t,a.EC_PRIVATE_KEY_TYPE_INVALID),s.isBufferLength(t,32,a.EC_PRIVATE_KEY_LENGTH_INVALID),i=o(i,!0);var n=e.privateKeyExport(t,i);return r.privateKeyExport(t,n,i)},privateKeyImport:function(t){if(s.isBuffer(t,a.EC_PRIVATE_KEY_TYPE_INVALID),(t=r.privateKeyImport(t))&&32===t.length&&e.privateKeyVerify(t))return t;throw new Error(a.EC_PRIVATE_KEY_IMPORT_DER_FAIL)},privateKeyNegate:function(t){return s.isBuffer(t,a.EC_PRIVATE_KEY_TYPE_INVALID),s.isBufferLength(t,32,a.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyNegate(t)},privateKeyModInverse:function(t){return s.isBuffer(t,a.EC_PRIVATE_KEY_TYPE_INVALID),s.isBufferLength(t,32,a.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyModInverse(t)},privateKeyTweakAdd:function(t,i){return s.isBuffer(t,a.EC_PRIVATE_KEY_TYPE_INVALID),s.isBufferLength(t,32,a.EC_PRIVATE_KEY_LENGTH_INVALID),s.isBuffer(i,a.TWEAK_TYPE_INVALID),s.isBufferLength(i,32,a.TWEAK_LENGTH_INVALID),e.privateKeyTweakAdd(t,i)},privateKeyTweakMul:function(t,i){return s.isBuffer(t,a.EC_PRIVATE_KEY_TYPE_INVALID),s.isBufferLength(t,32,a.EC_PRIVATE_KEY_LENGTH_INVALID),s.isBuffer(i,a.TWEAK_TYPE_INVALID),s.isBufferLength(i,32,a.TWEAK_LENGTH_INVALID),e.privateKeyTweakMul(t,i)},publicKeyCreate:function(t,i){return s.isBuffer(t,a.EC_PRIVATE_KEY_TYPE_INVALID),s.isBufferLength(t,32,a.EC_PRIVATE_KEY_LENGTH_INVALID),i=o(i,!0),e.publicKeyCreate(t,i)},publicKeyConvert:function(t,i){return s.isBuffer(t,a.EC_PUBLIC_KEY_TYPE_INVALID),s.isBufferLength2(t,33,65,a.EC_PUBLIC_KEY_LENGTH_INVALID),i=o(i,!0),e.publicKeyConvert(t,i)},publicKeyVerify:function(t){return s.isBuffer(t,a.EC_PUBLIC_KEY_TYPE_INVALID),e.publicKeyVerify(t)},publicKeyTweakAdd:function(t,i,r){return s.isBuffer(t,a.EC_PUBLIC_KEY_TYPE_INVALID),s.isBufferLength2(t,33,65,a.EC_PUBLIC_KEY_LENGTH_INVALID),s.isBuffer(i,a.TWEAK_TYPE_INVALID),s.isBufferLength(i,32,a.TWEAK_LENGTH_INVALID),r=o(r,!0),e.publicKeyTweakAdd(t,i,r)},publicKeyTweakMul:function(t,i,r){return s.isBuffer(t,a.EC_PUBLIC_KEY_TYPE_INVALID),s.isBufferLength2(t,33,65,a.EC_PUBLIC_KEY_LENGTH_INVALID),s.isBuffer(i,a.TWEAK_TYPE_INVALID),s.isBufferLength(i,32,a.TWEAK_LENGTH_INVALID),r=o(r,!0),e.publicKeyTweakMul(t,i,r)},publicKeyCombine:function(t,i){s.isArray(t,a.EC_PUBLIC_KEYS_TYPE_INVALID),s.isLengthGTZero(t,a.EC_PUBLIC_KEYS_LENGTH_INVALID);for(var r=0;r<t.length;++r)s.isBuffer(t[r],a.EC_PUBLIC_KEY_TYPE_INVALID),s.isBufferLength2(t[r],33,65,a.EC_PUBLIC_KEY_LENGTH_INVALID);return i=o(i,!0),e.publicKeyCombine(t,i)},signatureNormalize:function(t){return s.isBuffer(t,a.ECDSA_SIGNATURE_TYPE_INVALID),s.isBufferLength(t,64,a.ECDSA_SIGNATURE_LENGTH_INVALID),e.signatureNormalize(t)},signatureExport:function(t){s.isBuffer(t,a.ECDSA_SIGNATURE_TYPE_INVALID),s.isBufferLength(t,64,a.ECDSA_SIGNATURE_LENGTH_INVALID);var i=e.signatureExport(t);return r.signatureExport(i)},signatureImport:function(t){s.isBuffer(t,a.ECDSA_SIGNATURE_TYPE_INVALID),s.isLengthGTZero(t,a.ECDSA_SIGNATURE_LENGTH_INVALID);var i=r.signatureImport(t);if(i)return e.signatureImport(i);throw new Error(a.ECDSA_SIGNATURE_PARSE_DER_FAIL)},signatureImportLax:function(t){s.isBuffer(t,a.ECDSA_SIGNATURE_TYPE_INVALID),s.isLengthGTZero(t,a.ECDSA_SIGNATURE_LENGTH_INVALID);var i=r.signatureImportLax(t);if(i)return e.signatureImport(i);throw new Error(a.ECDSA_SIGNATURE_PARSE_DER_FAIL)},sign:function(t,i,r){s.isBuffer(t,a.MSG32_TYPE_INVALID),s.isBufferLength(t,32,a.MSG32_LENGTH_INVALID),s.isBuffer(i,a.EC_PRIVATE_KEY_TYPE_INVALID),s.isBufferLength(i,32,a.EC_PRIVATE_KEY_LENGTH_INVALID);var o=null,n=null;return void 0!==r&&(s.isObject(r,a.OPTIONS_TYPE_INVALID),void 0!==r.data&&(s.isBuffer(r.data,a.OPTIONS_DATA_TYPE_INVALID),s.isBufferLength(r.data,32,a.OPTIONS_DATA_LENGTH_INVALID),o=r.data),void 0!==r.noncefn&&(s.isFunction(r.noncefn,a.OPTIONS_NONCEFN_TYPE_INVALID),n=r.noncefn)),e.sign(t,i,n,o)},verify:function(t,i,r){return s.isBuffer(t,a.MSG32_TYPE_INVALID),s.isBufferLength(t,32,a.MSG32_LENGTH_INVALID),s.isBuffer(i,a.ECDSA_SIGNATURE_TYPE_INVALID),s.isBufferLength(i,64,a.ECDSA_SIGNATURE_LENGTH_INVALID),s.isBuffer(r,a.EC_PUBLIC_KEY_TYPE_INVALID),s.isBufferLength2(r,33,65,a.EC_PUBLIC_KEY_LENGTH_INVALID),e.verify(t,i,r)},recover:function(t,i,r,n){return s.isBuffer(t,a.MSG32_TYPE_INVALID),s.isBufferLength(t,32,a.MSG32_LENGTH_INVALID),s.isBuffer(i,a.ECDSA_SIGNATURE_TYPE_INVALID),s.isBufferLength(i,64,a.ECDSA_SIGNATURE_LENGTH_INVALID),s.isNumber(r,a.RECOVERY_ID_TYPE_INVALID),s.isNumberInInterval(r,-1,4,a.RECOVERY_ID_VALUE_INVALID),n=o(n,!0),e.recover(t,i,r,n)},ecdh:function(t,i){return s.isBuffer(t,a.EC_PUBLIC_KEY_TYPE_INVALID),s.isBufferLength2(t,33,65,a.EC_PUBLIC_KEY_LENGTH_INVALID),s.isBuffer(i,a.EC_PRIVATE_KEY_TYPE_INVALID),s.isBufferLength(i,32,a.EC_PRIVATE_KEY_LENGTH_INVALID),e.ecdh(t,i)},ecdhUnsafe:function(t,i,r){return s.isBuffer(t,a.EC_PUBLIC_KEY_TYPE_INVALID),s.isBufferLength2(t,33,65,a.EC_PUBLIC_KEY_LENGTH_INVALID),s.isBuffer(i,a.EC_PRIVATE_KEY_TYPE_INVALID),s.isBufferLength(i,32,a.EC_PRIVATE_KEY_LENGTH_INVALID),r=o(r,!0),e.ecdhUnsafe(t,i,r)}}}},zRfg:function(e,t,i){(function(t){const s=i("LOya"),r=i("8kJ5");var a=function(){};function o(e){return e.startsWith("int[")?"int256"+e.slice(3):"int"===e?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):"uint"===e?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):"fixed"===e?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):"ufixed"===e?"ufixed128x128":e}function n(e){return parseInt(/^\D+(\d+)$/.exec(e)[1],10)}function d(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[parseInt(t[1],10),parseInt(t[2],10)]}function c(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?""===t[2]?"dynamic":parseInt(t[2],10):null}function h(e){var t=typeof e;if("string"===t)return s.isHexPrefixed(e)?new r(s.stripHexPrefix(e),16):new r(e,10);if("number"===t)return new r(e);if(e.toArray)return e;throw new Error("Argument is not a number")}function l(e){var t=/^(\w+)\((.*)\)$/.exec(e);if(3!==t.length)throw new Error("Invalid method signature");var i=/^(.+)\):\((.+)$/.exec(t[2]);if(null!==i&&3===i.length)return{method:t[1],args:i[1].split(","),retargs:i[2].split(",")};var s=t[2].split(",");return 1===s.length&&""===s[0]&&(s=[]),{method:t[1],args:s}}function u(e,i){var a,o,l,f;if("address"===e)return u("uint160",h(i));if("bool"===e)return u("uint8",i?1:0);if("string"===e)return u("bytes",t.from(i,"utf8"));if(y(e)){if("undefined"===typeof i.length)throw new Error("Not an array?");if("dynamic"!==(a=c(e))&&0!==a&&i.length>a)throw new Error("Elements exceed array size: "+a);for(f in l=[],e=e.slice(0,e.lastIndexOf("[")),"string"===typeof i&&(i=JSON.parse(i)),i)l.push(u(e,i[f]));if("dynamic"===a){var p=u("uint256",i.length);l.unshift(p)}return t.concat(l)}if("bytes"===e)return i=t.from(i),l=t.concat([u("uint256",i.length),i]),i.length%32!==0&&(l=t.concat([l,s.zeros(32-i.length%32)])),l;if(e.startsWith("bytes")){if((a=n(e))<1||a>32)throw new Error("Invalid bytes<N> width: "+a);return s.setLengthRight(i,32)}if(e.startsWith("uint")){if((a=n(e))%8||a<8||a>256)throw new Error("Invalid uint<N> width: "+a);if((o=h(i)).bitLength()>a)throw new Error("Supplied uint exceeds width: "+a+" vs "+o.bitLength());if(o<0)throw new Error("Supplied uint is negative");return o.toArrayLike(t,"be",32)}if(e.startsWith("int")){if((a=n(e))%8||a<8||a>256)throw new Error("Invalid int<N> width: "+a);if((o=h(i)).bitLength()>a)throw new Error("Supplied int exceeds width: "+a+" vs "+o.bitLength());return o.toTwos(256).toArrayLike(t,"be",32)}if(e.startsWith("ufixed")){if(a=d(e),(o=h(i))<0)throw new Error("Supplied ufixed is negative");return u("uint256",o.mul(new r(2).pow(new r(a[1]))))}if(e.startsWith("fixed"))return a=d(e),u("int256",h(i).mul(new r(2).pow(new r(a[1]))));throw new Error("Unsupported or invalid type: "+e)}function f(e,i,s){var a,o,n,d;if("string"===typeof e&&(e=p(e)),"address"===e.name)return f(e.rawType,i,s).toArrayLike(t,"be",20).toString("hex");if("bool"===e.name)return f(e.rawType,i,s).toString()===new r(1).toString();if("string"===e.name){var c=f(e.rawType,i,s);return t.from(c,"utf8").toString()}if(e.isArray){for(n=[],a=e.size,"dynamic"===e.size&&(s=f("uint256",i,s).toNumber(),a=f("uint256",i,s).toNumber(),s+=32),d=0;d<a;d++){var h=f(e.subArray,i,s);n.push(h),s+=e.subArray.memoryUsage}return n}if("bytes"===e.name)return s=f("uint256",i,s).toNumber(),a=f("uint256",i,s).toNumber(),i.slice(s+32,s+32+a);if(e.name.startsWith("bytes"))return i.slice(s,s+e.size);if(e.name.startsWith("uint")){if((o=new r(i.slice(s,s+32),16,"be")).bitLength()>e.size)throw new Error("Decoded int exceeds width: "+e.size+" vs "+o.bitLength());return o}if(e.name.startsWith("int")){if((o=new r(i.slice(s,s+32),16,"be").fromTwos(256)).bitLength()>e.size)throw new Error("Decoded uint exceeds width: "+e.size+" vs "+o.bitLength());return o}if(e.name.startsWith("ufixed")){if(a=new r(2).pow(new r(e.size[1])),!(o=f("uint256",i,s)).mod(a).isZero())throw new Error("Decimals not supported yet");return o.div(a)}if(e.name.startsWith("fixed")){if(a=new r(2).pow(new r(e.size[1])),!(o=f("int256",i,s)).mod(a).isZero())throw new Error("Decimals not supported yet");return o.div(a)}throw new Error("Unsupported or invalid type: "+e.name)}function p(e){var t,i,s;if(y(e)){t=c(e);var r=e.slice(0,e.lastIndexOf("["));return r=p(r),i={isArray:!0,name:e,size:t,memoryUsage:"dynamic"===t?32:r.memoryUsage*t,subArray:r}}switch(e){case"address":s="uint160";break;case"bool":s="uint8";break;case"string":s="bytes"}if(i={rawType:s,name:e,memoryUsage:32},e.startsWith("bytes")&&"bytes"!==e||e.startsWith("uint")||e.startsWith("int")?i.size=n(e):(e.startsWith("ufixed")||e.startsWith("fixed"))&&(i.size=d(e)),e.startsWith("bytes")&&"bytes"!==e&&(i.size<1||i.size>32))throw new Error("Invalid bytes<N> width: "+i.size);if((e.startsWith("uint")||e.startsWith("int"))&&(i.size%8||i.size<8||i.size>256))throw new Error("Invalid int/uint<N> width: "+i.size);return i}function m(e){return"string"===e||"bytes"===e||"dynamic"===c(e)}function y(e){return e.lastIndexOf("]")===e.length-1}function b(e,t){return e.startsWith("address")||e.startsWith("bytes")?"0x"+t.toString("hex"):t.toString()}a.eventID=function(e,i){var r=e+"("+i.map(o).join(",")+")";return s.keccak256(t.from(r))},a.methodID=function(e,t){return a.eventID(e,t).slice(0,4)},a.rawEncode=function(e,i){var s=[],r=[],a=0;e.forEach((function(e){if(y(e)){var t=c(e);a+="dynamic"!==t?32*t:32}else a+=32}));for(var n=0;n<e.length;n++){var d=o(e[n]),h=u(d,i[n]);m(d)?(s.push(u("uint256",a)),r.push(h),a+=h.length):s.push(h)}return t.concat(s.concat(r))},a.rawDecode=function(e,i){var s=[];i=t.from(i);for(var r=0,a=0;a<e.length;a++){var n=p(o(e[a])),d=f(n,i,r);r+=n.memoryUsage,s.push(d)}return s},a.simpleEncode=function(e){var i=Array.prototype.slice.call(arguments).slice(1),s=l(e);if(i.length!==s.args.length)throw new Error("Argument count mismatch");return t.concat([a.methodID(s.method,s.args),a.rawEncode(s.args,i)])},a.simpleDecode=function(e,t){var i=l(e);if(!i.retargs)throw new Error("No return values in method");return a.rawDecode(i.retargs,t)},a.stringify=function(e,t){var i=[];for(var s in e){var r=e[s],a=t[s];a=/^[^\[]+\[.*\]$/.test(r)?a.map((function(e){return b(r,e)})).join(", "):b(r,a),i.push(a)}return i},a.solidityHexValue=function(e,i,r){var o,d;if(y(e)){var l=e.replace(/\[.*?\]/,"");if(!y(l)){var u=c(e);if("dynamic"!==u&&0!==u&&i.length>u)throw new Error("Elements exceed array size: "+u)}var f=i.map((function(e){return a.solidityHexValue(l,e,256)}));return t.concat(f)}if("bytes"===e)return i;if("string"===e)return t.from(i,"utf8");if("bool"===e){r=r||8;var p=Array(r/4).join("0");return t.from(i?p+"1":p+"0","hex")}if("address"===e){var m=20;return r&&(m=r/8),s.setLengthLeft(i,m)}if(e.startsWith("bytes")){if((o=n(e))<1||o>32)throw new Error("Invalid bytes<N> width: "+o);return s.setLengthRight(i,o)}if(e.startsWith("uint")){if((o=n(e))%8||o<8||o>256)throw new Error("Invalid uint<N> width: "+o);if((d=h(i)).bitLength()>o)throw new Error("Supplied uint exceeds width: "+o+" vs "+d.bitLength());return r=r||o,d.toArrayLike(t,"be",r/8)}if(e.startsWith("int")){if((o=n(e))%8||o<8||o>256)throw new Error("Invalid int<N> width: "+o);if((d=h(i)).bitLength()>o)throw new Error("Supplied int exceeds width: "+o+" vs "+d.bitLength());return r=r||o,d.toTwos(o).toArrayLike(t,"be",r/8)}throw new Error("Unsupported or invalid type: "+e)},a.solidityPack=function(e,i){if(e.length!==i.length)throw new Error("Number of types are not matching the values");for(var s=[],r=0;r<e.length;r++){var n=o(e[r]),d=i[r];s.push(a.solidityHexValue(n,d,null))}return t.concat(s)},a.soliditySHA3=function(e,t){return s.keccak256(a.solidityPack(e,t))},a.soliditySHA256=function(e,t){return s.sha256(a.solidityPack(e,t))},a.solidityRIPEMD160=function(e,t){return s.ripemd160(a.solidityPack(e,t),!0)},a.fromSerpent=function(e){for(var t,i=[],s=0;s<e.length;s++){var r=e[s];if("s"===r)i.push("bytes");else if("b"===r){for(var a="bytes",o=s+1;o<e.length&&((t=e[o])>="0"&&t<="9");)a+=e[o]-"0",o++;s=o-1,i.push(a)}else if("i"===r)i.push("int256");else{if("a"!==r)throw new Error("Unsupported or invalid type: "+r);i.push("int256[]")}}return i},a.toSerpent=function(e){for(var t=[],i=0;i<e.length;i++){var s=e[i];if("bytes"===s)t.push("s");else if(s.startsWith("bytes"))t.push("b"+n(s));else if("int256"===s)t.push("i");else{if("int256[]"!==s)throw new Error("Unsupported or invalid type: "+s);t.push("a")}}return t.join("")},e.exports=a}).call(this,i("zkTx").Buffer)},"zl+m":function(e,t,i){"use strict";const s=i("OjXq"),{TICK_SIZE:r}=i("rwG2"),{AuthenticationError:a,ExchangeError:o,ArgumentsRequired:n,PermissionDenied:d,InvalidOrder:c,OrderNotFound:h,DDoSProtection:l,NotSupported:u,ExchangeNotAvailable:f,InsufficientFunds:p,BadRequest:m,InvalidAddress:y,OnMaintenance:b}=i("ucJe");e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"deribit",name:"Deribit",countries:["NL"],version:"v2",userAgent:void 0,rateLimit:500,has:{CORS:!0,editOrder:!0,fetchBalance:!0,fetchOrder:!0,fetchOrders:!1,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchTickers:!0,fetchOHLCV:!0,fetchDepositAddress:!0,createDepositAddress:!0,fetchOrderTrades:!0,createOrder:!0,cancelOrder:!0,cancelAllOrders:!0,withdraw:!0,fetchTime:!0,fetchStatus:!0,fetchDeposits:!0,fetchWithdrawals:!0,fetchTransactions:!1},timeframes:{"1m":"1","3m":"3","5m":"5","10m":"10","15m":"15","30m":"30","1h":"60","2h":"120","3h":"180","6h":"360","12h":"720","1d":"1D"},urls:{test:"https://test.deribit.com",logo:"https://user-images.githubusercontent.com/1294454/41933112-9e2dd65a-798b-11e8-8440-5bab2959fcb8.jpg",api:"https://www.deribit.com",www:"https://www.deribit.com",doc:["https://docs.deribit.com/v2","https://github.com/deribit"],fees:"https://www.deribit.com/pages/information/fees",referral:"https://www.deribit.com/reg-1189.4038"},api:{public:{get:["auth","exchange_token","fork_token","set_heartbeat","disable_heartbeat","get_time","hello","test","subscribe","unsubscribe","get_announcements","get_book_summary_by_currency","get_book_summary_by_instrument","get_contract_size","get_currencies","get_funding_chart_data","get_funding_rate_history","get_funding_rate_value","get_historical_volatility","get_index","get_instruments","get_last_settlements_by_currency","get_last_settlements_by_instrument","get_last_trades_by_currency","get_last_trades_by_currency_and_time","get_last_trades_by_instrument","get_last_trades_by_instrument_and_time","get_order_book","get_trade_volumes","get_tradingview_chart_data","ticker"]},private:{get:["logout","enable_cancel_on_disconnect","disable_cancel_on_disconnect","get_cancel_on_disconnect","subscribe","unsubscribe","change_api_key_name","change_scope_in_api_key","change_subaccount_name","create_api_key","create_subaccount","disable_api_key","disable_tfa_for_subaccount","enable_api_key","get_account_summary","get_email_language","get_new_announcements","get_position","get_positions","get_subaccounts","list_api_keys","remove_api_key","reset_api_key","set_announcement_as_read","set_api_key_as_default","set_email_for_subaccount","set_email_language","set_password_for_subaccount","toggle_notifications_from_subaccount","toggle_subaccount_login","execute_block_trade","get_block_trade","get_last_block_trades_by_currency","invalidate_block_trade_signature","verify_block_trade","buy","sell","edit","cancel","cancel_all","cancel_all_by_currency","cancel_all_by_instrument","cancel_by_label","close_position","get_margins","get_open_orders_by_currency","get_open_orders_by_instrument","get_order_history_by_currency","get_order_history_by_instrument","get_order_margin_by_ids","get_order_state","get_stop_order_history","get_user_trades_by_currency","get_user_trades_by_currency_and_time","get_user_trades_by_instrument","get_user_trades_by_instrument_and_time","get_user_trades_by_order","get_settlement_history_by_instrument","get_settlement_history_by_currency","cancel_transfer_by_id","cancel_withdrawal","create_deposit_address","get_current_deposit_address","get_deposits","get_transfers","get_withdrawals","submit_transfer_to_subaccount","submit_transfer_to_user","withdraw"]}},exceptions:{9999:d,1e4:a,10001:o,10002:c,10003:c,10004:h,10005:c,10006:c,10007:c,10008:c,10009:p,10010:h,10011:c,10012:c,10013:d,10014:d,10015:d,10016:d,10017:d,10018:d,10019:d,10020:o,10021:c,10022:c,10023:c,10024:c,10025:c,10026:c,10027:c,10028:l,10029:h,10030:o,10031:o,10032:c,10033:u,10034:c,10035:c,10036:c,10040:f,10041:b,10043:c,10044:c,10045:c,10046:c,10047:l,10048:o,11008:c,11029:m,11030:o,11031:o,11035:l,11036:c,11037:m,11038:c,11039:c,11041:c,11042:d,11043:m,11044:c,11045:m,11046:m,11047:m,11048:o,11049:m,11050:m,11051:b,11052:o,11053:o,11090:y,11091:y,11092:y,11093:l,11094:o,11095:o,11096:o,12e3:a,12001:l,12002:o,12998:a,12003:a,12004:a,12005:a,12100:o,12999:a,13e3:a,13001:a,13002:d,13003:a,13004:a,13005:a,13006:a,13007:a,13008:o,13009:a,13010:m,13011:m,13012:d,13013:m,13014:m,13015:m,13016:m,13017:o,13018:o,13019:o,13020:o,13021:d,13025:o,"-32602":m,"-32601":m,"-32700":m,"-32000":m},precisionMode:r,options:{code:"BTC",fetchBalance:{code:"BTC"}}})}async fetchTime(e={}){const t=await this.publicGetGetTime(e);return this.safeInteger(t,"result")}async fetchStatus(e={}){return await this.publicGetTest(this.extend({},e)),this.status=this.extend(this.status,{status:"ok",updated:this.milliseconds()}),this.status}async fetchMarkets(e={}){const t=await this.publicGetGetCurrencies(e),i=this.safeValue(t,"result",[]),s=[];for(let r=0;r<i.length;r++){const t={currency:this.safeString(i[r],"currency")},a=await this.publicGetGetInstruments(this.extend(t,e)),o=this.safeValue(a,"result",[]);for(let e=0;e<o.length;e++){const t=o[e],i=this.safeString(t,"instrument_name"),r=this.safeString(t,"base_currency"),a=this.safeString(t,"quote_currency"),n=this.safeCurrencyCode(r),d=this.safeCurrencyCode(a),c=this.safeString(t,"kind"),h="future"===c,l="option"===c,u=this.safeValue(t,"is_active"),f=this.safeFloat(t,"min_trade_amount"),p=this.safeFloat(t,"tick_size"),m={amount:f,price:p};s.push({id:i,symbol:i,base:n,quote:d,active:u,precision:m,taker:this.safeFloat(t,"taker_commission"),maker:this.safeFloat(t,"maker_commission"),limits:{amount:{min:f,max:void 0},price:{min:p,max:void 0},cost:{min:void 0,max:void 0}},type:c,spot:!1,future:h,option:l,info:t})}}return s}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeValue(this.options,"code","BTC"),i=this.safeValue(this.options,"fetchBalance",{}),s=this.safeValue(i,"code",t),r={currency:this.currency(s).id},a=await this.privateGetGetAccountSummary(this.extend(r,e)),o={info:a},n=this.safeValue(a,"result",{}),d=this.account();return d.free=this.safeFloat(n,"availableFunds"),d.used=this.safeFloat(n,"maintenanceMargin"),d.total=this.safeFloat(n,"equity"),o[s]=d,this.parseBalance(o)}async createDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privateGetCreateDepositAddress(this.extend(i,t)),r=this.safeValue(s,"result",{}),a=this.safeString(r,"address");return this.checkAddress(a),{currency:e,address:a,tag:void 0,info:s}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privateGetGetCurrentDepositAddress(this.extend(i,t)),r=this.safeValue(s,"result",{}),a=this.safeString(r,"address");return this.checkAddress(a),{currency:e,address:a,tag:void 0,info:s}}parseTicker(e,t){const i=this.safeInteger2(e,"timestamp","creation_timestamp"),s=this.safeString(e,"instrument_name");let r=s;s in this.markets_by_id&&(t=this.markets_by_id[s]),void 0===r&&void 0!==t&&(r=t.symbol);const a=this.safeFloat2(e,"last_price","last"),o=this.safeValue(e,"stats",e);return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat2(o,"high","max_price"),low:this.safeFloat2(o,"low","min_price"),bid:this.safeFloat2(e,"best_bid_price","bid_price"),bidVolume:this.safeFloat(e,"best_bid_amount"),ask:this.safeFloat2(e,"best_ask_price","ask_price"),askVolume:this.safeFloat(e,"best_ask_amount"),vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(o,"volume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={instrument_name:i.id},r=await this.publicGetTicker(this.extend(s,t)),a=this.safeValue(r,"result");return this.parseTicker(a,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=this.safeValue(this.options,"code","BTC"),s=this.safeValue(this.options,"fetchTickers",{}),r=this.safeValue(s,"code",i),a={currency:this.currency(r).id},o=await this.publicGetGetBookSummaryByCurrency(this.extend(a,t)),n=this.safeValue(o,"result",[]),d={};for(let c=0;c<n.length;c++){const e=this.parseTicker(n[c]);d[e.symbol]=e}return this.filterByArray(d,"symbol",e)}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={instrument_name:a.id,resolution:this.timeframes[t]},d=this.parseTimeframe(t),c=this.milliseconds();if(void 0===i){if(void 0===s)throw new n(this.id+" fetchOHLCV requires a since argument or a limit argument");o.start_timestamp=c-(s-1)*d*1e3,o.end_timestamp=c}else o.start_timestamp=i,o.end_timestamp=void 0===s?c:this.sum(i,s*d*1e3);const h=await this.publicGetGetTradingviewChartData(this.extend(o,r)),l=this.safeValue(h,"result",{}),u=this.convertTradingViewToOHLCV(l,"ticks","open","high","low","close","volume",!0);return this.parseOHLCVs(u,a,t,i,s)}parseTrade(e,t){const i=this.safeString(e,"trade_id");let s=void 0;const r=this.safeString(e,"instrument_name");r in this.markets_by_id&&(s=(t=this.markets_by_id[r]).symbol),void 0===s&&void 0!==t&&(s=t.symbol);const a=this.safeInteger(e,"timestamp"),o=this.safeString(e,"direction"),n=this.safeFloat(e,"price"),d=this.safeFloat(e,"amount");let c=void 0;void 0!==d&&void 0!==n&&(c=d*n);const h=this.safeString(e,"liquidity");let l=void 0;void 0!==h&&(l="M"===h?"maker":"taker");const u=this.safeFloat(e,"feeCost");let f=void 0;if(void 0!==u){const t=this.safeString(e,"fee_currency");f={cost:u,currency:this.safeCurrencyCode(t)}}return{id:i,info:e,timestamp:a,datetime:this.iso8601(a),symbol:s,order:this.safeString(e,"order_id"),type:this.safeString(e,"order_type"),side:o,takerOrMaker:l,price:n,amount:d,cost:c,fee:f}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={instrument_name:r.id,include_old:!0},o=void 0===t?"publicGetGetLastTradesByInstrument":"publicGetGetLastTradesByInstrumentAndTime";void 0!==t&&(a.start_timestamp=t),void 0!==i&&(a.count=i);const n=await this[o](this.extend(a,s)),d=this.safeValue(n,"result",{}),c=this.safeValue(d,"trades",[]);return this.parseTrades(c,r,t,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={instrument_name:this.market(e).id};void 0!==t&&(s.depth=t);const r=await this.publicGetGetOrderBook(this.extend(s,i)),a=this.safeValue(r,"result",{}),o=this.safeInteger(a,"timestamp"),n=this.safeInteger(a,"change_id"),d=this.parseOrderBook(a,o);return d.nonce=n,d}parseOrderStatus(e){return this.safeString({open:"open",cancelled:"canceled",filled:"closed",rejected:"rejected"},e,e)}parseOrder(e,t){const i=this.safeInteger(e,"creation_timestamp"),s=this.safeInteger(e,"last_update_timestamp"),r=this.safeString(e,"order_id"),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"average_price"),n=this.safeFloat(e,"amount"),d=this.safeFloat(e,"filled_amount");let c=void 0;void 0!==d&&d>0&&(c=s);let h=void 0,l=void 0;void 0!==d&&(void 0!==n&&(h=n-d),void 0!==a&&(l=a*d));const u=this.parseOrderStatus(this.safeString(e,"order_state")),f=this.safeString(e,"instrument_name");let p=void 0,m=void 0;f in this.markets_by_id&&(p=(t=this.markets_by_id[f]).symbol,m=t.base),void 0!==t&&(void 0===p&&(p=t.symbol),void 0===m&&(m=t.base));const y=this.safeStringLower(e,"direction");let b=this.safeFloat(e,"commission"),v=void 0;void 0!==b&&(b=Math.abs(b),v={cost:b,currency:m});const g=this.safeString(e,"order_type");let w=this.safeValue(e,"trades");return void 0!==w&&(w=this.parseTrades(w,t)),{info:e,id:r,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:c,symbol:p,type:g,side:y,price:a,amount:n,cost:l,average:o,filled:d,remaining:h,status:u,fee:v,trades:w}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},r=await this.privateGetGetOrderState(this.extend(s,i)),a=this.safeValue(r,"result");return this.parseOrder(a)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),d={instrument_name:o.id,amount:this.amountToPrecision(e,s),type:t};let c=!1,h=!1;if("limit"===t?c=!0:"stop_limit"===t&&(c=!0,h=!0),c){if(void 0===r)throw new n(this.id+" createOrder requires a price argument for a "+t+" order");d.price=this.priceToPrecision(e,r)}if(h){const i=this.safeFloat2(a,"stop_price","stopPrice");if(void 0===i)throw new n(this.id+" createOrder requires a stop_price or stopPrice param for a "+t+" order");d.stop_price=this.priceToPrecision(e,i)}const l="privateGet"+this.capitalize(i),u=await this[l](this.extend(d,a)),f=this.safeValue(u,"result",{}),p=this.safeValue(f,"order"),m=this.safeValue(f,"trades",[]);return p.trades=m,this.parseOrder(p,o)}async editOrder(e,t,i,s,r,a,o={}){if(void 0===r)throw new n(this.id+" editOrder requires an amount argument");if(void 0===a)throw new n(this.id+" editOrder requires a price argument");await this.loadMarkets();const d={order_id:e,amount:this.amountToPrecision(t,r),price:this.priceToPrecision(t,a)},c=await this.privateGetEdit(this.extend(d,o)),h=this.safeValue(c,"result",{}),l=this.safeValue(h,"order"),u=this.safeValue(h,"trades",[]);return l.trades=u,this.parseOrder(l)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},r=await this.privateGetCancel(this.extend(s,i)),a=this.safeValue(r,"result",{});return this.parseOrder(a)}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let s=void 0;if(void 0===e)s="privateGetCancelAll";else{s="privateGetCancelAllByInstrument";const t=this.market(e);i.instrument_name=t.id}return await this[s](this.extend(i,t))}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0,o=void 0;if(void 0===e){const e=this.safeValue(this.options,"code","BTC"),t=this.safeValue(this.options,"fetchOpenOrders",{}),i=this.safeValue(t,"code",e),s=this.currency(i);r.currency=s.id,o="privateGetGetOpenOrdersByCurrency"}else a=this.market(e),r.instrument_name=a.id,o="privateGetGetOpenOrdersByInstrument";const n=await this[o](this.extend(r,s)),d=this.safeValue(n,"result",[]);return this.parseOrders(d,a,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0,o=void 0;if(void 0===e){const e=this.safeValue(this.options,"code","BTC"),t=this.safeValue(this.options,"fetchClosedOrders",{}),i=this.safeValue(t,"code",e),s=this.currency(i);r.currency=s.id,o="privateGetGetOrderHistoryByCurrency"}else a=this.market(e),r.instrument_name=a.id,o="privateGetGetOrderHistoryByInstrument";const n=await this[o](this.extend(r,s)),d=this.safeValue(n,"result",[]);return this.parseOrders(d,a,t,i)}async fetchOrderTrades(e,t,i,s,r={}){await this.loadMarkets();const a={order_id:e},o=await this.privateGetGetUserTradesByOrder(this.extend(a,r)),n=this.safeValue(o,"result",{}),d=this.safeValue(n,"trades",[]);return this.parseTrades(d,void 0,i,s)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={include_old:!0};let a=void 0,o=void 0;if(void 0===e){const e=this.safeValue(this.options,"code","BTC"),i=this.safeValue(this.options,"fetchMyTrades",{}),s=this.safeValue(i,"code",e),a=this.currency(s);r.currency=a.id,void 0===t?o="privateGetGetUserTradesByCurrency":(o="privateGetGetUserTradesByCurrencyAndTime",r.start_timestamp=t)}else a=this.market(e),r.instrument_name=a.id,void 0===t?o="privateGetGetUserTradesByInstrument":(o="privateGetGetUserTradesByInstrumentAndTime",r.start_timestamp=t);void 0!==i&&(r.count=i);const n=await this[o](this.extend(r,s)),d=this.safeValue(n,"result",{}),c=this.safeValue(d,"trades",[]);return this.parseTrades(c,a,t,i)}async fetchDeposits(e,t,i,s={}){if(void 0===e)throw new n(this.id+" fetchWithdrawals() requires a currency code argument");await this.loadMarkets();const r=this.currency(e),a={currency:r.id};void 0!==i&&(a.count=i);const o=await this.privateGetGetDeposits(this.extend(a,s)),d=this.safeValue(o,"result",{}),c=this.safeValue(d,"data",[]);return this.parseTransactions(c,r,t,i,s)}async fetchWithdrawals(e,t,i,s={}){if(void 0===e)throw new n(this.id+" fetchWithdrawals() requires a currency code argument");await this.loadMarkets();const r=this.currency(e),a={currency:r.id};void 0!==i&&(a.count=i);const o=await this.privateGetGetWithdrawals(this.extend(a,s)),d=this.safeValue(o,"result",{}),c=this.safeValue(d,"data",[]);return this.parseTransactions(c,r,t,i,s)}parseTransactionStatus(e){return this.safeString({completed:"ok",unconfirmed:"pending"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"currency"),s=this.safeCurrencyCode(i,t),r=this.safeInteger(e,"created_timestamp","received_timestamp"),a=this.safeInteger(e,"updated_timestamp"),o=this.parseTransactionStatus(this.safeString(e,"state")),n=this.safeString(e,"address"),d=this.safeFloat(e,"fee");let c="deposit",h=void 0;return void 0!==d&&(c="withdrawal",h={cost:d,currency:s}),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"transaction_id"),timestamp:r,datetime:this.iso8601(r),address:n,addressTo:n,addressFrom:void 0,tag:void 0,tagTo:void 0,tagFrom:void 0,type:c,amount:this.safeFloat(e,"amount"),currency:s,status:o,updated:a,fee:h}}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a={currency:this.currency(e).id,address:i,amount:t};void 0!==this.twofa&&(a.tfa=this.oath());const o=await this.privateGetWithdraw(this.extend(a,r));return{info:o,id:this.safeString(o,"id")}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="/api/"+this.version+"/"+t+"/"+e;if("public"===t&&Object.keys(s).length&&(o+="?"+this.urlencode(s)),"private"===t){this.checkRequiredCredentials();const e=this.nonce().toString(),t=this.milliseconds().toString(),a="";Object.keys(s).length&&(o+="?"+this.urlencode(s));const n=t+"\n"+e+"\n"+(i+"\n"+o+"\n"+a+"\n"),d=this.hmac(this.encode(n),this.encode(this.secret),"sha256");r={Authorization:"deri-hmac-sha256 id="+this.apiKey+",ts="+t+",sig="+d+",nonce="+e}}return{url:this.urls.api+o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,n,d,c){if(!n)return;const h=this.safeValue(n,"error");if(void 0!==h){const e=this.safeString(h,"code"),t=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,e,t),new o(t)}}}}}]);